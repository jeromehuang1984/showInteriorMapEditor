{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/element/input/src/checkNumber.js","webpack:///./src/App.vue?9b05","webpack:///./src/3d/js/lib/TrackballControls.js","webpack:///./src/3d/js/lib/TransformControls2D.js","webpack:///./src/3d/js/lib/bool-polygons-util.js","webpack:///./src/3d/js/tool/PolygonTool.js","webpack:///./src/3d/js/tool/NavPathTool.js","webpack:///./src/3d/js/tool/CoordCorrelateTool.js","webpack:///./src/3d/js/lib_external/TransformControls.js","webpack:///./src/3d/js/tool/LightTool.js","webpack:///./src/3d/js/tool/MeasureTool.js","webpack:///./src/3d/js/tool/MarkerTool.js","webpack:///./src/3d/js/lib/SelectionBox.js","webpack:///./src/3d/js/lib/SelectionHelper.js","webpack:///./src/3d/js/MainScene.js","webpack:///./src/components/content/MainTopBar.vue?e0b9","webpack:///./src/components/content/guide/GuideBox.vue?59d7","webpack:///./src/components/common/SquareButton.vue?351c","webpack:///./src/3d/js/model/PathEdge.js","webpack:///./src/3d/Main.vue?a84e","webpack:///./src/3d/js/model/PathPoint.js","webpack:///./src/components/element/collapse/collapse-item.vue?9152","webpack:///./src/components/common/ImgButton.vue?e33d","webpack:///./src/components/element/input/src/input.vue?5260","webpack:///./src/components/element/dropdown/src/dropdown-item.vue?ea36","webpack:///./src/3d/js/lib_external/Earcut.js","webpack:///./src/external_lib/vtip/index.com.js","webpack:///./src/App.vue?a7d1","webpack:///./src/assets/img/gadget/compass3.svg","webpack:///./src/components/common/TopBar.vue?c44b","webpack:///./src/components/common/tabBar/TabBar.vue?07be","webpack:///./src/3d/js/lib/TriangleCut.js","webpack:///./src/App.vue","webpack:///./src/3d/js/instance/TextMark.js","webpack:///./src/3d/js/tool/NavigatorTool.js","webpack:///./src/components/content/tablayer/LayerItem.vue?ed35","webpack:///./src/store/mutations-types.js","webpack:///./src/assets/img/tooltip/guide_unshow.png","webpack:///./src/components/content/tablayer/BoxLayers.vue?c94e","webpack:///./src/views/Home.vue?2284","webpack:///./src/components/content/MainTopBar.vue?ed31","webpack:///./src/components/element/input/src/input.vue?7820","webpack:///./src/components/element/mixins/emitter.js","webpack:///./src/components/element/utils/types.js","webpack:///./src/components/element/utils/util.js","webpack:///./src/components/element/mixins/migrating.js","webpack:///./src/components/element/input/src/calcTextareaHeight.js","webpack:///./src/components/element/utils/merge.js","webpack:///./src/components/element/utils/shared.js","webpack:///src/components/element/input/src/input.vue","webpack:///./src/components/element/input/src/input.vue?6b9e","webpack:///./src/components/element/input/src/input.vue","webpack:///./src/components/element/input/index.js","webpack:///./src/components/element/utils/clickoutside.js","webpack:///./src/components/element/button/src/button.vue?be56","webpack:///src/components/element/button/src/button.vue","webpack:///./src/components/element/button/src/button.vue?66e0","webpack:///./src/components/element/button/src/button.vue","webpack:///./src/components/element/button/index.js","webpack:///./src/components/element/button/src/button-group.vue?9124","webpack:///src/components/element/button/src/button-group.vue","webpack:///./src/components/element/button/src/button-group.vue?1751","webpack:///./src/components/element/button/src/button-group.vue","webpack:///./src/components/element/button-group/index.js","webpack:///./src/components/element/dropdown/src/dropdown.vue","webpack:///src/components/element/dropdown/src/dropdown.vue","webpack:///./src/components/element/dropdown/src/dropdown.vue?abd7","webpack:///./src/components/element/dropdown/index.js","webpack:///./src/components/element/utils/popup/popup-manager.js","webpack:///./src/components/element/dropdown/src/dropdown-menu.vue?f971","webpack:///./src/components/element/utils/scrollbar-width.js","webpack:///./src/components/element/utils/popup/index.js","webpack:///./src/components/element/tag/src/tag.vue","webpack:///./src/components/element/utils/vue-popper.js","webpack:///src/components/element/dropdown/src/dropdown-menu.vue","webpack:///./src/components/element/dropdown/src/dropdown-menu.vue?833d","webpack:///./src/components/element/dropdown/src/dropdown-menu.vue","webpack:///./src/components/element/dropdown/src/dropdown-item.vue?68ab","webpack:///src/components/element/dropdown/src/dropdown-item.vue","webpack:///./src/components/element/dropdown/src/dropdown-item.vue?2642","webpack:///./src/components/element/dropdown/src/dropdown-item.vue","webpack:///./src/components/element/select/src/select.vue?38f5","webpack:///./src/components/element/mixins/focus.js","webpack:///./src/components/element/locale/lang/zh-CN.js","webpack:///./src/components/element/locale/format.js","webpack:///./src/components/element/locale/index.js","webpack:///./src/components/element/mixins/locale.js","webpack:///./src/components/element/select/src/select-dropdown.vue?ad14","webpack:///src/components/element/select/src/select-dropdown.vue","webpack:///./src/components/element/select/src/select-dropdown.vue?cfbe","webpack:///./src/components/element/select/src/select-dropdown.vue","webpack:///./src/components/element/select/src/option.vue?1015","webpack:///src/components/element/select/src/option.vue","webpack:///./src/components/element/select/src/option.vue?ca66","webpack:///./src/components/element/select/src/option.vue","webpack:///src/components/element/tag/src/tag.vue","webpack:///./src/components/element/tag/src/tag.vue?e531","webpack:///./src/components/element/tag/index.js","webpack:///./src/components/element/utils/resize-event.js","webpack:///./src/components/element/scrollbar/src/util.js","webpack:///./src/components/element/scrollbar/src/bar.js","webpack:///./src/components/element/scrollbar/src/main.js","webpack:///./src/components/element/scrollbar/index.js","webpack:///./src/components/element/utils/scroll-into-view.js","webpack:///./src/components/element/select/src/navigation-mixin.js","webpack:///src/components/element/select/src/select.vue","webpack:///./src/components/element/select/src/select.vue?c029","webpack:///./src/components/element/select/src/select.vue","webpack:///./src/components/element/select/index.js","webpack:///./src/components/common/TopBar.vue?4d6d","webpack:///src/components/common/TopBar.vue","webpack:///./src/components/common/TopBar.vue?089e","webpack:///./src/components/common/TopBar.vue","webpack:///./src/components/common/ImgButton.vue?1888","webpack:///src/components/common/ImgButton.vue","webpack:///./src/components/common/ImgButton.vue?ba2a","webpack:///./src/components/common/ImgButton.vue","webpack:///./src/components/common/PageTitle.vue?a3c3","webpack:///src/components/common/PageTitle.vue","webpack:///./src/components/common/PageTitle.vue?7d46","webpack:///./src/components/common/PageTitle.vue","webpack:///./src/components/element/notification/src/main.vue?fc7b","webpack:///src/components/element/notification/src/main.vue","webpack:///./src/components/element/notification/src/main.vue?79f5","webpack:///./src/components/element/notification/src/main.vue","webpack:///./src/components/element/utils/vdom.js","webpack:///./src/components/element/notification/src/main.js","webpack:///./src/components/element/notification/index.js","webpack:///./src/3d/js/lib_external/CompressTool.js","webpack:///src/components/content/MainTopBar.vue","webpack:///./src/external_lib/jscolor.js","webpack:///./src/components/content/MainTopBar.vue?9acf","webpack:///./src/components/content/MainTopBar.vue","webpack:///./src/components/common/TabView.vue?55c1","webpack:///src/components/common/TabView.vue","webpack:///./src/components/common/TabView.vue?33d2","webpack:///./src/components/common/TabView.vue","webpack:///./src/components/content/MainTabBar.vue?49d1","webpack:///./src/components/common/tabBar/TabBar.vue?63a6","webpack:///src/components/common/tabBar/TabBar.vue","webpack:///./src/components/common/tabBar/TabBar.vue?e3ab","webpack:///./src/components/common/tabBar/TabBar.vue","webpack:///./src/components/common/tabBar/TabBarItem.vue?bea8","webpack:///src/components/common/tabBar/TabBarItem.vue","webpack:///./src/components/common/tabBar/TabBarItem.vue?c7cf","webpack:///./src/components/common/tabBar/TabBarItem.vue","webpack:///src/components/content/MainTabBar.vue","webpack:///./src/components/content/MainTabBar.vue?8d31","webpack:///./src/components/content/MainTabBar.vue","webpack:///./src/components/content/MainTabBox.vue?222d","webpack:///./src/components/element/collapse/collapse.vue?662b","webpack:///src/components/element/collapse/collapse.vue","webpack:///./src/components/element/collapse/collapse.vue?6ca2","webpack:///./src/components/element/collapse/collapse.vue","webpack:///./src/components/element/collapse/collapse-item.vue?de17","webpack:///./src/components/element/transitions/collapse-transition.js","webpack:///src/components/element/collapse/collapse-item.vue","webpack:///./src/components/element/collapse/collapse-item.vue?3284","webpack:///./src/components/element/collapse/collapse-item.vue","webpack:///./src/components/content/tabdraw/BoxSelectedGraphics.vue?0dc5","webpack:///src/components/content/tabdraw/BoxSelectedGraphics.vue","webpack:///./src/components/content/tabdraw/BoxSelectedGraphics.vue?9852","webpack:///./src/components/content/tabdraw/BoxSelectedGraphics.vue","webpack:///./src/components/content/tabdraw/BoxDrawGraphic.vue?9f97","webpack:///./src/components/common/SquareButtonsGroup.vue?3fbd","webpack:///src/components/common/SquareButtonsGroup.vue","webpack:///./src/components/common/SquareButtonsGroup.vue?261b","webpack:///./src/components/common/SquareButtonsGroup.vue","webpack:///./src/components/common/SquareButton.vue?9953","webpack:///src/components/common/SquareButton.vue","webpack:///./src/components/common/SquareButton.vue?0799","webpack:///./src/components/common/SquareButton.vue","webpack:///src/components/content/tabdraw/BoxDrawGraphic.vue","webpack:///./src/components/content/tabdraw/BoxDrawGraphic.vue?f731","webpack:///./src/components/content/tabdraw/BoxDrawGraphic.vue","webpack:///./src/components/content/tabpath/BoxDrawPath.vue?feb7","webpack:///./src/3d/Main.vue?9172","webpack:///./src/3d/js/tool/Shortcuts.js","webpack:///src/3d/Main.vue","webpack:///./src/3d/Main.vue?a866","webpack:///./src/3d/Main.vue","webpack:///src/components/content/tabpath/BoxDrawPath.vue","webpack:///./src/components/content/tabpath/BoxDrawPath.vue?9221","webpack:///./src/components/content/tabpath/BoxDrawPath.vue","webpack:///./src/components/content/tabpath/BoxSelectedPaths.vue?7f07","webpack:///src/components/content/tabpath/BoxSelectedPaths.vue","webpack:///./src/components/content/tabpath/BoxSelectedPaths.vue?705b","webpack:///./src/components/content/tabpath/BoxSelectedPaths.vue","webpack:///./src/components/content/tablayer/BoxLayers.vue?b3ee","webpack:///./src/components/content/tablayer/LayerItem.vue?6e5f","webpack:///src/components/content/tablayer/LayerItem.vue","webpack:///./src/components/content/tablayer/LayerItem.vue?8f1a","webpack:///./src/components/content/tablayer/LayerItem.vue","webpack:///src/components/content/tablayer/BoxLayers.vue","webpack:///./src/components/content/tablayer/BoxLayers.vue?1be6","webpack:///./src/components/content/tablayer/BoxLayers.vue","webpack:///./src/components/content/tabsettings/BoxSettings.vue?0f75","webpack:///./src/components/element/switch/component.vue?006e","webpack:///src/components/element/switch/component.vue","webpack:///./src/components/element/switch/component.vue?4d87","webpack:///./src/components/element/switch/component.vue","webpack:///src/components/content/tabsettings/BoxSettings.vue","webpack:///./src/components/content/tabsettings/BoxSettings.vue?5cd7","webpack:///./src/components/content/tabsettings/BoxSettings.vue","webpack:///./src/components/content/tabsettings/BoxCoordBind.vue?e537","webpack:///src/components/content/tabsettings/BoxCoordBind.vue","webpack:///./src/components/content/tabsettings/BoxCoordBind.vue?e8ac","webpack:///./src/components/content/tabsettings/BoxCoordBind.vue","webpack:///./src/components/content/tabsettings/BoxRefLayerDivide.vue?bbf4","webpack:///./src/components/content/gadget/SimpleGrid.vue?b1a8","webpack:///src/components/content/gadget/SimpleGrid.vue","webpack:///./src/components/content/gadget/SimpleGrid.vue?1823","webpack:///./src/components/content/gadget/SimpleGrid.vue","webpack:///src/components/content/tabsettings/BoxRefLayerDivide.vue","webpack:///./src/components/content/tabsettings/BoxRefLayerDivide.vue?1a37","webpack:///./src/components/content/tabsettings/BoxRefLayerDivide.vue","webpack:///./src/components/content/tabsettings/BoxMisc.vue?49ae","webpack:///./src/store/EventBus.js","webpack:///src/components/content/tabsettings/BoxMisc.vue","webpack:///./src/components/content/tabsettings/BoxMisc.vue?6681","webpack:///./src/components/content/tabsettings/BoxMisc.vue","webpack:///./src/components/content/tablights/BoxLights.vue?803a","webpack:///./src/components/content/gadget/SimpleNumberInput.vue?d0f0","webpack:///src/components/content/gadget/SimpleNumberInput.vue","webpack:///./src/components/content/gadget/SimpleNumberInput.vue?1bda","webpack:///./src/components/content/gadget/SimpleNumberInput.vue","webpack:///./src/components/content/gadget/SimpleColorInput.vue?b7af","webpack:///src/components/content/gadget/SimpleColorInput.vue","webpack:///./src/components/content/gadget/SimpleColorInput.vue?a710","webpack:///./src/components/content/gadget/SimpleColorInput.vue","webpack:///./src/components/content/gadget/LightItems.vue?e7ea","webpack:///src/components/content/gadget/LightItems.vue","webpack:///./src/components/content/gadget/LightItems.vue?db24","webpack:///./src/components/content/gadget/LightItems.vue","webpack:///src/components/content/tablights/BoxLights.vue","webpack:///./src/components/content/tablights/BoxLights.vue?ac32","webpack:///./src/components/content/tablights/BoxLights.vue","webpack:///./src/components/content/tablights/BoxMaterials.vue?7f94","webpack:///src/components/content/tablights/BoxMaterials.vue","webpack:///./src/components/content/tablights/BoxMaterials.vue?fc58","webpack:///./src/components/content/tablights/BoxMaterials.vue","webpack:///src/components/content/MainTabBox.vue","webpack:///./src/components/content/MainTabBox.vue?3937","webpack:///./src/components/content/MainTabBox.vue","webpack:///./src/components/content/guide/GuideBox.vue?8e81","webpack:///src/components/content/guide/GuideBox.vue","webpack:///./src/components/content/guide/GuideBox.vue?3966","webpack:///./src/components/content/guide/GuideBox.vue","webpack:///./src/components/content/gadget/CompassItem.vue?52bb","webpack:///src/components/content/gadget/CompassItem.vue","webpack:///./src/components/content/gadget/CompassItem.vue?6ff4","webpack:///./src/components/content/gadget/CompassItem.vue","webpack:///./src/components/content/gadget/LocationResetItem.vue?3cea","webpack:///src/components/content/gadget/LocationResetItem.vue","webpack:///./src/components/content/gadget/LocationResetItem.vue?9534","webpack:///./src/components/content/gadget/LocationResetItem.vue","webpack:///./src/components/content/gadget/EditorToolbar.vue?ffab","webpack:///./src/external_lib/fullscreen.js","webpack:///src/components/content/gadget/EditorToolbar.vue","webpack:///./src/components/content/gadget/EditorToolbar.vue?e05c","webpack:///./src/components/content/gadget/EditorToolbar.vue","webpack:///./src/components/content/gadget/BiliText.vue?7901","webpack:///src/components/content/gadget/BiliText.vue","webpack:///./src/components/content/gadget/BiliText.vue?a39c","webpack:///./src/components/content/gadget/BiliText.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2b8c","webpack:///./src/views/Home.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/components/element/utils/popper.js","webpack:///./src/components/content/gadget/SimpleColorInput.vue?4db1","webpack:///./src/components/content/tablights/BoxLights.vue?3813","webpack:///./src/external_lib/util.js","webpack:///./src/components/content/MainTabBox.vue?8fdf","webpack:///./src/3d/js/util/Browser.js","webpack:///./src/3d/js/util/Common.js","webpack:///./src/components/content/gadget/EditorToolbar.vue?1db8","webpack:///./src/3d/js/undo/UndoTypes.js","webpack:///./src/3d/js/undo/Action.js","webpack:///./src/3d/js/undo/History.js","webpack:///./src/3d/js/lib_external/GeoCoord.js","webpack:///./src/3d/js/configurable/Config.js","webpack:///./src/components/content/gadget/SimpleNumberInput.vue?b7ff","webpack:///./src/components/content/tabsettings/BoxMisc.vue?e67d","webpack:///./src/components/content/gadget/BiliText.vue?4dc4","webpack:///./src/external_lib/vuex.esm.browser.min.js","webpack:///./src/components/element/collapse/collapse.vue?73aa","webpack:///./src/components/common/tabBar/TabBarItem.vue?2b2d","webpack:///./src/views/Home.vue?665b","webpack:///./src/App.vue?6e25","webpack:///./src/components/content/tabsettings/BoxSettings.vue?d3ec","webpack:///./src/components/common/TabView.vue?3f78","webpack:///./src/3d/js/util/Serialization.js","webpack:///./src/components/content/gadget/SimpleGrid.vue?541c","webpack:///./src/3d/js/instance/PathSegment.js","webpack:///./src/components/common/PageTitle.vue?6a38","webpack:///./src/3d/js/consts/Constants.js","webpack:///./src/components/content/MainTabBar.vue?60ce","webpack:///./src/3d/js/instance/PolygonMesh.js","webpack:///./src/components/content/gadget/LightItems.vue?8655","webpack:///./src/components/common/SquareButtonsGroup.vue?76f6","webpack:///./src/assets/img/tooltip/guide_show.png","webpack:///./src/3d/js/lib/Box2.js","webpack:///./src/components/element/utils/dom.js","webpack:///./src/3d/js/Layers.js","webpack:///./src/3d/js/instance/PathTrack.js","webpack:///./src/components/content/tabsettings/BoxRefLayerDivide.vue?e343","webpack:///./src/components/content/tabsettings/BoxCoordBind.vue?c250","webpack:///./src/3d/js/lib/Spherical2.js","webpack:///./src/3d/js/lib/MapControls.js","webpack:///./src/3d/js/instance/Polygon3d.js","webpack:///./src/3d/js/util/Polygon3dReader.js","webpack:///./src/3d/js/model/MapScalar.js","webpack:///./src/3d/js/lib/OrbitControls.js","webpack:///./src/3d/js/lib_external/kdbush.js","webpack:///./src/3d/js/PublishedScene.js","webpack:///./src/3d/js/lib_external/BufferGeometryUtils.js","webpack:///./src/3d/js/lib/Path3.js","webpack:///./src/3d/js/util/TextureStore.js","webpack:///./src/3d/js/lib/TextSprite.js","webpack:///./src/3d/js/lib_external/heatmap.js","webpack:///./src/3d/js/lib/TubeScalableBufferGeometry.js","webpack:///./src/3d/js/lib_external/bitmap-sdf.js","webpack:///./src/3d/js/shader/point_vertex.glsl.js","webpack:///./src/3d/js/shader/point_fragment.glsl.js","webpack:///./src/3d/js/shader/measure_fragment.glsl.js","webpack:///./src/3d/js/shader/measure_vertex.glsl.js","webpack:///./src/3d/js/shader/tube_vertex.glsl.js","webpack:///./src/3d/js/shader/tube_fragment.glsl.js","webpack:///./src/3d/js/util/StaticMethods.js","webpack:///./src/components/content/gadget/LocationResetItem.vue?5469"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","checkNumber","theObj","reg","test","TrackballControls","domElement","_this","this","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","pressingAlt","pressingShift","lockFromZ","lockFromX","lockFromY","up","set","up0","enabled","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","Vector3","EPS","lastPosition","_state","_prevState","_eye","_movePrev","Vector2","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","position","panDelta","zoomDelta","changeScaleEvent","scaleValue","changeEvent","startEvent","endEvent","rotateByZEvent","rotateDelta","Quaternion","len0","tmpVec3","clearPressing","startRotateCamera","angle","frames","setFromAxisAngle","rotateManually","applyQuaternion","startPanCamera","newTarget","sub","divideScalar","panManually","add","moveCamera","x","y","startZoomCamera","zoomDst","Math","pow","copy","zoomManually","multiplyScalar","addVectors","dispatchEvent","handleResize","innerWidth","innerHeight","box","getBoundingClientRect","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","getMouseOnCircle","keydown","shiftKey","altKey","keyCode","keyup","mousedown","localName","preventDefault","stopPropagation","button","addEventListener","mousemove","mouseup","removeEventListener","mousewheel","deltaMode","deltaY","touchstart","touches","dx","dy","sqrt","touchmove","touchend","contextmenu","zoomCameraToPercentage","percentage","factor","rotateCamera","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","zAxis","v1","v2","v3","cross","z","xAxis","yAxis","normalize","crossVectors","setLength","zoomCamera","panCamera","mouseChange","objectUp","pan","lengthSq","subVectors","checkDistances","update","lookAt","distanceToSquared","currentScale","resetRotation","resetPos","reset","dispose","passive","EventDispatcher","TransformControls2D","camera","Object3D","visible","_gizmo","TransformControlsGizmo","_plane","TransformControlsPlane","scope","mouseDownEvent","mouseUpEvent","objectChangeEvent","ray","Raycaster","_tempVector","_tempVector2","_tempQuaternion","_unit","X","Y","Z","pointStart","pointEnd","offset","rotationAxis","rotationAngle","cameraPosition","cameraQuaternion","cameraScale","parentPosition","parentQuaternion","parentQuaternionInv","parentScale","worldPositionStart","worldQuaternionStart","worldScaleStart","worldPosition","worldQuaternion","worldQuaternionInv","worldScale","eye","positionStart","quaternionStart","scaleStart","propName","defaultValue","propValue","fromSet","getPointer","pointer","changedTouches","rect","clientX","clientY","onPointerHover","pointerHover","onPointerDown","onPointerMove","pointerDown","pointerMove","onPointerUp","pointerUp","traverse","child","geometry","material","attach","detach","updateMatrixWorld","parent","matrixWorld","decompose","inverse","PerspectiveCamera","OrthographicCamera","dragging","setFromCamera","intersect","intersectObjects","picker","children","planeIntersect","space","snap","rotationSnap","rotation","round","scale","point","search","dot","divide","multiply","ROTATION_SPEED","distanceTo","setFromMatrixPosition","getMode","setMode","setTranslationSnap","translationSnap","setRotationSnap","setSize","size","setSpace","assign","constructor","isTransformControls2D","gizmoMaterial","MeshBasicMaterial","depthTest","depthWrite","transparent","side","DoubleSide","fog","gizmoLineMaterial","LineBasicMaterial","linewidth","matInvisible","opacity","matHelper","matRed","color","matGreen","matBlue","matWhiteTransperent","matYellowTransparent","matYellow","matLineRed","matLineGreen","matLineBlue","matLineCyan","matLineMagenta","matLineYellow","matLineYellowTransparent","scaleHandleGeometry","BoxBufferGeometry","lineGeometry","BufferGeometry","Float32BufferAttribute","CircleGeometry","radius","arc","vertices","cos","PI","sin","gizmoRotate","Line","Mesh","OctahedronBufferGeometry","helperRotate","AXIS","pickerRotate","TorusBufferGeometry","gizmoScale","XY","pickerScale","CylinderBufferGeometry","helperScale","setupGizmo","gizmoMap","gizmo","updateMatrix","tempGeometry","applyMatrix4","matrix","renderOrder","tempVector","tempEuler","Euler","alignVector","tempQuaternion","tempQuaternion2","identityQuaternion","unitX","unitY","unitZ","helper","handles","concat","handle","eyeDistance","AXIS_HIDE_TRESHOLD","PLANE_HIDE_TRESHOLD","AXIS_FLIP_TRESHOLD","abs","atan2","multiplyQuaternions","indexOf","showX","showY","_opacity","_color","split","some","a","lerp","Color","setFromEuler","isTransformControlsGizmo","PlaneBufferGeometry","wireframe","dirVector","tempMatrix","Matrix4","setFromRotationMatrix","isTransformControlsPlane","ON_LEFT_SIDE","ON_RIGHT_SIDE","ON_LINE_IN","ON_LINE_OUT","BETWEEN_IN","BETWEEN_ON","BETWEEN_NOT","POLYGON_INSIDE","POLYGON_ON_EDGE","POLYGON_OUTSIDE","minimum","bool_union","bool_a_sub_b","bool_intersection","arrAsubB","arrA","arrB","forEach","it","ind","arrAonB","shared","equals","pt0","pt1","notPrecise","edges2Points","edges","points","edge","from","to","Edge","belong","holeId","splitBy","_checked","reversedTo","reversedFrom","crossPoint","setTo","setFrom","maxX","max","minX","min","maxY","minY","similarType","getDistance","alpha","other","sameSource","arr","specialSegmentCross","d1","getDistanceSquare","d2","pc","Box2","yMid","xMid","scalar","center","findBox2","arrX","arrY","findOutestPoint","box2","distances","boxCenter","vertex","contain","findStartEdgeOfHole","restEdges0","restEdges1","restEdges","filtered","filter","findNextEdgeForHole","curEdge","flatten","candidates","findStartEdge","splited0","splited1","vertices0","vertices1","box0","box1","log","findNextEdge","edges0","edges1","first","second","reverseEdge","findHoles","output","firstEdge","holePoints","holeStart","restEdges00","getRestEdges","restEdges01","edges2","excludePoints","specialPoints","restEdges2","segmentsCross","p1","p2","q1","q2","getCrossPoint","getPointOnVectorSide","isBetween","pt","p0","q0","flag0","flag1","pBox","qBox","mergeVertices","map","mergeCount","sharedBySelf","getValidIndex","index","total","b","ma","mb","start1","end1","start2","end2","a1","b1","c1","a2","b2","c2","denominator","getLineSegmentCrossPoint","lineStart","lineEnd","segmentStart","segmentEnd","getAngleWithX_axis","distance","cosA","acos","getAngle","ret","threePointInOneLine","k12","k23","v1_v2","v1_p","cross_product","isClockwiseSquence","leftAngleSum","rightAngleSum","v2Index","pIndex","curSide","mark","removeNearDuplicate","pointsCircle","current","pop","removeRags","start","deleteCount","key0","simplifyCircle","keyPoints","pre","nxt","prePoint","curPoint","nxtPoint","flag","parseToCircles","verticesHoles","noSimplify","vecLst","holeIndices","circles","circles2","circle","reverse","splitTwoEdges","crossLst","addSplitBy","splitEdgesOfCircles","edges4Circles0","edges4Circles1","mergeSuccess","splited","createEdges4Circles","polygonIndex","count","createEdges","processSplitBy","distanceSqs","distanceSqsSorted","sort","removeEdges","edges20","edges21","polygons20","polygons21","boolType","removeOutlineEdges","holeEdges0","holeEdges1","holes0","holes1","len1","outline0","outline1","edge0in1","edge1in0","edge0notIn1","edge1notIn0","getChecked","polygons2","isIn","isPointInPolygonWithHoles","getMidPoint","removeOverlapEdges","removeOverlapOutlineEdges","empty0","empty1","sharedEdges0","sharedEdges1","edge0","edge1","obj","setChecked","findSpecialPoints","addSpecialPoint","pointId","edgesLst2PointsCircles","edges4Circles","pointsCircles","splitArray","index1","index2","small","big","numbersBetween","delta","item","newSeries","isCrossWithEdges","checkingIndex","needSkip1","needSkip2","edgeIndex","isInConvex","vertexLst","isInConvexPolygons","convexPolygons","convex","convexPolygons2","outestPolygons","isInOutestCircle","convexPolygonsOfHole","isInHole","concavToConvex","isClockwise","concavPoint","concavIndex","v0","divideIndex","halfAngle","minAngle","curAngle","isBetween0","isBetween2","isBetween3","countBounds","a0","b0","rayUpSegmentCross","res","rate","isPointInEdges","isPointInEdges0","crossedPoints","checked","prev","next","edgeNext","vertical","edgePrev","findCircles","circles0","circles1","outestCircles","polygons","outlineEdgesA","outlineEdgesB","outlineEdgesA2","outestCircle","usedEdges","startEdge","curEdge0","pointsSharedByCircles","holes","graphics","realHoles","analyseHolesContain","outestPoints","pointsArr","outlineEdges","hole","polygonObj","holePoint","srcHoles","holesObjs","contains","containBy","containedSet","Set","holeA","holeB","containedArr","containedHoles","realHoleObjs","holeObj","boolPolygons","verticesHolesA","verticesHolesB","sharedCount","circlesA","circlesB","outlineA","outlineB","edgesA","edgesB","polygonsCreatedByHoles","polygon","edges4Circle","outlineAndHolesLst","outlineAndHoles","allVertices","simplified","curHoleIndex","len","mergeTwoPolygons","mergePolygons","verticesHolesArr","wait4Merge","merged","mergedPolygon","mergeFailedPolygons","includes","BoolPolygonsUtil","setPrecision","num","contour","isPointInOutline","polygonAsubB","polygonAintersectB","mergeNoHolePolygons","polygonContours","mergeNoHolePolygonsSimply","mergeResult","contourLst","pointLst","getClosestLineSegmentCross","contours","crossPoints","PolygonTool","divElement","TriangleCut","Config","getPrecision","curVector","eventSelectionChange","eventRefItemSelect","eventSliceError","eventInvalidNumInput","eventFastNameChange","editingLayer","Layers","scene","Main","dom","getDom","fixedPtColor","lineMesh","ctrlPtCount","currentPointObj","StaticFunc","polygonPts","firstVector","polygonVertices","adhereRadius","adhereRadiusForCreating","adhereRadius2","adhereCircle","getAdhereCircle","mouseDownPos","startPoint","radiusMesh","isAddingCircle","isAddingRectangle","isAddingPolygon","STATUS_FREE","STATUS_ADDING_GRAPHICS","STATUS_EDITING_POINTS","STATUS_ROTATING_GRAPHICS","STATUS_SCALING_GRAPHICS","STATUS_COPYING_GRAPHICS","STATUS_SLICING_GRAPHIC","STATUS_EDITING_HEATMAP","status","selectedMeshes","selectedPoint","oldPtPos","editingPoint","slicingPoint","curSliceSegment","adhereObj","transformControls","slicingPath","sliceSegments","selectionHelper","BoxHelper","outlineOfPastes","Group","postfix","suffix","contextMenuEnabled","selectedRef","unlockRef","curNum","fillZero","in3dContext","maximumHeat","heatmapDataLst","material4HeatmapEdit","setStatusToFree","excludes","endPolygonAdd","endSimpleItemAdd","stopEditingControlPoints","endGraphicsCopying","endSlicingMesh","changeAdhereCircleScale","scaleFactor","currentCameraScale","seg","lGeometry","BufferAttribute","lineLoop","LineLoop","addPolygonMesh","pts","remove","polygonMesh","PolygonMesh","addObject","addSimpleMesh","startVector","endVector","pointsGetter","hideDiv","startAddPolygon","style","display","prepareForAdd","mouseMove_polygonAdd","mouseDown_polygonAdd","cameraControl","guideLineX","guideLineY","lst","getIntersectsOnPlane","ui","enableEditPointAdhere","guideArr","getGuideLines","updateGuideLines","adjustPosByGuideLines","showDiv","attr","attributes","setXYZ","needsUpdate","setHex","cancelBubble","addControlPointToPolygon","currentVector","startAddSimpleGraphic","mouseClick_startSimpleItemAdd","mouseMove_simpleItemAdding","mouseDown_cancelSimpleItemAdd","clearGuideLines","pressEnterOnInput","distance1","distance2","focus","toFixed","isNum0","isNum1","value0","parseFloat","value1","diff","clickPos","last","moveSlightlyStep","fraction","currentPos","attr2","computeLineDistances","copyArray","holder","mesh","getMesh","layer","getLayer","updatePosition","getHolderGroup","updateScaleFactor","floorLayer","setName","setSelectMesh","context","meshes","parentGroup","tool","polgyonTool","History","addAction","removeObject","onLockChange","locked","layerObj","hidden","group","inRefLayer","unselect","init","getCamera","transformingSelectedMesh","transformingSelectedMeshEnd","attachLayersToScene","mouseup4SelectionBox","navPathTabSelected","availableMeshes","allSelected","selectBox","select","mousedown4Select","updateCameraByDivideRects","getIntersects","findUpperItem","userData","oldScale","oldRotation","mousemove4Drag","mouseup4Drag","getMeshIndex","holderGroup","indexInLayer","raycastItems","upperMesh","maxGroup","groupsUpper","setFromObject","undoContext","fastName","updateFastName","numStr","rule","removeEditPoint","endEditCtrlPoint","mousemove4EditingPoint","mousedown4EditingPoint","buttons","curPos","moveRef","selectedMesh","move","getGuideLines4Moving","updateGuideLines4Moving","offsetFromGuideLines","adjustBoxesByGuideLines","positions","oldPositions","oldRefPos","updateRefPos","getOldPos","manhattanDistanceTo","mousemove4DragPoint","moveCtrlPoint","pos","guideLines","getGuideLines4Editing","manhattanLength","mouseup4DragPoint","ctrlPointObj","oldPosition","curMesh","startEditCtrlPoint","posOnEdge","addCtrlPoint","ctrlPoint","removeCtrlPoint","updateCurPointIndex","getPointOnEdges","ctrlPos","mousemove4Slicing","targets","distanceSq","mouseclick4Slicing","mousedblclick4Slicing","removeLst","appendLst","selectedMeshesBac","getHeight","newPolygons","slicePolygon","getArr4Merge","slicedItem","bacOpacity","setHeight","setTextHeight","mouseDownForCopying","mouseMoveForCopying","chidren","copiedMeshes","outlineOfPaste","polygonHolder","initFromPasteItem","pasteItemsBox","setFromPoints","guideObj","posLst","toPasteItem","getBox2","getPosition","outlineBox","getCenter","hostBox","span","smartGuideSpan","h","v","hObjMin","vObjMin","guestBoxes","minSpanH","minSpanV","pair","getClosestLinesWithBox","hVal","vVal","hostLine","end","guestLine","p3","boxes","horizontalObj","verticalObj","spanObj","getClosestLines","horizontal","hObj","line","lineY","hVector","vObj","lineX","vVector","guideVal","bool_a_intersect_b","boolPolygonAandB","opType","results","meshA","meshB","lstA","lstB","removed","added","arr2","newMesh","loadFloorHeatMap","jsonObj","floorMesh","squarePos","minSquarePos","getHeatmapMaterial","updateUvAttribute","mouseclick4HeatmapEditing","that","startAddRectangle","startAddCircle","dispatchSelectionChange","toggleStatusOfEditingPoints","toggleStatusRotatingMesh","toggleStatusScalingMesh","startSlicingMesh","startCopyingMesh","getHeatMapEditObj","startEditHeatmap","endEditHeatmap","rotateSingleMesh","rotateByKeyboard","degree","rotateStep","addOrUpdateAction","mergeMeshes","firstMesh","mergeRet","mergedItem","meshAsubItems","meshLast","needBeSub","subMeshes","replacements","bConsumed","replaceObj","meshAsubB","meshAintersectB","moveSelectedMesh","moveVector","removeAll","clearCustomLayers","buildingsLayer","referLayer","removeSelectedMesh","meshParentGroup","isStatusEditingPoints","isStatusScalingMesh","isStatusRotatingMesh","onNavPathTabSelected","getContextMenuEnabled","enableFastNaming","fastNameRule","mid","substring","substr","lastIndexOf","parseInt","disableFastNaming","updateNameByRule","regexp","getName","match","getSelectedMeshes","getSelectedRef","set3D","val","selectedMeshesReorder","toTop","holderParent","unshift","setSelection","NavPathTool","ringMoving","relatedHolders","eventSelectPathChange","getPathCtrlPoint","selectedPaths","currentRing","startRing","adhereHolder","curPathType","STATUS_ADDING","STATUS_EDITING","STATUS_PATH_FINDING","MIN_PATH_LENGTH","MIN_PATH_LENGTH_SQ","pathNavigator","NavigatorTool","mousemove4PathFinding","getSelectedCircle","mouseclick4PathFinding","setMarkerPos","onPathFinding","mousedown4SelectPath","pathItem","getSelectedPathItem","setSelectedPaths","navPathLayer","endPoint","endPathFinding","selectedRings","selectRings","getPathSegmentRings","holders","getRelatedPathSegments","hideSelectedPaths","oldRingPos","mouseup4EditingPoint","endEditingPoint","getAdheredPosition","updateLine","lineSegment","addLines","removeLines","ring","getLine","lineType","getPathType","exists","findPathHoldersByCircles","fromCircle","addLineSegment","toCircle","pathPointObj","ringGroup","replaced","replacement","replaceCircle","mousemove4PathAdd","getPathSegment","setPositions","segmentType","dd","findCircleByPoint","pathSegment","PathSegment","items","getItems","clearTempMesh","clearPathAnimation","endAddPath","mouseclick4LineSegmentAdd","mousedown4LineSegmentAdd","newItem","splitSegmentsByNewItem","circleFrom","circleTo","newCircles","unrelatedItems","getUnrelatedPathSegments","tmp","splitCircles","lineSegmentCross","ptObj","crossObj","segments","segmentItem","setPathDirection","getPathDirection","getPathSegmentHolders","getAdhereObj","pointAdheres","edgeAdheres","prepareToFree","startPathFinding","buildPathFindingGraph","navigator","startAddPath","pathType","startEditingPoint","getSelectedPathItems","changeSelectedPathsDirections","direction","changeSelectedPathsTypes","setPathType","removeSelectedPaths","ring0","ring1","holders0","holders1","CoordCorrelateTool","eventCoordChange","eventMousemove","mx","my","lng","lat","markers","coordBindings","marker","getPositionMarker","draggingMarker","dragStartPos","markerPos0","matTransform","matTransformInverse","showing","mousedown4Drag","lnglat","getLngLat","initTransformation","markerPos1","getCoord","markerPos2","earthPos1","earthPos2","getVector2","angleTo","matRotate","makeRotationZ","matScale","makeScale","mat","tranlate","matTranlate","makeTranslation","premultiply","getInverse","rot","mathConsts","radianToDegree","getScale","clearBinding","hide","show","markerIndex","setCoord","setCoordBinds","getCoordBinds","getRenderPos","mercator","lngLatBind","coordType","TYPE_BaiDu","wgs2bd","getMercator","serialize","bindLst","deserialize","TransformControls","warn","raycaster","intersectObjectWithRay","includeInvisible","allIntersections","intersectObject","startNorm","endNorm","pointerLockElement","scaleSnap","setScaleSnap","isTransformControls","toneMapped","matWhiteTransparent","matCyanTransparent","matMagentaTransparent","matLineGray","arrowGeometry","TranslateHelperGeometry","gizmoTranslate","XYZ","YZ","XZ","pickerTranslate","helperTranslate","START","END","DELTA","E","XYZE","SphereBufferGeometry","XYZX","XYZY","XYZZ","zeroVector","lookAtMatrix","isOrthographicCamera","bottom","zoom","tan","fov","showZ","LightTool","eventLightSelected","light","eventLightMoved","eventLightRemoved","id","lights","lightPickers","MainScene","trackballControls","onDownPos","onUpPos","mousedown4PickLight","lightPicker","mouseup4PickLight","selectLight","toggle3dEditing","displayAs3D","coordTool","resetCamera","allLights","selectedLight","selectLightBy","uuid","getLightById","updateLight","lightId","updateObj","groundColor","intensity","deleteLightBy","deleteLight","addLight","lightType","skipSelect","defaultColor","Const","PointLight","PointLightHelper","DirectionalLight","DirectionalLightHelper","penumbra","SpotLight","SpotLightHelper","HemisphereLight","HemisphereLightHelper","isEditingIn3D","deleteSelectedLight","toggleLightVisible","deleteAllLights","lights0","serializeLights","clearColor","getRenderer","getClearColor","getHex","clearAlpha","getClearAlpha","objL","toArray","deserializeLights","setClearColor","fromArray","MeasureTool","currentSegment","lastSegment","eventUpdateTip","meters","areaMeters","area","mapCoord","eventAddTip","eventRemoveTips","eventCancelAddTip","STATUS_MEASURE_LENGTH","STATUS_MEASURE_AREA","measurePoint","getMeasurePoint","pointObjs","measuredLst","dashSize","gapSize","_scalar","measuredLen","endMeasuring","mousemove4Measure","ShapeUtils","mapScale","curLen","mouseclick4Measure","latest","getMeasuringLineSegment","mousedblclick4Measure","measuredLines","getMeasuredLines","pointObj","TriCut","getSliceLinesPolygons","getPolygonsArea","areaMesh","getPolygonsAreaMesh","clearTempMeasuring","startMeasuring","startMeasureLength","isArea","startMeasureArea","clearMeasures","MarkerTool","eventMarkersSelectChange","isAddingTextMark","currentTextMark","TextMark","selectedMarkers","endAddTextMark","isMarker","sprite","markLayer","startAddTextMark","mousemove4MarkAdding","mousedown4MarkAdding","availableMarkers","addMark","setSelectMark","text","setPosition","unifyMarkersName","updateText","removeSelected","SelectionBox","frustum","Frustum","deep","collection","Number","MAX_VALUE","meshLst","updateFrustum","searchChildInFrustum","rings","containsPoint","updateProjectionMatrix","tmpPoint","vecNear","vecTopLeft","vecTopRight","vecDownRight","vecDownLeft","unproject","vectemp1","vectemp2","vectemp3","planes","setFromCoplanarPoints","normal","skipChild","isMesh","computeBoundingSphere","boundingSphere","SelectionHelper","selectionBox","renderer","cssClassName","element","classList","pointerEvents","pointTopLeft","pointBottomRight","isDown","onSelectStart","onSelectMove","onSelectOver","setEnabled","enable","parentElement","stats","planeHelper","polygonTool","navPathTool","lightTool","measureTool","markerTool","initialScale","cameraAni","gridOrigin","pathTrack","selectionBoxHelper","eventZRotateChange","eventResetUI","eventAddRefLayer","eventDivideRef","eventDividedRefSelected","eventSelectionBoxUpdated","pressingCtrl","zRotateInTotal","divideRects","gridSize","panFrames","zoomFrames","editingIn3D","addGrid","parentItem","grid","GridHelper","array","getGridOrigin","initControl","updateMeshesScale","cameraRotateByZAxis","Scene","backgroundLayer","helperGeometry","helperMaterial","render","requestAnimationFrame","showFps","animatePathIndicator","nextCameraAni","animate","isFinished","endChangeCameraManually","attached","reachEnd","WebGLRenderer","antialias","setTransparentSort","transparentSort","toneMapping","LinearToneMapping","getElementById","Stats","onblur","mousedown4SelectionBox","used","autoSaveInterval","setInterval","actionModified","Serializer","saveToLoal","mousemove4SelectionBox","aspect","ctrlKey","updatePathIndicatorScale","lineSegments","degreeInTotal","transToScreenCoord","screenCoord","project","resetUI","pathTool","resetCameraRotate","resetCameraPos","meshes4Heatmap","heatmapMaterial","bacMaterials","layerA","getObjLayer","layerB","applyHeatmapToSelected","getRandHeatmapMaterial","unapplyHeatmapToSelected","showRandomHeatmap","heatmapPlane","clearLayer","clearHeatmap","setReferImg","imgDom","isJpeg","iw","naturalWidth","ih","naturalHeight","texture","Texture","image","format","RGBFormat","RGBAFormat","FrontSide","backImgPlane","w","setReferLayer","divideRefImg","divideStr","referMesh","childLst","dw","dh","sw","sh","halfW","halfH","rectOutline","getRectOutline","rectMesh","getRectMesh","ChainedAnimation","initialFunc","updateFunc","endFunc","curFrame","cur","append","arguments","startPanZoomCamera","prepareZoomCamera","startMergeAnimation","origin","zoomAni0","rotateAni","zoomAni1","height2","scaleH","width2","scaleW","initLayers","modelTextVisible","currentCameraPhi","getGpsLocIndicatorPos","biliSegmentWidth","s0","s1","getIntersectsWith","tmpVector","objects","onNavPathTabUnselected","onSettingsTabSelected","onSettingsTabUnelected","initCoordBinding","objFromJson","moveCameraToDivideIndex","toggleModelsNames","setTextVisibility","showRandomTrack","getRandomTrack","PathTrack","str","getHexString","changeGlobalMaterial","materialType","allMeshes","change3dMaterial","keyword","addressName","LCS","isMark","setSelectByUuid","list","main3d","PathEdge","line3","Consts","pathDirection","cost","setFromPathSegment","segment","pathPoints","fromIndex","toIndex","Line3","getCost","initFromSerilization","getClosestPointOnEdge","closestPointToPointParameter","closestPointToPoint","PathPoint","vector3","dstNum","nearPlaces","toPlaces","onFloor","Earcut","triangulate","dim","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","ear","pass","indexCurve","stop","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","zOrder","maxZ","nextZ","prevZ","intersects","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","findHoleBridge","hx","hy","qx","tanMin","sortLinked","q","tail","numMerges","pSize","qSize","inSize","leftmost","ax","ay","bx","by","cx","cy","px","py","intersectsPolygon","middleInside","inside","Node","an","bp","sum","_interopDefault","ex","Vue","require","OVERFLOW_PROPERTYS","SCROLL_TYPES","ROOT","body","VERTICAL","HORIZONTAL","DEFAULT_PLACEMENT_QUEUE","MAX","getBoxMargin","el","eBox","vw","vh","right","midX","midY","tl","tr","br","bl","margin","placement","getBestPlacement","weight","checkScrollable","css","getComputedStyle","getScrollContainer","computeCoordinateBaseMid","placementInfo","tw","th","computeCoordinateBaseEdge","dHor","dVer","ew","eh","nearRight","nearBottom","arrowsOffset","computePlacementInfo","ref","container","limitQueue","placementQueue","_getBoxMargin","_target$getBoundingCl","queueLen","processedQueue","placementItem","verSingleBiasCheck","verFullBiasCheck","horSingleBiasCheck","horFullBiasCheck","mod","computeArrowPos","posMap","debounce","fn","delay","timer","args","supportsPassive","main","_vm","_h","$createElement","_c","_self","attrs","directives","rawName","expression","staticClass","class","boxClass","boxStyle","on","showTip","$event","hiddenTip","arrowBox","_v","title","_s","_e","content","contentHeight","customComponent","_g","_b","updateTip","customProps","customListeners","staticRenderFns","props","String","default","Function","placements","Array","duration","transition","Boolean","arrowsSize","zIndex","theme","customClass","containerNode","targetParentNode","visibleTimer","arrowsPos","computed","borderWidth","tsClass","methods","immedia","setVisible","setContainerNode","asynSetCoordinate","$el","oldNode","newNode","scrollHandler","setCoordinate","coordinate","setArrowsPos","scrollLeft","scrollTop","transform","$nextTick","_ref","clearScrollEvent","removeParentNode","destroy","$destroy","VtipConstructor","extend","defaultOptions","prop","dv","vtipInstance","tip","options","trim","propsData","$mount","_typeof","iterator","clearEvent","_tipHandler","_tipMouseleaveHandler","_tipOptions","_tipInstance","directive","install","Vue$$1","directiveName","allPlacements","binding","_binding$modifiers","modifiers","click","dark","limitPlacementQueue","mix","tipOptions","oldValue","unbind","instance","precision","cloned","sliceBy","sourceId","subEdge","lerpToEnd","getNear","isFrom","Triangle","pa","pb","ia","ib","ic","ab","ac","toString","getVertices","getIndices","changeSequence","getTriangles4ConvexPolygon","subtract","getTriangles4ConcavPolygon","arr1","mergeEdges","mapPointsReplace","edgeSourceIds","edgeMap","prepareRemove","fromId","toId","processPrecision","vLst0","vLst1","objXyLst","verticesHoles0","verticesHoles1","Polygon","getPoints","containEdges","sliceCircleEdges","latestEdge","noSlice","beSliceObjs","needUpdate","originEdge","slicePoint","latestEdges","beSlice","formatEdges2","allPoints","indices","getCrossPointsBySliceEdges","sliceEdges","crossArr","beSlicing","splitSliceEdges","splitted","findNextEdge4Slicing","candidate","findSharePointHolesLst","circleI","circleJ","subLst","findUsefulEdges","sharePointHolesLst","fromStack","fromIndices","fromPoints","onCircle","toHoleId","sharePointHoles","createHolesArr","changeHolesArr","sliceOutOne","edges4CirclesFlatted","involvedHoles","holesTracks","nextEdge","needlessHoles","slicePolygonWithEdges","remainedHoleIndices","sliceEdgesPair","newPolygonsEdges","holesExists","groups","newHolePolygon","outline","getHoleId","slicePolygonRecursively","edges4CirclesOld","slicePoints","sliceEdgesCopy","usingEdges","edgesLst","edges3","getArea","getPolygonArea","holesVectices","polygonsFromSliceLines","valid","noFormat","slicedEdges0","slicedEdges","edgeFromSlice","sliceObj","beSliceEdge","sliced","cross4Sliced","formattedLst","triangle","component","txt","option","extraWidth","extraHeight","oldPos","makeCanvasTextSprite","generateTextCanvas","spriteBox","textHeight","opt","renewSpriteBox","poi","generateSpriteBox","getOption","textColor","outlineColor","published","canvas","textSprite","getTextHeight","changeParent","toArrayFixed","sceneHolder","pathPointsOnBuilding","pathEdges","pathIndicator","findPathResult","preSelectedMesh","settingStartMarker","settingEndMarker","eventRemainMeters","eventRefindPath","eventRecaculatePath","eventMapPosSelect","eventBuildingSelected","modelName","posObj","destination","startPointObj","getStartEndIcon","endPointObj","thresh","buildings","enablePathFinding","startPosAdjust","endPosAdjust","needClearAbstractEdges","STATUS_NAVIGATING","STATUS_NAVIGATING_END","STATUS_NAVIGATE_FREE","pathRefreshInterval","curPathRefreshCount","touchEnd","addAbstractEdge","abstract","clearExtraEdges","pathPoint","getPathPointsInArr","sorted","getPathPointInArr","noSpan","isEnd","isPublished","initPreviewPath","getPreviewPath","dir","findPathSegment","pathPoint0","pathPoint1","findPath","finded","curPath","midCircle","placesFromMid","curCost","existCost","newPath","setStartIcon","setEndIcon","setIconByName","isStart","getMeshsByName","getModelPos","bindPathPoints","skipExtra","clearSelection","PublishedScene","startMovingCamera","startSelectAnimation","clearPathIndicator","reversePathIndicator","offsetX","getPathIndicator","getPathIndicatorBack","pathFindingOnGpsChange","gpsPos","selectPointOnMapByVector3","rawPoint","inBuilding","rawPathPoint","createExtraEdges","oldPathPoints","refreshPathIndicator","comparePaths","oldPoints","currentPoints","diffCount","getPickedMesh","pickedMeshes","selectPointOnMap","dataInvaild","nearPoints","edgeDistances","pointsOnEdge","pathEdge","pathAdhereSpanSq","getMinNum","onEdge","closestPathPoint","out","msgs","getNavigateMsgs","msg","getDesc","backColor","touchstart4PathFinding","touchend4PathFinding","touchmove4PathFinding","mousedown4PathFinding","mouseup4PathFinding","phi","parentObj","interpolateLinear","go_straight","go_along_left","go_left","go_left_back","go_turn_around","go_along_right","go_right","go_right_back","vector3s","vector2s","directions","angles","currentMsg","NavigateInfo","navInfo","merge","naviMsgs","angleByDegree","goType","otherInfo","inEditor","minimumDistance","pahtPointLst","distanceSquared","startP","endP","startNum","random","endNum","findPathFromCircles","ringLst","fromPoint","toPoint","initBuildings","onMapChange","remote","track","switchMarker","temp","setDistination","startSetEndPosition","Tube","tubeSetting","offsetY","scalePathIndicator","rotatePathIndicator","addListeners","browser","runOnMobile","onGpsPostitionChange","toggleNavigatingSwitch","isNavigating","endNavigating","Ref_Flag","Editing_For_3d","Show_CompassItem","Show_BottomBox","Show_BottomInfo","Show_GraphicAdd","Is_Navigating","Lights_Editable","pageTitle","onTabClick","slot","staticStyle","onSearchByDropdownClose","searchBySelectIndex","searchByLst","searchPlaceholder","filterFromEditor","onSearchItemClick","model","callback","$$v","searchTxt","_l","undoEnabled","performUndo","redoEnabled","performRedo","onClickSave","onClickLoad","selectMapJson","publishMap","onClickPreview","showDownloadPrompt","userName","inputSize","inputDisabled","inputExceed","$slots","prepend","prefix","prefixIcon","suffixIcon","clearable","showPassword","focusAnimEnabled","hovering","_t","colorAlphaEnabled","colorEnabled","hideBorder","numberInvalid","tabindex","passwordVisible","readonly","autoComplete","autocomplete","label","handleCompositionStart","handleCompositionUpdate","handleCompositionEnd","handleInput","handleFocus","handleBlur","handleChange","$attrs","getSuffixVisible","showClear","showPwdVisible","isWordLimitVisible","clear","handlePasswordVisible","textLength","upperLimit","validateIcon","broadcast","componentName","eventName","params","$children","$options","$emit","dispatch","$parent","$root","hasOwn","_from","toObject","getValueByPath","paths","path","generateId","floor","valueEquals","escapeRegexpString","replace","isIE","$isServer","isNaN","documentMode","isEdge","userAgent","hiddenTextarea","mounted","getMigratingConfig","events","HIDDEN_STYLE","CONTEXT_STYLE","calculateNodeStyling","targetElement","boxSizing","getPropertyValue","paddingSize","borderSize","contextStyle","join","calcTextareaHeight","minRows","maxRows","placeholder","scrollHeight","singleRowHeight","minHeight","maxHeight","source","isKorean","ElInput","startClick","nodeList","ctx","seed","createDocumentHandler","vnode","popperElm","methodName","bindingFn","node","documentHandler","buttonSize","buttonDisabled","loading","plain","autofocus","nativeType","handleClick","icon","ElButton","ElButtonGroup","ElDropdown","doDestroy","hasModal","hasInitZIndex","getModal","modalDom","PopupManager","doOnModalClick","instances","modalFade","getInstance","register","deregister","nextZIndex","modalStack","topItem","closeOnClickModal","close","openModal","modalClass","addClass","classArr","removeClass","nodeType","tabIndex","closeModal","configurable","$ELEMENT","getTopPopup","topPopup","closeOnPressEscape","handleClose","handleAction","scrollBarWidth","outer","className","visibility","widthNoScroll","offsetWidth","overflow","inner","widthWithScroll","idSeed","PopperJS","transformOrigin","boundariesPadding","reference","popper","visibleArrow","arrowOffset","appendToBody","popperOptions","gpuAcceleration","showPopper","currentPlacement","watch","immediate","handler","disabled","updatePopper","destroyPopper","createPopper","$refs","referenceElm","elm","appendArrow","popperJS","onCreate","_","resetTransformOrigin","onUpdate","_popper","forceDestroy","placementMap","hash","appended","arrow","beforeDestroy","deactivated","divided","selected","selectSize","toggleMenu","inputWidth","collapseTags","selectDisabled","collapseTagSize","hitState","deleteTag","currentLabel","resetInputHeight","getValueKey","inputLength","domProps","softFocus","managePlaceholder","resetInputState","_k","navigateOptions","selectOption","deletePrevTag","handleComposition","composing","query","debouncedQueryChange","currentPlaceholder","multiple","filterable","inputStyle","nativeOn","debouncedOnInputChange","inputHovering","selectedLabel","showClose","iconClass","handleClearClick","handleMenuEnter","emptyText","popperAppendToBody","allowCreate","filteredOptionsCount","colorpicker","confirm","datepicker","now","today","cancel","selectDate","selectTime","startDate","startTime","endDate","endTime","prevYear","nextYear","prevMonth","nextMonth","year","month1","month2","month3","month4","month5","month6","month7","month8","month9","month10","month11","month12","weeks","sun","mon","tue","wed","thu","fri","sat","months","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","noMatch","noData","cascader","pagination","goto","pagesize","pageClassifier","messagebox","upload","deleteTip","delete","preview","continue","table","confirmFilter","resetFilter","clearFilter","sumText","tree","transfer","titles","filterPlaceholder","noCheckedFormat","hasCheckedFormat","pageHeader","popconfirm","confirmButtonText","cancelButtonText","RE_NARGS","template","string","Format","lang","defaultLang","i18nHandler","vuei18n","getPrototypeOf","$t","locale","config","deepmerge","popperClass","minWidth","itemSelected","groupDisabled","limitReached","hover","hoverItem","selectOptionClick","ElTag","isServer","resizeHandler","entries","entry","listeners","__resizeListeners__","addResizeListener","__ro__","ResizeObserver","observe","removeResizeListener","disconnect","BAR_MAP","scroll","scrollSize","client","renderThumbStyle","bar","translate","msTransform","webkitTransform","wrap","clickTrackHandler","clickThumbHandler","startDrag","currentTarget","thumbHalf","thumb","thumbPositionPercentage","stopImmediatePropagation","cursorDown","mouseMoveDocumentHandler","mouseUpDocumentHandler","onselectstart","prevPage","thumbClickPosition","off","destroyed","components","Bar","native","wrapStyle","wrapClass","viewClass","viewStyle","noresize","sizeWidth","sizeHeight","moveX","moveY","gutter","scrollbarWidth","gutterWith","gutterStyle","isArray","marginRight","marginBottom","nodes","view","handleScroll","clientHeight","clientWidth","heightPercentage","widthPercentage","scrollWidth","resize","Scrollbar","scrollIntoView","offsetParents","offsetParent","offsetTop","reduce","curr","offsetHeight","viewRectTop","viewRectBottom","hoverOption","optionsAllDisabled","every","hoverIndex","scrollToOption","Select","btnClick","horizontalClass","clearTimer","startTimer","typeClass","dangerouslyUseHTMLString","isVNode","NotificationConstructor","Notification","userOnClose","onClose","verticalOffset","removedHeight","verticalProperty","closeAll","handleCodePoints","CHUNK_SIZE","_i","fromCharCode","unzip","fromRemote","charAt","charData","charCodeAt","binData","Uint8Array","pako","inflate","Uint16Array","decodeURI","jsc","currentIndex","onTabclick","$store","state","editingFor3d","itemClick","collapseChange","activeNames","showGraphicAdd","activeNames2","activeLights","activeSettings","isActive","focusing","isLast","handleHeaderClick","handleEnterClick","Transition","beforeEnter","dataset","oldPaddingTop","paddingTop","oldPaddingBottom","paddingBottom","enter","oldOverflow","afterEnter","beforeLeave","leave","afterLeave","functional","selectCount","onChangeItemsLayer","layerVal","onInputMeshesName","onInputMeshesNameEnd","inputName","onInputMeshesHeight","onInputMeshesHeightEnd","inputHeight","onInputTxtHeight","onInputTxtHeightEnd","inputTxtHeight","updateMeshesColor","updateMeshesColorEnd","inputFillColor","updateOutlinesColorEnd","inputLineColor","refPosX","refPosY","refPosZ","updateRefScale","clearRefScaleX","refScaleX","clearRefScaleY","refScaleY","updateRefRotation","refRotateZ","updateRefAlpha","clearRefAlpha","refAlpha","onChangeMarkersLayer","onInputMarkersName","onInputMarkersHeight","updateMarkersColor","textOutlineColor","onClickAddPolygon","activeShape","tips","onInputDefaultHeight","defaultHeight","updateDefaultFillColor","defaultFillColor","updateDefaultLineColor","defaultLineColor","onclickRandHeatmap","onclickClearHeatmap","editHeatmapBtnText","toggleHeatmapEdit","heatmapStr","loadHeatmap","onClickAddPath","activePath","onclickPathFinding","onclickPathTracking","toggleEditPoints","editTxt","toggleScaleItem","scaleTxt","toggleRotateItem","rotateTxt","sliceItem","copyItem","deleteItem","topItems","bottomItems","mergeItems","itemAsubB","itemAintersectB","editPathPoints","_m","smallStep","bigStep","moveStep","canvasSelected","step","toLowerCase","redoAction","undoAction","selectedCount","onChangePathDirection","dirValue","onChangePathType","pathValue","onclickAddLayer","onRemoveLayer","nameEditable","mousedown4LayerName","keydown4LayerName","blur4LayerName","lockChange","hideChange","onclickRemove","valueShowNames","toggleGrid","valueShowGrid","toggleAdhere","valueDrawAdhere","updateBackgroundColor","sceneBackColor","switchDisabled","switchValue","activeValue","inactiveValue","inactiveIconClass","inactiveText","coreWidth","activeIconClass","activeText","onInputPosition","pos1x","pos1y","tipP1x","onInputMercatorPosition","pos1MecatorX","tipP1y","pos1MecatorY","pos2x","pos2y","tipP2x","pos2MecatorX","tipP2y","pos2MecatorY","toggleMouseInfo","pos_x","pos_y","tipP_x","posMecatorX","tipP_y","posMecatorY","selectImage","imgBtnClicked","onclickMerge","colArr","active","selectGrid","onInputFastNum","editing3d","EventBus","onclickAddLight","showAddLightMenu","addPointLight","addSpotLight","addDirectionLight","addHemiSphereLight","lightTypeDesc","updateLightPosition","lightPosX","lightPosY","lightPosZ","updateLightIntensity","lightIntensity","lightColorDesc","updateLightColor","lightColor","updateLightGroundColor","lightGroundColor","updateLightDistance","lightDistance","updateLightAngle","lightAngle","emitChange","jsColor","jscolor","attachDOMReadyEvent","attachEvent","onDocumentMouseDown","onDocumentTouchStart","onWindowResize","lookupClass","installByClassName","tryInstallOnElements","elms","matchClass","RegExp","isColorAttrSupported","targetElm","optsStr","dataOptions","getDataAttr","opts","eParseError","isCanvasSupported","getContext","fetchElement","mixed","isElementType","nodeName","attrName","attrValue","evnt","func","detachEvent","_attachedGroupEvents","attachGroupEvent","groupName","detachGroupEvents","evt","fired","fireOnce","readyState","foo","doScroll","tryScroll","returnValue","captureTarget","setCapture","_capturedTarget","releaseTarget","releaseCapture","fireEvent","createEvent","ev","initEvent","createEventObject","classNameToList","hasClass","setClass","unsetClass","repl","getStyle","currentStyle","setStyle","getSupportedProp","names","borderRadius","boxShadow","alphaOpacity","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","viewPos","getViewPos","getElementSize","getAbsPointerPos","getRelPointerPos","srcElement","targetRect","doc","getViewSize","redrawPosition","owner","tp","vp","thisObj","fixed","ts","vs","ps","getPickerOuterDims","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","boxS","shadow","BoxShadow","shadowColor","getPickerDims","displaySlider","getSliderComponent","extraSldWidth","insetWidth","getPadToSliderPadding","sliderSize","dims","padding","closable","buttonHeight","alphaEnabled","pointerBorderWidth","pointerThickness","getPadYComponent","_jscLinkedInstance","showOnClick","_jscControlName","onControlPointerStart","onParentScroll","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","controlName","pointerType","_jscInstance","registerDragEvents","onDocumentPointerMove","onDocumentPointerEnd","frameElement","ofs","hsv","fromHSV","pad","setPad","setSld","setSldAlpha","dispatchFineChange","dispatchChange","valueElement","onFineChange","ofsX","ofsY","pointerAbs","xVal","yVal","sld","_vmlNS","_vmlCSS","_vmlReady","initVML","namespaces","styleSheets","tags","ss","createStyleSheet","owningElement","addRule","createPalette","paletteObj","draw","drawFunc","clearRect","hGrad","createLinearGradient","addColorStop","fillStyle","fillRect","vGrad","vmlContainer","method","colors","hRect","stroked","vRect","color2","createSliderGradient","sliderObj","color1","grad","createSliderAlphaGradient","rgbArr","leaveValue","leaveStyle","hShadow","blur","spread","inset","vals","styleElement","required","refine","uppercase","activeClass","overwriteImportant","minS","maxS","minV","maxV","rgb","displaySupportAlpha","crossSize","closeText","buttonColor","backgroundColor","borderColor","insetColor","pointerColor","pointerBorderColor","RGB_HSV","g","HSV_RGB","u","f","detachPicker","THIS","drawPicker","_processParentElementsInDOM","boxB","padB","padM","padPal","crossBY","crossBX","crossLY","crossLX","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","sldAlpha","sldAlphaB","sldAlphaM","sldAlphaGrad","sldAlphaPtrS","sldAlphaPtrIB","sldAlphaPtrMB","sldAlphaPtrOB","btn","btnT","crossOuterSize","padToSliderPadding","padCursor","border","background","cursor","sldB_Left","setBtnBorder","insetColors","outsetColor","sliderPtrSpace","font","textAlign","eOldIE","onmousedown","lineHeight","innerHTML","createTextNode","redrawPad","redrawSld","redrawSldAlpha","yComponent","rgb1","rgb2","sldComponent","isPickerOwner","blurValue","importColor","redraw","backgroundImage","_jscOrigStyle","exportColor","fromString","flags","toUpperCase","bgColor","fgColor","isLight","newRgb","fromRGB","inputStr","alphaPart","mR","mG","mB","re","noDecimal","alpha256","toHEXString","toRGBString","_linkedElementsProcessed","currStyle","_jscEventsAttached","onclick","origCallback","updateField","inputElms","buttonElms","toggleItemVisible","removeItem","onChangeMaterial","matValue","isHide","tipIndex","resetPosition","onChangeScale","onMeasureAction","toggleFull","onChangeDivide","divideValue","onChangeFloor","floorValue","fullScreen","ele","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","exitFullScreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullScreen","fullscreen","mozFullScreen","webkitIsFullScreen","webkitFullScreen","msFullScreen","dOption","biliNum","use","VueRouter","routes","Home","meta","router","base","process","Vuex","store","Store","hasRefImage","showCompassItem","showBottomBox","showBottomInfo","lightsEditable","mutations","M","actions","productionTip","inserted","App","root","factory","define","DEFAULTS","boundariesElement","preventOverflowOrder","flipBehavior","arrowElement","modifiersIgnored","forceAbsolute","Popper","_reference","jquery","isNotDefined","isConfig","parse","_options","modifier","_getPosition","_setupEventListeners","getOuterSizes","_display","_visibility","styles","marginTop","marginLeft","getOppositePlacement","matched","getPopperClientRect","popperOffsets","offsets","getArrayKeyIndex","keyToFind","getStyleComputedProperty","getOffsetParent","getScrollParent","isFixed","is_numeric","isFinite","unit","isFunction","functionToCheck","getType","getOffsetRect","elementRect","offsetLeft","rectTop","tagName","getOffsetRectRelativeToCustomParent","parentRect","scrollParent","getSupportedPropertyName","prefixes","toCheck","removeAttribute","_removeEventListeners","removeOnDestroy","_originalPlacement","_getOffsets","boundaries","_getBoundaries","runModifiers","updateCallback","defaultConfig","classNames","contentType","arrowTagName","arrowClassNames","arrowAttributes","addClassNames","addAttributes","textContent","querySelectorAll","Element","attribute","isParentFixed","referenceOffsets","popperRect","updateBound","scrollTarget","html","offsetParentRect","getScrollTopValue","getScrollLeftValue","ends","modifiersToRun","isModifierRequired","requesting","requested","applyStyle","prefixedProperty","basePlacement","shiftVariation","shiftOffsets","preventOverflow","order","check","keepTogether","flip","flipped","placementOpposite","variation","flipOrder","_flip","querySelector","arrowStyle","isVertical","altSide","opSide","arrowSize","sideValue","writable","TypeError","nextSource","keysArray","nextIndex","nextKey","desc","getOwnPropertyDescriptor","getCSSValue","defaultView","str1","str2","dp","fill","versions","appVersion","trident","presto","webKit","gecko","mobile","ios","android","iPhone","iPad","webApp","language","browserLanguage","Common","clearNull","convertLayerObj","removable","undoTypes","addPolygons","removePolygons","addPaths","removePaths","updateModelsTexts","unifyModelsTexts","updateModelFillColors","unifyModelFillColors","updateModelLineColors","unifyModelLineColors","updateModelsHeight","unifyModelsHeight","updateModelsTextHeight","unifyModelsTextHeight","updateModelShape","updateModelShapeUndo","updateModelShapeSlightly","updateModelShapeSlightlyUndo","updateModelsPos","updateModelsPosUndo","updateModelScale","updateModelScaleUndo","updateModelRotate","updateModelRotateUndo","shortcutMove","shortcutMoveUndo","shortcutRotate","shortcutRotateUndo","mergeModels","mergeModelsUndo","sliceModel","sliceModelUndo","updatePathPoint","updatePathPointUndo","replacePathsPoint","replacePathsPointUndo","updatePathsType","unifyPathsType","updatePathsDirection","unifyPathsDirection","lst0","lst1","strToCamelStr","arr0","undoNum","getActionName","getAction","actionName","getUndoAction","undoActionName","UndoTypes","CommandExecutor","angleInRadian","execute","add_polygons","remove_polygons","add_paths","removeUnusedSegmentRings","remove_paths","merge_models","slice_model","merge_models_undo","slice_model_undo","update_model_shape","update_model_shape_undo","update_model_shape_slightly","update_model_shape_slightly_undo","shortcut_move","shortcut_move_undo","negate","shortcut_rotate","shortcut_rotate_undo","update_models_position","update_models_position_undo","update_model_scale","update_model_scale_undo","update_model_rotation","update_model_rotation_undo","update_model_fillcolors","preColor","preOpacity","opacities","unify_model_fillcolors","unifyColor","unifyOpacity","update_model_linecolors","outlines","getOutlines","lineColors","unify_model_linecolors","update_models_names","preText","texts","unify_models_names","unifyText","update_models_height","preHeight","heights","unify_models_height","unifyHeight","update_models_text_height","preTextHeight","textHeights","unify_models_text_height","unifyTextHeight","update_path_point","update_path_point_undo","replace_paths_point","replace_paths_point_undo","update_paths_type","pathHolders","preType","pathTypes","unify_paths_type","unifyType","update_paths_direction","preDirection","pathDirections","unify_paths_direction","unifyDirection","cmdExecutor","Action","undoTypeStr","undoObj","undo","redo","equalMeshes","meshes0","meshes1","history","stackLen","stack","eventStackChange","undoLen","redoLen","dispatchStackChange","redoStack","action","latestAction","updated","pi","ee","x_pi","lon","_wgs2gcj","wgs2gcj","_gcj2bd","gcj2bd","theta","bd_lon","bd_lat","dLat","transformLat","dLon","transformLng","radLat","magic","sqrtMagic","mgLat","mgLon","earthRad","mmy","atan","exp","configByUI","refOpacityPathTab","pathHash","location","startsWith","defaultFillColorFloor","defaultLineColorFloor","defaultHeightFloor","txtHeightExtra","noLight","defaultFillColorStr","defaultFillColorFloorStr","configByCode","adhereRadiusForEditing","adhereEdgeDistance","loadSavingFromStart","extraSpan","instancingRect","textOutline","pointAdhereSpanSq","defaultSaveForPreview","defaultSaveForEditor","TYPE_WGS84","baseUrl","encKey","token","mapId","previewToken","previewMapId","heatmap","trackOwner","userId","timeStart","timeEnd","version","updateByVue","beginTime","degreeToRadian","global","__VUE_DEVTOOLS_GLOBAL_HOOK__","runtime","_children","_rawModule","namespaced","getters","getChild","addChild","plugins","strict","_committing","_actions","_actionSubscribers","_mutations","_wrappedGetters","_modules","_modulesNamespaceMap","_subscribers","_watcherVM","_makeLocalGettersCache","commit","devtools","_devtoolHook","emit","replaceState","subscribe","_data","$$state","payload","_withCommit","before","after","$watch","preserveState","unregister","silent","sync","nextTick","getNamespace","defineProperties","forEachMutation","forEachAction","rootGetters","rootState","forEachGetter","forEachChild","mixin","beforeCreate","_init","vuex","mapState","mapGetters","mapMutations","mapActions","createNamespacedHelpers","serializeTool","defaultSaveName","test0","eles","holeNums","JSON","stringify","findHolder","removeDuplicate","retrieveRings","serializeNavPathLayer","deserializeNavPathLayer","ringObjs","previewPath","ringObj","navPaths","lightList","layers","getAllLayers","getLayerById","coordBinding","refLayer","jsonStr","addLayer","elementArr","itemObj","setReferLayerSaving","syncVisibilities","saveForPreview","saving","localStorage","loadFromLocal","scalar0","lineObj","arrowObj","selectedLine","Constants","findedLine","edgeAdhere","adhereDistance","edgeAdhereDistanceSq","adhereDistanceSq","pFrom","pTo","getPathArrow","pf","getPathArrowRotation","oldCircle","newCircle","selectFinding","unselectFinding","updateCost","skipEdge","pointTypeCircleWhite","pointTypeRing","pointTypeRingSelected","pathTypeBold","pathTypeMiddle","pathTypeThin","pathTypeSelected","pathTypeAdding","pathTypeFinded","pathDirBoth","pathDirFromTo","pathDirToFrom","pathDirBan","lightTypeDirection","lightTypePoint","lightTypeSpot","lightTypeHemiSphere","polygonCount","getPolygonCount","getLightType","getLightTypeName","vectorLst","vectices","mesh3d","lineSegments3d","instanceRectScale","indexOnMesh","indexOfGroup","indexInGroup","fixedPointColor","ctrlPointHeight","topOrder","ctrlPoints","mesh3dMat","zHeight","getDefaultHeight","txtHeight","originBox","expandedBox","setTextSprite","textParent","createMeshAndOutlines","addItemsToMesh","meshParent","centroid","arr2d","setIndex","arrStyle","getDefaultFillColorArr","lineColorStyle","getDefaultLineColorArr","getPolygonLineMesh","holeOutline","ctrl","getPolygonCtrlPoint","updateVertices","bufferAttributeToVertices","getArr2","localToGlobal","vLst","attrMesh","computeBoundingBox","globalToLocal","meshPos","lineAttr","updateBox2","expandBy","renewObjects","meshColor","meshOpacity","lineColor","getIndexOfMesh","meshItem","pObj","getPointIndexInCircle","getCtrlPointObj","getMaterialByType","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","emissive","flatShading","nameStr","vectorsToObjXY","setXY","inGroup","onlyVertices","lines2","lines","nextPos","nextPtObj","startPt","endPt","hPos","vPos","minH","createModel3D","createLines3d","dashedOutline","getDashedOutLine","zVal","pasteItem","getTextSprite","surroundLines","midLines","clearLines","updateLines","topLeft","bottomRight","represent","mLeft","mRight","mTop","mBottom","leftLine","bottomLine","spanX","spanY","compareLines","findMinPair","arrHost","arrGuest","lessCompare","minObj","linesHostHorizontal","linesHostVertical","surroundings","middles","linesGuestHorizontal","linesGuestVertical","xCrossed","yCrossed","isEmpty","x0","x1","x2","x3","y0","y1","y2","y3","makeEmpty","expandByPoint","il","SPECIAL_CHARS_REGEXP","MOZ_HACK_REGEXP","ieVersion","camelCase","separator","letter","cls","curClass","classes","clsName","styleName","filters","Singleton","eventLayersChanged","indicatorLayer","_scene","refLayerSaving","customLayers","customLayerGroups","isLayer","getMeshesInLayer","getMarkersInLayer","refer","nav","editing","layerId","reorderLayers","layerItems","layerObjs","renameLayer","newName","getDefaultFillColor","setDefaultFillColor","colorNum","getDefaultLineColor","setDefaultLineColor","setDefaultHeight","Date","getTime","removeLayer","layerItem","toggleHide","toggleLock","setLock","initRefItem","needAll","buildingOnly","getSelectableLayers","minRenderOrder","changeItemsLayer","changeMarkersLayer","excludeRing","usedRings","isRing","unrelated","related","applyRotationFromCoordBinding","parentObj3d","trackPositions","trackLen","trackRemain","progress","skipCount","lineMaterial","LineMaterial","dashed","resolution","lineGeo","LineGeometry","Line2","getTrackPosMarker","playing","flattenToArr","ended","clamp","Spherical2","makeSafe","setFromVector3","setFromCartesianCoords","setFromSpherical2","sinPhiRadius","MapControls","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","enableRotate","enablePan","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","enablePhiChange","zoom0","resetingSpherical","resetingPanOffset","resettingScale","originSpherical","tmpSpherical","getPolarAngle","spherical","getAzimuthalAngle","saveState","sphericalDelta","startReseting","indicatorPos","startMoveCamera","startResetRotation","totalFrames","curSpherical","resetingRotation","startResetMove","currentZoom","resetingMove","lastCall","panOffset","startPhiCamera","phiVal","currentPhi","phiingCamera","zoomPercent","curZoom","zoomingCamera","curRadius","lastQuaternion","rotateLeft","getAutoRotationAngle","zoomChanged","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","changePhiEvent","DOLLY","TOUCH_DOLLY_PAN","TOUCH_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","panStart","panEnd","dollyStart","dollyEnd","dollyDelta","touchStart0","touchEnd0","touchStart1","touchEnd1","preChangeScaleOnly","canvasCenter","getZoomScale","rotateUp","curPhi","panLeft","objectMatrix","setFromMatrixColumn","panUp","deltaX","isPerspectiveCamera","targetDistance","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","handleTouchStartPan","handleTouchStartDollyRotate","handleTouchMovePan","handleTouchMoveDollyRotate","changingPhi","changeScaleOnly","v01","v10","v02","v13","dot0","dot1","dot2","dx0","dx1","dy0","dy1","handleTouchEnd","metaKey","noKeys","Polygon3d","convexLst2","oldMaterial","model3d","mesh4Heatmap","data4Heatmap","range4Heatmap","selectedMaterial","inSelectionAnim","opacityDiff","modelPos","initConvexLst2","meshMatrix","objsXY","convexLst","pointXY","updateSelectionAnim","showHeatmap","dataFromRemote","maxValue","sumVal","bili","createMesh4Heatmap","updateMax4Heatmap","hideHeatmap","Polygon3dReader","saveName","getBindedPolygon3dItem","polygon3d","initializeScene","initLightsByDefault","MapScalar","markerPosLst","initByJsonObj","OrbitControls","Spherical","quat","setFromUnitVectors","quatInverse","setFromSpherical","handleTouchStartRotate","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","kdbush","getX","getY","nodeSize","ArrayType","KDBush","defaultGetX","defaultGetY","ids","coords","range","nextAxis","depth","k","inc","sd","newLeft","newRight","swapItem","swap","within","qy","r2","sqDist","orbitControls","navigatorTool","eventCameraChange","rotate","eventRangeHeatmap","gpsLocIndicatorBase","makeGpsIndicatorBase","gpsLocIndicator","makeGpsIndicatorPlane","resetingCamera","resetingFrames","resetRotating","resetMoving","zooming","phiing","originPhi","reader","heatmapShowing","meshesAll","endResetCamera","initLights","ambiColor","light0","light1","light2","onCameraChange","onCameraScaling","onCameraPhiChange","toScreenPos","standardVector","updateTextSprites","arg","self","screenPos","globalPos","host","Int32Array","coord","neighbors","setGlobalPos4TextLabels","orientationHandler","fromEditor","autoClear","animItems","floorGroupItems","setEnabeRotate","bindingObj","tmp0","startResetingCamera","startResetCameraRotation","startResetCameraOffset","zoomPercentage","changePhiCamera","isTo2D","needReplay","positionsFromRemote","BufferGeometryUtils","computeTangents","uv","normals","uvs","nVertices","tangent","addAttribute","Float32Array","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","jl","handleTriangle","tmp2","n2","handleVertex","z1","z2","s2","t1","t2","mergeBufferGeometries","geometries","useGroups","isIndexed","attributesUsed","morphAttributesUsed","morphAttributes","mergedGeometry","has","mergedUserData","addGroup","indexOffset","mergedIndex","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","isInterleavedBufferAttribute","interleaveAttributes","stride","interleavedBuffer","InterleavedBuffer","setters","iba","InterleavedBufferAttribute","estimateBytesUsed","mem","BYTES_PER_ELEMENT","getIndex","tolerance","EPSILON","hashToIndex","vertexCount","attributeNames","attrArrays","morphAttrsArrays","newIndices","morphAttr","decimalShift","log10","shiftMultiplier","newarray","newMorphArrays","getterFunc","ml","oldAttribute","buffer","setArray","morphAttribute","cons","Uint32Array","newIndexBuffer","Path3","CurvePath","currentPoint","moveTo","lineTo","curve","LineCurve3","curves","TextureStore","startMarker","endMarker","pointHollow","pointRed","pointWhiteDisc","pointDefault","crossOnPath","arrowOnPath","pathIndicators","pathTrackMarkerImg","Image","drawArrow","edgeLen","arrowColor","beginPath","lineWidth","lineCap","lineJoin","strokeStyle","stroke","TextureLoader","load","pointTexture","pointType","getPathIndicatorCanvas","TextSprite","rectData","_geometry","uv0","uv1","uv2","uv3","float32Array","SpriteMaterial","isSprite","HeatmapConfig","defaultRadius","defaultRenderer","defaultGradient","0.25","0.55","0.85","1","defaultMaxOpacity","defaultMinOpacity","defaultBlur","defaultXField","defaultYField","defaultValueField","_coordinator","_radi","_min","_max","_xField","_yField","_valueField","_cfgRadius","_organiseData","dataPoint","forceRender","radi","storedVal","setDataMax","setDataMin","_unOrganizeData","unorganizedData","_onExtremaChange","addData","dataArr","dataLen","organisedEntry","setData","dataPoints","pointsLen","_getInternalData","removeData","setCoordinator","coordinator","getData","Canvas2dRenderer","_getColorPalette","gradientConfig","gradient","paletteCanvas","paletteCtx","getImageData","_getPointTemplate","blurFactor","tplCanvas","tplCtx","createRadialGradient","_prepareData","renderData","xValues","xValuesLen","xValue","yValues","yValuesLen","yValue","shadowCanvas","_renderBoundaries","_width","_height","shadowCtx","cssText","_palette","_templates","_setStyles","renderPartial","_drawAlpha","_colorize","renderAll","_clear","_updateGradient","updateConfig","setDimensions","_blur","_maxOpacity","maxOpacity","_minOpacity","minOpacity","_useGradientOpacity","useGradientOpacity","tpl","rectX","rectY","templateAlpha","globalAlpha","drawImage","maxWidth","img","imgData","palette","finalAlpha","putImageData","getValueAt","getDataURL","toDataURL","Renderer","rendererFn","Util","argsLen","Heatmap","Coordinator","cStore","evtName","_connect","_renderer","_store","_config","onExtremaChange","pluginToLoad","plugin","configure","repaint","heatmapFactory","pluginKey","h337","TubeScalableBufferGeometry","tubularSegments","radialSegments","closed","parameters","computeFrenetFrames","binormals","P","cores","generateBufferData","generateSegment","generateUVs","generateIndices","getPointAt","N","B","toJSON","calcSDF","PI_d2","PI2","angleDiff","srcAngle","dstAngle","toFloat32TypedArr","typedArr","fromBufferAttribute","toVector3Arr","numArr","convertLightObject","drawGridOrigin","closePath","makeCanvasSprite","getRectangelPoints","getCirclePoints","startAngle","pointColor","pointsGeometry","pColor","pointsMaterial","PointsMaterial","sizeAttenuation","Points","measuring","uniforms","ShaderMaterial","vertexShader","point_vertex","fragmentShader","point_fragment","getPolygonGeometry","mergedGeo","measureAreaMaterial","measure_vertex","measure_fragment","isLoop","LineDashedMaterial","getSliceLineSegment","spriteObj","Sprite","repeatX","repeatY","centerX","centerY","getLength","wrapS","wrapT","RepeatWrapping","repeat","shaderMaterial","tube_vertex","tube_fragment","indicator","tubeCurve","uvTransform","alphaTest","fillIndices","param","verticesAll","indices2","verticesAll2","LineSegments","extrudeSettings","steps","bevelEnabled","shape","Shape","Path","ExtrudeBufferGeometry","vector2Lst","ux","uy","getRandHeatmapDataList","convertHeatmapData4Canvas","posDataLst","dataLst","maxVal","heatmapInstance","div","dataList","matrix4","materialProvided","drawLocationBaseCircle","drawLocationMarker","hw","plane","computeFontSize","family","spanDom","fontSize","fontFamily","sizeD","drawTrackPosMarker","sizeObj","txtWidth","fillText","drawPosMarker","arrowHeight","txtColor","vOffset","textOption","fontStr","strLst","maxWdith","measured","measureText","strokeColor","makeMobileCanvasSprite","spriteMaterial","minFilter","LinearFilter","markDefaultColor","createGuideLine","isHorizontal","scalarCamera","minVector","maxVector","minVector2","maxVector2","angle1","angle2","isClockWise"],"mappings":"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","file":"js/app.19f54035.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"306ba210\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"about\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"7e31c25d\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export default function checkNumber(theObj) {\r\n  let reg = /^[0-9]+\\.?[0-9]*$/;\r\n  if (reg.test(theObj)) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction checkAllNumber(theObj) {\r\n  let reg = /^-?[0-9]+\\.?[0-9]*$/;\r\n  if (reg.test(theObj)) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","/**\r\n * @author Eberhard Graether / http://egraether.com/\r\n * @author Mark Lundin \t/ http://mark-lundin.com\r\n * @author Simone Manini / http://daron1337.github.io\r\n * @author Luca Antiga \t/ http://lantiga.github.io\r\n */\r\nimport {Vector2, Vector3, Quaternion, EventDispatcher} from 'three'\r\n\r\nlet TrackballControls = function ( object, domElement ) {\r\n\r\n\tlet _this = this;\r\n\tlet STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\r\n\r\n\tthis.object = object;\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\tlet pressingAlt = false, pressingShift = false;\r\n\r\n\t// API\r\n\tthis.lockFromZ = false;\r\n\tthis.lockFromX = false;\r\n\tlet lockFromY = false;\r\n\tthis.lockFromY = function () {\r\n\t\tlockFromY = true;\r\n\t\tobject.up.set(-1, 0, 0);\r\n\t\tthis.up0 = object.up;\r\n\t};\r\n\r\n\tthis.enabled = true;\r\n\r\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\r\n\r\n\tthis.rotateSpeed = 1.0;\r\n\tthis.zoomSpeed = 1.2;\r\n\tthis.panSpeed = 0.3;\r\n\r\n\tthis.noRotate = false;\r\n\tthis.noZoom = false;\r\n\tthis.noPan = false;\r\n\r\n\tthis.staticMoving = false;\r\n\tthis.dynamicDampingFactor = 0.2;\r\n\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\r\n\r\n\t// internals\r\n\r\n\tthis.target = new Vector3();\r\n\r\n\tlet EPS = 0.000001;\r\n\r\n\tlet lastPosition = new Vector3();\r\n\r\n\tlet _state = STATE.NONE,\r\n\t\t_prevState = STATE.NONE,\r\n\r\n\t\t_eye = new Vector3(),\r\n\r\n\t\t_movePrev = new Vector2(),\r\n\t\t_moveCurr = new Vector2(),\r\n\r\n\t\t_lastAxis = new Vector3(),\r\n\t\t_lastAngle = 0,\r\n\r\n\t\t_zoomStart = new Vector2(),\r\n\t\t_zoomEnd = new Vector2(),\r\n\r\n\t\t_touchZoomDistanceStart = 0,\r\n\t\t_touchZoomDistanceEnd = 0,\r\n\r\n\t\t_panStart = new Vector2(),\r\n\t\t_panEnd = new Vector2();\r\n\r\n\t// for reset\r\n\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.up0 = this.object.up.clone();\r\n\r\n\t// events\r\n\r\n\tlet changeScaleEvent = { type: 'change scale', scaleValue: 1};\r\n\tlet changeEvent = { type: 'change' };\r\n\tlet startEvent = { type: 'start' };\r\n\tlet endEvent = { type: 'end' };\r\n\tlet rotateByZEvent = { type: 'rotateByZ', value: 0};\r\n\r\n\tlet panDelta, zoomDelta, rotateDelta = new Quaternion();\r\n\tlet len0 = this.position0.length();\r\n\tlet tmpVec3 = new Vector3();\r\n\t// methods\r\n\tthis.clearPressing = function() {\r\n\t\tpressingAlt = pressingShift = false;\r\n\t};\r\n\r\n\tthis.startRotateCamera = function (angle, frames) {\r\n\t\trotateDelta.setFromAxisAngle(new Vector3(0, 0, 1), angle / frames)\r\n\t};\r\n\tthis.rotateManually = function () {\r\n\t\t_this.object.up.applyQuaternion(rotateDelta);\r\n\t};\r\n\tthis.startPanCamera = function (newTarget, frames) {\r\n\t\tpanDelta = newTarget.clone().sub(_this.target).divideScalar(frames);\r\n\t};\r\n\tthis.panManually = function () {\r\n\t\t_this.target.add(panDelta);\r\n\t\t_this.object.position.add(panDelta);\r\n\t};\r\n\tthis.moveCamera = function(x, y) {\r\n\t\ttmpVec3.set(x, y, 0);\r\n\t\t_this.target.add(tmpVec3);\r\n\t\t_this.object.position.add(tmpVec3);\r\n\t};\r\n\t//相对于当前相机位置缩放的倍数\r\n\tthis.startZoomCamera = function (zoomDst, frames) {\r\n\t\tzoomDelta = Math.pow(1/zoomDst, 1/frames);\r\n\t\t_eye.copy( _this.object.position).sub(_this.target);\r\n\t};\r\n\tthis.zoomManually = function () {\r\n\t\t_eye.multiplyScalar(zoomDelta);\r\n\t\t_this.object.position.addVectors( _this.target, _eye );\r\n\t\tchangeScaleEvent.scaleValue = _eye.length() / len0;\r\n\t\t_this.dispatchEvent(changeScaleEvent);\r\n\t}\r\n\r\n\tthis.handleResize = function () {\r\n\r\n\t\tif ( this.domElement === document ) {\r\n\r\n\t\t\tthis.screen.left = 0;\r\n\t\t\tthis.screen.top = 0;\r\n\t\t\tthis.screen.width = window.innerWidth;\r\n\t\t\tthis.screen.height = window.innerHeight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlet box = this.domElement.getBoundingClientRect();\r\n\t\t\t// adjustments come from similar code in the jquery offset() function\r\n\t\t\tlet d = this.domElement.ownerDocument.documentElement;\r\n\t\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\r\n\t\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\r\n\t\t\tthis.screen.width = box.width;\r\n\t\t\tthis.screen.height = box.height;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tlet getMouseOnScreen = ( function () {\r\n\r\n\t\tlet vector = new Vector2();\r\n\r\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\r\n\r\n\t\t\tvector.set(\r\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\r\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\r\n\t\t\t);\r\n\r\n\t\t\treturn vector;\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tlet getMouseOnCircle = ( function () {\r\n\r\n\t\tlet vector = new Vector2();\r\n\r\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\r\n\r\n\t\t\tvector.set(\r\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\r\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\r\n\t\t\t);\r\n\r\n\t\t\treturn vector;\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.zoomCameraToPercentage = function (percentage) {\r\n\t\tlet factor = 100 / percentage;\r\n\t\t_eye.copy( _this.position0).sub(_this.target0).multiplyScalar( factor );\r\n\t\t_this.object.position.addVectors( _this.target, _eye );\r\n\r\n\t\tchangeScaleEvent.scaleValue = factor;\r\n\t\t_this.dispatchEvent(changeScaleEvent);\r\n\t}\r\n\r\n\tthis.rotateCamera = ( function () {\r\n\r\n\t\tlet axis = new Vector3(),\r\n\t\t\tquaternion = new Quaternion(),\r\n\t\t\teyeDirection = new Vector3(),\r\n\t\t\tobjectUpDirection = new Vector3(),\r\n\t\t\tobjectSidewaysDirection = new Vector3(),\r\n\t\t\tmoveDirection = new Vector3(),\r\n\t\t\tangle;\r\n\t\tlet zAxis = new Vector3(0, 0, 1);\r\n\t\tlet v1 = new Vector3(), v2 = new Vector3();\r\n\r\n\t\treturn function rotateCamera() {\r\n\r\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\r\n\t\t\tangle = moveDirection.length();\r\n\r\n\t\t\tif ( angle ) {\r\n\t\t\t\tif (this.lockFromZ || this.lockFromX || lockFromY) {\r\n\t\t\t\t\tif (!pressingShift || !pressingAlt) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.lockFromZ) {\r\n\t\t\t\t\tv1.set(_movePrev.x, _movePrev.y, 0);\r\n\t\t\t\t\tv2.set(_moveCurr.x, _moveCurr.y, 0);\r\n\t\t\t\t\tlet v3 = v1.clone().cross(v2);\r\n\t\t\t\t\t// console.log(\"rotateCamera, v3.z = \" + v3.z);\r\n\t\t\t\t\tif (v3.z !== 0) {\r\n\t\t\t\t\t\tif (v3.z < 0) {\r\n\t\t\t\t\t\t\tquaternion.setFromAxisAngle(zAxis, angle);\r\n\t\t\t\t\t\t\trotateByZEvent.value = angle;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tquaternion.setFromAxisAngle(zAxis, -angle);\r\n\t\t\t\t\t\t\trotateByZEvent.value = -angle;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.dispatchEvent(rotateByZEvent);\r\n\t\t\t\t\t\t_this.object.up.applyQuaternion(quaternion);\r\n\t\t\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\t\t\t_this.dispatchEvent( changeEvent );\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (this.lockFromX) {\r\n\t\t\t\t\tv1.set(0, _movePrev.y, -_movePrev.x);\r\n\t\t\t\t\tv2.set(0, _moveCurr.y, -_moveCurr.x);\r\n\t\t\t\t\tlet v3 = v1.clone().cross(v2);\r\n\t\t\t\t\tif (v3.x !== 0) {\r\n\t\t\t\t\t\tif (v3.x < 0) {\r\n\t\t\t\t\t\t\tquaternion.setFromAxisAngle(xAxis, angle);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tquaternion.setFromAxisAngle(xAxis, -angle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.object.up.applyQuaternion(quaternion);\r\n\t\t\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (lockFromY) {\r\n\t\t\t\t\tv1.set(_movePrev.x, 0, -_movePrev.y);\r\n\t\t\t\t\tv2.set(_moveCurr.x, 0, -_moveCurr.y);\r\n\t\t\t\t\tlet v3 = v1.clone().cross(v2);\r\n\t\t\t\t\tif (v3.y !== 0) {\r\n\t\t\t\t\t\tif (v3.y < 0) {\r\n\t\t\t\t\t\t\tquaternion.setFromAxisAngle(yAxis, angle);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tquaternion.setFromAxisAngle(yAxis, -angle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.object.up.applyQuaternion(quaternion);\r\n\t\t\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\r\n\r\n\t\t\t\teyeDirection.copy( _eye ).normalize();\r\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\r\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\r\n\r\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\r\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\r\n\r\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\r\n\r\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\r\n\r\n\t\t\t\tangle *= _this.rotateSpeed;\r\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\t\t_eye.applyQuaternion( quaternion );\r\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\r\n\r\n\t\t\t\t_lastAxis.copy( axis );\r\n\t\t\t\t_lastAngle = angle;\r\n\r\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\r\n\r\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\r\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\r\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\r\n\t\t\t\t_eye.applyQuaternion( quaternion );\r\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_movePrev.copy( _moveCurr );\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\r\n\tthis.zoomCamera = function () {\r\n\r\n\t\tlet factor;\r\n\r\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\r\n\r\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\r\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\r\n\t\t\t_eye.multiplyScalar( factor );\r\n\t\t\tchangeScaleEvent.scaleValue *= factor;\r\n\t\t} else {\r\n\r\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\r\n\r\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\r\n\t\t\t\t_eye.multiplyScalar( factor );\r\n\t\t\t\tchangeScaleEvent.scaleValue *= factor;\r\n\t\t\t}\r\n\r\n\t\t\tif ( _this.staticMoving ) {\r\n\r\n\t\t\t\t_zoomStart.copy( _zoomEnd );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t_this.dispatchEvent( changeScaleEvent );\r\n\r\n\t};\r\n\r\n\tthis.panCamera = ( function () {\r\n\r\n\t\tlet mouseChange = new Vector2(),\r\n\t\t\tobjectUp = new Vector3(),\r\n\t\t\tpan = new Vector3();\r\n\r\n\t\treturn function panCamera() {\r\n\r\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\r\n\r\n\t\t\tif ( mouseChange.lengthSq() ) {\r\n\r\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\r\n\r\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\r\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\r\n\r\n\t\t\t\t_this.object.position.add( pan );\r\n\t\t\t\t_this.target.add( pan );\r\n\r\n\t\t\t\tif ( _this.staticMoving ) {\r\n\r\n\t\t\t\t\t_panStart.copy( _panEnd );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.checkDistances = function () {\r\n\r\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\r\n\r\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\r\n\r\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\r\n\t\t\t\t_zoomStart.copy( _zoomEnd );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\r\n\r\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\r\n\t\t\t\t_zoomStart.copy( _zoomEnd );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.update = function () {\r\n\r\n\t\t_eye.subVectors( _this.object.position, _this.target );\r\n\r\n\t\tif ( ! _this.noRotate ) {\r\n\r\n\t\t\t_this.rotateCamera();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! _this.noZoom ) {\r\n\r\n\t\t\t_this.zoomCamera();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! _this.noPan ) {\r\n\r\n\t\t\t_this.panCamera();\r\n\r\n\t\t}\r\n\r\n\t\t_this.object.position.addVectors( _this.target, _eye );\r\n\r\n\t\t_this.checkDistances();\r\n\r\n\t\t_this.object.lookAt( _this.target );\r\n\r\n\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\r\n\r\n\t\t\t_this.dispatchEvent( changeEvent );\r\n\r\n\t\t\tlastPosition.copy( _this.object.position );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.currentScale = function () {\r\n\t\treturn 1/changeScaleEvent.scaleValue;\r\n\t};\r\n\tthis.resetRotation = function() {\r\n\t\t_this.object.up.copy( _this.up0 );\r\n\t\t_lastAngle = 0;\r\n\t\tsetTimeout(() => _this.dispatchEvent( changeEvent ), 50)\r\n\t\t// _this.update();\r\n\t\t// _this.dispatchEvent( changeEvent )\r\n\t}\r\n\tthis.resetPos = function() {\r\n\t\t_this.target.copy( _this.target0 );\r\n\t\t_this.object.position.copy( _this.position0 );\r\n\r\n\t\t_eye.subVectors( _this.object.position, _this.target );\r\n\r\n\t\t_this.object.lookAt( _this.target );\r\n\r\n\t\t_this.dispatchEvent( changeEvent );\r\n\r\n\t\tlastPosition.copy( _this.object.position );\r\n\t\tchangeScaleEvent.scaleValue = 1;\r\n\t\t_this.dispatchEvent( changeScaleEvent );\r\n\t}\r\n\tthis.reset = function () {\r\n\r\n\t\t_state = STATE.NONE;\r\n\t\t_prevState = STATE.NONE;\r\n\r\n\t\t_this.target.copy( _this.target0 );\r\n\t\t_this.object.position.copy( _this.position0 );\r\n\t\t_this.object.up.copy( _this.up0 );\r\n\r\n\t\t_eye.subVectors( _this.object.position, _this.target );\r\n\r\n\t\t_this.object.lookAt( _this.target );\r\n\r\n\t\tlastPosition.copy( _this.object.position );\r\n\t\t_lastAngle = 0;\r\n\t\t_this.dispatchEvent( changeEvent );\r\n\t};\r\n\r\n\t// listeners\r\n\r\n\tfunction keydown( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\t// window.removeEventListener( 'keydown', keydown );\r\n\t\tpressingShift = event.shiftKey;\r\n\t\tpressingAlt = event.altKey;\r\n\r\n\t\t_prevState = _state;\r\n\r\n\t\tif ( _state !== STATE.NONE ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\r\n\r\n\t\t\t_state = STATE.ROTATE;\r\n\r\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\r\n\r\n\t\t\t_state = STATE.ZOOM;\r\n\r\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\r\n\r\n\t\t\t_state = STATE.PAN;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction keyup( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\t_state = _prevState;\r\n\r\n\t\t// window.addEventListener( 'keydown', keydown, false );\r\n\t\tpressingShift = pressingAlt = false;\r\n\t}\r\n\r\n\tfunction mousedown( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tif (event.target.localName == 'canvas') {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t}\r\n\r\n\t\tif ( _state === STATE.NONE ) {\r\n\r\n\t\t\t_state = event.button;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\r\n\r\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\r\n\t\t\t_movePrev.copy( _moveCurr );\r\n\r\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\r\n\r\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\t\t\t_zoomEnd.copy( _zoomStart );\r\n\r\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\r\n\r\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\t\t\t_panEnd.copy( _panStart );\r\n\r\n\t\t}\r\n\r\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\r\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\r\n\r\n\t\t_this.dispatchEvent( startEvent );\r\n\r\n\t}\r\n\r\n\tfunction mousemove( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\r\n\r\n\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\r\n\r\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\r\n\r\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\r\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\r\n\r\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction mouseup( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\t_state = STATE.NONE;\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\r\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\r\n\t\t_this.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction mousewheel( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tif ( _this.noZoom === true ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.deltaMode ) {\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\t// Zoom in pages\r\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t// Zoom in lines\r\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// undefined, 0, assume pixels\r\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t_this.dispatchEvent( startEvent );\r\n\t\t_this.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction touchstart( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\r\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\r\n\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: // 2 or more\r\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\r\n\t\t\t\tlet dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\t\tlet dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\t\tlet x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\r\n\t\t\t\tlet y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\r\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\r\n\t\t\t\t_panEnd.copy( _panStart );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t_this.dispatchEvent( startEvent );\r\n\r\n\t}\r\n\r\n\tfunction touchmove( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: // 2 or more\r\n\t\t\t\tlet dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\t\tlet dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\t\tlet x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\r\n\t\t\t\tlet y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\r\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction touchend( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 0:\r\n\t\t\t\t_state = STATE.NONE;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\r\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\r\n\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t_this.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction contextmenu( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\r\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\r\n\t\tthis.domElement.removeEventListener( 'wheel', mousewheel, { passive: false } );\r\n\r\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\r\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\r\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', keydown, false );\r\n\t\twindow.removeEventListener( 'keyup', keyup, false );\r\n\r\n\t};\r\n\r\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\r\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\r\n\tthis.domElement.addEventListener( 'wheel', mousewheel, { passive: false } );\r\n\r\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\r\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\r\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\r\n\r\n\twindow.addEventListener( 'keydown', keydown, false );\r\n\twindow.addEventListener( 'keyup', keyup, false );\r\n\r\n\tthis.handleResize();\r\n\r\n\t// force an update at start\r\n\tthis.update();\r\n\r\n};\r\n\r\nTrackballControls.prototype = Object.create( EventDispatcher.prototype );\r\n\r\nexport default TrackballControls;\r\n","/**\r\n * @author arodic / https://github.com/arodic\r\n */\r\nimport {Object3D, Raycaster, Vector3, Quaternion, PerspectiveCamera, OrthographicCamera, DoubleSide,\r\n  MeshBasicMaterial, LineBasicMaterial, BoxBufferGeometry, BufferGeometry, Float32BufferAttribute,\r\n  OctahedronBufferGeometry, TorusBufferGeometry, Mesh, Line, Euler, Color, Matrix4, PlaneBufferGeometry,\r\n  CylinderBufferGeometry} from 'three'\r\n\r\nlet TransformControls2D = function ( camera, domElement ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tdomElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\tthis.visible = false;\r\n\r\n\tvar _gizmo = new TransformControlsGizmo();\r\n\tthis.add( _gizmo );\r\n\r\n\tvar _plane = new TransformControlsPlane();\r\n\tthis.add( _plane );\r\n\r\n\tvar scope = this;\r\n\r\n\t// Define properties with getters/setter\r\n\t// Setting the defined property will automatically trigger change event\r\n\t// Defined properties are passed down to gizmo and plane\r\n\r\n\tdefineProperty( \"camera\", camera );\r\n\tdefineProperty( \"object\", undefined );\r\n\tdefineProperty( \"enabled\", true );\r\n\tdefineProperty( \"axis\", null );\r\n\tdefineProperty( \"mode\", \"rotate\" );\r\n\tdefineProperty( \"translationSnap\", null );\r\n\tdefineProperty( \"rotationSnap\", null );\r\n\tdefineProperty( \"space\", \"world\" );\r\n\tdefineProperty( \"size\", 1 );\r\n\tdefineProperty( \"dragging\", false );\r\n\tdefineProperty( \"showX\", true );\r\n\tdefineProperty( \"showY\", true );\r\n\t// defineProperty( \"showZ\", true );\r\n\r\n\tvar changeEvent = { type: \"change\" };\r\n\tvar mouseDownEvent = { type: \"mouseDown\" };\r\n\tvar mouseUpEvent = { type: \"mouseUp\", mode: scope.mode };\r\n\tvar objectChangeEvent = { type: \"objectChange\" };\r\n\r\n\t// Reusable utility variables\r\n\r\n\tvar ray = new Raycaster();\r\n\r\n\tvar _tempVector = new Vector3();\r\n\tvar _tempVector2 = new Vector3();\r\n\tvar _tempQuaternion = new Quaternion();\r\n\tvar _unit = {\r\n\t\tX: new Vector3( 1, 0, 0 ),\r\n\t\tY: new Vector3( 0, 1, 0 ),\r\n\t\tZ: new Vector3( 0, 0, 1 )\r\n\t};\r\n\r\n\tvar pointStart = new Vector3();\r\n\tvar pointEnd = new Vector3();\r\n\tvar offset = new Vector3();\r\n\tvar rotationAxis = new Vector3();\r\n\tvar rotationAngle = 0;\r\n\r\n\tvar cameraPosition = new Vector3();\r\n\tvar cameraQuaternion = new Quaternion();\r\n\tvar cameraScale = new Vector3();\r\n\r\n\tvar parentPosition = new Vector3();\r\n\tvar parentQuaternion = new Quaternion();\r\n\tvar parentQuaternionInv = new Quaternion();\r\n\tvar parentScale = new Vector3();\r\n\r\n\tvar worldPositionStart = new Vector3();\r\n\tvar worldQuaternionStart = new Quaternion();\r\n\tvar worldScaleStart = new Vector3();\r\n\r\n\tvar worldPosition = new Vector3();\r\n\tvar worldQuaternion = new Quaternion();\r\n\tvar worldQuaternionInv = new Quaternion();\r\n\tvar worldScale = new Vector3();\r\n\r\n\tvar eye = new Vector3();\r\n\r\n\tvar positionStart = new Vector3();\r\n\tvar quaternionStart = new Quaternion();\r\n\tvar scaleStart = new Vector3();\r\n\r\n\t// TODO: remove properties unused in plane and gizmo\r\n\r\n\tdefineProperty( \"worldPosition\", worldPosition );\r\n\tdefineProperty( \"worldPositionStart\", worldPositionStart );\r\n\tdefineProperty( \"worldQuaternion\", worldQuaternion );\r\n\tdefineProperty( \"worldQuaternionStart\", worldQuaternionStart );\r\n\tdefineProperty( \"cameraPosition\", cameraPosition );\r\n\tdefineProperty( \"cameraQuaternion\", cameraQuaternion );\r\n\tdefineProperty( \"pointStart\", pointStart );\r\n\tdefineProperty( \"pointEnd\", pointEnd );\r\n\tdefineProperty( \"rotationAxis\", rotationAxis );\r\n\tdefineProperty( \"rotationAngle\", rotationAngle );\r\n\tdefineProperty( \"eye\", eye );\r\n\r\n\t{\r\n\r\n\t\tdomElement.addEventListener( \"mousedown\", onPointerDown, false );\r\n\t\tdomElement.addEventListener( \"touchstart\", onPointerDown, false );\r\n\t\tdomElement.addEventListener( \"mousemove\", onPointerHover, false );\r\n\t\tdomElement.addEventListener( \"touchmove\", onPointerHover, false );\r\n\t\tdomElement.addEventListener( \"touchmove\", onPointerMove, false );\r\n\t\tdocument.addEventListener( \"mouseup\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchend\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchcancel\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchleave\", onPointerUp, false );\r\n\r\n\t}\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tdomElement.removeEventListener( \"mousedown\", onPointerDown );\r\n\t\tdomElement.removeEventListener( \"touchstart\", onPointerDown );\r\n\t\tdomElement.removeEventListener( \"mousemove\", onPointerHover );\r\n\t\tdocument.removeEventListener( \"mousemove\", onPointerMove );\r\n\t\tdomElement.removeEventListener( \"touchmove\", onPointerHover );\r\n\t\tdomElement.removeEventListener( \"touchmove\", onPointerMove );\r\n\t\tdocument.removeEventListener( \"mouseup\", onPointerUp );\r\n\t\tdomElement.removeEventListener( \"touchend\", onPointerUp );\r\n\t\tdomElement.removeEventListener( \"touchcancel\", onPointerUp );\r\n\t\tdomElement.removeEventListener( \"touchleave\", onPointerUp );\r\n\r\n\t\tthis.traverse( function ( child ) {\r\n\r\n\t\t\tif ( child.geometry ) child.geometry.dispose();\r\n\t\t\tif ( child.material ) child.material.dispose();\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t// Set current object\r\n\tthis.attach = function ( object ) {\r\n\r\n\t\tthis.object = object;\r\n\t\tthis.visible = true;\r\n\t};\r\n\r\n\t// Detatch from object\r\n\tthis.detach = function () {\r\n\r\n\t\tthis.object = undefined;\r\n\t\tthis.visible = false;\r\n\t\tthis.axis = null;\r\n\r\n\t};\r\n\r\n\t// Defined getter, setter and store for a property\r\n\tfunction defineProperty( propName, defaultValue ) {\r\n\r\n\t\tvar propValue = defaultValue;\r\n\r\n\t\tObject.defineProperty( scope, propName, {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tif ( propValue !== value ) {\r\n\r\n\t\t\t\t\tpropValue = value;\r\n\t\t\t\t\t_plane[ propName ] = value;\r\n\t\t\t\t\t_gizmo[ propName ] = value;\r\n\r\n\t\t\t\t\tscope.dispatchEvent( { type: propName + \"-changed\", value: value } );\r\n\t\t\t\t\tchangeEvent.fromSet = true;\r\n\t\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tscope[ propName ] = defaultValue;\r\n\t\t_plane[ propName ] = defaultValue;\r\n\t\t_gizmo[ propName ] = defaultValue;\r\n\r\n\t}\r\n\r\n\t// updateMatrixWorld  updates key transformation variables\r\n\tthis.updateMatrixWorld = function () {\r\n\r\n\t\tif ( this.object !== undefined ) {\r\n\t\t\t// console.log(\"is scene: \" + this.object.isScene + \", type: \" + this.object.type);\r\n\t\t\tthis.object.updateMatrixWorld();\r\n\t\t\tthis.object.parent.matrixWorld.decompose( parentPosition, parentQuaternion, parentScale );\r\n\t\t\tthis.object.matrixWorld.decompose( worldPosition, worldQuaternion, worldScale );\r\n\r\n\t\t\tparentQuaternionInv.copy( parentQuaternion ).inverse();\r\n\t\t\tworldQuaternionInv.copy( worldQuaternion ).inverse();\r\n\r\n\t\t}\r\n\r\n\t\tthis.camera.updateMatrixWorld();\r\n\t\tthis.camera.matrixWorld.decompose( cameraPosition, cameraQuaternion, cameraScale );\r\n\r\n\t\tif ( this.camera instanceof PerspectiveCamera ) {\r\n\r\n\t\t\teye.copy( cameraPosition ).sub( worldPosition ).normalize();\r\n\r\n\t\t} else if ( this.camera instanceof OrthographicCamera ) {\r\n\r\n\t\t\teye.copy( cameraPosition ).normalize();\r\n\r\n\t\t}\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\r\n\r\n\t};\r\n\r\n\tthis.pointerHover = function ( pointer ) {\r\n\r\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n\r\n\t\tray.setFromCamera( pointer, this.camera );\r\n\r\n\t\tvar intersect = ray.intersectObjects( _gizmo.picker[ this.mode ].children, true )[ 0 ] || false;\r\n\r\n\t\tif ( intersect ) {\r\n\r\n\t\t\tthis.axis = intersect.object.name;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.axis = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.pointerDown = function ( pointer ) {\r\n\r\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n\r\n\t\tif ( ( pointer.button === 0 || pointer.button === undefined ) && this.axis !== null ) {\r\n\r\n\t\t\tray.setFromCamera( pointer, this.camera );\r\n\r\n\t\t\tvar planeIntersect = ray.intersectObjects( [ _plane ], true )[ 0 ] || false;\r\n\r\n\t\t\tif ( planeIntersect ) {\r\n\r\n\t\t\t\tvar space = this.space;\r\n\r\n\t\t\t\tif ( this.mode === 'scale' ) {\r\n\r\n\t\t\t\t\tspace = 'local';\r\n\r\n\t\t\t\t} else if ( this.axis === 'E' || this.axis === 'XYZE' || this.axis === 'XYZ' ) {\r\n\r\n\t\t\t\t\tspace = 'world';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( space === 'local' && this.mode === 'rotate' ) {\r\n\r\n\t\t\t\t\tvar snap = this.rotationSnap;\r\n\t\t\t\t\tif ( this.axis === 'Z' && snap ) this.object.rotation.z = Math.round( this.object.rotation.z / snap ) * snap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.object.updateMatrixWorld();\r\n\t\t\t\tthis.object.parent.updateMatrixWorld();\r\n\r\n\t\t\t\tpositionStart.copy( this.object.position );\r\n\t\t\t\tquaternionStart.copy( this.object.quaternion );\r\n\t\t\t\tscaleStart.copy( this.object.scale );\r\n\r\n\t\t\t\tthis.object.matrixWorld.decompose( worldPositionStart, worldQuaternionStart, worldScaleStart );\r\n\r\n\t\t\t\tpointStart.copy( planeIntersect.point ).sub( worldPositionStart );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.dragging = true;\r\n\t\t\tmouseDownEvent.mode = this.mode;\r\n\t\t\tthis.dispatchEvent( mouseDownEvent );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.pointerMove = function ( pointer ) {\r\n\r\n\t\tvar axis = this.axis;\r\n\t\tvar mode = this.mode;\r\n\t\tvar object = this.object;\r\n\t\tvar space = this.space;\r\n\r\n\t\tif ( mode === 'scale' ) {\r\n\r\n\t\t\tspace = 'local';\r\n\r\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\r\n\r\n\t\t\tspace = 'world';\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === undefined || axis === null || this.dragging === false || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n\r\n\t\tray.setFromCamera( pointer, this.camera );\r\n\r\n\t\tvar planeIntersect = ray.intersectObjects( [ _plane ], true )[ 0 ] || false;\r\n\r\n\t\tif ( planeIntersect === false ) return;\r\n\r\n\t\tpointEnd.copy( planeIntersect.point ).sub( worldPositionStart );\r\n\r\n\t\tif ( mode === 'scale' ) {\r\n\r\n\t\t\tif ( axis.search( 'XY' ) !== - 1 ) {\r\n\r\n\t\t\t\tvar d = pointEnd.length() / pointStart.length();\r\n\r\n\t\t\t\tif ( pointEnd.dot( pointStart ) < 0 ) d *= - 1;\r\n\r\n\t\t\t\t_tempVector2.set( d, d, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_tempVector.copy( pointStart );\r\n\t\t\t\t_tempVector2.copy( pointEnd );\r\n\r\n\t\t\t\t_tempVector.applyQuaternion( worldQuaternionInv );\r\n\t\t\t\t_tempVector2.applyQuaternion( worldQuaternionInv );\r\n\r\n\t\t\t\t_tempVector2.divide( _tempVector );\r\n\t\t\t\t_tempVector2.z = 1;\r\n\r\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\r\n\t\t\t\t\t_tempVector2.x = 1;\r\n\t\t\t\t}\r\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\r\n\t\t\t\t\t_tempVector2.y = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Apply scale\r\n\t\t\tobject.scale.copy( scaleStart ).multiply( _tempVector2 );\r\n\r\n\t\t} else if ( mode === 'rotate' ) {\r\n\r\n\t\t\toffset.copy( pointEnd ).sub( pointStart );\r\n\r\n\t\t\tvar ROTATION_SPEED = 20 / worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\r\n\r\n\t\t\trotationAxis.copy( _unit[ 'Z' ] );\r\n\r\n\t\t\t_tempVector.copy( _unit[ 'Z' ] );\r\n\r\n\t\t\tif ( space === 'local' ) {\r\n\r\n\t\t\t\t_tempVector.applyQuaternion( worldQuaternion );\r\n\r\n\t\t\t}\r\n\r\n\t\t\trotationAngle = offset.dot( _tempVector.cross( eye ).normalize() ) * ROTATION_SPEED;\r\n\r\n\t\t\t// Apply rotation snap\r\n\r\n\t\t\tif ( this.rotationSnap ) rotationAngle = Math.round( rotationAngle / this.rotationSnap ) * this.rotationSnap;\r\n\r\n\t\t\tthis.rotationAngle = rotationAngle;\r\n\r\n\t\t\t// Apply rotate\r\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\r\n\r\n\t\t\t\tobject.quaternion.copy( quaternionStart );\r\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( rotationAxis, rotationAngle ) ).normalize();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trotationAxis.applyQuaternion( parentQuaternionInv );\r\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( rotationAxis, rotationAngle ) );\r\n\t\t\t\tobject.quaternion.multiply( quaternionStart ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tchangeEvent.fromSet = false;\r\n\t\tthis.dispatchEvent( changeEvent );\r\n\t\tthis.dispatchEvent( objectChangeEvent );\r\n\r\n\t};\r\n\r\n\tthis.pointerUp = function ( pointer ) {\r\n\r\n\t\tif ( pointer.button !== undefined && pointer.button !== 0 ) return;\r\n\r\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\r\n\r\n\t\t\tmouseUpEvent.mode = this.mode;\r\n\t\t\tthis.dispatchEvent( mouseUpEvent );\r\n\r\n\t\t}\r\n\r\n\t\tthis.dragging = false;\r\n\r\n\t\tif ( pointer.button === undefined ) this.axis = null;\r\n\r\n\t};\r\n\r\n\t// normalize mouse / touch pointer and remap {x,y} to view space.\r\n\r\n\tfunction getPointer( event ) {\r\n\r\n\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\r\n\r\n\t\tvar rect = domElement.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tx: ( pointer.clientX - rect.left ) / rect.width * 2 - 1,\r\n\t\t\ty: - ( pointer.clientY - rect.top ) / rect.height * 2 + 1,\r\n\t\t\tbutton: event.button\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t// mouse / touch event handlers\r\n\r\n\tfunction onPointerHover( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tscope.pointerHover( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\tfunction onPointerDown( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tdocument.addEventListener( \"mousemove\", onPointerMove, false );\r\n\r\n\t\tscope.pointerHover( getPointer( event ) );\r\n\t\tscope.pointerDown( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\tfunction onPointerMove( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tscope.pointerMove( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\tfunction onPointerUp( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tdocument.removeEventListener( \"mousemove\", onPointerMove, false );\r\n\r\n\t\tscope.pointerUp( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\t// TODO: depricate\r\n\r\n\tthis.getMode = function () {\r\n\r\n\t\treturn scope.mode;\r\n\r\n\t};\r\n\r\n\tthis.setMode = function ( mode ) {\r\n\r\n\t\tscope.mode = mode;\r\n\r\n\t};\r\n\r\n\tthis.setTranslationSnap = function ( translationSnap ) {\r\n\r\n\t\tscope.translationSnap = translationSnap;\r\n\r\n\t};\r\n\r\n\tthis.setRotationSnap = function ( rotationSnap ) {\r\n\r\n\t\tscope.rotationSnap = rotationSnap;\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( size ) {\r\n\r\n\t\tscope.size = size;\r\n\r\n\t};\r\n\r\n\tthis.setSpace = function ( space ) {\r\n\r\n\t\tscope.space = space;\r\n\r\n\t};\r\n};\r\n\r\nTransformControls2D.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: TransformControls2D,\r\n\r\n\tisTransformControls2D: true\r\n\r\n} );\r\n\r\n\r\nlet TransformControlsGizmo = function () {\r\n\r\n\t'use strict';\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'TransformControlsGizmo';\r\n\r\n\t// shared materials\r\n\r\n\tvar gizmoMaterial = new MeshBasicMaterial( {\r\n\t\tdepthTest: true,\r\n\t\tdepthWrite: true,\r\n\t\ttransparent: true,\r\n\t\tside: DoubleSide,\r\n\t\tfog: false\r\n\t} );\r\n\r\n\tvar gizmoLineMaterial = new LineBasicMaterial( {\r\n\t\tdepthTest: true,\r\n\t\tdepthWrite: true,\r\n\t\ttransparent: true,\r\n\t\tlinewidth: 1,\r\n\t\tfog: false\r\n\t} );\r\n\r\n\t// Make unique material for each axis/color\r\n\r\n\tvar matInvisible = gizmoMaterial.clone();\r\n\tmatInvisible.opacity = 0.15;\r\n\r\n\tvar matHelper = gizmoMaterial.clone();\r\n\tmatHelper.opacity = 0.33;\r\n\r\n\tvar matRed = gizmoMaterial.clone();\r\n\tmatRed.color.set( 0xff0000 );\r\n\r\n\tvar matGreen = gizmoMaterial.clone();\r\n\tmatGreen.color.set( 0x00ff00 );\r\n\r\n\tvar matBlue = gizmoMaterial.clone();\r\n\tmatBlue.color.set( 0x0000ff );\r\n\r\n\tvar matWhiteTransperent = gizmoMaterial.clone();\r\n\tmatWhiteTransperent.opacity = 0.25;\r\n\r\n\tvar matYellowTransparent = matWhiteTransperent.clone();\r\n\tmatYellowTransparent.color.set( 0xffff00 );\r\n\r\n\t// var matCyanTransparent = matWhiteTransperent.clone();\r\n\t// matCyanTransparent.color.set( 0x00ffff );\r\n\t//\r\n\t// var matMagentaTransparent = matWhiteTransperent.clone();\r\n\t// matMagentaTransparent.color.set( 0xff00ff );\r\n\r\n\tvar matYellow = gizmoMaterial.clone();\r\n\tmatYellow.color.set( 0xffff00 );\r\n\r\n\tvar matLineRed = gizmoLineMaterial.clone();\r\n\tmatLineRed.color.set( 0xff0000 );\r\n\r\n\tvar matLineGreen = gizmoLineMaterial.clone();\r\n\tmatLineGreen.color.set( 0x00ff00 );\r\n\r\n\tvar matLineBlue = gizmoLineMaterial.clone();\r\n\tmatLineBlue.color.set( 0x0000ff );\r\n\r\n\tvar matLineCyan = gizmoLineMaterial.clone();\r\n\tmatLineCyan.color.set( 0x00ffff );\r\n\r\n\tvar matLineMagenta = gizmoLineMaterial.clone();\r\n\tmatLineMagenta.color.set( 0xff00ff );\r\n\r\n\tvar matLineYellow = gizmoLineMaterial.clone();\r\n\tmatLineYellow.color.set( 0xffff00 );\r\n\r\n\t// var matLineGray = gizmoLineMaterial.clone();\r\n\t// matLineGray.color.set( 0x787878 );\r\n\r\n\tvar matLineYellowTransparent = matLineYellow.clone();\r\n\tmatLineYellowTransparent.opacity = 0.25;\r\n\r\n\t// reusable geometry\r\n\r\n\tvar scaleHandleGeometry = new BoxBufferGeometry( 0.125, 0.125, 0.125 );\r\n\r\n\tvar lineGeometry = new BufferGeometry( );\r\n\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\r\n\r\n\tvar CircleGeometry = function ( radius, arc ) {\r\n\r\n\t\tvar geometry = new BufferGeometry( );\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i <= 64 * arc; ++ i ) {\r\n\r\n\t\t\tvertices.push( 0, Math.cos( i / 32 * Math.PI ) * radius, Math.sin( i / 32 * Math.PI ) * radius );\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n\t\treturn geometry;\r\n\r\n\t};\r\n\r\n\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\r\n\tvar gizmoRotate = {\r\n\t\tZ: [\r\n\t\t\t[ new Line( CircleGeometry( 1, 0.5 ), matLineBlue ), null, [ 0, Math.PI / 2, 0 ]],\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.04, 0 ), matBlue ), [ 0.99, 0, 0 ], null, [ 1, 3, 1 ]],\r\n\t\t]\r\n\t};\r\n\r\n\tvar helperRotate = {\r\n\t\tAXIS: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t]\r\n\t};\r\n\r\n\tvar pickerRotate = {\r\n\t\tZ: [\r\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t]\r\n\t};\r\n\r\n\tvar gizmoScale = {\r\n\t\tX: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.8, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineRed ), null, null, [ 0.8, 1, 1 ]]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.8, 0 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineGreen ), null, [ 0, 0, Math.PI / 2 ], [ 0.8, 1, 1 ]]\r\n\t\t],\r\n\t\tXY: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matYellowTransparent ), [ 0.85, 0.85, 0 ], null, [ 2, 2, 0.2 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.855, 0.98, 0 ], null, [ 0.125, 1, 1 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.98, 0.855, 0 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]]\r\n\t\t]\r\n\t};\r\n\r\n\tvar pickerScale = {\r\n\t\tX: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0, 0.5, 0 ]]\r\n\t\t],\r\n\t\tXY: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matInvisible ), [ 0.85, 0.85, 0 ], null, [ 3, 3, 0.2 ]],\r\n\t\t]\r\n\t};\r\n\r\n\tvar helperScale = {\r\n\t\tX: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t]\r\n\t};\r\n\r\n\t// Creates an Object3D with gizmos described in custom hierarchy definition.\r\n\r\n\tvar setupGizmo = function ( gizmoMap ) {\r\n\r\n\t\tvar gizmo = new Object3D();\r\n\r\n\t\tfor ( var name in gizmoMap ) {\r\n\r\n\t\t\tfor ( var i = gizmoMap[ name ].length; i --; ) {\r\n\r\n\t\t\t\tvar object = gizmoMap[ name ][ i ][ 0 ].clone();\r\n\t\t\t\tvar position = gizmoMap[ name ][ i ][ 1 ];\r\n\t\t\t\tvar rotation = gizmoMap[ name ][ i ][ 2 ];\r\n\t\t\t\tvar scale = gizmoMap[ name ][ i ][ 3 ];\r\n\t\t\t\tvar tag = gizmoMap[ name ][ i ][ 4 ];\r\n\r\n\t\t\t\t// name and tag properties are essential for picking and updating logic.\r\n\t\t\t\tobject.name = name;\r\n\t\t\t\tobject.tag = tag;\r\n\r\n\t\t\t\tif ( position ) {\r\n\r\n\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( rotation ) {\r\n\r\n\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( scale ) {\r\n\r\n\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.updateMatrix();\r\n\r\n\t\t\t\tvar tempGeometry = object.geometry.clone();\r\n\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\r\n\t\t\t\tobject.geometry = tempGeometry;\r\n\t\t\t\tobject.renderOrder = Infinity;\r\n\r\n\t\t\t\tobject.position.set( 0, 0, 0 );\r\n\t\t\t\tobject.rotation.set( 0, 0, 0 );\r\n\t\t\t\tobject.scale.set( 1, 1, 1 );\r\n\r\n\t\t\t\tgizmo.add( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgizmo.position.z = 0.0001;\r\n\t\treturn gizmo;\r\n\r\n\t};\r\n\r\n\t// Reusable utility variables\r\n\r\n\tvar tempVector = new Vector3( 0, 0, 0 );\r\n\tvar tempEuler = new Euler();\r\n\tvar alignVector = new Vector3( 0, 1, 0 );\r\n\tvar tempQuaternion = new Quaternion();\r\n\tvar tempQuaternion2 = new Quaternion();\r\n\tvar identityQuaternion = new Quaternion();\r\n\r\n\tvar unitX = new Vector3( 1, 0, 0 );\r\n\tvar unitY = new Vector3( 0, 1, 0 );\r\n\tvar unitZ = new Vector3( 0, 0, 1 );\r\n\r\n\t// Gizmo creation\r\n\r\n\tthis.gizmo = {};\r\n\tthis.picker = {};\r\n\tthis.helper = {};\r\n\r\n\tthis.add( this.gizmo[ \"rotate\" ] = setupGizmo( gizmoRotate ) );\r\n\tthis.add( this.gizmo[ \"scale\" ] = setupGizmo( gizmoScale ) );\r\n\tthis.add( this.picker[ \"rotate\" ] = setupGizmo( pickerRotate ) );\r\n\tthis.add( this.picker[ \"scale\" ] = setupGizmo( pickerScale ) );\r\n\tthis.add( this.helper[ \"rotate\" ] = setupGizmo( helperRotate ) );\r\n\tthis.add( this.helper[ \"scale\" ] = setupGizmo( helperScale ) );\r\n\r\n\t// Pickers should be hidden always\r\n\tthis.picker[ \"rotate\" ].visible = false;\r\n\tthis.picker[ \"scale\" ].visible = false;\r\n\r\n\t// updateMatrixWorld will update transformations and appearance of individual handles\r\n\r\n\tthis.updateMatrixWorld = function () {\r\n\r\n\t\tvar space = this.space;\r\n\r\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\r\n\r\n\t\tvar quaternion = space === \"local\" ? this.worldQuaternion : identityQuaternion;\r\n\r\n\t\t// Show only gizmos for current transform mode\r\n\t\tthis.gizmo[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n\t\tthis.gizmo[ \"scale\" ].visible = this.mode === \"scale\";\r\n\r\n\t\tthis.helper[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n\t\tthis.helper[ \"scale\" ].visible = this.mode === \"scale\";\r\n\r\n\r\n\t\tvar handles = [];\r\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\r\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\r\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\r\n\r\n\t\tfor ( var i = 0; i < handles.length; i ++ ) {\r\n\r\n\t\t\tvar handle = handles[ i ];\r\n\r\n\t\t\t// hide aligned to camera\r\n\r\n\t\t\thandle.visible = true;\r\n\t\t\thandle.rotation.set( 0, 0, 0 );\r\n\t\t\thandle.position.copy( this.worldPosition );\r\n\r\n\t\t\tvar eyeDistance = this.worldPosition.distanceTo( this.cameraPosition );\r\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( eyeDistance * this.size / 7 );\r\n\r\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\r\n\r\n\t\t\tif ( handle.tag === 'helper' ) {\r\n\r\n\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\tif ( handle.name === 'AXIS' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.visible = !! this.axis;\r\n\r\n\t\t\t\t\tif ( this.axis === 'X' ) {\r\n\r\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, 0, 0 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'Y' ) {\r\n\r\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, 0, Math.PI / 2 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'Z' ) {\r\n\r\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, Math.PI / 2, 0 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'E' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else if ( handle.name === 'START' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else if ( handle.name === 'END' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPosition );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\r\n\t\t\t\t\ttempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\r\n\t\t\t\t\ttempVector.applyQuaternion( this.worldQuaternionStart.clone().inverse() );\r\n\t\t\t\t\thandle.scale.copy( tempVector );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thandle.quaternion.copy( quaternion );\r\n\r\n\t\t\t\t\tif ( this.dragging ) {\r\n\r\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis ) {\r\n\r\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If updating helper, skip rest of the loop\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Align handles to current local or world rotation\r\n\r\n\t\t\thandle.quaternion.copy( quaternion );\r\n\r\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\r\n\r\n\t\t\t\t// Hide translate and scale axis facing the camera\r\n\r\n\t\t\t\tvar AXIS_HIDE_TRESHOLD = 0.99;\r\n\t\t\t\tvar PLANE_HIDE_TRESHOLD = 0.2;\r\n\t\t\t\tvar AXIS_FLIP_TRESHOLD = 0.0;\r\n\r\n\r\n\t\t\t\tif ( handle.name === 'X' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( handle.name === 'Y' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'XY' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Flip translate and scale axis ocluded behind another axis\r\n\t\t\t\tif ( handle.name.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tif ( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\thandle.scale.x *= - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tif ( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\thandle.scale.y *= - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t} else if ( this.mode === 'rotate' ) {\r\n\r\n\t\t\t\t// Align handles to current local or world rotation\r\n\r\n\t\t\t\ttempQuaternion2.copy( quaternion );\r\n\t\t\t\talignVector.copy( this.eye ).applyQuaternion( tempQuaternion.copy( quaternion ).inverse() );\r\n\r\n\t\t\t\ttempQuaternion.setFromAxisAngle( unitZ, Math.atan2( alignVector.y, alignVector.x ) );\r\n\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion2, tempQuaternion );\r\n\t\t\t\thandle.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Hide disabled axes\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"X\" ) === - 1 || this.showX );\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"Y\" ) === - 1 || this.showY );\r\n\r\n\t\t\t// highlight selected axis\r\n\r\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\r\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\r\n\r\n\t\t\thandle.material.color.copy( handle.material._color );\r\n\t\t\thandle.material.opacity = handle.material._opacity;\r\n\r\n\t\t\tif ( ! this.enabled ) {\r\n\r\n\t\t\t\thandle.material.opacity *= 0.5;\r\n\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t} else if ( this.axis ) {\r\n\r\n\t\t\t\tif ( handle.name === this.axis ) {\r\n\r\n\t\t\t\t\thandle.material.opacity = 1.0;\r\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\r\n\r\n\t\t\t\t\treturn handle.name === a;\r\n\r\n\t\t\t\t} ) ) {\r\n\r\n\t\t\t\t\thandle.material.opacity = 1.0;\r\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thandle.material.opacity *= 0.25;\r\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTransformControlsGizmo.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: TransformControlsGizmo,\r\n\r\n\tisTransformControlsGizmo: true\r\n\r\n} );\r\n\r\n\r\nlet TransformControlsPlane = function () {\r\n\r\n\t'use strict';\r\n\r\n\tMesh.call( this,\r\n\t\tnew PlaneBufferGeometry( 100000, 100000, 2, 2 ),\r\n\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1 } )\r\n\t);\r\n\r\n\tthis.type = 'TransformControlsPlane';\r\n\r\n\tvar unitX = new Vector3( 1, 0, 0 );\r\n\tvar unitY = new Vector3( 0, 1, 0 );\r\n\tvar unitZ = new Vector3( 0, 0, 1 );\r\n\r\n\tvar tempVector = new Vector3();\r\n\tvar dirVector = new Vector3();\r\n\tvar alignVector = new Vector3();\r\n\tvar tempMatrix = new Matrix4();\r\n\tvar identityQuaternion = new Quaternion();\r\n\r\n\tthis.updateMatrixWorld = function () {\r\n\r\n\t\tvar space = this.space;\r\n\r\n\t\tthis.position.copy( this.worldPosition );\r\n\r\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\r\n\r\n\t\tunitX.set( 1, 0, 0 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\r\n\t\tunitY.set( 0, 1, 0 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\r\n\t\tunitZ.set( 0, 0, 1 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\r\n\r\n\t\t// Align the plane for current transform mode, axis and space.\r\n\r\n\t\talignVector.copy( unitY );\r\n\r\n\t\tswitch ( this.mode ) {\r\n\r\n\t\t\tcase 'translate':\r\n\t\t\tcase 'scale':\r\n\t\t\t\tswitch ( this.axis ) {\r\n\r\n\t\t\t\t\tcase 'X':\r\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitX );\r\n\t\t\t\t\t\tdirVector.copy( unitX ).cross( alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Y':\r\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitY );\r\n\t\t\t\t\t\tdirVector.copy( unitY ).cross( alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'XY':\r\n\t\t\t\t\t\tdirVector.copy( unitZ );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'rotate':\r\n\t\t\tdefault:\r\n\t\t\t\t// special case for rotate\r\n\t\t\t\tdirVector.set( 0, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirVector.length() === 0 ) {\r\n\r\n\t\t\t// If in rotate mode, make the plane parallel to camera\r\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttempMatrix.lookAt( tempVector.set( 0, 0, 0 ), dirVector, alignVector );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( tempMatrix );\r\n\r\n\t\t}\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTransformControlsPlane.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: TransformControlsPlane,\r\n\r\n\tisTransformControlsPlane: true\r\n\r\n} );\r\n\r\nexport default TransformControls2D;\r\n","const ON_LEFT_SIDE = 1\r\nconst ON_RIGHT_SIDE = 2\r\nconst ON_LINE_IN = 3\r\nconst ON_LINE_OUT = 4\r\nconst BETWEEN_IN = 1\r\nconst BETWEEN_ON = 2\r\nconst BETWEEN_NOT = 3\r\nconst POLYGON_INSIDE = 1\r\nconst POLYGON_ON_EDGE = 2\r\nconst POLYGON_OUTSIDE = 3\r\n\r\nlet precision = -1\r\nlet minimum = 1\r\nconst EPS = 0.000001 // Number.EPSILON\r\nconst bool_union = 'union' // 求两个图形的合并\r\nconst bool_a_sub_b = 'subtraction' // 求图形a 减去 图形b后得到的图形列表, 图形a为被挖孔对象\r\nconst bool_intersection = 'intersection' // 求图形a 和 图形b 相交后得到的图形列表\r\n\r\n// 集合A - 集合B，arrA 会被修改，arrB不改变\r\nfunction arrAsubB(arrA, arrB) {\r\n  arrB.forEach(it => {\r\n    const ind = arrA.indexOf(it)\r\n    if (ind >= 0) {\r\n      arrA.splice(ind, 1)\r\n    }\r\n  })\r\n  return arrA\r\n}\r\n\r\n// 集合A 与 集合B 的并集，arrA 会被修改，arrB不改变\r\nfunction arrAonB(arrA, arrB) {\r\n  const shared = []\r\n  arrB.forEach(it => {\r\n    const ind = arrA.indexOf(it)\r\n    if (ind >= 0) {\r\n      shared.push(it)\r\n    }\r\n  })\r\n  arrA.splice(0, arrA.length)\r\n  arrA.push(...shared)\r\n  return arrA\r\n}\r\n\r\nfunction equals(pt0, pt1, notPrecise = true) {\r\n  if (pt0 === pt1) {\r\n    return true\r\n  }\r\n  if (notPrecise) {\r\n    return Math.abs(pt0.x - pt1.x) < minimum && Math.abs(pt0.y - pt1.y) < minimum\r\n  }\r\n  return pt0.x === pt1.x && pt0.y === pt1.y\r\n}\r\n\r\nfunction edges2Points(edges) {\r\n  const points = []\r\n  if (edges.length > 0) {\r\n    edges.forEach(edge => {\r\n      if (points.indexOf(edge.from) < 0) {\r\n        points.push(edge.from)\r\n      }\r\n      if (points.indexOf(edge.to) < 0) {\r\n        points.push(edge.to)\r\n      }\r\n    })\r\n  }\r\n  return points\r\n}\r\n\r\nclass Edge {\r\n  splitBy = []\r\n  _checked = false\r\n  /**\r\n   * @type {Edge}\r\n   */\r\n  reversedTo\r\n  /**\r\n   * @type {Edge}\r\n   */\r\n  reversedFrom\r\n\r\n  /**\r\n   * @param {{x: number, y: number}} from 起点\r\n   * @param {{x: number, y: number}} to 终点\r\n   * @param {number} belong 属于哪个多边形\r\n   * @param {number} holeId 属于多边形的哪个轮廓\r\n   */\r\n  constructor(from, to, belong = -1, holeId = -1) {\r\n    this.from = from\r\n    this.to = to\r\n    this.belong = belong\r\n    this.holeId = holeId\r\n  }\r\n\r\n  addSplitBy(point) {\r\n    if (!equals(this.from, point) && !equals(this.to, point) && this.splitBy.indexOf(point) < 0) {\r\n      this.splitBy.push(point)\r\n      return point\r\n    }\r\n    return null\r\n  }\r\n\r\n  setChecked() {\r\n    this._checked = true\r\n  }\r\n\r\n  getChecked() {\r\n    return this._checked\r\n  }\r\n\r\n  reverseEdge() {\r\n    if (this.reversedTo) {\r\n      return this.reversedTo\r\n    }\r\n    const edge = new Edge(this.to, this.from, this.belong, this.holeId)\r\n    edge.reversedFrom = this\r\n    this.reversedTo = edge\r\n    return edge\r\n  }\r\n\r\n  clone() {\r\n    return new Edge(this.to, this.from, this.belong, this.holeId)\r\n  }\r\n\r\n  setFrom(from) {\r\n    this.from = from\r\n    return this\r\n  }\r\n\r\n  setTo(to) {\r\n    this.to = to\r\n    return this\r\n  }\r\n\r\n  sliceBy(crossPoint) {\r\n    return [this.clone().setTo(crossPoint), this.clone().setFrom(crossPoint)]\r\n  }\r\n\r\n  sourceId() {\r\n    const maxX = Math.max(this.from.x, this.to.x)\r\n    const minX = Math.min(this.from.x, this.to.x)\r\n    const maxY = Math.max(this.from.y, this.to.y)\r\n    const minY = Math.min(this.from.y, this.to.y)\r\n    return maxX + ',' + minX + ';' + maxY + ',' + minY\r\n  }\r\n\r\n  sameSource(edge) {\r\n    if (equals(this.from, edge.from) && equals(this.to, edge.to)) {\r\n      return {similarType: 4} // 端点相同，方向也相同\r\n    } else if (equals(this.from, edge.to) && equals(this.to, edge.from)) {\r\n      return {similarType: 3} // 端点相同，方向正好相反\r\n    }\r\n    return null\r\n  }\r\n\r\n  getMidPoint() {\r\n    return {x: (this.from.x + this.to.x) / 2, y: (this.from.y + this.to.y) / 2}\r\n  }\r\n\r\n  get length() {\r\n    return getDistance(this.from, this.to)\r\n  }\r\n\r\n  lerpToEnd(alpha) {\r\n    const x = this.from.x + (this.to.x - this.from.x) * alpha\r\n    const y = this.from.y + (this.to.y - this.from.y) * alpha\r\n    return {x: x, y: y}\r\n  }\r\n\r\n  vertical() {\r\n    return Math.abs(this.from.x - this.to.x) <= minimum\r\n  }\r\n\r\n  subEdge(other) {\r\n    if (this.sameSource(other)) {\r\n      return []\r\n    }\r\n    const arr = specialSegmentCross(this.from, this.to, other.from, other.to)\r\n    if (arr.length === 0) {\r\n      return [this]\r\n    }\r\n\r\n    const belong = this.belong\r\n    const holeId = this.holeId\r\n    if (arr.indexOf(this.from) >= 0 && arr.indexOf(this.to) >= 0) {\r\n      return []\r\n    } else if (arr.indexOf(this.from) < 0 && arr.indexOf(this.to) < 0) {\r\n      const d1 = getDistanceSquare(this.from, other.from); const d2 = getDistanceSquare(this.from, other.to)\r\n      if (d1 < d2) {\r\n        return [new Edge(this.from, other.from, belong, holeId), new Edge(other.to, this.to, belong, holeId)]\r\n      } else {\r\n        return [new Edge(this.from, other.to, belong, holeId), new Edge(other.from, this.to, belong, holeId)]\r\n      }\r\n    } else {\r\n      const pc = arr.indexOf(other.from) >= 0 ? other.from : other.to\r\n      if (arr.indexOf(this.from) >= 0) {\r\n        return [new Edge(pc, this.to, belong, holeId)]\r\n      } else {\r\n        return [new Edge(this.from, pc, belong, holeId)]\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass Box2 {\r\n  constructor(min, max) {\r\n    this.min = min\r\n    this.max = max\r\n  }\r\n\r\n  // p正好在二维包围盒的边上时，return false;\r\n  contain(p) {\r\n    const yMid = p.y < this.max.y && p.y > this.min.y\r\n    const xMid = p.x < this.max.x && p.x > this.min.x\r\n    return ((xMid && yMid) ||\r\n      (p.x === this.max.x && this.max.x === this.min.x && yMid) ||\r\n      (p.y === this.max.y && this.max.y === this.min.y && xMid))\r\n  }\r\n\r\n  scale(scalar) {\r\n    const min = this.min\r\n    const max = this.max\r\n    const center = {x: (min.x + max.x) / 2, y: (min.y + max.y) / 2}\r\n    let dx = center.x - min.x\r\n    let dy = center.y - min.y\r\n    dx *= scalar\r\n    dy *= scalar\r\n    min.x = center.x - dx\r\n    min.y = center.y - dy\r\n    max.x = center.x + dx\r\n    max.y = center.y + dy\r\n  }\r\n}\r\n\r\nfunction findBox2(vertices) {\r\n  const max = {}\r\n  const min = {}\r\n  const arrX = []\r\n  const arrY = []\r\n  vertices.forEach(it => {\r\n    arrX.push(it.x)\r\n    arrY.push(it.y)\r\n  })\r\n  max.x = Math.max(...arrX)\r\n  max.y = Math.max(...arrY)\r\n  min.x = Math.min(...arrX)\r\n  min.y = Math.min(...arrY)\r\n  return new Box2(min, max)\r\n}\r\n\r\nfunction findOutestPoint(vertices, box2) {\r\n  const distances = []\r\n  const boxCenter = {x: (box2.max.x + box2.min.x) / 2, y: (box2.max.y + box2.min.y) / 2}\r\n  for (const vertex of vertices) {\r\n    if (box2.contain(vertex)) {\r\n      distances.push(-1)\r\n    } else {\r\n      distances.push(getDistanceSquare(boxCenter, vertex))\r\n    }\r\n  }\r\n  const max = Math.max(...distances)\r\n  if (max < 0) {\r\n    return null\r\n  }\r\n  return vertices[distances.indexOf(max)]\r\n}\r\n\r\nfunction findStartEdgeOfHole(restEdges0, restEdges1) {\r\n  const restEdges = restEdges0.concat(restEdges1)\r\n  const filtered = restEdges.filter(arr => arr.length > 0)\r\n  if (filtered.length === 0) {\r\n    return null\r\n  }\r\n  return filtered[0][0]\r\n}\r\n\r\nfunction findNextEdgeForHole(curEdge, restEdges0, restEdges1) {\r\n  const flatten = []; const candidates = []\r\n  restEdges0.concat(restEdges1).forEach(arr => flatten.push(...arr))\r\n  flatten.forEach(edge => {\r\n    if (edge.from === curEdge.to) { candidates.push(edge) }\r\n  })\r\n  if (candidates.length === 0) {\r\n    console.error('error! findNextEdgeForHole failed to find next')\r\n    return null\r\n  }\r\n  for (const edge of candidates) {\r\n    if (edge.belong !== curEdge.belong) {\r\n      return edge\r\n    }\r\n  }\r\n  return candidates[0]\r\n}\r\n\r\n/**\r\n * 返回集合 splited0 和 splited1 中一条最靠近边缘的Edge\r\n * @param {Edge[]} splited0\r\n * @param {Edge[]} splited1\r\n * @return {Edge|null}\r\n */\r\nfunction findStartEdge(splited0, splited1) {\r\n  const vertices0 = edges2Points(splited0); const vertices1 = edges2Points(splited1)\r\n  const box0 = findBox2(vertices0); const box1 = findBox2(vertices1)\r\n  let edges = splited1\r\n  let p = findOutestPoint(vertices1, box0)\r\n  if (p == null) {\r\n    edges = splited0\r\n    p = findOutestPoint(vertices0, box1)\r\n  }\r\n  for (const edge of edges) {\r\n    if (edge.from === p) {\r\n      return edge\r\n    }\r\n  }\r\n  for (const edge of edges) {\r\n    if (edge.to === p) {\r\n      return edge\r\n    }\r\n  }\r\n  console.log('findStartEdge shall not go here')\r\n  return null\r\n}\r\n\r\nfunction findNextEdge(curEdge, edges0, edges1) {\r\n  let first, second\r\n  // if (edges0[0].belong < 0) {\r\n  //   first = edges0, second = edges1;\r\n  // } else if (edges1[0].belong < 0) {\r\n  //   first = edges1, second = edges0;\r\n  // } else\r\n  if (edges0.length > 0 && curEdge.belong === edges0[0].belong) {\r\n    first = edges1\r\n    second = edges0\r\n  } else {\r\n    first = edges0\r\n    second = edges1\r\n  }\r\n  for (let i = 0; i < first.length; i++) {\r\n    const edge = first[i]\r\n    if (edge.from === curEdge.to && curEdge.reverseEdge() !== edge) {\r\n      return edge\r\n    }\r\n  }\r\n  for (let i = 0; i < second.length; i++) {\r\n    const edge = second[i]\r\n    if (edge.from === curEdge.to) {\r\n      return edge\r\n    }\r\n  }\r\n  console.error('findNextEdge shall never go here')\r\n  return null\r\n}\r\n\r\n/**\r\n * 根据 剩余边列表restEdges0， 剩余边列表restEdges1，返回由二维点组成的二维数组output\r\n * @param {Edge[][]} restEdges0\r\n * @param {Edge[][]} restEdges1\r\n * @param {{x: number, y: number}[][]} output\r\n */\r\nfunction findHoles(restEdges0, restEdges1, output) {\r\n  const firstEdge = findStartEdgeOfHole(restEdges0, restEdges1)\r\n  if (firstEdge == null) {\r\n    return\r\n  }\r\n  let holePoints = []\r\n  let curEdge = firstEdge\r\n  let holeStart = -1\r\n  holePoints.push(curEdge.from)\r\n  while (true) {\r\n    curEdge = findNextEdgeForHole(curEdge, restEdges1, restEdges0)\r\n    if (curEdge != null) {\r\n      holePoints.push(curEdge.from)\r\n      // check if hole already found\r\n      if (holePoints.length > 2) {\r\n        holeStart = holePoints.indexOf(curEdge.to)\r\n        if (holeStart >= 0) {\r\n          holePoints = holePoints.slice(holeStart, holePoints.length)\r\n          break\r\n        }\r\n      }\r\n    } else {\r\n      break\r\n    }\r\n  }\r\n  if (curEdge == null) {\r\n    return\r\n  }\r\n  const restEdges00 = getRestEdges(restEdges0, holePoints)\r\n  const restEdges01 = getRestEdges(restEdges1, holePoints)\r\n  output.push(holePoints)\r\n  findHoles(restEdges00, restEdges01, output)\r\n}\r\n\r\n/**\r\n *\r\n * @param {Edge[][]} edges2 待裁减的边\r\n * @param {{x: number, y: nubmer}[]} excludePoints\r\n * @param {{x: number, y: nubmer}[]} specialPoints\r\n * @return {Edge[][]}\r\n */\r\nfunction getRestEdges(edges2, excludePoints, specialPoints) {\r\n  const restEdges2 = []\r\n  edges2.forEach(edges => {\r\n    const restEdges = []\r\n    edges.forEach(edge => {\r\n      if (excludePoints.indexOf(edge.from) < 0 && excludePoints.indexOf(edge.to) < 0) {\r\n        // 如果边的两端都不在 excludePoints 数组中，则需要保留\r\n        restEdges.push(edge)\r\n      }\r\n      if (specialPoints && specialPoints.length > 0) {\r\n        if (specialPoints.indexOf(edge.from) > -1 || specialPoints.indexOf(edge.to) > -1) {\r\n          if (excludePoints.indexOf(edge.from) < 0 || excludePoints.indexOf(edge.to) < 0) {\r\n            // 如果边的一端 不在 excludePoints 数组中，另一端在specialPoints 数组中， 也需要保留\r\n            restEdges.push(edge)\r\n          }\r\n        }\r\n      }\r\n    })\r\n    restEdges2.push(restEdges)\r\n  })\r\n  return restEdges2\r\n}\r\n\r\n// 求两线段的交点\r\nfunction segmentsCross(p1, p2, q1, q2) {\r\n  if (p1 === q1 || p1 === q2) {\r\n    return p1\r\n  }\r\n  if (p2 === q1 || p2 === q2) {\r\n    return p2\r\n  }\r\n  const cross = getCrossPoint(p1, p2, q1, q2)\r\n  if (cross == null) {\r\n    // the two line is parallel\r\n    if (getPointOnVectorSide(p1, p2, q1) === ON_LINE_IN) {\r\n      return q1\r\n    }\r\n    if (getPointOnVectorSide(p1, p2, q2) === ON_LINE_IN) {\r\n      return q2\r\n    }\r\n    return null\r\n  }\r\n\r\n  if (isBetween(cross.x, p1.x, p2.x) && isBetween(cross.x, q1.x, q2.x) &&\r\n    isBetween(cross.y, p1.y, p2.y) && isBetween(cross.y, q1.y, q2.y)) {\r\n    const arr = [p1, p2, q1, q2]\r\n    for (const pt of arr) {\r\n      if (equals(pt, cross, true)) {\r\n        return pt\r\n      }\r\n    }\r\n    return cross\r\n  }\r\n  return null\r\n}\r\n\r\n// 两条直线的四点共线时，求交点\r\nfunction specialSegmentCross(p0, p1, q0, q1) {\r\n  const target = []\r\n  const flag0 = getPointOnVectorSide(p0, p1, q0)\r\n  const flag1 = getPointOnVectorSide(p0, p1, q1)\r\n  const arr = [ON_LINE_OUT, ON_LINE_IN]\r\n  if (arr.indexOf(flag0) < 0 || arr.indexOf(flag1) < 0) {\r\n    return target\r\n  }\r\n  const pBox = findBox2([p0, p1])\r\n  if (pBox.contain(q1)) {\r\n    target.push(q1)\r\n  }\r\n  if (pBox.contain(q0)) {\r\n    target.push(q0)\r\n  }\r\n  const qBox = findBox2([q0, q1])\r\n  if (qBox.contain(p1)) {\r\n    target.push(p1)\r\n  }\r\n  if (qBox.contain(p0)) {\r\n    target.push(p0)\r\n  }\r\n  return target\r\n}\r\n\r\n/**\r\n * 如果两个轮廓，有相同坐标的顶点，则使它们的数组共有一个顶点对象\r\n * @param {{x: number, y: number}[]} vertices0\r\n * @param {{x: number, y: number}[]} vertices1\r\n * @return {number} 共用的顶点数目\r\n */\r\nfunction mergeVertices(vertices0, vertices1) {\r\n  const map = []; let mergeCount = 0\r\n  for (let i = 0; i < vertices0.length; i++) {\r\n    for (let j = 0; j < vertices1.length; j++) {\r\n      if (!map[j] && equals(vertices1[j], vertices0[i])) {\r\n        vertices1[j] = vertices0[i]\r\n        vertices1[j].shared = true\r\n        map[j] = 1\r\n        mergeCount++\r\n      }\r\n    }\r\n  }\r\n  if (equals(vertices1[0], vertices1[vertices1.length - 1])) {\r\n    vertices1[vertices1.length - 1] = vertices1[0]\r\n    vertices1[0].sharedBySelf = true\r\n  }\r\n  return mergeCount\r\n}\r\n\r\nfunction getValidIndex(index, total) {\r\n  if (index >= total) {\r\n    return index % total\r\n  }\r\n  if (index < 0) {\r\n    return total + index % total\r\n  }\r\n  return index\r\n}\r\n\r\n// return true if number m is between a and b\r\nfunction isBetween(m, a, b) {\r\n  if (m >= a && m <= b) {\r\n    return true\r\n  }\r\n  if (m >= b && m <= a) {\r\n    return true\r\n  }\r\n  const ma = Math.abs(m - a); const mb = Math.abs(m - b)\r\n  if (ma <= minimum || mb <= minimum) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\n// 求两直线的交点\r\nfunction getCrossPoint(start1, end1, start2, end2) {\r\n  const a1 = end1.y - start1.y\r\n  const b1 = start1.x - end1.x\r\n  const c1 = end1.x * start1.y - start1.x * end1.y\r\n  const a2 = end2.y - start2.y\r\n  const b2 = start2.x - end2.x\r\n  const c2 = end2.x * start2.y - start2.x * end2.y\r\n  const denominator = (a2 * b1 - a1 * b2)\r\n  if (denominator === 0) {\r\n    return null\r\n  }\r\n  const x = (b2 * c1 - b1 * c2) / denominator\r\n  const y = (a1 * c2 - a2 * c1) / denominator\r\n  return {x: x, y: y}\r\n}\r\n\r\n// 求线段和直线的交点\r\nfunction getLineSegmentCrossPoint(lineStart, lineEnd, segmentStart, segmentEnd) {\r\n  const crossPoint = getCrossPoint(lineStart, lineEnd, segmentStart, segmentEnd)\r\n  if (!crossPoint) {\r\n    return null\r\n  }\r\n  if (isBetween(crossPoint.x, segmentStart.x, segmentEnd.x) && isBetween(crossPoint.y, segmentStart.y, segmentEnd.y)) {\r\n    return crossPoint\r\n  }\r\n  return null\r\n}\r\n\r\nfunction getDistance(v1, v2) {\r\n  return Math.sqrt(getDistanceSquare(v1, v2))\r\n}\r\n\r\nfunction getDistanceSquare(v1, v2) {\r\n  const dx = v2.x - v1.x\r\n  const dy = v2.y - v1.y\r\n  return dx * dx + dy * dy\r\n}\r\n\r\nfunction getAngleWithX_axis(v1, v2) {\r\n  const distance = getDistance(v1, v2)\r\n  const dx = v2.x - v1.x\r\n  const cosA = dx / distance\r\n  if (v2.y >= v1.y) {\r\n    return Math.acos(cosA)\r\n  } else {\r\n    return 2 * Math.PI - Math.acos(cosA)\r\n  }\r\n}\r\n\r\nfunction getAngle(a, b, c) {\r\n  const a1 = getAngleWithX_axis(b, a)\r\n  const a2 = getAngleWithX_axis(b, c)\r\n  const ret = Math.abs(a1 - a2)\r\n  if (ret > Math.PI) {\r\n    return Math.PI * 2 - ret\r\n  } else {\r\n    return ret\r\n  }\r\n}\r\n\r\nfunction threePointInOneLine(v1, v2, v3) {\r\n  if (v1.x === v2.x) {\r\n    return v3.x === v2.x\r\n  }\r\n  if (v2.x === v3.x) {\r\n    return v1.x === v2.x\r\n  }\r\n  const k12 = (v1.y - v2.y) / (v1.x - v2.x)\r\n  const k23 = (v3.y - v2.y) / (v3.x - v2.x)\r\n  return Math.abs(k12 - k23) < 0.0002\r\n}\r\n\r\n// return point p's position regards vector v1 to v2, use 3d right hand's coordinate system\r\nfunction getPointOnVectorSide(v1, v2, p) {\r\n  if (equals(v1, p) || equals(v2, p)) {\r\n    return ON_LINE_IN\r\n  }\r\n  const v1_v2 = {x: v2.x - v1.x, y: v2.y - v1.y} // vector v1 to v2\r\n  const v1_p = {x: p.x - v1.x, y: p.y - v1.y} // vector v1 to p\r\n  const cross_product = v1_v2.x * v1_p.y - v1_p.x * v1_v2.y\r\n\r\n  if (cross_product > EPS) {\r\n    // return ON_RIGHT_SIDE;\r\n    return ON_LEFT_SIDE\r\n  } else if (cross_product < -EPS) {\r\n    // return ON_LEFT_SIDE;\r\n    return ON_RIGHT_SIDE\r\n  } else {\r\n    if (isBetween(p.x, v1.x, v2.x) && isBetween(p.y, v1.y, v2.y)) {\r\n      return ON_LINE_IN\r\n    }\r\n    return ON_LINE_OUT\r\n  }\r\n}\r\n\r\nfunction isClockwiseSquence(vertices) {\r\n  let leftAngleSum = 0\r\n  let rightAngleSum = 0\r\n  for (let i = 0; i < vertices.length; i++) {\r\n    const v2Index = getValidIndex(i + 1, vertices.length)\r\n    const pIndex = getValidIndex(i + 2, vertices.length)\r\n    if (threePointInOneLine(vertices[i], vertices[v2Index], vertices[pIndex])) {\r\n      continue\r\n    }\r\n    const curSide = getPointOnVectorSide(vertices[i], vertices[v2Index], vertices[pIndex])\r\n    const angle = Math.PI - getAngle(vertices[i], vertices[v2Index], vertices[pIndex])\r\n    if (curSide === ON_LEFT_SIDE) {\r\n      vertices[v2Index].mark = 'left'\r\n      leftAngleSum += angle\r\n    } else if (curSide === ON_RIGHT_SIDE) {\r\n      vertices[v2Index].mark = 'right'\r\n      rightAngleSum += angle\r\n    }\r\n  }\r\n  if (rightAngleSum === 0 && leftAngleSum === 0) {\r\n    console.error('序列既不是顺时针，也不是逆时针的')\r\n    console.log('vertices is invalid, all points on one line')\r\n    return false\r\n  }\r\n  // Math.abs(rightAngleSum - leftAngleSum)/2 equal with Math.PI\r\n  if (rightAngleSum > leftAngleSum) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\n// 去除 相邻的 重复顶点\r\nfunction removeNearDuplicate(pointsCircle) {\r\n  const target = []; let current = null\r\n  for (const point of pointsCircle) {\r\n    if (current == null || current.x !== point.x || current.y !== point.y) {\r\n      target.push(point)\r\n      current = point\r\n    }\r\n  }\r\n  if (equals(target[0], target[target.length - 1])) {\r\n    target.pop()\r\n  }\r\n  return target\r\n}\r\n\r\n/**\r\n * 去除 毛刺点\r\n * @param {{x: number, y: number}[]} pointsCircle\r\n * @return {{x: number, y: number}[]}\r\n */\r\nfunction removeRags(pointsCircle) {\r\n  const map = {}; const keys = []\r\n  for (let i = 0; i < pointsCircle.length; i++) {\r\n    const point = pointsCircle[i]\r\n    const key = point.x + ',' + point.y\r\n    if (map[key] === undefined) {\r\n      map[key] = [i]\r\n    } else {\r\n      map[key].push(i)\r\n      if (keys.indexOf(key) < 0) {\r\n        keys.push(key)\r\n      }\r\n    }\r\n  }\r\n  for (let i = keys.length - 1; i > -1; i--) {\r\n    const key = keys[i]\r\n    const start = map[key][0] + 1; const deleteCount = map[key][1] - map[key][0]\r\n    if (deleteCount > 3) {\r\n      continue // 避免数组首尾节点一样时 引发bug\r\n    }\r\n    const point = pointsCircle[start - 1]\r\n    const key0 = point.x + ',' + point.y\r\n    if (key0 === key) {\r\n      pointsCircle.splice(start, deleteCount)\r\n    }\r\n  }\r\n  return pointsCircle\r\n}\r\n\r\n/**\r\n * 精简 不带孔多边形的点序列, 如果顶点在多边形的边上则清除它\r\n * @param {{x: number, y: number}[]} pointsCircle\r\n * @return {{x: number, y: number}[]}\r\n */\r\nfunction simplifyCircle(pointsCircle) {\r\n  const keyPoints = []\r\n  for (let i = 0; i < pointsCircle.length; i++) {\r\n    let pre = i - 1; let nxt = i + 1\r\n    if (pre < 0) {\r\n      pre = pointsCircle.length - 1\r\n    }\r\n    if (nxt > pointsCircle.length - 1) {\r\n      nxt = 0\r\n    }\r\n    const prePoint = pointsCircle[pre]\r\n    const curPoint = pointsCircle[i]\r\n    const nxtPoint = pointsCircle[nxt]\r\n    const flag = getPointOnVectorSide(prePoint, nxtPoint, curPoint)\r\n    if (flag !== ON_LINE_IN) {\r\n      keyPoints.push(curPoint)\r\n    }\r\n  }\r\n  return keyPoints\r\n}\r\n\r\n// 返回 二维点 的二维数组\r\nfunction parseToCircles(verticesHoles, noSimplify) {\r\n  const vecLst = verticesHoles[0]; const holeIndices = verticesHoles[1]\r\n  let circles = []; const circles2 = []\r\n  if (holeIndices.length > 0) {\r\n    for (let i = 0; i < holeIndices.length; i++) {\r\n      let arr\r\n      if (i === 0) {\r\n        arr = vecLst.slice(0, holeIndices[i])\r\n      } else {\r\n        arr = vecLst.slice(holeIndices[i - 1], holeIndices[i])\r\n      }\r\n      circles.push(arr)\r\n    }\r\n    circles.push(vecLst.slice(holeIndices[holeIndices.length - 1], vecLst.length))\r\n  } else {\r\n    circles = [vecLst]\r\n  }\r\n  circles = circles.map(circle => removeNearDuplicate(circle))\r\n  circles.forEach((circle, index) => {\r\n    removeRags(circle)\r\n    if (index === 0) {\r\n      if (isClockwiseSquence(circle)) circle.reverse()\r\n    } else {\r\n      if (!isClockwiseSquence(circle)) circle.reverse()\r\n    }\r\n    if (!noSimplify) {\r\n      circles2.push(simplifyCircle(circle))\r\n    }\r\n  })\r\n  return noSimplify ? circles : circles2\r\n}\r\n\r\n/**\r\n * 设置每个Edge的 splitBy 属性，为拆分边做准备\r\n * @param {Edge[]} edges0\r\n * @param {Edge[]} edges1\r\n * @return {boolean}\r\n */\r\nfunction splitTwoEdges(edges0, edges1) {\r\n  const crossLst = []\r\n  for (let i = 0; i < edges0.length; i++) {\r\n    const a = edges0[i]\r\n    for (let j = 0; j < edges1.length; j++) {\r\n      const b = edges1[j]\r\n      const cross = segmentsCross(a.from, a.to, b.from, b.to)\r\n      if (cross == null) {\r\n        continue\r\n      }\r\n\r\n      let pt = a.addSplitBy(cross)\r\n      if (pt) { crossLst.push(pt) }\r\n      pt = b.addSplitBy(cross)\r\n      if (pt) { crossLst.push(pt) }\r\n    }\r\n  }\r\n  return crossLst.length > 0\r\n}\r\n\r\n/**\r\n * 返回true 表示两个多边形轮廓的线段之间有交点\r\n * @param {Edge[][]} edges4Circles0\r\n * @param {Edge[][]} edges4Circles1\r\n * @return {boolean}\r\n */\r\nfunction splitEdgesOfCircles(edges4Circles0, edges4Circles1) {\r\n  let mergeSuccess = false\r\n  for (const edges0 of edges4Circles0) {\r\n    for (const edges1 of edges4Circles1) {\r\n      const splited = splitTwoEdges(edges0, edges1)\r\n      mergeSuccess = mergeSuccess || splited\r\n    }\r\n  }\r\n  return mergeSuccess\r\n}\r\n\r\n/**\r\n * @param {{x: number, y: number}[][]} circles\r\n * @param {number} polygonIndex\r\n * @return {Edge[][]}\r\n */\r\nfunction createEdges4Circles(circles, polygonIndex) {\r\n  const edges2 = []\r\n  let count = 0\r\n  for (const circle of circles) {\r\n    const edges = createEdges(circle, polygonIndex, count++)\r\n    edges2.push(edges)\r\n  }\r\n  return edges2\r\n}\r\n\r\nfunction createEdges(vertices, polygonIndex, holeId) {\r\n  const edges = []\r\n  let i\r\n  for (i = 0; i < vertices.length; i++) {\r\n    if (i === vertices.length - 1) {\r\n      edges[i] = new Edge(vertices[i], vertices[0], polygonIndex, holeId || 0)\r\n    } else {\r\n      edges[i] = new Edge(vertices[i], vertices[i + 1], polygonIndex, holeId || 0)\r\n    }\r\n  }\r\n\r\n  return edges\r\n}\r\n\r\n/**\r\n * 根据 Edge 的 splitBy 属性把线段拆分为多段\r\n * @param {Edge} edge\r\n * @return {Edge[]}\r\n */\r\nfunction processSplitBy(edge) {\r\n  if (edge.splitBy.length === 0) {\r\n    return [edge]\r\n  }\r\n  const distanceSqs = []\r\n  edge.splitBy.forEach(it => distanceSqs.push(getDistanceSquare(edge.from, it)))\r\n  const distanceSqsSorted = distanceSqs.slice().sort((a, b) => a - b)\r\n  let from = edge.from; let to\r\n  const splited = []\r\n  for (let i = 0; i < distanceSqsSorted.length; i++) {\r\n    const index = distanceSqs.indexOf(distanceSqsSorted[i])\r\n    to = edge.splitBy[index]\r\n    // if (from.x == to.x && from.y == to.y) {\r\n    //     console.log(\"strange edge 0 found\");\r\n    // }\r\n    splited.push(new Edge(from, to, edge.belong, edge.holeId))\r\n    from = to\r\n  }\r\n  splited.push(new Edge(to, edge.to, edge.belong, edge.holeId))\r\n  return splited\r\n}\r\n\r\n/**\r\n * @param {Edge[][]} edges20\r\n * @param {Edge[][]} edges21\r\n * @param {{x: number, y: number}[][][]} polygons20\r\n * @param {{x: number, y: number}[][][]} polygons21\r\n * @param {string} boolType\r\n */\r\nfunction removeEdges(edges20, edges21, polygons20, polygons21, boolType) {\r\n  removeOutlineEdges(edges20[0], edges21[0], polygons20, polygons21, boolType)\r\n  const holeEdges0 = []; const holeEdges1 = []\r\n  const holes0 = edges20.slice(1); const holes1 = edges21.slice(1)\r\n  holes0.forEach(edges => holeEdges0.push(...edges))\r\n  holes1.forEach(edges => holeEdges1.push(...edges))\r\n\r\n  const len0 = holeEdges0.length; const len1 = holeEdges1.length\r\n  if (holeEdges0.length > 0 && holeEdges1.length > 0) {\r\n    removeOutlineEdges(holeEdges0, holeEdges1, polygons20, polygons21, boolType)\r\n    if (len0 > holeEdges0.length) {\r\n      holes0.forEach(edges => arrAonB(edges, holeEdges0))\r\n    }\r\n    if (len1 > holeEdges1.length) {\r\n      holes1.forEach(edges => arrAonB(edges, holeEdges1))\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Edge[]} outline0 既是输入也是输出，如果其中的边在 polygons21 中，则删除它\r\n * @param {Edge[]} outline1 既是输入也是输出，如果其中的边在 polygons20 中，则删除它\r\n * @param {{x: number, y: number}[][][]} polygons20\r\n * @param {{x: number, y: number}[][][]} polygons21\r\n * @param {string} boolType\r\n */\r\nfunction removeOutlineEdges(outline0, outline1, polygons20, polygons21, boolType = bool_union) {\r\n  const edge0in1 = [];\r\n  const edge1in0 = []\r\n  const edge0notIn1 = [];\r\n  const edge1notIn0 = []\r\n  const edges = outline0.concat(outline1)\r\n  for (let i = 0; i < edges.length; i++) {\r\n    const edge = edges[i]\r\n    if (edge.getChecked()) {\r\n      continue\r\n    }\r\n    const polygons2 = edge.belong === 0 ? polygons21 : polygons20\r\n    const isIn = isPointInPolygonWithHoles(edge.getMidPoint(), polygons2)\r\n    if (isIn) {\r\n      edge.belong === 0 ? edge0in1.push(edge) : edge1in0.push(edge)\r\n    } else {\r\n      edge.belong === 0 ? edge0notIn1.push(edge) : edge1notIn0.push(edge)\r\n    }\r\n  }\r\n\r\n  if (boolType === bool_union || boolType === bool_a_sub_b) {\r\n    if (edge0in1.length > 0) {\r\n      arrAsubB(outline0, edge0in1)\r\n    }\r\n  }\r\n  if (boolType === bool_union) {\r\n    if (edge1in0.length > 0) {\r\n      arrAsubB(outline1, edge1in0)\r\n    }\r\n  } else if (boolType === bool_a_sub_b) {\r\n    if (edge1notIn0.length > 0) {\r\n      arrAsubB(outline1, edge1notIn0)\r\n    }\r\n  }\r\n  if (boolType === bool_intersection) {\r\n    outline0.splice(0, outline0.length)\r\n    outline1.splice(0, outline1.length)\r\n    outline0.push(...edge0in1)\r\n    outline1.push(...edge1in0)\r\n  }\r\n}\r\n\r\n/**\r\n * 针对特殊情况的处理，当个两个图形边互相重叠时，删除共享边，有两种共享边，相叠 与 不相叠\r\n * 相叠, 边1 {from: a, to: b}, 边2 {from: a, to: b}, 这时只删除 边1 或者 边2\r\n * 不相叠, 边1 {from: a, to: b}, 边2 {from: b, to: a}, 这时边1 和 边2都需要删除\r\n * @param {Edge[][]} edges20\r\n * @param {Edge[][]} edges21\r\n */\r\nfunction removeOverlapEdges(edges20, edges21) {\r\n  for (const edges0 of edges20) {\r\n    for (const edges1 of edges21) {\r\n      removeOverlapOutlineEdges(edges0, edges1)\r\n    }\r\n  }\r\n  const empty0 = edges20.filter(edges => edges.length === 0)\r\n  const empty1 = edges21.filter(edges => edges.length === 0)\r\n  if (empty0.length > 0) { arrAsubB(edges20, empty0) }\r\n  if (empty1.length > 0) { arrAsubB(edges21, empty1) }\r\n}\r\n\r\n/**\r\n *\r\n * @param {Edge[]} outline0\r\n * @param {Edge[]} outline1\r\n */\r\nfunction removeOverlapOutlineEdges(outline0, outline1) {\r\n  const sharedEdges0 = []; const sharedEdges1 = []\r\n  for (let i = 0; i < outline0.length; i++) {\r\n    const edge0 = outline0[i]\r\n    let j = 0\r\n    for (; j < outline1.length; j++) {\r\n      const edge1 = outline1[j]\r\n      const obj = edge0.sameSource(edge1)\r\n      if (obj) {\r\n        if (obj.similarType === 3) { // 异向，同端点\r\n          sharedEdges0.push(edge0)\r\n          sharedEdges1.push(edge1)\r\n        } else { // 同向，同端点；\r\n          sharedEdges0.push(edge0)\r\n          edge1.setChecked()\r\n        }\r\n        break\r\n      }\r\n    }\r\n  }\r\n  if (sharedEdges0.length > 0) {\r\n    arrAsubB(outline0, sharedEdges0)\r\n    arrAsubB(outline1, sharedEdges1)\r\n  }\r\n}\r\n\r\n// 返回被至少四条边共用的顶点，针对可能合并出半环的特殊情况\r\nfunction findSpecialPoints(edges) {\r\n  const map = {}; const target = []\r\n  for (const edge of edges) {\r\n    addSpecialPoint(map, edge.from, target)\r\n    addSpecialPoint(map, edge.to, target)\r\n  }\r\n  return target\r\n}\r\nfunction addSpecialPoint(map, point, target) {\r\n  const pointId = point.x + ', ' + point.y\r\n  if (map[pointId] === undefined) {\r\n    map[pointId] = 1\r\n  } else {\r\n    map[pointId]++\r\n  }\r\n  if (map[pointId] > 3 && target.indexOf(point) < 0) {\r\n    target.push(point)\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Edge[][]} edges4Circles\r\n * @return {{x: number, y: number}[][]}\r\n */\r\nfunction edgesLst2PointsCircles(edges4Circles) {\r\n  const pointsCircles = []\r\n  edges4Circles.forEach((edges, index) => {\r\n    pointsCircles.push(edges2Points(edges))\r\n    edges.forEach(edge => (edge.holeId = index))\r\n  })\r\n  return pointsCircles\r\n}\r\n\r\n// -----------triangle start--------------------\r\nfunction splitArray(vertices, index1, index2) {\r\n  const small = Math.min(index1, index2)\r\n  const big = Math.max(index1, index2)\r\n  const v1 = vertices[small]\r\n  const v2 = vertices[big]\r\n  let start = small + 1\r\n  const numbersBetween = Math.abs(index1 - index2) - 1\r\n  const delta = start + numbersBetween - vertices.length\r\n  if (delta > 0) {\r\n    console.error('splitArray, attention! how is it possible to go here')\r\n    for (let i = 0; i < delta; i++) {\r\n      const item = vertices.shift()\r\n      vertices.push(item)\r\n      start--\r\n    }\r\n  }\r\n  const newSeries = vertices.splice(start, numbersBetween)\r\n  newSeries.push(v2, v1)\r\n  return [newSeries, vertices]\r\n}\r\n\r\n// 如果线段[ vertices[index]， vertices[checkingIndex] ] 和 vertices中的任意边相交，返回true\r\nfunction isCrossWithEdges(vertices, index, checkingIndex) {\r\n  const q1 = getValidIndex(checkingIndex - 1, vertices.length)\r\n  const q2 = getValidIndex(checkingIndex + 1, vertices.length)\r\n  const p1 = getValidIndex(index - 1, vertices.length)\r\n  const p2 = getValidIndex(index + 1, vertices.length)\r\n  const needSkip1 = [p1, index, p2]\r\n  const needSkip2 = [q1, checkingIndex, q2]\r\n  for (let i = 0; i < vertices.length; i++) {\r\n    const edgeIndex = (i + 1) % vertices.length\r\n    if (needSkip1.indexOf(i) >= 0 && needSkip1.indexOf(edgeIndex) >= 0) {\r\n      continue\r\n    }\r\n    if (needSkip2.indexOf(i) >= 0 && needSkip2.indexOf(edgeIndex) >= 0) {\r\n      continue\r\n    }\r\n    if (segmentsCross(vertices[i], vertices[edgeIndex], vertices[index], vertices[checkingIndex])) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * 判断二维点在 是否凸多边形内部（包含边）\r\n * @param {{x: number, y: number}} point 二维点\r\n * @param {{x: number, y: number}[]} vertexLst 逆时钟序列的轮廓\r\n * @return {boolean}\r\n */\r\nfunction isInConvex(point, vertexLst) {\r\n  let vertices = vertexLst\r\n  if (isClockwiseSquence(vertexLst)) {\r\n    vertices = vertexLst.slice().reverse()\r\n  }\r\n  let i\r\n  for (i = 0; i < vertices.length - 1; i++) {\r\n    const side = getPointOnVectorSide(vertices[i], vertices[i + 1], point)\r\n    if (side === ON_LINE_IN) {\r\n      return true\r\n    }\r\n    if (side !== ON_LEFT_SIDE) {\r\n      return false\r\n    }\r\n  }\r\n  const side = getPointOnVectorSide(vertices[i], vertices[0], point)\r\n  if (side === ON_LEFT_SIDE || side === ON_LINE_IN) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * @param {{x: number, y: number}} point\r\n * @param {{x: number, y: number}[][]} convexPolygons\r\n * @return {boolean}\r\n */\r\nfunction isInConvexPolygons(point, convexPolygons) {\r\n  for (let i = 0; i < convexPolygons.length; i++) {\r\n    const convex = convexPolygons[i]\r\n    if (isInConvex(point, convex)) return true\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * 判断二维点point 是否在带孔多边形内部，convexPolygons2 是二维数组，内容格式如下\r\n * [多边形最外层剖分为 n个凸多边形的列表, 多边形第一个孔剖分为 n个凸多边形的列表, ...多边形第n个孔剖分为 n个凸多边形的列表]\r\n * @param {{x: number, y: number}} point\r\n * @param {{x: number, y: number}[][][]} convexPolygons2\r\n * @return {boolean}\r\n */\r\nfunction isPointInPolygonWithHoles(point, convexPolygons2) {\r\n  const outestPolygons = convexPolygons2[0]\r\n  const isInOutestCircle = isInConvexPolygons(point, outestPolygons)\r\n  if (!isInOutestCircle || convexPolygons2.length === 1) {\r\n    return isInOutestCircle\r\n  }\r\n  for (let i = 1; i < convexPolygons2.length; i++) {\r\n    const convexPolygonsOfHole = convexPolygons2[i]\r\n    const isInHole = isInConvexPolygons(point, convexPolygonsOfHole)\r\n    if (isInHole) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\n/**\r\n * 凹多边形 转换为若干个凸多边形\r\n * @param {{x: number, y: number}[]} vertices 凹多边形的顶点轮廓\r\n * @param {{x: number, y: number}[][]} output\r\n */\r\nfunction concavToConvex(vertices, output) {\r\n  // let points = filterOutUselessVertex(vertices);\r\n  const points = vertices.slice()\r\n  const total = points.length\r\n  const isClockwise = isClockwiseSquence(points)\r\n  let concavPoint = null\r\n  let concavIndex = -1\r\n  for (let i = 0; i < total; i++) { // 寻找凹点的索引\r\n    const v0 = points[i]\r\n    const v1 = points[getValidIndex(i + 1, total)]\r\n    const v2 = points[getValidIndex(i + 2, total)]\r\n    if (threePointInOneLine(v0, v1, v2)) {\r\n      continue\r\n    }\r\n    const curSide = getPointOnVectorSide(v0, v1, v2)\r\n    if (isClockwise && curSide === ON_LEFT_SIDE) {\r\n      concavPoint = v1\r\n      concavIndex = getValidIndex(i + 1, total)\r\n      break\r\n    } else if (!isClockwise && curSide === ON_RIGHT_SIDE) {\r\n      concavPoint = v1\r\n      concavIndex = getValidIndex(i + 1, total)\r\n      break\r\n    }\r\n  }\r\n  if (concavPoint != null) {\r\n    const index = concavIndex\r\n    const p2 = getValidIndex(index + 1, total)\r\n    const p1 = getValidIndex(index - 1, total)\r\n    const angle = getAngle(points[p1], points[index], points[p2])\r\n    const halfAngle = (Math.PI * 2 - angle) / 2\r\n    let minAngle = 100\r\n    let divideIndex\r\n    for (let i = 0; i < total; i++) {\r\n      if (i === index || i === p1 || i === p2) {\r\n        continue\r\n      }\r\n      const side = getPointOnVectorSide(points[p1], points[index], points[i])\r\n      if ((isClockwise && side === ON_RIGHT_SIDE) ||\r\n        (!isClockwise && side === ON_LEFT_SIDE) ||\r\n        side === ON_LINE_OUT) {\r\n        if (!isCrossWithEdges(points, index, i)) {\r\n          const curAngle = getAngle(points[p1], points[index], points[i])\r\n          const delta = Math.abs(curAngle - halfAngle)\r\n          if (delta < minAngle) {\r\n            minAngle = delta\r\n            divideIndex = i\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (divideIndex === undefined) {\r\n      console.error('error! found in concavToConvex() ')\r\n      return\r\n    }\r\n    const arr = splitArray(points, index, divideIndex)\r\n    concavToConvex(arr[0], output)\r\n    concavToConvex(arr[1], output)\r\n  } else {\r\n    output.push(points)\r\n  }\r\n}\r\n// -----------triangle end----------------------\r\n// -----------ear cut start---------------------------\r\nfunction isBetween0(m, a, b) {\r\n  if (Math.abs(m - a) <= minimum || Math.abs(m - b) <= minimum) {\r\n    return BETWEEN_ON // m 和 a 或 b 过于接近，则认为 m == a 或 m == b\r\n  }\r\n  return ((m > a && m < b) || (m > b && m < a)) ? BETWEEN_IN : BETWEEN_NOT\r\n}\r\nfunction isBetween2(m, a, b) {\r\n  const target = isBetween0(m, a, b)\r\n  return target === BETWEEN_ON || target === BETWEEN_IN\r\n}\r\nfunction isBetween3(m, a, b, countBounds = true) {\r\n  let a0 = a; let b0 = b\r\n  if (a > b) {\r\n    a0 = b\r\n    b0 = a\r\n  }\r\n  const target = isBetween0(m, a0, b0)\r\n  if (countBounds) {\r\n    return target === BETWEEN_ON || target === BETWEEN_IN\r\n  } else {\r\n    return target === BETWEEN_IN\r\n  }\r\n}\r\n// 求以point为起点，竖直向上的射线和线段（p1, p2）的交点\r\nfunction rayUpSegmentCross(point, p1, p2) {\r\n  if (point.y > p1.y + minimum && point.y > p2.y + minimum) {\r\n    return null\r\n  }\r\n\r\n  let small, big\r\n  if (p1.x > p2.x) {\r\n    small = p2\r\n    big = p1\r\n  } else {\r\n    small = p1\r\n    big = p2\r\n  }\r\n  const res = isBetween0(point.x, small.x, big.x)\r\n  if (res === BETWEEN_NOT) {\r\n    return null\r\n  } else if (res === BETWEEN_ON) {\r\n    if (p1.x === p2.x) {\r\n      if (small.y >= point.y - minimum) {\r\n        return [small, big]\r\n      } else if (big.y > point.y - minimum) {\r\n        return [point]\r\n      } else {\r\n        return null\r\n      }\r\n    } else if (p1.x === point.x) {\r\n      return [p1]\r\n    } else {\r\n      return [p2]\r\n    }\r\n  } else { // res == BETWEEN_IN\r\n    const rate = (point.x - small.x) / (big.x - small.x) // lerp alpha\r\n    const dx = big.x - small.x\r\n    const dy = big.y - small.y\r\n    const cross = {x: small.x + dx * rate, y: small.y + dy * rate}\r\n    if (cross.y >= point.y - minimum) { // ? cross.y === point.y\r\n      return [cross]\r\n    }\r\n    return null\r\n  }\r\n}\r\n\r\n// 耳切法  如果 点 正好在某条边上，返回false\r\nfunction isPointInEdges(point, edges) {\r\n  const target = isPointInEdges0(point, edges)\r\n  return target === POLYGON_INSIDE\r\n}\r\n\r\n/**\r\n * @param {{x: number, y: number}} point\r\n * @param {Edge[]} edges\r\n * @return {number}\r\n */\r\nfunction isPointInEdges0(point, edges) {\r\n  const crossedPoints = []\r\n  const checked = []\r\n  for (let i = 0; i < edges.length; i++) {\r\n    const edge = edges[i]\r\n    if (checked.indexOf(edge) >= 0) {\r\n      continue\r\n    }\r\n    const arr = rayUpSegmentCross(point, edge.from, edge.to)\r\n    if (!arr) {\r\n      continue\r\n    }\r\n\r\n    let prev = i - 1; let next = i + 1\r\n    if (prev < 0) {\r\n      prev = edges.length - 1\r\n    }\r\n    if (next > edges.length - 1) {\r\n      next = 0\r\n    }\r\n    if (arr.length === 1) {\r\n      const pt = arr[0]\r\n      if (equals(point, pt, true)) {\r\n        return POLYGON_ON_EDGE\r\n      }\r\n      if (pt !== edge.from && pt !== edge.to) {\r\n        crossedPoints.push(pt)\r\n      } else if (pt === edge.to) {\r\n        let edgeNext = edges[next]\r\n        checked.push(edgeNext)\r\n        if (edgeNext.vertical()) {\r\n          if (isBetween3(point.y, edgeNext.from.y, edgeNext.to.y)) {\r\n            return POLYGON_ON_EDGE\r\n          }\r\n          next += 1\r\n          if (next > edges.length - 1) {\r\n            next = 0\r\n          }\r\n          edgeNext = edges[next]\r\n          checked.push(edgeNext)\r\n        }\r\n        if (isBetween3(point.x, edge.from.x, edgeNext.to.x, false)) {\r\n          crossedPoints.push(pt)\r\n        }\r\n      } else { // pt == edge.from\r\n        let edgePrev = edges[prev]\r\n        checked.push(edgePrev)\r\n        if (edgePrev.vertical()) {\r\n          if (isBetween3(point.y, edgePrev.from.y, edgePrev.to.y)) {\r\n            return POLYGON_ON_EDGE\r\n          }\r\n          prev -= 1\r\n          if (prev < 0) {\r\n            prev = edges.length - 1\r\n          }\r\n          edgePrev = edges[prev]\r\n          checked.push(edgePrev)\r\n        }\r\n        if (isBetween3(point.x, edgePrev.from.x, edge.to.x, false)) {\r\n          crossedPoints.push(pt)\r\n        }\r\n      }\r\n    } else if (arr.length === 2) {\r\n      const edgeNext = edges[next]\r\n      const edgePrev = edges[prev]\r\n      if (isBetween2(point.y, arr[0], arr[1])) {\r\n        return POLYGON_ON_EDGE\r\n      }\r\n      if (isBetween3(point.x, edgePrev.from.x, edgeNext.to.x, false)) {\r\n        crossedPoints.push(arr[0])\r\n      }\r\n    }\r\n  }\r\n  return crossedPoints.length % 2 === 1 ? POLYGON_INSIDE : POLYGON_OUTSIDE\r\n}\r\n// -----------ear cut end---------------------------\r\n/**\r\n * 返回三维数组，其中每个二维数组代表一个带孔多边形\r\n * @param {Edge[][]} splited0\r\n * @param {Edge[][]} splited1\r\n * @param {{x: number, y: number}[][]} circles0\r\n * @param {{x: number, y: number}[][]} circles1\r\n * @param {string} boolType\r\n * @return {{x: number, y: number}[][][]|[]}\r\n */\r\nfunction findCircles(splited0, splited1, circles0, circles1, boolType) {\r\n  const outestCircles = []\r\n  const polygons20 = []\r\n  const polygons21 = []\r\n  circles0.forEach(circle => {\r\n    const polygons = []\r\n    concavToConvex(circle, polygons)\r\n    polygons20.push(polygons)\r\n  })\r\n  circles1.forEach(circle => {\r\n    const polygons = []\r\n    concavToConvex(circle, polygons)\r\n    polygons21.push(polygons)\r\n  })\r\n\r\n  removeOverlapEdges(splited0, splited1)\r\n  if (splited0.length === 0 || splited1.length === 0) {\r\n    const edges4Circles = splited0.concat(splited1)\r\n    return edgesLst2PointsCircles(edges4Circles)\r\n  }\r\n  removeEdges(splited0, splited1, polygons20, polygons21, boolType)\r\n\r\n  const outlineEdgesA = splited0[0].slice()\r\n  const outlineEdgesB = splited1[0].slice()\r\n  let outlineEdgesA2 = []\r\n  const excludePoints = []\r\n  splited0.forEach(arr => outlineEdgesA2 = outlineEdgesA2.concat(arr))\r\n  while (outlineEdgesA.length > 0) {\r\n    const outestCircle = []\r\n    const usedEdges = []\r\n    const startEdge = findStartEdge(outlineEdgesA, outlineEdgesB)\r\n    let curEdge = startEdge\r\n    usedEdges.push(curEdge)\r\n    outestCircle.push(startEdge.from)\r\n    while (curEdge.to !== startEdge.from) {\r\n      const curEdge0 = curEdge\r\n      if (boolType === bool_union) { // A - B求差集时，会破坏孔结构\r\n        curEdge = findNextEdge(curEdge0, outlineEdgesA2, outlineEdgesB)\r\n      } else {\r\n        curEdge = findNextEdge(curEdge0, outlineEdgesA, outlineEdgesB)\r\n      }\r\n      usedEdges.push(curEdge)\r\n      if (outestCircle.indexOf(curEdge.from) > -1) {\r\n        console.error('Error! findCircles() dead loop in.')\r\n        return [] // 避免死循环\r\n      }\r\n      outestCircle.push(curEdge.from)\r\n    }\r\n    arrAsubB(outlineEdgesA, usedEdges)\r\n    arrAsubB(outlineEdgesB, usedEdges)\r\n    outestCircles.push(outestCircle)\r\n    outestCircle.forEach(it => excludePoints.push(it))\r\n  }\r\n\r\n  let pointsSharedByCircles = []\r\n  if (boolType === bool_union) {\r\n    pointsSharedByCircles = findSpecialPoints(splited0[0].concat(splited1[0]))\r\n  }\r\n  const restEdges0 = getRestEdges(splited0, excludePoints, pointsSharedByCircles)\r\n  const restEdges1 = getRestEdges(splited1, excludePoints, pointsSharedByCircles)\r\n  const holes = []\r\n  if (boolType === bool_union) {\r\n    while (outestCircles.length > 1) {\r\n      holes.push(outestCircles.pop())\r\n    }\r\n  }\r\n  findHoles(restEdges0, restEdges1, holes)\r\n  if (outestCircles.length === 1) {\r\n    let graphics = []\r\n    let realHoles = holes\r\n    if (boolType === bool_a_sub_b) {\r\n      const obj = analyseHolesContain(holes)\r\n      realHoles = obj.holes\r\n      graphics = obj.graphics\r\n    }\r\n    const outestPoints = outestCircles[0]\r\n    return [[outestPoints].concat(realHoles)].concat(graphics)\r\n  } else {\r\n    const polygons = []\r\n    outestCircles.forEach((circle, index) => {\r\n      polygons.push({pointsArr: [circle], outlineEdges: createEdges(circle, index, 0)})\r\n    })\r\n    for (let i = 0; i < holes.length; i++) {\r\n      const hole = holes[i]\r\n      for (let j = 0; j < polygons.length; j++) {\r\n        const polygonObj = polygons[j]\r\n        const holePoint = {x: (hole[0].x + hole[1].x) * 0.5, y: (hole[0].y + hole[1].y) * 0.5}\r\n        if (isPointInEdges(holePoint, polygonObj.outlineEdges)) {\r\n          polygonObj.pointsArr.push(hole)\r\n          break\r\n        }\r\n      }\r\n    }\r\n    const target = polygons.map(it => it.pointsArr)\r\n    return target\r\n  }\r\n}\r\n\r\n/**\r\n * 分析孔 与 孔之间嵌套关系\r\n * @param srcHoles {{x: number, y: number}[][]}\r\n * @return {holes: [], graphics: []}\r\n */\r\nfunction analyseHolesContain(srcHoles) {\r\n  const holesObjs = srcHoles.map((it, index) => {\r\n    return {hole: it, edges: createEdges(it, index, 0), contains: [], containBy: []}\r\n  })\r\n  const containedSet = new Set()\r\n  for (let i = 0; i < holesObjs.length; i++) {\r\n    const holeA = holesObjs[i]\r\n    for (let j = i + 1; j < holesObjs.length; j++) {\r\n      const holeB = holesObjs[j]\r\n      if (isPointInEdges(holeA.hole[0], holeB.edges)) {\r\n        holeB.contains.push(holeA)\r\n        holeA.containBy.push(holeB)\r\n        containedSet.add(holeA)\r\n      } else if (isPointInEdges(holeB.hole[0], holeA.edges)) {\r\n        holeA.contains.push(holeB)\r\n        holeB.containBy.push(holeA)\r\n        containedSet.add(holeB)\r\n      }\r\n    }\r\n  }\r\n  const containedArr = [...containedSet]\r\n  const containedHoles = containedArr.map(it => it.hole)\r\n  const realHoleObjs = arrAsubB(holesObjs, containedArr)\r\n  const holes = arrAsubB(srcHoles.slice(), containedHoles) // 元素为真正的孔 2d坐标的一维数组\r\n  const graphics = [] // 元素为可能包含若干个孔的图形 2d坐标的二维数组\r\n  containedArr.forEach(holeObj => arrAsubB(holeObj.containBy, realHoleObjs))\r\n  containedArr.forEach(holeObj => {\r\n    if (holeObj.containBy.length) {\r\n      return\r\n    }\r\n    const arr = [holeObj.hole]\r\n    holeObj.contains.forEach(obj => {\r\n      arr.push(obj.hole)\r\n    })\r\n    graphics.push(arr)\r\n  })\r\n  return {holes, graphics}\r\n}\r\n\r\n/**\r\n * 对带孔二维多边形做布尔运算\r\n * @param {{x: number, y: number}[][]} verticesHolesA 最外轮廓是逆时针序列，孔是顺时针序列\r\n * @param {{x: number, y: number}[][]} verticesHolesB 最外轮廓是逆时针序列，孔是顺时针序列\r\n * @param {string} boolType\r\n * @return {*[]} 返回三维数组，每个元素的结构类似于 [[v0, v1, v3, v4, v5, m0, m1, m2, n0, n1, n2, n3], [6, 9]]\r\n */\r\nfunction boolPolygons(verticesHolesA, verticesHolesB, boolType) {\r\n  // processPrecision(verticesHolesA[0], verticesHolesB[0])\r\n  const map = mergeVertices(verticesHolesA[0], verticesHolesB[0])\r\n  const sharedCount = verticesHolesB[0].filter(it => it.shared).length\r\n  const circlesA = parseToCircles(verticesHolesA)\r\n  const circlesB = parseToCircles(verticesHolesB)\r\n  if (boolType === bool_a_sub_b) {\r\n    circlesB.forEach(circle => circle.reverse())\r\n  }\r\n  const edges4Circles0 = createEdges4Circles(circlesA, 0)\r\n  const edges4Circles1 = createEdges4Circles(circlesB, 1)\r\n  const mergeSuccess = splitEdgesOfCircles(edges4Circles0, edges4Circles1)\r\n\r\n  if (!mergeSuccess && sharedCount < 2) { // 两个图形的轮廓线不相交\r\n    const outlineA = circlesA[0]\r\n    const outlineB = circlesB[0]\r\n    const edgesA = createEdges(outlineA, 0, 0)\r\n    const edgesB = createEdges(outlineB, 1, 0)\r\n    for (let i = 0; i < outlineB.length; i++) {\r\n      const target = isPointInEdges0(outlineB[i], edgesA)\r\n      if (target === POLYGON_OUTSIDE) {\r\n        break\r\n      } else if (target === POLYGON_INSIDE) { // polygon B totally inside polygon A\r\n        if (boolType === bool_union) {\r\n          return [verticesHolesA]\r\n        } else if (boolType === bool_intersection) {\r\n          return [verticesHolesB]\r\n        } else if (boolType === bool_a_sub_b) {\r\n          const holeIndices = verticesHolesA[1]\r\n          holeIndices.push(verticesHolesA[0].length)\r\n          verticesHolesA[0].push(...outlineB)\r\n          const polygonsCreatedByHoles = []\r\n          for (let j = 1; j < circlesB.length; j++) {\r\n            const polygon = [circlesB[j], []]\r\n            polygonsCreatedByHoles.push(polygon)\r\n          }\r\n          return [verticesHolesA].concat(polygonsCreatedByHoles)\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < outlineA.length; i++) {\r\n      const target = isPointInEdges0(outlineA[i], edgesB)\r\n      if (target === POLYGON_OUTSIDE) {\r\n        break\r\n      } else if (target === POLYGON_INSIDE) { // polygon A totally inside polygon B\r\n        if (boolType === bool_union) {\r\n          return [verticesHolesB]\r\n        } else if (boolType === bool_intersection) {\r\n          return [verticesHolesA]\r\n        } else if (boolType === bool_a_sub_b) {\r\n          return []\r\n        }\r\n      }\r\n    }\r\n    // 两个图形的轮廓线不相交，并且不存在 a包含b 或者b包含a的情况\r\n    return []\r\n  }\r\n  const splited0 = []; const splited1 = []\r\n  edges4Circles0.forEach(edges4Circle => {\r\n    const arr = []\r\n    edges4Circle.forEach(edge => arr.push(...processSplitBy(edge)))\r\n    splited0.push(arr)\r\n  })\r\n  edges4Circles1.forEach(edges4Circle => {\r\n    const arr = []\r\n    edges4Circle.forEach(edge => arr.push(...processSplitBy(edge)))\r\n    splited1.push(arr)\r\n  })\r\n  const outlineAndHolesLst = findCircles(splited0, splited1, circlesA, circlesB, boolType)\r\n  const target = []\r\n  for (let j = 0; j < outlineAndHolesLst.length; j++) {\r\n    const outlineAndHoles = outlineAndHolesLst[j]\r\n    const holeIndices = []\r\n    let allVertices = []\r\n    outlineAndHoles.forEach((it, index) => {\r\n      const simplified = simplifyCircle(it)\r\n      outlineAndHoles[index] = simplified\r\n      allVertices = allVertices.concat(simplified)\r\n    })\r\n    if (outlineAndHoles.length > 1) {\r\n      let curHoleIndex = 0\r\n      for (let i = 1; i < outlineAndHoles.length; i++) {\r\n        const len = outlineAndHoles[i - 1].length\r\n        curHoleIndex += len\r\n        holeIndices.push(curHoleIndex)\r\n      }\r\n    }\r\n    target.push([allVertices, holeIndices])\r\n  }\r\n  return target\r\n}\r\n\r\n// vertices0 vertices1 要求都是返回数据格式的顶点序列\r\n// 可能返回一个带孔图形，例如：已知合并后的最外轮廓的逆时钟序列（v0, v1, v3, v4, v5)\r\n// 孔1的顺时钟序列（m0, m1, m2), 孔2的顺时钟序列（n0, n1, n2, n3)\r\n// 最终返回 二维数组 [[v0, v1, v3, v4, v5, m0, m1, m2, n0, n1, n2, n3], [6, 9]]\r\nfunction mergeTwoPolygons(verticesHolesA, verticesHolesB) {\r\n  const target = boolPolygons(verticesHolesA, verticesHolesB, bool_union)\r\n  return target.length > 0 ? target[0] : target\r\n}\r\n\r\nfunction polygonAintersectB(verticesHolesA, verticesHolesB) {\r\n  return boolPolygons(verticesHolesA, verticesHolesB, bool_intersection)\r\n}\r\n\r\nfunction mergePolygons(verticesHolesArr) {\r\n  const wait4Merge = verticesHolesArr.slice()\r\n  const merged = []\r\n  while (wait4Merge.length >= 2) {\r\n    const first = wait4Merge.shift()\r\n    let i = 0\r\n    for (; i < wait4Merge.length; i++) {\r\n      const obj = wait4Merge[i]\r\n      const mergedPolygon = mergeTwoPolygons(first, obj)\r\n      if (mergedPolygon.length === 2) { // 合并成功\r\n        merged.push(first, obj)\r\n        wait4Merge.splice(i, 1)\r\n        wait4Merge.push(mergedPolygon)\r\n        break\r\n      }\r\n    }\r\n  }\r\n  // 找出没有合并成功的孤立图形\r\n  const mergeFailedPolygons = verticesHolesArr.filter(arr => !merged.includes(arr) && !wait4Merge.includes(arr))\r\n  return wait4Merge.concat(mergeFailedPolygons)\r\n}\r\n\r\nconst BoolPolygonsUtil = {\r\n  setPrecision(num = -1) {\r\n    precision = num\r\n    minimum = Math.pow(0.1, num)\r\n  },\r\n\r\n  /**\r\n   * @param {{x: number, y: number}} point\r\n   * @param {{x: number, y: number}[]} contour\r\n   * @return {boolean} true point在以contour为轮廓的凸多边形中\r\n   */\r\n  isInConvex(point, contour) {\r\n    return isInConvex(point, contour)\r\n  },\r\n\r\n  isClockwiseSquence(contour) {\r\n    return isClockwiseSquence(contour)\r\n  },\r\n\r\n  /**\r\n   * @param {{x: number, y: number}} point\r\n   * @param {{x: number, y: number}[]} contour 凹或凸的不带孔多边形轮廓\r\n   * @return {boolean} true point在以contour为轮廓的不带孔多边形中\r\n   */\r\n  isPointInOutline(point, contour) {\r\n    const edges = createEdges(contour, 0, 0)\r\n    return isPointInEdges0(point, edges) !== POLYGON_OUTSIDE\r\n  },\r\n\r\n  /**\r\n   * 求多边形 verticesHolesA 减去 verticesHolesB 后的图形\r\n   * @param {{x: number, y: number}[][]} verticesHolesA 最外轮廓是逆时针序列，孔是顺时针序列\r\n   * @param {{x: number, y: number}[][]} verticesHolesB 最外轮廓是逆时针序列，孔是顺时针序列\r\n   * @return {*[]} 返回三维数组，其中每个二维数组的结构和输入参数一致\r\n   */\r\n  polygonAsubB(verticesHolesA, verticesHolesB) {\r\n    return boolPolygons(verticesHolesA, verticesHolesB, bool_a_sub_b)\r\n  },\r\n\r\n  polygonAintersectB(verticesHolesA, verticesHolesB) {\r\n    return boolPolygons(verticesHolesA, verticesHolesB, bool_intersection)\r\n  },\r\n\r\n  mergePolygons(verticesHolesArr) {\r\n    return mergePolygons(verticesHolesArr)\r\n  },\r\n\r\n  /**\r\n   * 合并若干个不带孔的多边形\r\n   * @param {{x: number, y: number}[][]} polygonContours\r\n   * @return {*[]} 每个元素为[[轮廓顶点...], [孔索引...]]\r\n   */\r\n  mergeNoHolePolygons(polygonContours) {\r\n    if (polygonContours.length < 2) {\r\n      return polygonContours\r\n    }\r\n    const verticesHolesArr = []\r\n    polygonContours.forEach(contour => {\r\n      if (isClockwiseSquence(contour)) { // 保证最外轮廓是逆时钟序列\r\n        contour.reverse()\r\n      }\r\n      verticesHolesArr.push([contour, []])\r\n    })\r\n    return mergePolygons(verticesHolesArr)\r\n  },\r\n\r\n  /**\r\n   * 合并若干个不带孔的多边形，如果合并出图形带孔，丢弃掉孔; polygonContours.length必须大于1\r\n   * @param {{x: number, y: number}[][]} polygonContours\r\n   * @return {{x: number, y: number}[][]}\r\n   */\r\n  mergeNoHolePolygonsSimply(polygonContours) {\r\n    if (polygonContours.length < 2) {\r\n      return polygonContours\r\n    }\r\n    const mergeResult = this.mergeNoHolePolygons(polygonContours)\r\n    const contourLst = []\r\n    mergeResult.forEach(arr => {\r\n      // 只读取合并后图形的最外轮廓\r\n      let pointLst = arr[0]\r\n      const holeIndices = arr[1]\r\n      if (holeIndices.length) {\r\n        pointLst = pointLst.slice(0, holeIndices[0])\r\n      }\r\n      contourLst.push(pointLst)\r\n    })\r\n    return contourLst\r\n  },\r\n\r\n  /**\r\n   * 获取线段和轮廓的若干个交点中 离线段起点最近的一个\r\n   * @param {{x: number, y: number}} segmentStart 线段起点\r\n   * @param {{x: number, y: number}} segmentEnd 线段终点\r\n   * @param {{x: number, y: number}[]} contours 轮廓序列\r\n   * @return {{x: number, y: number}} 交点\r\n   */\r\n  getClosestLineSegmentCross(segmentStart, segmentEnd, contours) {\r\n    const crossPoints = []\r\n    const len = contours.length\r\n    contours.forEach((point, index) => {\r\n      const next = contours[(index + 1) % len]\r\n      const cross = getLineSegmentCrossPoint(point, next, segmentStart, segmentEnd)\r\n      if (cross) {\r\n        crossPoints.push(cross)\r\n      }\r\n    })\r\n    let minDistance = Infinity\r\n    let target\r\n    crossPoints.forEach(point => {\r\n      const distance = getDistanceSquare(point, segmentStart)\r\n      if (minDistance > distance) {\r\n        minDistance = distance\r\n        target = point\r\n      }\r\n    })\r\n    return target\r\n  },\r\n}\r\n\r\nexport default BoolPolygonsUtil","import {BufferGeometry, LineLoop, BufferAttribute, LineBasicMaterial, Vector3, BoxHelper, Group} from 'three';\r\n\r\nimport Main from '../MainScene';\r\nimport Layers from \"../Layers\";\r\nimport Config from \"../configurable/Config\";\r\nimport * as StaticFunc from \"../util/StaticMethods\"\r\nimport PolygonMesh from \"../instance/PolygonMesh\";\r\nimport Box2 from \"../lib/Box2\";\r\nimport TransformControls2D from \"../lib/TransformControls2D\";\r\nimport TriangleCut from \"../lib/TriangleCut\";\r\nimport BoolPolygonsUtil from \"../lib/bool-polygons-util\";\r\nimport History from \"../undo/History\";\r\nimport checkNumber from \"../../../components/element/input/src/checkNumber\";\r\nimport {getHeatmapMaterial} from \"../util/StaticMethods\";\r\nimport {updateUvAttribute} from \"../util/StaticMethods\";\r\n\r\nlet PolygonTool = function (divElement) {\r\n  TriangleCut.setPrecision(Config.code.getPrecision() );\r\n  BoolPolygonsUtil.setPrecision(Config.code.getPrecision() );\r\n\r\n  let eventSelectionChange = {type: 'selectedCountChange'};\r\n  let eventRefItemSelect = {type: 'refItemSelect', item: null};\r\n  let eventSliceError = {type: 'slice error'};\r\n  let eventInvalidNumInput = {type: 'invalid num input'};\r\n  let eventFastNameChange = {type: 'fast name changed', num: 0, value: \"\"};\r\n  let editingLayer = Layers.editingLayer;\r\n  let scene = Main.scene();\r\n  let dom = Main.getDom();\r\n  let fixedPtColor = 0x3652A9;\r\n  let lineMesh = null;\r\n  //polygon create\r\n  let ctrlPtCount = 0;\r\n  let currentPointObj = StaticFunc.getPolygonCtrlPoint(ctrlPtCount++);\r\n  let polygonPts = [];\r\n  let curVector, firstVector = null;\r\n  let polygonVertices = [];\r\n  const adhereRadius = Config.code.adhereRadiusForCreating;\r\n  let adhereRadius2 = adhereRadius * adhereRadius;\r\n  let adhereCircle = getAdhereCircle(adhereRadius);\r\n  adhereCircle.renderOrder = 5;\r\n  //simple graphics create\r\n  let startPoint = null;\r\n  let radiusMesh = null;\r\n  let isAddingCircle = false, isAddingRectangle = false, isAddingPolygon = false;\r\n\r\n  let STATUS_FREE = 0;\r\n  let STATUS_ADDING_GRAPHICS = 1;\r\n  let STATUS_EDITING_POINTS = 2;\r\n  let STATUS_ROTATING_GRAPHICS = 3;\r\n  let STATUS_SCALING_GRAPHICS = 4;\r\n  let STATUS_COPYING_GRAPHICS = 5;\r\n  let STATUS_SLICING_GRAPHIC = 6;\r\n  let STATUS_EDITING_HEATMAP = 7;\r\n  let status = STATUS_FREE;\r\n  let selectedMeshes = [], selectedPoint = null;\r\n  let mouseDownPos, oldPtPos = new Vector3();\r\n  let editingPoint = StaticFunc.getPolygonCtrlPoint(-1, new Vector3(), 0xADFB8D);\r\n  let slicingPoint = StaticFunc.getPolygonCtrlPoint(-1, new Vector3(), 0xff653a);\r\n  slicingPoint.renderOrder = 4;\r\n  let slicingPath = [], sliceSegments = [], curSliceSegment;\r\n  let adhereObj;\r\n\r\n  let transformControls;\r\n  let selectionHelper = new BoxHelper();\r\n  let outlineOfPastes = new Group();\r\n  outlineOfPastes.renderOrder = 999;\r\n  let contextMenuEnabled = false;\r\n  let selectedRef = null, unlockRef = null;\r\n  let postfix, suffix, curNum = -1, fillZero = 3;\r\n  let in3dContext = false;\r\n  //编辑热力图， 轨迹\r\n  let maximumHeat = 33, heatmapPointSpan = 0.1 * 0.1;\r\n  let heatmapDataLst = []; //{value: 1, x: pos.x, y: pos.y}\r\n  let material4HeatmapEdit = null;\r\n\r\n  function setStatusToFree(excludes) {\r\n    if (excludes && excludes.indexOf(status) >= 0) {\r\n      return;\r\n    }\r\n    if (status == STATUS_ADDING_GRAPHICS) {\r\n      endPolygonAdd();\r\n      endSimpleItemAdd();\r\n    } else if (status == STATUS_EDITING_POINTS) {\r\n      stopEditingControlPoints();\r\n    } else if (status == STATUS_ROTATING_GRAPHICS || status == STATUS_SCALING_GRAPHICS) {\r\n      transformControls.detach();\r\n      selectionHelper.visible = false;\r\n    } else if (status == STATUS_COPYING_GRAPHICS) {\r\n      endGraphicsCopying();\r\n    } else if (status == STATUS_SLICING_GRAPHIC) {\r\n      endSlicingMesh();\r\n    }\r\n    status = STATUS_FREE;\r\n  }\r\n\r\n  function changeAdhereCircleScale() {\r\n    let scaleFactor = Main.currentCameraScale();\r\n    adhereCircle.scale.set(1, 1, 1).multiplyScalar(scaleFactor);\r\n    adhereRadius2 = adhereRadius * adhereRadius * scaleFactor * scaleFactor;\r\n  }\r\n\r\n  function getAdhereCircle(radius) {\r\n    let seg = 18;\r\n    let arr = [];\r\n    for (let i = 0; i < seg; i++) {\r\n      let angle = Math.PI * 2 * i / seg;\r\n      let x = Math.cos(angle) * radius;\r\n      let y = Math.sin(angle) * radius;\r\n      arr.push(x, y, 0);\r\n    }\r\n    let lGeometry = new BufferGeometry();\r\n    lGeometry.setAttribute(\"position\", new BufferAttribute(StaticFunc.toFloat32TypedArr(arr), 3));\r\n    let lineLoop = new LineLoop(lGeometry, new LineBasicMaterial( { color: '#ff8e4a', transparent:true } ));\r\n    lineLoop.name = \"adhere circle\";\r\n    return lineLoop;\r\n  }\r\n\r\n  //polygonPts array of Points\r\n  function addPolygonMesh(polygonPts) {\r\n    let pts = [];\r\n    polygonPts.forEach(it => {\r\n      pts.push(it.position);\r\n      editingLayer.remove(it);\r\n    });\r\n    let polygonMesh = PolygonMesh(pts);\r\n    addObject(polygonMesh);\r\n    return polygonMesh;\r\n  }\r\n\r\n  function addSimpleMesh(startVector, endVector) {\r\n    let polygonMesh, pointsGetter;\r\n    if (isAddingRectangle) {\r\n      pointsGetter = StaticFunc.getRectangelPoints;\r\n    } else {\r\n      pointsGetter = StaticFunc.getCirclePoints;\r\n    }\r\n    polygonMesh = PolygonMesh(pointsGetter(startVector, endVector) );\r\n    addObject(polygonMesh);\r\n    if (lineMesh != null) {\r\n      editingLayer.remove(lineMesh);\r\n      if (isAddingCircle) {\r\n        editingLayer.remove(radiusMesh);\r\n        radiusMesh = null;\r\n      }\r\n      lineMesh = null;\r\n      startPoint = null;\r\n    }\r\n    hideDiv();\r\n  }\r\n\r\n  function startAddPolygon() {\r\n    divElement.children[1].style.display = 'none';\r\n    prepareForAdd();\r\n    polygonPts = [];\r\n    polygonPts.push(currentPointObj);\r\n    firstVector = null;\r\n    isAddingPolygon = true;\r\n\r\n    polygonVertices = [];\r\n    editingLayer.add(adhereCircle);\r\n    adhereCircle.visible = false;\r\n    status = STATUS_ADDING_GRAPHICS;\r\n\r\n    dom.addEventListener('mousemove', mouseMove_polygonAdd, false);\r\n    dom.addEventListener('mousedown', mouseDown_polygonAdd, false);\r\n  }\r\n\r\n  function endPolygonAdd() {\r\n    isAddingPolygon = false;\r\n    Main.cameraControl().removeEventListener('change', changeAdhereCircleScale);\r\n    editingLayer.remove(currentPointObj);\r\n    polygonPts.pop();\r\n    dom.removeEventListener('mousemove', mouseMove_polygonAdd, false);\r\n    dom.removeEventListener('mousedown', mouseDown_polygonAdd, false);\r\n    if (lineMesh != null) {\r\n      editingLayer.remove(lineMesh);\r\n      polygonPts.forEach(it => editingLayer.remove(it));\r\n    }\r\n    if (adhereCircle != null) {\r\n      editingLayer.remove(adhereCircle);\r\n    }\r\n    hideDiv();\r\n  }\r\n\r\n  let mouseMove_polygonAdd = function (event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      curVector = lst[0].point;\r\n      if (Config.ui.enableEditPointAdhere) {\r\n        let guideArr = getGuideLines(curVector);\r\n        updateGuideLines(guideArr);\r\n        adjustPosByGuideLines(curVector);\r\n      }\r\n      currentPointObj.position.copy(curVector);\r\n      if (!currentPointObj.parent) {\r\n        editingLayer.add(currentPointObj);\r\n      }\r\n      if (polygonVertices.length > 0) {\r\n        let distance = polygonVertices[polygonVertices.length - 1].distanceTo(curVector);\r\n        showDiv(event, distance);\r\n        if (lineMesh != null) {\r\n          let attr = lineMesh.geometry.attributes.position;\r\n          attr.setXYZ(polygonVertices.length, curVector.x, curVector.y, curVector.z);\r\n          attr.needsUpdate = true;\r\n        }\r\n\r\n        if (curVector.distanceToSquared(firstVector) <= adhereRadius2) {\r\n          adhereCircle.position.copy(firstVector);\r\n          adhereCircle.visible = true;\r\n        } else {\r\n          adhereCircle.visible = false;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  let mouseDown_polygonAdd = function (event) {\r\n    currentPointObj.material.color.setHex(fixedPtColor);\r\n    // event.preventDefault();\r\n    event.cancelBubble = true;\r\n    event.stopPropagation();\r\n    if (event.button === 2) {\r\n      //鼠标右键 取消编辑\r\n      endPolygonAdd();\r\n      setTimeout(function () {\r\n        status = STATUS_FREE;\r\n      }, 100);\r\n    } else {\r\n      if (polygonVertices.length === 0) {\r\n        firstVector = curVector;\r\n        adhereCircle.position.copy(firstVector);\r\n        changeAdhereCircleScale();\r\n        Main.cameraControl().addEventListener('change', changeAdhereCircleScale);\r\n      }\r\n      if (lineMesh != null) {\r\n        editingLayer.remove(lineMesh);\r\n        if (adhereCircle.visible) {\r\n          //鼠标左键 创建闭合多边形\r\n          editingLayer.remove(currentPointObj);\r\n          polygonVertices.pop();\r\n          polygonPts.pop();\r\n          adhereCircle.visible = false;\r\n          addPolygonMesh(polygonPts);\r\n          hideDiv();\r\n          //为下一个新的多边形，新增第一个控制点\r\n          currentPointObj = StaticFunc.getPolygonCtrlPoint(ctrlPtCount++, curVector);\r\n          editingLayer.add(currentPointObj);\r\n          polygonPts = [currentPointObj];\r\n          lineMesh = null;\r\n          polygonVertices = [];\r\n          Main.cameraControl().removeEventListener('change', changeAdhereCircleScale);\r\n          // curVector = currentPointObj.position;\r\n        } else {\r\n          //鼠标左键 为正在编辑的多边形新增控制点\r\n          addControlPointToPolygon(curVector);\r\n        }\r\n      } else {\r\n        //鼠标左键 为正在编辑的多边形新增第二个控制点\r\n        addControlPointToPolygon(curVector);\r\n      }\r\n    }\r\n  };\r\n\r\n  function addControlPointToPolygon(currentVector) {\r\n    currentPointObj = StaticFunc.getPolygonCtrlPoint(ctrlPtCount++, currentVector);\r\n    editingLayer.add(currentPointObj);\r\n    polygonPts[polygonPts.length - 1].position.copy(currentVector);\r\n    polygonPts.push(currentPointObj);\r\n\r\n    polygonVertices.push(currentVector);\r\n    lineMesh = StaticFunc.getPolygonLineMesh(polygonVertices, currentVector, false);\r\n    editingLayer.add(lineMesh);\r\n  }\r\n\r\n  function startAddSimpleGraphic() {\r\n    startPoint = null;\r\n    lineMesh = null, radiusMesh = null;\r\n\r\n    status = STATUS_ADDING_GRAPHICS;\r\n    dom.addEventListener('click', mouseClick_startSimpleItemAdd);\r\n    dom.addEventListener('mousemove', mouseMove_simpleItemAdding);\r\n    dom.addEventListener('mousedown', mouseDown_cancelSimpleItemAdd);\r\n  }\r\n\r\n  function endSimpleItemAdd() {\r\n    isAddingCircle = isAddingRectangle = false;\r\n    if (currentPointObj.parent != null) {\r\n      editingLayer.remove(currentPointObj);\r\n    }\r\n    if (lineMesh != null) {\r\n      editingLayer.remove(lineMesh);\r\n      if (radiusMesh != null && radiusMesh.parent != null) {\r\n        editingLayer.remove(radiusMesh);\r\n      }\r\n    }\r\n    dom.removeEventListener('mousedown', mouseDown_cancelSimpleItemAdd);\r\n    dom.removeEventListener('click', mouseClick_startSimpleItemAdd);\r\n    dom.removeEventListener('mousemove', mouseMove_simpleItemAdding);\r\n    hideDiv();\r\n    clearGuideLines();\r\n  }\r\n\r\n  function mouseDown_cancelSimpleItemAdd(event) {\r\n    if (event.button == 2) {\r\n      //鼠标右键 取消编辑\r\n      endSimpleItemAdd();\r\n      setTimeout(function () {\r\n        status = STATUS_FREE;\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  function mouseClick_startSimpleItemAdd(event) {\r\n    if (startPoint == null) {\r\n      startPoint = currentPointObj.position.clone();\r\n    } else {\r\n      //鼠标左键点击偶数次，创建矩形网格 或 圆形网格\r\n      addSimpleMesh(startPoint, currentPointObj.position);\r\n    }\r\n  }\r\n\r\n  function hideDiv() {\r\n    divElement.style.display = 'none';\r\n    divElement.children[0].removeEventListener('keypress', pressEnterOnInput);\r\n    divElement.children[1].removeEventListener('keypress', pressEnterOnInput);\r\n  }\r\n  function showDiv(event, distance1, distance2) {\r\n    if (divElement.style.display == 'none' || divElement.style.display == '') {\r\n      divElement.style.display = 'block';\r\n      divElement.children[0].focus();\r\n      divElement.children[0].addEventListener('keypress', pressEnterOnInput);\r\n      divElement.children[1].addEventListener('keypress', pressEnterOnInput);\r\n    }\r\n    divElement.style.top = (event.clientY - 40) + 'px';\r\n    divElement.style.left = (event.clientX + 10) + 'px';\r\n    if (isAddingPolygon) {\r\n      divElement.children[0].focus();\r\n    }\r\n    if (distance1 != null)\r\n      divElement.children[0].value = distance1.toFixed(2);\r\n    if (distance2 != null)\r\n      divElement.children[1].value = distance2.toFixed(2);\r\n  }\r\n  function pressEnterOnInput(event) {\r\n    if(event.keyCode !== 13) {\r\n      return;\r\n    }\r\n    let isNum0 = checkNumber(divElement.children[0].value);\r\n    let isNum1 = checkNumber(divElement.children[1].value);\r\n    let value0 = parseFloat(divElement.children[0].value);\r\n    if (!isNum0 || value0 == undefined || value0 <= 0) {\r\n      if (!isNum0) {\r\n        scene.dispatchEvent(eventInvalidNumInput);\r\n      }\r\n      return;\r\n    }\r\n    if (isAddingRectangle) {\r\n      if (event.target == divElement.children[0]) {\r\n        divElement.children[1].focus();\r\n      } else {\r\n        let value1 = parseFloat(divElement.children[1].value);\r\n        if (!isNum1 || value1 == undefined || value0 <= 0 || value1 <= 0) {\r\n          if (!isNum1) {\r\n            scene.dispatchEvent(eventInvalidNumInput);\r\n          }\r\n          return;\r\n        }\r\n        let diff = new Vector3(0,0,0);\r\n        diff.x = currentPointObj.position.x < startPoint.x ? -value0 : value0;\r\n        diff.y = currentPointObj.position.y < startPoint.y ? -value1 : value1;\r\n        addSimpleMesh(startPoint, startPoint.clone().add(diff));\r\n      }\r\n    } else if (isAddingCircle) {\r\n      let clickPos = startPoint.clone().add(new Vector3(value0, 0, 0));\r\n      addSimpleMesh(startPoint, clickPos);\r\n    } else if (isAddingPolygon) {\r\n      let last = polygonVertices[polygonVertices.length - 1];\r\n      let distance = last.distanceTo(curVector);\r\n      if (distance < Config.code.moveSlightlyStep) {\r\n        return;\r\n      }\r\n      let fraction = value0 / distance;\r\n      let currentPos = last.clone().lerp(curVector, fraction);\r\n      if (lineMesh != null && lineMesh.parent != null) {\r\n        editingLayer.remove(lineMesh);\r\n      }\r\n      // console.log(\"addControlPointToPolygon:\", last, curVector);\r\n      addControlPointToPolygon(currentPos);\r\n      curVector.copy(currentPos);\r\n    }\r\n  }\r\n\r\n  function mouseMove_simpleItemAdding(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      let curPoint = lst[0].point;\r\n      if (Config.ui.enableEditPointAdhere) {\r\n        let guideArr = getGuideLines(curPoint);\r\n        updateGuideLines(guideArr);\r\n        adjustPosByGuideLines(curPoint);\r\n      }\r\n      if (startPoint != null) {\r\n        let d1, d2;\r\n        if (isAddingRectangle) {\r\n          d1 = Math.abs(startPoint.x - curPoint.x);\r\n          d2 = Math.abs(startPoint.y - curPoint.y);\r\n        } else if (isAddingCircle) {\r\n          d1 = curPoint.distanceTo(startPoint);\r\n        }\r\n        showDiv(event, d1, d2);\r\n        if (lineMesh == null) {\r\n          if (isAddingCircle) {\r\n            lineMesh = StaticFunc.getPolygonLineMesh(StaticFunc.getCirclePoints(startPoint, curPoint), null, true);\r\n            radiusMesh = StaticFunc.getPolygonLineMesh([startPoint, curPoint], null, false);\r\n            editingLayer.add(radiusMesh);\r\n          } else {\r\n            lineMesh = StaticFunc.getPolygonLineMesh(StaticFunc.getRectangelPoints(startPoint, curPoint), null, true);\r\n          }\r\n          editingLayer.add(lineMesh);\r\n        } else {\r\n          let attr = lineMesh.geometry.attributes.position;\r\n          let points;\r\n          if (isAddingCircle) {\r\n            points = StaticFunc.getCirclePoints(startPoint, curPoint);\r\n            let attr2 = radiusMesh.geometry.attributes.position;\r\n            attr2.setXYZ(1, curPoint.x, curPoint.y, curPoint.z);\r\n            attr2.needsUpdate = true;\r\n          } else {\r\n            lineMesh.computeLineDistances();\r\n            points = StaticFunc.getRectangelPoints(startPoint, curPoint);\r\n          }\r\n          attr.copyArray(StaticFunc.flatten(points));\r\n          attr.needsUpdate = true;\r\n        }\r\n      }\r\n      currentPointObj.position.copy(curPoint);\r\n      if (currentPointObj.parent == null) {\r\n        editingLayer.add(currentPointObj);\r\n      }\r\n    }\r\n  }\r\n\r\n  function prepareForAdd() {\r\n    if (isAddingPolygon) {\r\n      endPolygonAdd();\r\n    }\r\n    if (isAddingCircle || isAddingRectangle) {\r\n      endSimpleItemAdd();\r\n    }\r\n  }\r\n\r\n  //-----------------------------------------------\r\n  function addObject(holder) {\r\n    let mesh = holder.getMesh();\r\n    let layer = Layers.getLayer();\r\n    if (layer != null && mesh) {\r\n      holder.updatePosition();\r\n      holder.getMesh().renderOrder = layer.children.length;\r\n      layer.add(holder.getHolderGroup());\r\n      holder.updateScaleFactor(Main.currentCameraScale());\r\n      if (layer === Layers.floorLayer) {\r\n        // mesh.material.color.setHex(0xdbdbdb);\r\n        // mesh.material.opacity = 1;\r\n        mesh.holder.setName(\"\");\r\n        // mesh.holder.setHeight(0.1);\r\n        // mesh.position.z = -0.1001;\r\n      }\r\n      if (status == STATUS_ADDING_GRAPHICS) {\r\n        setSelectMesh(mesh);\r\n        let context = {selectedMeshes: selectedMeshes, meshes: [mesh],\r\n          parentGroup: layer, tool: Main.polgyonTool()};\r\n        History.addAction(\"add polygons\", context);\r\n      }\r\n    }\r\n  }\r\n  function removeObject(holder) {\r\n    let index = selectedMeshes.indexOf(holder.getMesh());\r\n    if (index >= 0) {\r\n      selectedMeshes.splice(index, 1);\r\n    }\r\n    holder.remove();\r\n  }\r\n  function onLockChange(event) {\r\n    setStatusToFree();\r\n    let locked = event.layerObj.locked, hidden = event.layerObj.hidden, layer = event.layerObj.group;\r\n    let lst = layer.children;\r\n    for (let i = 0; i < lst.length; i++) {\r\n      if (lst[i].inRefLayer) {\r\n        if (locked || hidden) {\r\n          unlockRef = selectedRef = null;\r\n          eventRefItemSelect.item = null;\r\n          scene.dispatchEvent(eventRefItemSelect);\r\n        } else if (!locked && !hidden) {\r\n          unlockRef = lst[i];\r\n        }\r\n        continue;\r\n      }\r\n      if (lst[i].holder == undefined || lst[i].holder.getMesh == undefined)\r\n        continue;\r\n      let item = lst[i].holder.getMesh();\r\n      if (locked || hidden) {\r\n        let index = selectedMeshes.indexOf(item);\r\n        if (index >= 0) {\r\n          selectedMeshes[index].holder.unselect();\r\n          selectedMeshes.splice(index, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  init();\r\n  function init() {\r\n    transformControls = new TransformControls2D( Main.getCamera(), dom);\r\n    transformControls.addEventListener( \"change\", transformingSelectedMesh);\r\n    transformControls.addEventListener( \"mouseUp\", transformingSelectedMeshEnd);\r\n    scene.add( transformControls );\r\n\r\n    selectionHelper.material.depthTest = false;\r\n    selectionHelper.material.transparent = true;\r\n    selectionHelper.visible = false;\r\n    scene.add( selectionHelper );\r\n\r\n    Layers.attachLayersToScene(scene);\r\n    scene.addEventListener('selectionBoxUpdated', mouseup4SelectionBox);\r\n    scene.addEventListener('lock change', onLockChange);\r\n  }\r\n\r\n  function mouseup4SelectionBox(event) {\r\n    if (status !== STATUS_FREE || Layers.navPathTabSelected() )\r\n      return;\r\n    let meshes = Layers.availableMeshes();\r\n    if (meshes.length == 0) {\r\n      return;\r\n    }\r\n    let allSelected = event.selectBox.select(meshes);\r\n    selectedMeshes.forEach(it => it.holder.unselect() );\r\n    // selectedMeshes.splice(0, selectedMeshes.length);\r\n    allSelected.forEach(it => it.holder.select() );\r\n    selectedMeshes = allSelected;\r\n    scene.dispatchEvent(eventSelectionChange);\r\n  }\r\n\r\n  function mousedown4Select(event) {\r\n    // console.log('polygon tool, mousedown a ' + status)\r\n    // console.log('mousedown while: ' + transformControls.dragging);\r\n    if (transformControls.dragging || in3dContext) {\r\n      return false;\r\n    }\r\n    if (status == STATUS_ADDING_GRAPHICS || status == STATUS_COPYING_GRAPHICS || status == STATUS_SLICING_GRAPHIC) {\r\n      contextMenuEnabled = false;\r\n      if (event.button == 2 && status == STATUS_SLICING_GRAPHIC) {\r\n        endSlicingMesh();\r\n      }\r\n      return true;\r\n    }\r\n    if (event.button == 2) {\r\n      //鼠标右键\r\n      if (status == STATUS_FREE || status == STATUS_EDITING_POINTS ||\r\n        status == STATUS_SCALING_GRAPHICS || status == STATUS_ROTATING_GRAPHICS) {\r\n        contextMenuEnabled = false;\r\n        if (selectedMeshes.length > 0 && !Main.pressingShift()) {\r\n          contextMenuEnabled = true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    if (Main.updateCameraByDivideRects(event.clientX, event.clientY)) {\r\n      return true;\r\n    }\r\n    if (Layers.navPathTabSelected())\r\n      return false;\r\n    let lst = [];\r\n    mouseDownPos = null;\r\n    if (status == STATUS_FREE || status == STATUS_SCALING_GRAPHICS || status == STATUS_ROTATING_GRAPHICS) {    //\r\n      if (status != STATUS_FREE && selectedRef) {\r\n        return false;\r\n      }\r\n      let arr = Layers.availableMeshes();\r\n      if (unlockRef != null) {\r\n        arr.push(unlockRef);\r\n        selectedRef = null;\r\n        eventRefItemSelect.item = null;\r\n        scene.dispatchEvent(eventRefItemSelect);\r\n      }\r\n      lst = Main.getIntersects(event.clientX, event.clientY, arr);\r\n      if (lst.length == 0) {\r\n        if (status == STATUS_FREE && !Main.pressingShift()) setSelectMesh(null);\r\n        return false;\r\n      }\r\n      let mesh = findUpperItem(lst);\r\n      if (mesh.holder) {\r\n        setSelectMesh(mesh);\r\n      } else {\r\n        selectedRef = mesh;\r\n        eventRefItemSelect.item = mesh;\r\n        scene.dispatchEvent(eventRefItemSelect);\r\n      }\r\n      if (status == STATUS_SCALING_GRAPHICS || status == STATUS_ROTATING_GRAPHICS) {\r\n        mesh.userData.oldScale = mesh.scale.clone();\r\n        mesh.userData.oldRotation = mesh.rotation.clone();\r\n        transformControls.attach(mesh);\r\n      }\r\n      mouseDownPos = lst[0].point;\r\n    }\r\n\r\n    if (mouseDownPos != null) {\r\n      dom.addEventListener('mousemove', mousemove4Drag);\r\n      document.addEventListener('mouseup', mouseup4Drag);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //获取mesh 在哪个图层，在其图层上的索引\r\n  function getMeshIndex(mesh) {\r\n    if (!mesh || !mesh.holder || !mesh.holder.getHolderGroup() ) {\r\n      return null;\r\n    }\r\n    let holderGroup = mesh.holder.getHolderGroup();\r\n    let index = holderGroup.parent.children.indexOf(holderGroup);\r\n    return {layer: holderGroup.parent.renderOrder, indexInLayer: index};\r\n  }\r\n\r\n  function findUpperItem(raycastItems) {\r\n    let upperMesh = raycastItems[0].object, maxGroup = -1, groupsUpper = {};\r\n    for (let item of raycastItems) {\r\n      let mesh = item.object;\r\n      let obj = getMeshIndex(mesh);\r\n      if (obj) {\r\n        if (maxGroup < obj.layer) {\r\n          maxGroup = obj.layer;\r\n        }\r\n        if (groupsUpper[obj.layer] == undefined) {\r\n          groupsUpper[obj.layer] = {index: obj.indexInLayer, mesh: mesh};\r\n        } else if (groupsUpper[obj.layer].index < obj.indexInLayer) {\r\n          groupsUpper[obj.layer].index = obj.indexInLayer;\r\n          groupsUpper[obj.layer].mesh = mesh;\r\n        }\r\n      }\r\n    }\r\n    if (maxGroup > -1) {\r\n      upperMesh = groupsUpper[maxGroup].mesh;\r\n    }\r\n    return upperMesh;\r\n  }\r\n\r\n  function transformingSelectedMesh(event) {\r\n    let object = transformControls.object;\r\n    if ( object !== undefined ) {\r\n      selectionHelper.visible = true;\r\n      selectionHelper.setFromObject( object );\r\n      if (selectedRef === object) {\r\n        scene.dispatchEvent(eventRefItemSelect);\r\n      }\r\n    }\r\n  }\r\n\r\n  function transformingSelectedMeshEnd(event) {\r\n    let mesh = selectedRef;\r\n    if (!selectedRef) {\r\n      mesh = selectedMeshes[0];\r\n    }\r\n    let undoContext = {mesh: mesh};\r\n    if (event.mode == \"rotate\") {\r\n      undoContext.oldRotation = mesh.userData.oldRotation;\r\n      undoContext.rotation = mesh.rotation.clone();\r\n      History.addAction(\"update model rotation\", undoContext);\r\n      mesh.userData.oldRotation = undoContext.rotation.clone();\r\n    } else if (event.mode == \"scale\") {\r\n      undoContext.oldScale = mesh.userData.oldScale;\r\n      undoContext.scale = mesh.scale.clone();\r\n      History.addAction(\"update model scale\", undoContext);\r\n      mesh.userData.oldScale = undoContext.scale.clone();\r\n    }\r\n  }\r\n\r\n  // function getAdheredPosition(curPos) {\r\n  //   if (!Config.code.enableEditPointAdhere) {\r\n  //     return curPos;\r\n  //   }\r\n  //   for (let mesh of meshes) {\r\n  //     let adhereObj = mesh.holder.getPointOnEdges(curPos);\r\n  //     if (adhereObj.ctrlPos != null) {\r\n  //       return adhereObj.ctrlPos;\r\n  //     }\r\n  //     if (adhereObj.posOnEdge != null) {\r\n  //       return adhereObj.posOnEdge;\r\n  //     }\r\n  //   }\r\n  //   return curPos;\r\n  // }\r\n\r\n  function setSelectMesh(mesh) {\r\n    if (mesh == null) {\r\n      selectedMeshes.forEach(it => it.holder.unselect() );\r\n      selectedMeshes = [];\r\n      scene.dispatchEvent(eventSelectionChange);\r\n      return;\r\n    }\r\n    if (Main.pressingShift() && status != STATUS_ADDING_GRAPHICS) {\r\n      mesh.holder.select();\r\n      if (selectedMeshes.indexOf(mesh) < 0) {\r\n        selectedMeshes.push(mesh);\r\n      } else {\r\n        mesh.holder.unselect();\r\n        selectedMeshes.splice(selectedMeshes.indexOf(mesh), 1);\r\n      }\r\n      scene.dispatchEvent(eventSelectionChange);\r\n    } else {\r\n      if (status == STATUS_ADDING_GRAPHICS || selectedMeshes.indexOf(mesh) < 0) {\r\n        selectedMeshes.forEach(it => it.holder.unselect() );\r\n        selectedMeshes.splice(0, selectedMeshes.length);\r\n        mesh.holder.select();\r\n        selectedMeshes[0] = mesh;\r\n        scene.dispatchEvent(eventSelectionChange);\r\n        if (curNum > -1) {\r\n          let fastName = updateFastName();\r\n          mesh.holder.setName(fastName);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateFastName() {\r\n    let numStr = curNum + \"\";\r\n    while(numStr.length < fillZero) {\r\n      numStr = \"0\" + numStr;\r\n    }\r\n    curNum++;\r\n    let rule = curNum + \"\";\r\n    if (fillZero > 1 && fillZero != 3) {\r\n      rule += \"-\"+fillZero;\r\n    }\r\n    if (suffix.length > 0 || postfix.length > 0) {\r\n      rule = suffix + '{' + rule + '}' + postfix;\r\n    }\r\n    eventFastNameChange.num = curNum;\r\n    eventFastNameChange.value = rule;\r\n    scene.dispatchEvent(eventFastNameChange);\r\n    return suffix + numStr + postfix;\r\n  }\r\n\r\n  function removeEditPoint() {\r\n    if (editingPoint.parent != null) {\r\n      editingPoint.parent.remove(editingPoint);\r\n    }\r\n    adhereObj = null;\r\n  }\r\n\r\n  function stopEditingControlPoints() {\r\n    removeEditPoint();\r\n    selectedPoint = null;\r\n    if (selectedMeshes.length == 1) {\r\n      selectedMeshes[0].holder.endEditCtrlPoint();\r\n    }\r\n    dom.removeEventListener('mousemove', mousemove4EditingPoint);\r\n    dom.removeEventListener('mousedown', mousedown4EditingPoint);\r\n  }\r\n\r\n  function mousemove4Drag(event) {\r\n    if (event.buttons == 2) {\r\n      return;\r\n    }\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    let curPos = lst[0].point;\r\n    let vector = curPos.clone().sub(mouseDownPos);\r\n    if (selectedRef) {\r\n      Layers.moveRef(vector);\r\n      scene.dispatchEvent(eventRefItemSelect);\r\n      return;\r\n    }\r\n    selectedMeshes.forEach(selectedMesh => selectedMesh.holder.move(vector) );\r\n    if (Config.ui.enableEditPointAdhere) {\r\n      let obj = getGuideLines4Moving();\r\n      updateGuideLines4Moving(obj);\r\n      let offsetFromGuideLines = adjustBoxesByGuideLines(obj);\r\n      vector.add(offsetFromGuideLines);\r\n      selectedMeshes.forEach(selectedMesh => selectedMesh.holder.move(vector));\r\n    }\r\n\r\n    if (selectedMeshes.length == 1 && selectionHelper.visible) {\r\n      selectionHelper.setFromObject( selectedMeshes[0] );\r\n    }\r\n  }\r\n  function mouseup4Drag() {\r\n    let undoContext = {meshes:[], positions:[], oldPositions:[] };\r\n    if (selectedRef) {\r\n      undoContext.meshes = [selectedRef];\r\n      undoContext.oldPositions = [Layers.oldRefPos().clone()];\r\n      Layers.updateRefPos();\r\n      undoContext.positions = [Layers.oldRefPos().clone()];\r\n    } else {\r\n      selectedMeshes.forEach(it => {\r\n        undoContext.meshes.push(it);\r\n        undoContext.oldPositions.push(it.holder.getOldPos().clone() );\r\n        it.holder.updatePosition();\r\n        undoContext.positions.push(it.holder.getOldPos().clone() );\r\n      } );\r\n    }\r\n\r\n    if (undoContext.positions.length > 0 &&\r\n        undoContext.positions[0].manhattanDistanceTo(undoContext.oldPositions[0]) >= Config.code.moveSlightlyStep) {\r\n      History.addAction(\"update models position\", undoContext);\r\n    }\r\n\r\n    dom.removeEventListener('mousemove', mousemove4Drag);\r\n    document.removeEventListener('mouseup', mouseup4Drag);\r\n    clearGuideLines();\r\n  }\r\n  function mousemove4DragPoint(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    let curPos = lst[0].point;\r\n    let vector = curPos.clone().sub(oldPtPos);\r\n    if (selectedPoint != null && selectedMeshes.length == 1) {\r\n      selectedPoint.position.addVectors(oldPtPos, vector);\r\n      selectedMeshes[0].holder.moveCtrlPoint(selectedPoint);\r\n      if (Config.ui.enableEditPointAdhere) {\r\n        let pos = selectedPoint.position.clone();\r\n        let guideLines = selectedMeshes[0].holder.getGuideLines4Editing(pos, [selectedPoint]);\r\n        updateGuideLines(guideLines);\r\n        adjustPosByGuideLines(pos);\r\n        let diff = pos.sub(selectedPoint.position);\r\n        if (diff.manhattanLength() > 0) {\r\n          selectedPoint.position.addVectors(oldPtPos, vector.add(diff) );\r\n          selectedMeshes[0].holder.moveCtrlPoint(selectedPoint );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  function mouseup4DragPoint() {\r\n    dom.removeEventListener('mousemove', mousemove4DragPoint);\r\n    dom.removeEventListener('mouseup', mouseup4DragPoint);\r\n    let undoContext = {ctrlPointObj: selectedPoint, position: selectedPoint.position.clone(), oldPosition: oldPtPos.clone()};\r\n    undoContext.mesh = selectedMeshes[0];\r\n    undoContext.parentGroup = Layers.getLayer();\r\n    History.addAction(\"update model shape slightly\", undoContext);\r\n    selectedPoint = null;\r\n  }\r\n  function mousedown4EditingPoint(event) {\r\n    if (selectedMeshes.length !== 1) {\r\n      return;\r\n    }\r\n    let curMesh = selectedMeshes[0];\r\n    let undoContext = {holder: curMesh.holder, parentGroup: Layers.getLayer() };\r\n    if (adhereObj != null) {\r\n      curMesh.holder.startEditCtrlPoint(Layers.getLayer());\r\n      let holder = curMesh.holder;\r\n      if (adhereObj.posOnEdge != null) {//add control point\r\n        holder.addCtrlPoint(adhereObj);\r\n        selectedMeshes[0] = holder.getMesh();\r\n        undoContext.adhereObj = adhereObj;\r\n        undoContext.add = true;\r\n      } else if (adhereObj.ctrlPoint != null) {\r\n        if (Main.pressingAlt()) {  //delete control point\r\n          holder.removeCtrlPoint(adhereObj);\r\n          selectedMeshes[0] = holder.getMesh();\r\n          undoContext.adhereObj = adhereObj;\r\n        } else {\r\n          selectedPoint = adhereObj.ctrlPoint;\r\n          mouseDownPos = selectedPoint.position.clone();\r\n          oldPtPos.copy(selectedPoint.position);\r\n          curMesh.holder.updateCurPointIndex(selectedPoint);\r\n          dom.addEventListener('mousemove', mousemove4DragPoint);\r\n          dom.addEventListener('mouseup', mouseup4DragPoint);\r\n        }\r\n      }\r\n      if (undoContext.adhereObj) {\r\n        History.addAction(\"update model shape\", undoContext);\r\n      }\r\n    } else {\r\n      curMesh.holder.endEditCtrlPoint();\r\n      let lst = Main.getIntersects(event.clientX, event.clientY, Layers.availableMeshes());\r\n      if (lst.length == 0) {\r\n        return;\r\n      }\r\n      mouseDownPos = lst[0].point;\r\n      let mesh = lst[0].object;\r\n      setSelectMesh(mesh);\r\n      dom.addEventListener('mousemove', mousemove4Drag);\r\n      document.addEventListener('mouseup', mouseup4Drag);\r\n    }\r\n  }\r\n  function mousemove4EditingPoint(event) {\r\n    if (selectedMeshes.length == 0) {\r\n      return;\r\n    }\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    if (editingPoint.parent == null) {\r\n      Layers.editingLayer.add(editingPoint);\r\n    }\r\n    let pos = lst[0].point;\r\n    // editingPoint.position.copy(pos);\r\n    adhereObj = selectedMeshes[0].holder.getPointOnEdges(pos);\r\n    if (adhereObj.ctrlPoint != null) {\r\n      editingPoint.position.x = adhereObj.ctrlPos.x;\r\n      editingPoint.position.y = adhereObj.ctrlPos.y;\r\n    } else if (adhereObj.posOnEdge != null) {\r\n      editingPoint.position.x = adhereObj.posOnEdge.x;\r\n      editingPoint.position.y = adhereObj.posOnEdge.y;\r\n      if (Config.ui.enableEditPointAdhere) {\r\n        let guideLines = selectedMeshes[0].holder.getGuideLines4Editing(editingPoint.position, adhereObj.edge);\r\n        updateGuideLines(guideLines);\r\n        adjustPosByGuideLines(editingPoint.position);\r\n        adhereObj.posOnEdge.set(editingPoint.position.x, editingPoint.position.y, adhereObj.posOnEdge.z);\r\n      }\r\n    } else {\r\n      removeEditPoint();\r\n      // editingPoint.position.copy(pos);\r\n    }\r\n  }\r\n  function mousemove4Slicing(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    let pos = lst[0].point;\r\n    if (Config.ui.enableEditPointAdhere) {\r\n      let targets = [];\r\n      selectedMeshes.forEach(mesh => {\r\n        let obj = mesh.holder.getPointOnEdges(pos, true);\r\n        if (obj.ctrlPoint) {\r\n          targets.push(obj);\r\n        }\r\n      });\r\n      if (targets.length > 0) {\r\n        targets.sort((a, b) => a.distanceSq - b.distanceSq );\r\n        pos = targets[0].ctrlPos;\r\n      }\r\n    }\r\n\r\n    slicingPoint.position.copy(pos);\r\n    if (!slicingPoint.parent) {\r\n      Layers.editingLayer.add(slicingPoint);\r\n    }\r\n    if (!curSliceSegment) {\r\n      return;\r\n    }\r\n    let attr = curSliceSegment.geometry.attributes.position;\r\n    attr.setXYZ(1, pos.x, pos.y, pos.z);\r\n    attr.needsUpdate = true;\r\n    curSliceSegment.computeLineDistances();\r\n  }\r\n  function mouseclick4Slicing(event) {\r\n    if (!slicingPoint.parent) {\r\n      return;\r\n    }\r\n    let pos = slicingPoint.position;\r\n    if (curSliceSegment) {\r\n      let attr = curSliceSegment.geometry.attributes.position;\r\n      let arr = StaticFunc.bufferAttributeToVertices(attr);\r\n      if (!arr[0].equals(arr[1])) {\r\n        if (sliceSegments.length === 0) {//首条拆分线，保留两个点\r\n          slicingPath.push(arr[0], arr[1]);\r\n        } else {\r\n          slicingPath.push(arr[1]);\r\n        }\r\n        sliceSegments.push(curSliceSegment);\r\n      }\r\n    }\r\n    curSliceSegment = StaticFunc.getSliceLineSegment(pos, pos);\r\n    Layers.editingLayer.add(curSliceSegment);\r\n  }\r\n  function mousedblclick4Slicing(event) {\r\n    if (selectedMeshes.length < 1) {\r\n      return;\r\n    }\r\n\r\n    let undoContext = {removeLst: [], appendLst: [], parentGroup: Layers.getLayer(), selectedMeshes: selectedMeshes};\r\n    let selectedMeshesBac = selectedMeshes.slice();\r\n    for (let i = 0; i < selectedMeshesBac.length; i++) {\r\n      let holder = selectedMeshesBac[i].holder;\r\n      let color = holder.getMesh().material.color;\r\n      let opacity = holder.getMesh().material.opacity;\r\n      let height = holder.getHeight();\r\n\r\n      undoContext.removeLst.push(holder.getMesh() );\r\n      //performing slicing\r\n      let newPolygons = TriangleCut.slicePolygon(holder.getArr4Merge(), StaticFunc.vectorsToObjXY(slicingPath) );\r\n      if (newPolygons != null && newPolygons.length > 1) {\r\n        removeObject(holder);\r\n        for (let i = 0; i < newPolygons.length; i++) {\r\n          let arr = newPolygons[i];\r\n          let slicedItem = PolygonMesh(StaticFunc.toVector3Arr(arr[0]), arr[1]);\r\n          addObject(slicedItem);\r\n          let mesh = slicedItem.getMesh();\r\n          undoContext.appendLst.push(mesh);\r\n          mesh.material.color.copy(color);\r\n          mesh.material.opacity = opacity;\r\n          mesh.userData.bacOpacity = opacity;\r\n          slicedItem.setHeight(height);\r\n          slicedItem.setTextHeight(height + 0.3);\r\n        }\r\n      } else {\r\n        // scene.dispatchEvent(eventSliceError);\r\n        console.log(eventSliceError);\r\n      }\r\n    }\r\n\r\n    console.log(\"slicing segments: \" + sliceSegments.length + \", points len: \" + slicingPath.length);\r\n    endSlicingMesh();\r\n    if (undoContext.appendLst.length > 0) {\r\n      History.addAction(\"slice model\", undoContext);\r\n    }\r\n  }\r\n\r\n  function endSlicingMesh() {\r\n    dom.removeEventListener('mousemove', mousemove4Slicing);\r\n    dom.removeEventListener('click', mouseclick4Slicing);\r\n    dom.removeEventListener('dblclick', mousedblclick4Slicing);\r\n\r\n    slicingPath = [];\r\n    if (slicingPoint.parent) {\r\n      slicingPoint.parent.remove(slicingPoint);\r\n    }\r\n    sliceSegments.forEach(it => it.parent.remove(it));\r\n    sliceSegments = [];\r\n    if (curSliceSegment && curSliceSegment.parent) curSliceSegment.parent.remove(curSliceSegment);\r\n    curSliceSegment = null;\r\n    status = STATUS_FREE;\r\n  }\r\n  function endGraphicsCopying() {\r\n    dom.removeEventListener('mousedown', mouseDownForCopying);\r\n    dom.removeEventListener('mousemove', mouseMoveForCopying);\r\n    clearGuideLines();\r\n    status = STATUS_FREE;\r\n    if (outlineOfPastes.parent != null) {\r\n      let chidren = outlineOfPastes.children.slice();\r\n      chidren.forEach(it => it.parent.remove(it));\r\n      editingLayer.remove(outlineOfPastes);\r\n    }\r\n  }\r\n  function mouseDownForCopying(event) {\r\n    if (event.button == 2) {\r\n      endGraphicsCopying();\r\n      return;\r\n    }\r\n    if (outlineOfPastes.children.length > 0) {\r\n      let copiedMeshes = [];\r\n      outlineOfPastes.children.forEach(outlineOfPaste => {\r\n        let pos = outlineOfPaste.position.clone().add(outlineOfPastes.position);\r\n        let polygonHolder = new PolygonMesh().initFromPasteItem(outlineOfPaste, pos);\r\n        addObject(polygonHolder);\r\n        copiedMeshes.push(polygonHolder.getMesh());\r\n      });\r\n      let layer = Layers.getLayer();\r\n      if (layer) {\r\n        let context = {selectedMeshes: selectedMeshes, meshes: copiedMeshes,\r\n          parentGroup: layer, tool: Main.polgyonTool()};\r\n        History.addAction(\"add polygons\", context);\r\n      }\r\n    }\r\n  }\r\n  function mouseMoveForCopying(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst <= 0) {\r\n      return;\r\n    }\r\n    let pos = lst[0].point;\r\n    if (outlineOfPastes.children.length > 0) {\r\n      if (Config.ui.enableEditPointAdhere) {\r\n        let width = outlineOfPastes.box2.width();\r\n        let height = outlineOfPastes.box2.height();\r\n        let p0 = pos.clone().add(new Vector3(-width / 2, -height / 2, 0));\r\n        let p1 = pos.clone().add(new Vector3(width / 2, height / 2, 0));\r\n        let pasteItemsBox = new Box2().setFromPoints([p0, p1]);\r\n        let guideObj = getGuideLines4Moving(pasteItemsBox);\r\n        updateGuideLines4Moving(guideObj);\r\n        let offsetFromGuideLines = adjustBoxesByGuideLines(guideObj);\r\n        pos.add(offsetFromGuideLines);\r\n      }\r\n    } else {\r\n      let points = [], posLst = [];\r\n      selectedMeshes.forEach(selectedMesh => {\r\n        let outlineOfPaste = selectedMesh.holder.toPasteItem();\r\n        // outlineOfPaste.position.copy(selectedMesh.holder.getPosition().clone().sub(pos));\r\n        outlineOfPastes.add(outlineOfPaste);\r\n        let box2 = selectedMesh.holder.getBox2();\r\n        points.push(box2.min, box2.max);\r\n        posLst.push(selectedMesh.holder.getPosition().clone())\r\n        ;\r\n      });\r\n      editingLayer.add(outlineOfPastes);\r\n      let outlineBox = new Box2().setFromPoints(points);\r\n      let boxCenter = outlineBox.getCenter();\r\n      outlineOfPastes.box2 = outlineBox;\r\n      outlineOfPastes.children.forEach((child, index) => {\r\n        child.position.copy(posLst[index].sub(boxCenter));\r\n      });\r\n    }\r\n    outlineOfPastes.position.copy(pos);\r\n  }\r\n\r\n  function getGuideLines4Moving(pasteItemsBox) {\r\n    let span = Config.code.smartGuideSpan * Main.currentCameraScale();\r\n    let target = {h: null, v: null};\r\n    if (selectedMeshes.length < 1) {\r\n      return target;\r\n    }\r\n    let hostBox;\r\n    if (pasteItemsBox) {\r\n      hostBox = pasteItemsBox;\r\n    } else {\r\n      if (selectedMeshes.length == 1) {\r\n        hostBox = selectedMeshes[0].holder.getBox2();\r\n      } else {\r\n        let points = [];\r\n        selectedMeshes.forEach(mesh => {\r\n          let box2 = mesh.holder.getBox2();\r\n          points.push(box2.min, box2.max);\r\n        });\r\n        hostBox = Box2().setFromPoints(points);\r\n      }\r\n    }\r\n\r\n    // hostBox.updateLines(0);\r\n    let guestBoxes = [];\r\n    for (let mesh of Layers.availableMeshes() ) {\r\n      if (pasteItemsBox != null || selectedMeshes.indexOf(mesh) < 0) {\r\n        guestBoxes.push(mesh.holder.getBox2());\r\n      }\r\n    }\r\n    if (guestBoxes.length == 0) {\r\n      return target;\r\n    }\r\n\r\n    let hObjMin, vObjMin;\r\n    let minSpanH = Infinity, minSpanV = Infinity;\r\n    for (let box of guestBoxes) {\r\n      let pair = hostBox.getClosestLinesWithBox(box);\r\n      let hVal = pair.h.distance, vVal = pair.v.distance;\r\n      if (hVal <= span && hVal < minSpanH) {\r\n        minSpanH = hVal;\r\n        hObjMin = pair.h;\r\n      }\r\n      if (vVal <= span && vVal < minSpanV) {\r\n        minSpanV = vVal;\r\n        vObjMin = pair.v;\r\n      }\r\n    }\r\n    return {h: hObjMin, v: vObjMin};\r\n  }\r\n\r\n  function updateGuideLines4Moving(pair) {\r\n    clearGuideLines();\r\n    if (pair.h) {\r\n      let p0 = pair.h.hostLine.start.clone(), p1 = pair.h.hostLine.end.clone();\r\n      let p2 = pair.h.guestLine.start, p3 = pair.h.guestLine.end;\r\n      p0.y = p1.y = p2.y;\r\n      guideLineX = StaticFunc.createGuideLine([p0, p1, p2, p3], true, Main.currentCameraScale());\r\n      if (guideLineX) editingLayer.add(guideLineX);\r\n    }\r\n    if (pair.v) {\r\n      let p0 = pair.v.hostLine.start.clone(), p1 = pair.v.hostLine.end.clone();\r\n      let p2 = pair.v.guestLine.start, p3 = pair.v.guestLine.end;\r\n      p0.x = p1.x = p2.x;\r\n      guideLineY = StaticFunc.createGuideLine([p0, p1, p2, p3], false, Main.currentCameraScale());\r\n      if (guideLineY) editingLayer.add(guideLineY);\r\n    }\r\n  }\r\n\r\n  function adjustBoxesByGuideLines(pair) {\r\n    let dx = 0, dy = 0;\r\n    if (pair.h) {\r\n      dy = pair.h.guestLine.start.y - pair.h.hostLine.start.y;\r\n    }\r\n    if (pair.v) {\r\n      dx = pair.v.guestLine.start.x - pair.v.hostLine.start.x;\r\n    }\r\n    return new Vector3(dx, dy, 0);\r\n  }\r\n\r\n  function getGuideLines(point) {\r\n    let span = Config.code.smartGuideSpan * Main.currentCameraScale();\r\n    let boxes = [];\r\n    let horizontalObj = {distance: Infinity}, verticalObj = {distance: Infinity};\r\n    Layers.availableMeshes().forEach(mesh => boxes.push(mesh.holder.getBox2()));\r\n    boxes.forEach(box => {\r\n      let spanObj = box.getClosestLines(point);\r\n      if (spanObj.horizontal <= span) {\r\n        let hObj = {line: spanObj.lineY, distance: spanObj.horizontal, vector: spanObj.hVector};\r\n        if (horizontalObj.distance > hObj.distance) horizontalObj = hObj;\r\n      }\r\n      if (spanObj.vertical <= span) {\r\n        let vObj = {line: spanObj.lineX, distance: spanObj.vertical, vector: spanObj.vVector};\r\n        if (verticalObj.distance > vObj.distance) verticalObj = vObj;\r\n      }\r\n    });\r\n    return [horizontalObj, verticalObj];\r\n  }\r\n\r\n  let guideLineX, guideLineY;\r\n\r\n  function clearGuideLines() {\r\n    if (guideLineX && guideLineX.parent) guideLineX.parent.remove(guideLineX);\r\n    if (guideLineY && guideLineY.parent) guideLineY.parent.remove(guideLineY);\r\n    guideLineX = null, guideLineY = null;\r\n  }\r\n\r\n  function updateGuideLines(guideArr) {\r\n    clearGuideLines();\r\n    let hObj = guideArr[0], vObj = guideArr[1];\r\n    if (hObj.line) {\r\n      guideLineY = StaticFunc.createGuideLine([hObj.line.start, hObj.line.end, hObj.vector], false, Main.currentCameraScale());\r\n      if (guideLineY) editingLayer.add(guideLineY);\r\n    }\r\n    if (vObj.line) {\r\n      guideLineX = StaticFunc.createGuideLine([vObj.line.start, vObj.line.end, vObj.vector], true, Main.currentCameraScale());\r\n      if (guideLineX) editingLayer.add(guideLineX);\r\n    }\r\n  }\r\n\r\n  //根据引导线调整坐标的 x 和 y\r\n  function adjustPosByGuideLines(position) {\r\n    if (guideLineX != null) {\r\n      position.y = guideLineX.userData.guideVal;\r\n    }\r\n    if (guideLineY != null) {\r\n      position.x = guideLineY.userData.guideVal;\r\n    }\r\n    return position;\r\n  }\r\n\r\n  const bool_a_sub_b = 1\r\n  const bool_a_intersect_b = 2\r\n  function boolPolygonAandB(opType) {\r\n    if (selectedMeshes.length !== 2) {\r\n      return\r\n    }\r\n    setStatusToFree();\r\n    let color = selectedMeshes[0].material.color;\r\n    let opacity = selectedMeshes[0].material.opacity;\r\n    let meshA = selectedMeshes[0], meshB = selectedMeshes[1]\r\n    let lstA = meshA.holder.getArr4Merge(), lstB = meshB.holder.getArr4Merge()\r\n    let results\r\n    if (opType == bool_a_sub_b) {\r\n      results = BoolPolygonsUtil.polygonAsubB(lstA, lstB)\r\n    } else if (opType == bool_a_intersect_b) {\r\n      results = TriangleCut.polygonAintersectB(lstA, lstB)\r\n    }\r\n    if (results.length == 0) {\r\n      return\r\n    }\r\n    let removed = [meshA, meshB], added = []\r\n    removed.forEach(it => removeObject(it.holder))\r\n    results.forEach(arr2 => {\r\n      let item = PolygonMesh(StaticFunc.toVector3Arr(arr2[0]), arr2[1])\r\n      addObject(item)\r\n      let newMesh = item.getMesh()\r\n      added.push(newMesh)\r\n      newMesh.material.color.copy(color);\r\n      newMesh.material.opacity = opacity;\r\n      newMesh.userData.bacOpacity = opacity;\r\n    })\r\n\r\n    let undoContext = {removeLst: removed, appendLst: added, parentGroup: Layers.getLayer(), selectedMeshes: selectedMeshes};\r\n    History.addAction(\"merge models\", undoContext);\r\n  }\r\n\r\n  function loadFloorHeatMap(jsonObj) {\r\n    let floorMesh = Layers.floorLayer.children[0].holder.getMesh();\r\n    let squarePos = floorMesh.holder.getBox2().minSquarePos();\r\n    material4HeatmapEdit = getHeatmapMaterial(material4HeatmapEdit, jsonObj.lst, squarePos, jsonObj.max);\r\n    updateUvAttribute(floorMesh);\r\n    floorMesh.material = material4HeatmapEdit;\r\n  }\r\n  function mouseclick4HeatmapEditing(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      let pos = lst[0].point;\r\n      // let existed = heatmapDataLst.filter(it => it.v3.distanceToSquared(pos) < heatmapPointSpan);\r\n      // if (existed.length > 0) {\r\n      //   existed[0].value += 1;\r\n      // } else {\r\n        heatmapDataLst.push({value: 5, x: pos.x, y: pos.y});\r\n      // }\r\n      let obj = {lst: heatmapDataLst, max: maximumHeat};\r\n      loadFloorHeatMap(obj);\r\n    }\r\n  }\r\n\r\n  let that = {\r\n    mousedown4Select: mousedown4Select,\r\n\r\n    startAddPolygon: startAddPolygon,\r\n    startAddRectangle() {\r\n      prepareForAdd();\r\n      isAddingRectangle = true;\r\n      divElement.children[1].style.display = 'inline';\r\n      return startAddSimpleGraphic();\r\n    },\r\n    startAddCircle() {\r\n      prepareForAdd();\r\n      isAddingCircle = true;\r\n      divElement.children[1].style.display = 'none';\r\n      return startAddSimpleGraphic();\r\n    },\r\n    dispatchSelectionChange() {\r\n      scene.dispatchEvent(eventSelectionChange);\r\n    },\r\n    toggleStatusOfEditingPoints() {\r\n      if (selectedMeshes.length != 1 || status == STATUS_ADDING_GRAPHICS || status == STATUS_COPYING_GRAPHICS) {\r\n        return;\r\n      }\r\n      if (status == STATUS_EDITING_POINTS) {\r\n        status = STATUS_FREE;\r\n        stopEditingControlPoints();\r\n      } else {\r\n        if (status == STATUS_SCALING_GRAPHICS || status == STATUS_ROTATING_GRAPHICS) {\r\n          transformControls.detach();\r\n          selectionHelper.visible = false;\r\n        }\r\n        status = STATUS_EDITING_POINTS;\r\n        dom.addEventListener('mousemove', mousemove4EditingPoint);\r\n        dom.addEventListener('mousedown', mousedown4EditingPoint);\r\n      }\r\n    },\r\n    toggleStatusRotatingMesh() {\r\n      if (status == STATUS_COPYING_GRAPHICS) {\r\n        return;\r\n      }\r\n      if (status == STATUS_ROTATING_GRAPHICS) {\r\n        status = STATUS_FREE;\r\n        transformControls.detach();\r\n        selectionHelper.visible = false;\r\n      } else {\r\n        setStatusToFree([STATUS_SCALING_GRAPHICS]);\r\n        transformControls.setMode('rotate');\r\n        if (selectedRef) {\r\n          selectedRef.userData.oldRotation = selectedRef.rotation.clone();\r\n          transformControls.attach(selectedRef);\r\n        } else {\r\n          selectedMeshes[0].userData.oldRotation = selectedMeshes[0].rotation.clone();\r\n          transformControls.attach(selectedMeshes[0]);\r\n        }\r\n        selectionHelper.visible = true;\r\n        status = STATUS_ROTATING_GRAPHICS;\r\n      }\r\n    },\r\n    toggleStatusScalingMesh() {\r\n      if (status == STATUS_COPYING_GRAPHICS) {\r\n        return;\r\n      }\r\n      if (status == STATUS_SCALING_GRAPHICS) {\r\n        status = STATUS_FREE;\r\n        transformControls.detach();\r\n        selectionHelper.visible = false;\r\n      } else {\r\n        setStatusToFree([STATUS_ROTATING_GRAPHICS]);\r\n\r\n        transformControls.setMode('scale');\r\n        if (selectedRef) {\r\n          selectedRef.userData.oldScale = selectedRef.scale.clone();\r\n          transformControls.attach(selectedRef);\r\n        } else {\r\n          selectedMeshes[0].userData.oldScale = selectedMeshes[0].scale.clone();\r\n          transformControls.attach(selectedMeshes[0]);\r\n        }\r\n        selectionHelper.visible = true;\r\n        status = STATUS_SCALING_GRAPHICS;\r\n      }\r\n    },\r\n    startSlicingMesh() {\r\n      setStatusToFree();\r\n      status = STATUS_SLICING_GRAPHIC;\r\n      dom.addEventListener('mousemove', mousemove4Slicing);\r\n      dom.addEventListener('click', mouseclick4Slicing);\r\n      dom.addEventListener('dblclick', mousedblclick4Slicing);\r\n    },\r\n    startCopyingMesh() {\r\n      if (selectedMeshes.length == 0) {\r\n        return;\r\n      }\r\n      setStatusToFree();\r\n      status = STATUS_COPYING_GRAPHICS;\r\n      dom.addEventListener('mousedown', mouseDownForCopying);\r\n      dom.addEventListener('mousemove', mouseMoveForCopying);\r\n    },\r\n    getHeatMapEditObj() {\r\n      let target = {\r\n        max: maximumHeat,\r\n        lst: []\r\n      }\r\n      heatmapDataLst.forEach(it => target.lst.push({x: it.x.toFixed(2), y: it.y.toFixed(2), value: it.value}));  //\r\n      return target;\r\n    },\r\n    loadFloorHeatMap:loadFloorHeatMap,\r\n    startEditHeatmap() {\r\n      if (Layers.floorLayer.children.length == 0) {\r\n        console.log('地面层必须有元素，才能编辑热力图');\r\n        return\r\n      }\r\n      status = STATUS_EDITING_HEATMAP;\r\n      dom.addEventListener('click', mouseclick4HeatmapEditing);\r\n    },\r\n    endEditHeatmap() {\r\n      status = STATUS_FREE;\r\n      heatmapDataLst = [];\r\n      dom.removeEventListener('click', mouseclick4HeatmapEditing);\r\n    },\r\n    rotateSingleMesh() {\r\n      if (selectedMeshes.length !== 1) {\r\n        return;\r\n      }\r\n      let mesh = selectedMeshes[0];\r\n      mesh.holder.rotateByKeyboard();\r\n      let undoContext = {mesh: mesh, degree: Config.code.rotateStep};\r\n      History.addOrUpdateAction(\"shortcut rotate\", undoContext);\r\n    },\r\n    mergeMeshes() {\r\n      if (selectedMeshes.length < 2) {\r\n        return;\r\n      }\r\n      setStatusToFree();\r\n      let color = selectedMeshes[selectedMeshes.length-1].material.color;\r\n      let opacity = selectedMeshes[selectedMeshes.length-1].material.opacity;\r\n\r\n      let wait4Merge = selectedMeshes.slice();\r\n      let merged = [], added = [];\r\n      while(wait4Merge.length >= 2) {\r\n        let firstMesh = wait4Merge.shift();\r\n        let first = firstMesh.holder.getArr4Merge();\r\n        for (let i = 0; i < wait4Merge.length; i++) {\r\n          let lst = wait4Merge[i].holder.getArr4Merge();\r\n          let mergeRet = TriangleCut.mergePolygons(first, lst);\r\n          if (mergeRet.length == 2) {\r\n            merged.push(firstMesh, wait4Merge[i]);\r\n            let mergedItem = PolygonMesh(StaticFunc.toVector3Arr(mergeRet[0]), mergeRet[1]);\r\n            addObject(mergedItem);\r\n\r\n            wait4Merge.splice(i, 1);\r\n            let mesh = mergedItem.getMesh();\r\n            if (mesh.material) {\r\n              added.push(mesh);\r\n              mesh.material.color.copy(color);\r\n              mesh.material.opacity = opacity;\r\n              mesh.userData.bacOpacity = opacity;\r\n              wait4Merge.push(mesh);\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      merged.forEach(mesh => removeObject(mesh.holder));\r\n      let removed = merged.filter(mesh => added.indexOf(mesh) < 0);\r\n      added = added.filter(mesh => merged.indexOf(mesh) < 0);\r\n      let undoContext = {removeLst: removed, appendLst: added, parentGroup: Layers.getLayer(), selectedMeshes: selectedMeshes};\r\n      History.addAction(\"merge models\", undoContext);\r\n    },\r\n    meshAsubItems() {\r\n      if (selectedMeshes.length < 2) {\r\n        return\r\n      }\r\n      setStatusToFree();\r\n\r\n      let meshLast = selectedMeshes[selectedMeshes.length-1]\r\n      let color = meshLast.material.color;\r\n      let opacity = meshLast.material.opacity;\r\n      let needBeSub = [meshLast]   //被减对象\r\n      let removed = []\r\n      let subMeshes = selectedMeshes.slice(0, selectedMeshes.length-1)\r\n\r\n      for (let i = 0; i < subMeshes.length; i++) {\r\n        let meshB = subMeshes[i]\r\n        let replacements = []\r\n        let bConsumed = false\r\n        for (let j = 0; j < needBeSub.length; j++) {\r\n          let meshA = needBeSub[j]\r\n          let lstA = meshA.holder.getArr4Merge(), lstB = meshB.holder.getArr4Merge()\r\n          let results = BoolPolygonsUtil.polygonAsubB(lstA, lstB)\r\n          if (results.length > 0) {\r\n            bConsumed = true\r\n            let replaceObj = {index: j, meshes:[]}\r\n            results.forEach(arr2 => {\r\n              let item = PolygonMesh(StaticFunc.toVector3Arr(arr2[0]), arr2[1])\r\n              let newMesh = item.getMesh()\r\n              replaceObj.meshes.push(newMesh)\r\n            })\r\n            replacements.push(replaceObj)\r\n          }\r\n        }\r\n        if (bConsumed) {\r\n          removed.push(meshB)\r\n        }\r\n        while (replacements.length > 0) {\r\n          let replaceObj = replacements.pop()\r\n          needBeSub.splice(replaceObj.index, 1, ...replaceObj.meshes)\r\n        }\r\n      }\r\n\r\n      if (removed.length > 0) {\r\n        removed.push(meshLast)\r\n        removed.forEach(it => removeObject(it.holder))\r\n        needBeSub.forEach(it => {\r\n          addObject(it.holder)\r\n          it.material.color.copy(color);\r\n          it.material.opacity = opacity;\r\n          it.userData.bacOpacity = opacity;\r\n        })\r\n        let undoContext = {removeLst: removed, appendLst: needBeSub, parentGroup: Layers.getLayer(), selectedMeshes: selectedMeshes};\r\n        History.addAction(\"merge models\", undoContext);\r\n      }\r\n    },\r\n    meshAsubB() {\r\n      boolPolygonAandB(bool_a_sub_b)\r\n    },\r\n    meshAintersectB() {\r\n      boolPolygonAandB(bool_a_intersect_b)\r\n    },\r\n    moveSelectedMesh(vector) {\r\n      if (selectedMeshes.length == 0) {\r\n        return;\r\n      }\r\n      selectedMeshes.forEach(it => {\r\n        it.holder.move(vector);\r\n        it.holder.updatePosition();\r\n      });\r\n      let undoContext = {meshes:selectedMeshes.slice(), moveVector: vector.clone() };\r\n      History.addOrUpdateAction(\"shortcut move\", undoContext);\r\n    },\r\n    removeAll() {\r\n      Layers.clearCustomLayers();\r\n      let arr = Layers.buildingsLayer.children.slice();\r\n      arr = arr.concat(Layers.floorLayer.children).concat(Layers.referLayer.children);\r\n      arr.push(currentPointObj, adhereCircle, editingPoint, slicingPoint);\r\n      arr.forEach(it => {\r\n        if (it && it.parent) {\r\n          it.parent.remove(it);\r\n        }\r\n      });\r\n      selectedMeshes = [];\r\n      setStatusToFree();\r\n\r\n      scene.dispatchEvent(eventSelectionChange);\r\n      dom.removeEventListener('mousemove', mousemove4Drag);\r\n      document.removeEventListener('mouseup', mouseup4Drag);\r\n      clearGuideLines();\r\n      selectedRef = null, unlockRef = null, selectedPoint = null;\r\n      adhereObj = null;\r\n    },\r\n    removeSelectedMesh() {\r\n      if (selectedMeshes.length == 0 || status == STATUS_ADDING_GRAPHICS) {\r\n        return;\r\n      }\r\n      let meshParentGroup = selectedMeshes[0].holder.getHolderGroup().parent;\r\n      selectedMeshes.forEach(it => {\r\n        it.holder.remove();\r\n      });\r\n      transformControls.detach();\r\n      selectionHelper.visible = false;\r\n\r\n      setStatusToFree();\r\n      mouseup4Drag();\r\n      scene.dispatchEvent(eventSelectionChange);\r\n\r\n      let context = {selectedMeshes: selectedMeshes, meshes: selectedMeshes.slice(),\r\n        parentGroup: meshParentGroup, tool: Main.polgyonTool()};\r\n      History.addAction(\"remove polygons\", context);\r\n\r\n      selectedMeshes.splice(0, selectedMeshes.length);\r\n      selectedPoint = null;\r\n    },\r\n    isStatusEditingPoints() {\r\n      return status == STATUS_EDITING_POINTS;\r\n    },\r\n    isStatusScalingMesh() {\r\n      return status == STATUS_SCALING_GRAPHICS;\r\n    },\r\n    isStatusRotatingMesh() {\r\n      return status == STATUS_ROTATING_GRAPHICS;\r\n    },\r\n    onNavPathTabSelected() {\r\n      setStatusToFree();\r\n      selectedMeshes.forEach(mesh => mesh.holder.unselect());\r\n      selectedMeshes.splice(0, selectedMeshes.length);\r\n    },\r\n    getContextMenuEnabled() {\r\n      return contextMenuEnabled;\r\n    },\r\n    // fastNameRule, \"abc {12-4} ttl\", \"abc \"是前缀，\" ttl\"是后缀，\r\n    // 12是当前序号，4为补零数, 0012, 0013, 0001 ...\r\n    enableFastNaming(fastNameRule) {\r\n      suffix = \"\", postfix = \"\", fillZero = 3;\r\n      let mid = fastNameRule;\r\n      if (fastNameRule.indexOf(\"{\") > -1) {\r\n        suffix = fastNameRule.substring(0, fastNameRule.indexOf(\"{\"));\r\n        postfix = fastNameRule.substr(fastNameRule.lastIndexOf(\"}\")+1);\r\n        mid = fastNameRule.substring(fastNameRule.indexOf(\"{\")+1, fastNameRule.lastIndexOf(\"}\"))\r\n      }\r\n      if (mid.indexOf(\"-\") > 0) {\r\n        let arr = mid.split(\"-\");\r\n        mid = arr[0];\r\n        fillZero = parseInt(arr[1]);\r\n      }\r\n      curNum = parseInt(mid);\r\n    },\r\n    disableFastNaming() {\r\n      curNum = -1;\r\n    },\r\n    updateNameByRule(rule) {\r\n      if (rule.indexOf('{')>=0 && rule.indexOf('}')>=0) {\r\n        that.enableFastNaming(rule);\r\n        let regexp = /\\d+/g;\r\n        selectedMeshes.forEach(mesh => {\r\n          let name = mesh.holder.getName();\r\n          if (name.length == 0)\r\n            return;\r\n          let arr = name.match(regexp);\r\n          if (arr && arr.length > 0) {\r\n            let num = parseInt(arr[0]);\r\n            name = num + \"\";\r\n          }\r\n          while (name.length < fillZero) {\r\n            name = '0' + name;\r\n          }\r\n          name = suffix + name + postfix;\r\n          mesh.holder.setName(name);\r\n        } );\r\n        that.disableFastNaming();\r\n      } else {\r\n        selectedMeshes.forEach(mesh => mesh.holder.setName(rule) );\r\n      }\r\n    },\r\n    getSelectedMeshes() {\r\n      return selectedMeshes;\r\n    },\r\n    getSelectedRef() {\r\n      return selectedRef;\r\n    },\r\n    set3D(val) {\r\n      in3dContext = val;\r\n    },\r\n    selectedMeshesReorder(toTop) {\r\n      if (selectedMeshes.length == 0 || status == STATUS_ADDING_GRAPHICS) {\r\n        return;\r\n      }\r\n      let holderParent = selectedMeshes[0].holder.getHolderGroup().parent;\r\n      let arrB = selectedMeshes.map(mesh => mesh.holder.getHolderGroup() );\r\n      TriangleCut.arrAsubB(holderParent.children, arrB);\r\n      if (toTop) {\r\n        holderParent.children.push(...arrB);\r\n      } else {\r\n        holderParent.children.unshift(...arrB);\r\n      }\r\n      holderParent.children.forEach((child, index) => {\r\n        if (child.holder) {\r\n          child.holder.getMesh().renderOrder = index;\r\n        }\r\n      });\r\n    },\r\n    setSelection(mesh) {\r\n      setSelectMesh(mesh)\r\n    },\r\n  };\r\n  return that;\r\n};\r\nexport default PolygonTool;\r\n","import {Vector3} from 'three'\r\n\r\nimport Main from '../MainScene';\r\nimport Layers from \"../Layers\";\r\nimport {getPathCtrlPoint, getPathSegment} from '../util/StaticMethods'\r\nimport PathSegment from \"../instance/PathSegment\";\r\nimport * as Config from '../consts/Constants'\r\nimport TriangleCut from \"../lib/TriangleCut\";\r\nimport NavigatorTool from \"./NavigatorTool\";\r\nimport History from \"../undo/History\";\r\n\r\nlet NavPathTool = function () {\r\n  let dom = Main.getDom();\r\n  let eventSelectPathChange = {type: 'selectedPathChange'};\r\n  let currentPointObj = getPathCtrlPoint();\r\n\r\n  let selectedPaths = [];\r\n  let startPoint = null;\r\n  let currentRing = null, startRing = null;\r\n  let adhereHolder = null;\r\n  let lineMesh = null;\r\n  let editingLayer = Layers.editingLayer;\r\n  let curPathType = 0;\r\n  let STATUS_ADDING = 1;\r\n  let STATUS_EDITING = 2;\r\n  let STATUS_FREE = 3;\r\n  let STATUS_PATH_FINDING = 4;\r\n  const MIN_PATH_LENGTH = 0.1;   //长度小于该值的路径不会被创建\r\n  const MIN_PATH_LENGTH_SQ = MIN_PATH_LENGTH * MIN_PATH_LENGTH;\r\n  let status = STATUS_FREE;\r\n  let pathNavigator = NavigatorTool(Main);\r\n\r\n  Layers.navPathLayer.addEventListener('selectionBoxUpdated', mouseup4SelectionBox);\r\n  dom.addEventListener(\"mousedown\", mousedown4SelectPath);\r\n\r\n  function mousemove4PathFinding(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      let curVector = lst[0].point;\r\n      let circle = getSelectedCircle(curVector);\r\n      if (circle) {\r\n        curVector.copy(circle.position);\r\n      }\r\n      currentPointObj.position.copy(curVector);\r\n      if (!currentPointObj.parent) {\r\n        Layers.editingLayer.add(currentPointObj);\r\n      }\r\n    }\r\n  }\r\n  function mouseclick4PathFinding(event) {\r\n    if (status !== STATUS_PATH_FINDING) {\r\n      return;\r\n    }\r\n    if (!pathNavigator.startPoint()) {\r\n      pathNavigator.setMarkerPos(event.clientX, event.clientY, false, true);\r\n    } else {\r\n      pathNavigator.setMarkerPos(event.clientX, event.clientY, true, false);\r\n      pathNavigator.onPathFinding();\r\n    }\r\n  }\r\n\r\n  function mousedown4SelectPath(event) {\r\n    if (!Layers.navPathTabSelected()) {\r\n      return;\r\n    }\r\n    if (status == STATUS_PATH_FINDING) {\r\n      if (event.button == 0 && pathNavigator.startPoint() && pathNavigator.endPoint() ) {\r\n        endPathFinding();\r\n      }\r\n      return;\r\n    }\r\n    if (status !== STATUS_FREE) {\r\n      return;\r\n    }\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      let curVector = lst[0].point;\r\n      let pathItem = getSelectedPathItem(curVector);\r\n      setSelectedPaths(pathItem);\r\n    }\r\n    Layers.navPathLayer.dispatchEvent(eventSelectPathChange);\r\n  }\r\n\r\n  function mouseup4SelectionBox(event) {\r\n    let selectedRings = event.selectBox.selectRings(Layers.getPathSegmentRings());\r\n    let holders = Layers.getRelatedPathSegments(selectedRings);\r\n    selectedPaths.forEach(it => it.unselect() );\r\n    holders.forEach(it => it.select() );\r\n    selectedPaths = holders;\r\n    Layers.navPathLayer.dispatchEvent(eventSelectPathChange);\r\n  }\r\n  function setSelectedPaths(pathItem) {\r\n    if (pathItem == null) {\r\n      if (!Main.pressingShift()) {\r\n        hideSelectedPaths();\r\n      }\r\n      return;\r\n    }\r\n    if (Main.pressingShift()) {\r\n      pathItem.select();\r\n      if (selectedPaths.indexOf(pathItem) < 0) {\r\n        selectedPaths.push(pathItem);\r\n      } else {\r\n        pathItem.unselect();\r\n        selectedPaths.splice(selectedPaths.indexOf(pathItem), 1);\r\n      }\r\n      Layers.navPathLayer.dispatchEvent(eventSelectPathChange);\r\n    } else {\r\n      if ( selectedPaths.indexOf(pathItem) < 0 ) {\r\n        selectedPaths.forEach(it => it.unselect() );\r\n        selectedPaths.splice(0, selectedPaths.length);\r\n        pathItem.select();\r\n        selectedPaths[0] = pathItem;\r\n        Layers.navPathLayer.dispatchEvent(eventSelectPathChange);\r\n      }\r\n    }\r\n  }\r\n  function hideSelectedPaths() {\r\n    selectedPaths.forEach(it => it.unselect() );\r\n    selectedPaths.splice(0, selectedPaths.length);\r\n    Layers.navPathLayer.dispatchEvent(eventSelectPathChange);\r\n  }\r\n\r\n  let ringMoving, relatedHolders;\r\n  let oldRingPos = new Vector3();\r\n  function mousedown4EditingPoint(event) {\r\n    if (event.button == 2) {\r\n      endEditingPoint();\r\n      return;\r\n    }\r\n    hideSelectedPaths();\r\n    if (currentRing != null) {\r\n      ringMoving = currentRing;\r\n      oldRingPos.copy(ringMoving.position);\r\n      relatedHolders = Layers.getRelatedPathSegments([ringMoving]);\r\n      dom.addEventListener('mouseup', mouseup4EditingPoint);\r\n    }\r\n  }\r\n  function mousemove4EditingPoint(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      let curVector = getAdheredPosition(lst[0].point);\r\n      currentPointObj.position.copy(curVector);\r\n      if (ringMoving == null) {\r\n        if (!currentPointObj.parent) {\r\n          Layers.editingLayer.add(currentPointObj);\r\n        }\r\n        return;\r\n      }\r\n      ringMoving.position.copy(curVector);\r\n      relatedHolders.forEach(it => it != null && it.updateLine());\r\n    }\r\n  }\r\n  function mouseup4EditingPoint(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    let lineSegment;\r\n    if (lst.length > 0) {\r\n      let undoContext;\r\n      let curVector = getAdheredPosition(lst[0].point);\r\n      if (currentRing == null) {\r\n        ringMoving.position.copy(curVector);\r\n        if (adhereHolder != null) {\r\n          undoContext = {addLines:[], removeLines: [], relatedHolders: relatedHolders.slice(), ring: ringMoving,\r\n            oldPosition: oldRingPos.clone(), position: curVector};\r\n\r\n          let line = adhereHolder.getLine();\r\n          line.parent.remove(line);\r\n          undoContext.removeLines.push(line);\r\n\r\n          let lineType = adhereHolder.getPathType();\r\n          let exists = findPathHoldersByCircles(adhereHolder.fromCircle(), ringMoving);\r\n          if (exists.length == 0) {\r\n            lineSegment = addLineSegment(adhereHolder.fromCircle(), ringMoving, lineType);\r\n            relatedHolders.push(lineSegment);\r\n            if (lineSegment) {\r\n              undoContext.addLines.push(lineSegment.getLine() );\r\n            }\r\n          }\r\n          exists = findPathHoldersByCircles(ringMoving, adhereHolder.toCircle());\r\n          if (exists.length == 0) {\r\n            lineSegment = addLineSegment(ringMoving, adhereHolder.toCircle(), lineType);\r\n            relatedHolders.push( lineSegment );\r\n            if (lineSegment) {\r\n              undoContext.addLines.push(lineSegment.getLine() );\r\n            }\r\n          }\r\n          History.addAction(\"add paths\", undoContext);\r\n        } else {\r\n          relatedHolders.forEach(it => it != null && it.updateLine() );\r\n          undoContext = {pathPointObj: ringMoving, oldPosition: oldRingPos.clone(), position:curVector};\r\n          undoContext.relatedHolders = relatedHolders.slice();\r\n          History.addAction(\"update path point\", undoContext);\r\n        }\r\n      } else {\r\n        // ringMoving.position.copy(oldRingPos);\r\n        undoContext = {relatedHolders: relatedHolders.slice(), ringGroup: ringMoving.parent,\r\n          replaced: ringMoving, replacement: currentRing, oldPosition: oldRingPos };\r\n        relatedHolders.forEach(it => it != null && it.replaceCircle(ringMoving, currentRing));\r\n        ringMoving.parent.remove(ringMoving);\r\n        ringMoving = currentRing;\r\n        currentRing = null;\r\n        relatedHolders = Layers.getRelatedPathSegments([ringMoving]);\r\n\r\n        History.addAction(\"replace paths point\", undoContext);\r\n      }\r\n    }\r\n\r\n    dom.removeEventListener('mouseup', mouseup4EditingPoint);\r\n    ringMoving = null;\r\n  }\r\n\r\n  function mousemove4PathAdd(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      let curVector = getAdheredPosition(lst[0].point);\r\n      if (!currentPointObj.parent) {\r\n        Layers.editingLayer.add(currentPointObj);\r\n      }\r\n      currentPointObj.position.copy(curVector);\r\n      if (startPoint != null) {\r\n        if (lineMesh == null) {\r\n          // lineMesh = getPolygonLineMesh([startPoint, curVector], null, false);\r\n          lineMesh = getPathSegment(startPoint, curVector, Config.pathTypeAdding);\r\n          editingLayer.add(lineMesh);\r\n        } else {\r\n          lineMesh.geometry.setPositions([startPoint.x, startPoint.y, 0, curVector.x, curVector.y, 0]);\r\n          lineMesh.computeLineDistances();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function addLineSegment(start, end, segmentType) {\r\n    if (start === end) {\r\n      return null;\r\n    }\r\n    let p0 = start instanceof Vector3 ? start : start.position;\r\n    let p1 = end instanceof Vector3 ? end : end.position;\r\n    let dd = p0.distanceToSquared(p1);\r\n    if (dd <= MIN_PATH_LENGTH_SQ) {\r\n      return null;\r\n    }\r\n    if (start instanceof Vector3) {\r\n      let circle = findCircleByPoint(start);\r\n      if (circle) start = circle;\r\n    }\r\n    if (end instanceof Vector3) {\r\n      let circle = findCircleByPoint(end);\r\n      if (circle) end = circle;\r\n    }\r\n    let pathSegment = PathSegment(start, end, segmentType != undefined ? segmentType : curPathType, Main.currentCameraScale());\r\n    let items = pathSegment.getItems();\r\n    items.forEach(it => Layers.navPathLayer.add(it));\r\n    // console.log(\"addLineSegment success, distance: \" + dd);\r\n    return pathSegment;\r\n  }\r\n  function clearTempMesh() {\r\n    if (lineMesh != null) {\r\n      editingLayer.remove(lineMesh);\r\n      lineMesh = null;\r\n      startPoint = null;\r\n      startRing = null;\r\n    }\r\n  }\r\n  function endPathFinding() {\r\n    status = STATUS_FREE;\r\n    if (currentPointObj.parent) {\r\n      currentPointObj.parent.remove(currentPointObj);\r\n    }\r\n    pathNavigator.clearPathAnimation();\r\n\r\n    dom.removeEventListener('click', mouseclick4PathFinding);\r\n    dom.removeEventListener('mousemove', mousemove4PathFinding);\r\n  }\r\n\r\n  function endEditingPoint() {\r\n    status = STATUS_FREE;\r\n    if (currentPointObj.parent) {\r\n      currentPointObj.parent.remove(currentPointObj);\r\n    }\r\n    dom.removeEventListener('mousemove', mousemove4EditingPoint, false);\r\n    dom.removeEventListener('mousedown', mousedown4EditingPoint, false);\r\n    ringMoving = null;\r\n  }\r\n\r\n  function endAddPath() {\r\n    status = STATUS_FREE;\r\n    if (currentPointObj.parent) {\r\n      currentPointObj.parent.remove(currentPointObj);\r\n    }\r\n    if (lineMesh != null) {\r\n      lineMesh.parent.remove(lineMesh);\r\n      lineMesh = null;\r\n      startPoint = null;\r\n    }\r\n    dom.removeEventListener('mousemove', mousemove4PathAdd, false);\r\n    dom.removeEventListener('click', mouseclick4LineSegmentAdd, false);\r\n    dom.removeEventListener('mousedown', mousedown4LineSegmentAdd, false);\r\n  }\r\n\r\n  function mousedown4LineSegmentAdd(event) {\r\n    if (event.button === 2) {\r\n      endAddPath();\r\n    }\r\n  }\r\n  function mouseclick4LineSegmentAdd(event) {\r\n    if (startPoint == null) {\r\n      startPoint = currentPointObj.position.clone();\r\n      startRing = currentRing;\r\n    } else {\r\n      let start = startRing || startPoint;\r\n      let end = currentRing || currentPointObj.position;\r\n      let newItem = addLineSegment(start, end);\r\n      if (newItem == null) {\r\n        return;\r\n      }\r\n      clearTempMesh();\r\n      let undoContext = {removeLines: [], addLines: [newItem.getLine()]};\r\n      splitSegmentsByNewItem(newItem, undoContext);\r\n      History.addAction(\"add paths\", undoContext);\r\n    }\r\n  }\r\n\r\n  function splitSegmentsByNewItem(newItem, undoContext) {\r\n    let circleFrom = newItem.fromCircle(), circleTo = newItem.toCircle();\r\n    let newCircles = [circleFrom, circleTo];\r\n    let unrelatedItems = Layers.getUnrelatedPathSegments(newCircles);\r\n    let from = circleFrom.position, to = circleTo.position;\r\n    let splitedCount = 0;\r\n    let tmp = new Vector3();\r\n    for (let item of unrelatedItems) {\r\n      item.splitCircles = [], item.splitBy = [];\r\n      let p0 = item.fromCircle().position, p1 = item.toCircle().position;\r\n      let cross = TriangleCut.lineSegmentCross(p0, p1, from, to);\r\n      if (!cross) {\r\n        cross = TriangleCut.lineSegmentCross(p0, p1, from, to);\r\n        continue;\r\n      }\r\n      splitedCount++;\r\n      tmp.set(cross.x, cross.y, 0);\r\n      let ptObj = findCircleByPoint(tmp);\r\n      let crossObj = ptObj;\r\n      if (crossObj == null) {\r\n        crossObj = getPathCtrlPoint(tmp, Config.pointTypeRing);\r\n      }\r\n      if (ptObj == null || newCircles.indexOf(ptObj) >= 0 ) {\r\n        item.splitCircles[item.splitBy.length] = crossObj;\r\n        item.splitBy.push(new Vector3(cross.x, cross.y, 0) );\r\n      }\r\n\r\n      if (newCircles.indexOf(ptObj) < 0) {\r\n        newItem.splitCircles[newItem.splitBy.length] = crossObj;\r\n        newItem.splitBy.push(new Vector3(cross.x, cross.y, 0) );\r\n        undoContext.addLines.pop();\r\n      }\r\n    }\r\n    let arr = unrelatedItems.concat(newItem);\r\n    for (let item of arr) {\r\n      if (item.splitBy.length < 1) {\r\n        continue;\r\n      }\r\n      let line = item.getLine();\r\n      line.parent.remove(line);\r\n      if (item !== newItem) {\r\n        undoContext.removeLines.push(line);\r\n      }\r\n      let segments = item.processSplitBy();\r\n      for (let segmentItem of segments) {\r\n        let pathSegment = addLineSegment(segmentItem.fromCircle(), segmentItem.toCircle(), segmentItem.getPathType());\r\n        if (pathSegment) {\r\n          pathSegment.setPathDirection(item.getPathDirection() );\r\n          undoContext.addLines.push(pathSegment.getLine());\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function getSelectedPathItem(curPos) {\r\n    let holders = Layers.getPathSegmentHolders();\r\n    for (let holder of holders) {\r\n      let adhereObj = holder.getAdhereObj(curPos);\r\n      if (adhereObj.ctrlPoint != null || adhereObj.posOnEdge != null) {\r\n        return holder;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  function getSelectedCircle(curPos) {\r\n    let holders = Layers.getPathSegmentHolders();\r\n    for (let holder of holders) {\r\n      let adhereObj = holder.getAdhereObj(curPos, true);\r\n      if (adhereObj.ctrlPoint != null) {\r\n        return adhereObj.ctrlPoint;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  function getAdheredPosition(curPos) {\r\n    let holders = Layers.getPathSegmentHolders(ringMoving);\r\n    let pointAdheres = [], edgeAdheres = [];\r\n    for (let holder of holders) {\r\n      let adhereObj = holder.getAdhereObj(curPos);\r\n      if (adhereObj.ctrlPoint != null) {\r\n        pointAdheres.push(adhereObj);\r\n      } else if (adhereObj.posOnEdge != null) {\r\n        edgeAdheres.push(adhereObj);\r\n      }\r\n    }\r\n    pointAdheres.sort((a,b) => a.distanceSq - b.distanceSq);\r\n    if (pointAdheres.length > 0) {\r\n      currentRing = pointAdheres[0].ctrlPoint;\r\n      return pointAdheres[0].ctrlPoint.position;\r\n    }\r\n    currentRing = null;\r\n\r\n    edgeAdheres.sort((a,b) => a.distanceSq - b.distanceSq);\r\n    if (edgeAdheres.length > 0) {\r\n      adhereHolder = edgeAdheres[0].holder;\r\n      return edgeAdheres[0].posOnEdge;\r\n    }\r\n    adhereHolder = null;\r\n    return curPos;\r\n  }\r\n\r\n  function findPathHoldersByCircles(fromCircle, toCircle) {\r\n    let holders = Layers.getPathSegmentHolders();\r\n    let result = [];\r\n    holders.forEach(it => {\r\n      if ((it.fromCircle() === fromCircle && it.toCircle() === toCircle) ||\r\n        (it.fromCircle() === toCircle && it.toCircle() === fromCircle) ){\r\n        result.push(it);\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n  function findCircleByPoint(point) {\r\n    let circles = Layers.getPathSegmentRings();\r\n    for (let circle of circles) {\r\n      if (circle.position.distanceToSquared(point) <= MIN_PATH_LENGTH_SQ) {\r\n        return circle;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  function prepareToFree() {\r\n    if (status == STATUS_PATH_FINDING) {\r\n      endPathFinding();\r\n    } else if (status == STATUS_ADDING) {\r\n      endAddPath();\r\n    } else if (status == STATUS_EDITING) {\r\n      endEditingPoint();\r\n    }\r\n  }\r\n\r\n  let that = {\r\n    prepareToFree: prepareToFree,\r\n    startPathFinding() {\r\n      if (status == STATUS_PATH_FINDING) {\r\n        return;\r\n      }\r\n      prepareToFree();\r\n      pathNavigator.buildPathFindingGraph();\r\n      status = STATUS_PATH_FINDING;\r\n      dom.addEventListener('click', mouseclick4PathFinding);\r\n      dom.addEventListener('mousemove', mousemove4PathFinding);\r\n    },\r\n    navigator() {\r\n      return pathNavigator;\r\n    },\r\n    // animatePathIndicator: animatePathIndicator,\r\n    startAddPath(pathType) {\r\n      status = STATUS_ADDING;\r\n      curPathType = pathType;\r\n      dom.addEventListener('mousemove', mousemove4PathAdd, false);\r\n      dom.addEventListener('click', mouseclick4LineSegmentAdd, false);\r\n      dom.addEventListener('mousedown', mousedown4LineSegmentAdd, false);\r\n    },\r\n    startEditingPoint() {\r\n      status = STATUS_EDITING;\r\n      dom.addEventListener('mousemove', mousemove4EditingPoint, false);\r\n      dom.addEventListener('mousedown', mousedown4EditingPoint, false);\r\n    },\r\n\r\n    getSelectedPathItems() {\r\n      return selectedPaths;\r\n    },\r\n    changeSelectedPathsDirections(direction) {\r\n      selectedPaths.forEach(it => it.setPathDirection(direction));\r\n    },\r\n    changeSelectedPathsTypes(pathType) {\r\n      selectedPaths.forEach(it => it.setPathType(pathType));\r\n    },\r\n    removeSelectedPaths() {\r\n      if (selectedPaths.length == 0) {\r\n        return;\r\n      }\r\n      let undoContext = {removeLines: [], addLines: []};\r\n      selectedPaths.forEach(pathItem => {\r\n        let ring0 = pathItem.fromCircle(), ring1 = pathItem.toCircle();\r\n        let holders0 = Layers.getRelatedPathSegments([ring0]);\r\n        let holders1 = Layers.getRelatedPathSegments([ring1]);\r\n        if (holders0.length < 2 && ring0.parent) {\r\n          ring0.parent.remove(ring0);\r\n        }\r\n        if (holders1.length < 2 && ring1.parent) {\r\n          ring1.parent.remove(ring1);\r\n        }\r\n        pathItem.unselect();\r\n        let line = pathItem.getLine();\r\n        line.parent.remove(line);\r\n        undoContext.addLines.push(line);\r\n      });\r\n      selectedPaths.splice(0, selectedPaths.length);\r\n      Layers.navPathLayer.dispatchEvent(eventSelectPathChange);\r\n\r\n      History.addAction(\"remove paths\", undoContext);\r\n    },\r\n    removeAll() {\r\n      let arr = Layers.navPathLayer.children.slice();\r\n      arr.push(currentPointObj);\r\n      arr.forEach(it => {\r\n        if (it && it.parent) {\r\n          it.parent.remove(it);\r\n        }\r\n      });\r\n      selectedPaths = [];\r\n      Layers.navPathLayer.dispatchEvent(eventSelectPathChange);\r\n      pathNavigator.clearPathAnimation();\r\n    }\r\n  };\r\n  return that;\r\n};\r\nexport default NavPathTool;\r\n","import {Vector3, Matrix4} from 'three';\r\nimport Layers from \"../Layers\";\r\nimport Main from \"../MainScene\";\r\nimport {getPositionMarker} from \"../util/StaticMethods\"\r\nimport {getLngLat, getMercator, wgs2bd} from \"../lib_external/GeoCoord\"\r\nimport Config from \"../configurable/Config\";\r\n\r\nlet CoordCorrelateTool = function () {\r\n  let eventCoordChange = {type: 'coord change', index: 0, x: 0, y: 0};\r\n  let eventMousemove = {type: 'mouse move', x: 0, y: 0, mx: 0, my:0, lng:0, lat:0};\r\n  let editingLayer = Layers.editingLayer;\r\n  let markers = [], coordBindings = [];\r\n  for (let i = 0; i < 2; i++) {\r\n    let marker = getPositionMarker(i+1);\r\n    markers.push(marker);\r\n    editingLayer.add(marker);\r\n    coordBindings.push(0, 0);\r\n  }\r\n  markers[0].position.set(0, 3, 0);\r\n  markers[1].position.set(3, 0, 0);\r\n  let showing = false;\r\n  let draggingMarker;\r\n  let dragStartPos, markerPos0;\r\n  // let scaleX = 0, scaleY = 0; //墨卡托坐标 ：3d模型空间的xy平面坐标\r\n  let mercatorOrigin = {x: 0, y: 0}; //原点{x:0, y:0}的墨卡托坐标\r\n  let scale = 1; //\r\n  let matTransform; // 3d全局空间坐标 * matTransform = 地球墨卡托坐标\r\n  let matTransformInverse;\r\n  let rotation = 0; // 以弧度为单位\r\n  let tmp = new Vector3();\r\n  //test\r\n  // let arr = wgs2bd(30.563638, 104.049875);\r\n  // console.log('wgs2bd, ' + arr.join(', '));\r\n\r\n  let dom = Main.getDom();\r\n  dom.addEventListener('mousedown', mousedown4Drag);\r\n  dom.addEventListener('mousemove', mousemove4Drag);\r\n  dom.addEventListener('mouseup', mouseup4Drag);\r\n\r\n  function mousedown4Drag(event) {\r\n    if (!showing) {\r\n      return;\r\n    }\r\n    let lst = Main.getIntersects(event.clientX, event.clientY, markers);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    draggingMarker = lst[0].object;\r\n    eventCoordChange.index = markers.indexOf(draggingMarker);\r\n    dragStartPos = lst[0].point;\r\n    markerPos0 = draggingMarker.position.clone();\r\n\r\n  }\r\n  function mousemove4Drag(event) {\r\n    if (!showing) {\r\n      return;\r\n    }\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    let curPos = lst[0].point;\r\n    if (draggingMarker != null) {\r\n      let vector = curPos.clone().sub(dragStartPos);\r\n      let pos = markerPos0.clone().add(vector);\r\n      draggingMarker.position.set(pos.x, pos.y, 0);\r\n      eventCoordChange.x = pos.x;\r\n      eventCoordChange.y = pos.y;\r\n      Main.scene().dispatchEvent(eventCoordChange);\r\n    } else {\r\n      eventMousemove.x = curPos.x;\r\n      eventMousemove.y = curPos.y;\r\n      tmp.set(curPos.x, curPos.y, 0);\r\n      tmp.applyMatrix4(matTransform);\r\n      eventMousemove.mx = tmp.x;\r\n      eventMousemove.my = tmp.y;\r\n      let lnglat = getLngLat({x: eventMousemove.mx, y: eventMousemove.my});\r\n      eventMousemove.lng = lnglat.x;\r\n      eventMousemove.lat = lnglat.y;\r\n      Main.scene().dispatchEvent(eventMousemove);\r\n    }\r\n  }\r\n  function mouseup4Drag() {\r\n    draggingMarker = null;\r\n  }\r\n\r\n  function initTransformation() {\r\n    let markerPos1 = that.getCoord(0), markerPos2 = that.getCoord(1);\r\n    let earthPos1 = new Vector3(coordBindings[0], coordBindings[1], 0);\r\n    let earthPos2 = new Vector3(coordBindings[2], coordBindings[3], 0);\r\n\r\n    let c1 = markerPos2.clone().sub(markerPos1), c2 = earthPos2.clone().sub(earthPos1);\r\n    let scalar = c2.length() / c1.length();\r\n\r\n    // let angle = c1.angleTo(c2);\r\n    let angle = c1.getVector2().angleTo(c2.getVector2());\r\n    // console.log(\"angle: \" + angle);\r\n    let matRotate = new Matrix4().makeRotationZ(angle);\r\n    let matScale = new Matrix4().makeScale(scalar, scalar, 1);\r\n    let mat = matRotate.clone().multiply(matScale);\r\n    let tranlate = earthPos1.clone().sub(markerPos1.clone().applyMatrix4(mat));\r\n    let matTranlate = new Matrix4().makeTranslation(tranlate.x, tranlate.y,0);\r\n    mat.premultiply(matTranlate);\r\n\r\n    matTransform = mat;\r\n    matTransformInverse = new Matrix4().getInverse(mat);\r\n    scale = scalar;\r\n    rotation = angle;\r\n    mercatorOrigin = new Vector3(0,0,0).applyMatrix4(mat);\r\n    let rot = rotation * Config.mathConsts.radianToDegree;\r\n    console.log(\"全局旋转：\" + rot + \"°\")\r\n  }\r\n\r\n  let that = {\r\n    getScale() {\r\n      return scale;\r\n    },\r\n    rotation() {\r\n      return rotation;\r\n    },\r\n    clearBinding() {\r\n      scale = 1;\r\n      rotation = 0;\r\n      matTransform = new Matrix4();\r\n      coordBindings = [0,0,0,0];\r\n      Main.scene().dispatchEvent(eventMousemove);\r\n    },\r\n    hide() {\r\n      showing = false;\r\n      markers.forEach(it => it.visible = false);\r\n    },\r\n    show() {\r\n      showing = true;\r\n      markers.forEach(it => it.visible = true);\r\n    },\r\n    getCoord(markerIndex) {\r\n      return markers[markerIndex].position;\r\n    },\r\n    setCoord(markerIndex, x, y) {\r\n      markers[markerIndex].position.set(x, y, 0);\r\n    },\r\n    setCoordBinds(index, x, y) {\r\n      coordBindings[index * 2] = x;\r\n      coordBindings[index * 2 + 1] = y;\r\n    },\r\n    getCoordBinds(index) {\r\n      return {x: coordBindings[index * 2], y: coordBindings[index * 2 + 1]};\r\n    },\r\n    getRenderPos(lng, lat) {  //把wcs经纬度，转换为3d全局模型空间中的xy坐标\r\n      let mercator;\r\n      if (Config.code.lngLatBind) {\r\n        mercator = {x: lng, y: lat};\r\n      } else {\r\n        let arr = [lat, lng];\r\n        if (Config.code.coordType == Config.code.TYPE_BaiDu) {\r\n          arr = wgs2bd(lat, lng); //wcs经纬度 转 百度地图经纬度\r\n        }\r\n        mercator = getMercator({x: arr[1], y: arr[0]} );\r\n      }\r\n      tmp.set(mercator.x, mercator.y, 0).applyMatrix4(matTransformInverse);\r\n      return tmp;\r\n    },\r\n    serialize() {\r\n      let arr = [], obj = {lngLatBind: Config.code.lngLatBind};\r\n      markers.forEach(it => arr.push({x: it.position.x, y: it.position.y}) );\r\n      obj.posLst = arr;\r\n      obj.bindLst = coordBindings;\r\n      return obj;\r\n    },\r\n    deserialize(obj) {\r\n      Config.code.lngLatBind = obj.lngLatBind;\r\n      coordBindings = obj.bindLst;\r\n      obj.posLst.forEach((it, index) => {\r\n        if (markers[index]) {\r\n          markers[index].position.x = it.x;\r\n          markers[index].position.y = it.y;\r\n        }\r\n      });\r\n      initTransformation();\r\n      Main.scene().dispatchEvent(eventMousemove);\r\n    }\r\n  };\r\n  if (!showing) that.hide();\r\n  return that;\r\n};\r\n\r\nexport default  CoordCorrelateTool;\r\n","/**\r\n * @author arodic / https://github.com/arodic\r\n */\r\n\r\nimport {\r\n\tBoxBufferGeometry,\r\n\tBufferGeometry,\r\n\tColor,\r\n\tCylinderBufferGeometry,\r\n\tDoubleSide,\r\n\tEuler,\r\n\tFloat32BufferAttribute,\r\n\tLine,\r\n\tLineBasicMaterial,\r\n\tMatrix4,\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tObject3D,\r\n\tOctahedronBufferGeometry,\r\n\tPlaneBufferGeometry,\r\n\tQuaternion,\r\n\tRaycaster,\r\n\tSphereBufferGeometry,\r\n\tTorusBufferGeometry,\r\n\tVector3\r\n} from \"three\";\r\n\r\nvar TransformControls = function ( camera, domElement ) {\r\n\r\n\tif ( domElement === undefined ) {\r\n\r\n\t\tconsole.warn( 'THREE.TransformControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\tdomElement = document;\r\n\r\n\t}\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.visible = false;\r\n\tthis.domElement = domElement;\r\n\r\n\tvar _gizmo = new TransformControlsGizmo();\r\n\tthis.add( _gizmo );\r\n\r\n\tvar _plane = new TransformControlsPlane();\r\n\tthis.add( _plane );\r\n\r\n\tvar scope = this;\r\n\r\n\t// Define properties with getters/setter\r\n\t// Setting the defined property will automatically trigger change event\r\n\t// Defined properties are passed down to gizmo and plane\r\n\r\n\tdefineProperty( \"camera\", camera );\r\n\tdefineProperty( \"object\", undefined );\r\n\tdefineProperty( \"enabled\", true );\r\n\tdefineProperty( \"axis\", null );\r\n\tdefineProperty( \"mode\", \"translate\" );\r\n\tdefineProperty( \"translationSnap\", null );\r\n\tdefineProperty( \"rotationSnap\", null );\r\n\tdefineProperty( \"scaleSnap\", null );\r\n\tdefineProperty( \"space\", \"world\" );\r\n\tdefineProperty( \"size\", 1 );\r\n\tdefineProperty( \"dragging\", false );\r\n\tdefineProperty( \"showX\", true );\r\n\tdefineProperty( \"showY\", true );\r\n\tdefineProperty( \"showZ\", true );\r\n\r\n\tvar changeEvent = { type: \"change\" };\r\n\tvar mouseDownEvent = { type: \"mouseDown\" };\r\n\tvar mouseUpEvent = { type: \"mouseUp\", mode: scope.mode };\r\n\tvar objectChangeEvent = { type: \"objectChange\" };\r\n\r\n\t// Reusable utility variables\r\n\r\n\tvar raycaster = new Raycaster();\r\n\r\n\tfunction intersectObjectWithRay( object, raycaster, includeInvisible ) {\r\n\r\n\t\tvar allIntersections = raycaster.intersectObject( object, true );\r\n\r\n\t\tfor ( var i = 0; i < allIntersections.length; i ++ ) {\r\n\r\n\t\t\tif ( allIntersections[ i ].object.visible || includeInvisible ) {\r\n\r\n\t\t\t\treturn allIntersections[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tvar _tempVector = new Vector3();\r\n\tvar _tempVector2 = new Vector3();\r\n\tvar _tempQuaternion = new Quaternion();\r\n\tvar _unit = {\r\n\t\tX: new Vector3( 1, 0, 0 ),\r\n\t\tY: new Vector3( 0, 1, 0 ),\r\n\t\tZ: new Vector3( 0, 0, 1 )\r\n\t};\r\n\r\n\tvar pointStart = new Vector3();\r\n\tvar pointEnd = new Vector3();\r\n\tvar offset = new Vector3();\r\n\tvar rotationAxis = new Vector3();\r\n\tvar startNorm = new Vector3();\r\n\tvar endNorm = new Vector3();\r\n\tvar rotationAngle = 0;\r\n\r\n\tvar cameraPosition = new Vector3();\r\n\tvar cameraQuaternion = new Quaternion();\r\n\tvar cameraScale = new Vector3();\r\n\r\n\tvar parentPosition = new Vector3();\r\n\tvar parentQuaternion = new Quaternion();\r\n\tvar parentQuaternionInv = new Quaternion();\r\n\tvar parentScale = new Vector3();\r\n\r\n\tvar worldPositionStart = new Vector3();\r\n\tvar worldQuaternionStart = new Quaternion();\r\n\tvar worldScaleStart = new Vector3();\r\n\r\n\tvar worldPosition = new Vector3();\r\n\tvar worldQuaternion = new Quaternion();\r\n\tvar worldQuaternionInv = new Quaternion();\r\n\tvar worldScale = new Vector3();\r\n\r\n\tvar eye = new Vector3();\r\n\r\n\tvar positionStart = new Vector3();\r\n\tvar quaternionStart = new Quaternion();\r\n\tvar scaleStart = new Vector3();\r\n\r\n\t// TODO: remove properties unused in plane and gizmo\r\n\r\n\tdefineProperty( \"worldPosition\", worldPosition );\r\n\tdefineProperty( \"worldPositionStart\", worldPositionStart );\r\n\tdefineProperty( \"worldQuaternion\", worldQuaternion );\r\n\tdefineProperty( \"worldQuaternionStart\", worldQuaternionStart );\r\n\tdefineProperty( \"cameraPosition\", cameraPosition );\r\n\tdefineProperty( \"cameraQuaternion\", cameraQuaternion );\r\n\tdefineProperty( \"pointStart\", pointStart );\r\n\tdefineProperty( \"pointEnd\", pointEnd );\r\n\tdefineProperty( \"rotationAxis\", rotationAxis );\r\n\tdefineProperty( \"rotationAngle\", rotationAngle );\r\n\tdefineProperty( \"eye\", eye );\r\n\r\n\t{\r\n\r\n\t\tdomElement.addEventListener( \"mousedown\", onPointerDown, false );\r\n\t\tdomElement.addEventListener( \"touchstart\", onPointerDown, false );\r\n\t\tdomElement.addEventListener( \"mousemove\", onPointerHover, false );\r\n\t\tdomElement.addEventListener( \"touchmove\", onPointerHover, false );\r\n\t\tdomElement.addEventListener( \"touchmove\", onPointerMove, false );\r\n\t\tscope.domElement.ownerDocument.addEventListener( \"mouseup\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchend\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchcancel\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchleave\", onPointerUp, false );\r\n\r\n\t}\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tdomElement.removeEventListener( \"mousedown\", onPointerDown );\r\n\t\tdomElement.removeEventListener( \"touchstart\", onPointerDown );\r\n\t\tdomElement.removeEventListener( \"mousemove\", onPointerHover );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( \"mousemove\", onPointerMove );\r\n\t\tdomElement.removeEventListener( \"touchmove\", onPointerHover );\r\n\t\tdomElement.removeEventListener( \"touchmove\", onPointerMove );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( \"mouseup\", onPointerUp );\r\n\t\tdomElement.removeEventListener( \"touchend\", onPointerUp );\r\n\t\tdomElement.removeEventListener( \"touchcancel\", onPointerUp );\r\n\t\tdomElement.removeEventListener( \"touchleave\", onPointerUp );\r\n\r\n\t\tthis.traverse( function ( child ) {\r\n\r\n\t\t\tif ( child.geometry ) child.geometry.dispose();\r\n\t\t\tif ( child.material ) child.material.dispose();\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t// Set current object\r\n\tthis.attach = function ( object ) {\r\n\r\n\t\tthis.object = object;\r\n\t\tthis.visible = true;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\t// Detatch from object\r\n\tthis.detach = function () {\r\n\r\n\t\tthis.object = undefined;\r\n\t\tthis.visible = false;\r\n\t\tthis.axis = null;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\t// Defined getter, setter and store for a property\r\n\tfunction defineProperty( propName, defaultValue ) {\r\n\r\n\t\tvar propValue = defaultValue;\r\n\r\n\t\tObject.defineProperty( scope, propName, {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tif ( propValue !== value ) {\r\n\r\n\t\t\t\t\tpropValue = value;\r\n\t\t\t\t\t_plane[ propName ] = value;\r\n\t\t\t\t\t_gizmo[ propName ] = value;\r\n\r\n\t\t\t\t\tscope.dispatchEvent( { type: propName + \"-changed\", value: value } );\r\n\t\t\t\t\t// scope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tscope[ propName ] = defaultValue;\r\n\t\t_plane[ propName ] = defaultValue;\r\n\t\t_gizmo[ propName ] = defaultValue;\r\n\r\n\t}\r\n\r\n\t// updateMatrixWorld  updates key transformation variables\r\n\tthis.updateMatrixWorld = function () {\r\n\r\n\t\tif ( this.object !== undefined ) {\r\n\r\n\t\t\tthis.object.updateMatrixWorld();\r\n\r\n\t\t\tif ( this.object.parent === null ) {\r\n\r\n\t\t\t\tconsole.error( 'TransformControls: The attached 3D object must be a part of the scene graph.' );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.object.parent.matrixWorld.decompose( parentPosition, parentQuaternion, parentScale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.object.matrixWorld.decompose( worldPosition, worldQuaternion, worldScale );\r\n\r\n\t\t\tparentQuaternionInv.copy( parentQuaternion ).inverse();\r\n\t\t\tworldQuaternionInv.copy( worldQuaternion ).inverse();\r\n\r\n\t\t}\r\n\r\n\t\tthis.camera.updateMatrixWorld();\r\n\t\tthis.camera.matrixWorld.decompose( cameraPosition, cameraQuaternion, cameraScale );\r\n\r\n\t\teye.copy( cameraPosition ).sub( worldPosition ).normalize();\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\r\n\r\n\t};\r\n\r\n\tthis.pointerHover = function ( pointer ) {\r\n\r\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n\r\n\t\traycaster.setFromCamera( pointer, this.camera );\r\n\r\n\t\tvar intersect = intersectObjectWithRay( _gizmo.picker[ this.mode ], raycaster );\r\n\r\n\t\tif ( intersect ) {\r\n\r\n\t\t\tthis.axis = intersect.object.name;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.axis = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.pointerDown = function ( pointer ) {\r\n\r\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n\r\n\t\tif ( ( pointer.button === 0 || pointer.button === undefined ) && this.axis !== null ) {\r\n\r\n\t\t\traycaster.setFromCamera( pointer, this.camera );\r\n\r\n\t\t\tvar planeIntersect = intersectObjectWithRay( _plane, raycaster, true );\r\n\r\n\t\t\tif ( planeIntersect ) {\r\n\r\n\t\t\t\tvar space = this.space;\r\n\r\n\t\t\t\tif ( this.mode === 'scale' ) {\r\n\r\n\t\t\t\t\tspace = 'local';\r\n\r\n\t\t\t\t} else if ( this.axis === 'E' || this.axis === 'XYZE' || this.axis === 'XYZ' ) {\r\n\r\n\t\t\t\t\tspace = 'world';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( space === 'local' && this.mode === 'rotate' ) {\r\n\r\n\t\t\t\t\tvar snap = this.rotationSnap;\r\n\r\n\t\t\t\t\tif ( this.axis === 'X' && snap ) this.object.rotation.x = Math.round( this.object.rotation.x / snap ) * snap;\r\n\t\t\t\t\tif ( this.axis === 'Y' && snap ) this.object.rotation.y = Math.round( this.object.rotation.y / snap ) * snap;\r\n\t\t\t\t\tif ( this.axis === 'Z' && snap ) this.object.rotation.z = Math.round( this.object.rotation.z / snap ) * snap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.object.updateMatrixWorld();\r\n\t\t\t\tthis.object.parent.updateMatrixWorld();\r\n\r\n\t\t\t\tpositionStart.copy( this.object.position );\r\n\t\t\t\tquaternionStart.copy( this.object.quaternion );\r\n\t\t\t\tscaleStart.copy( this.object.scale );\r\n\r\n\t\t\t\tthis.object.matrixWorld.decompose( worldPositionStart, worldQuaternionStart, worldScaleStart );\r\n\r\n\t\t\t\tpointStart.copy( planeIntersect.point ).sub( worldPositionStart );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.dragging = true;\r\n\t\t\tmouseDownEvent.mode = this.mode;\r\n\t\t\tthis.dispatchEvent( mouseDownEvent );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.pointerMove = function ( pointer ) {\r\n\r\n\t\tvar axis = this.axis;\r\n\t\tvar mode = this.mode;\r\n\t\tvar object = this.object;\r\n\t\tvar space = this.space;\r\n\r\n\t\tif ( mode === 'scale' ) {\r\n\r\n\t\t\tspace = 'local';\r\n\r\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\r\n\r\n\t\t\tspace = 'world';\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === undefined || axis === null || this.dragging === false || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n\r\n\t\traycaster.setFromCamera( pointer, this.camera );\r\n\r\n\t\tvar planeIntersect = intersectObjectWithRay( _plane, raycaster, true );\r\n\r\n\t\tif ( ! planeIntersect ) return;\r\n\r\n\t\tpointEnd.copy( planeIntersect.point ).sub( worldPositionStart );\r\n\r\n\t\tif ( mode === 'translate' ) {\r\n\r\n\t\t\t// Apply translate\r\n\r\n\t\t\toffset.copy( pointEnd ).sub( pointStart );\r\n\r\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\r\n\r\n\t\t\t\toffset.applyQuaternion( worldQuaternionInv );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis.indexOf( 'X' ) === - 1 ) offset.x = 0;\r\n\t\t\tif ( axis.indexOf( 'Y' ) === - 1 ) offset.y = 0;\r\n\t\t\tif ( axis.indexOf( 'Z' ) === - 1 ) offset.z = 0;\r\n\r\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\r\n\r\n\t\t\t\toffset.applyQuaternion( quaternionStart ).divide( parentScale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\toffset.applyQuaternion( parentQuaternionInv ).divide( parentScale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.position.copy( offset ).add( positionStart );\r\n\r\n\t\t\t// Apply translation snap\r\n\r\n\t\t\tif ( this.translationSnap ) {\r\n\r\n\t\t\t\tif ( space === 'local' ) {\r\n\r\n\t\t\t\t\tobject.position.applyQuaternion( _tempQuaternion.copy( quaternionStart ).inverse() );\r\n\r\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject.position.applyQuaternion( quaternionStart );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( space === 'world' ) {\r\n\r\n\t\t\t\t\tif ( object.parent ) {\r\n\r\n\t\t\t\t\t\tobject.position.add( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( object.parent ) {\r\n\r\n\t\t\t\t\t\tobject.position.sub( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( mode === 'scale' ) {\r\n\r\n\t\t\tif ( axis.search( 'XYZ' ) !== - 1 ) {\r\n\r\n\t\t\t\tvar d = pointEnd.length() / pointStart.length();\r\n\r\n\t\t\t\tif ( pointEnd.dot( pointStart ) < 0 ) d *= - 1;\r\n\r\n\t\t\t\t_tempVector2.set( d, d, d );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_tempVector.copy( pointStart );\r\n\t\t\t\t_tempVector2.copy( pointEnd );\r\n\r\n\t\t\t\t_tempVector.applyQuaternion( worldQuaternionInv );\r\n\t\t\t\t_tempVector2.applyQuaternion( worldQuaternionInv );\r\n\r\n\t\t\t\t_tempVector2.divide( _tempVector );\r\n\r\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\r\n\r\n\t\t\t\t\t_tempVector2.x = 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\r\n\r\n\t\t\t\t\t_tempVector2.y = 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Z' ) === - 1 ) {\r\n\r\n\t\t\t\t\t_tempVector2.z = 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply scale\r\n\r\n\t\t\tobject.scale.copy( scaleStart ).multiply( _tempVector2 );\r\n\r\n\t\t\tif ( this.scaleSnap ) {\r\n\r\n\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tobject.scale.x = Math.round( object.scale.x / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tobject.scale.y = Math.round( object.scale.y / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tobject.scale.z = Math.round( object.scale.z / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( mode === 'rotate' ) {\r\n\r\n\t\t\toffset.copy( pointEnd ).sub( pointStart );\r\n\r\n\t\t\tvar ROTATION_SPEED = 20 / worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\r\n\r\n\t\t\tif ( axis === 'E' ) {\r\n\r\n\t\t\t\trotationAxis.copy( eye );\r\n\t\t\t\trotationAngle = pointEnd.angleTo( pointStart );\r\n\r\n\t\t\t\tstartNorm.copy( pointStart ).normalize();\r\n\t\t\t\tendNorm.copy( pointEnd ).normalize();\r\n\r\n\t\t\t\trotationAngle *= ( endNorm.cross( startNorm ).dot( eye ) < 0 ? 1 : - 1 );\r\n\r\n\t\t\t} else if ( axis === 'XYZE' ) {\r\n\r\n\t\t\t\trotationAxis.copy( offset ).cross( eye ).normalize();\r\n\t\t\t\trotationAngle = offset.dot( _tempVector.copy( rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\r\n\r\n\t\t\t} else if ( axis === 'X' || axis === 'Y' || axis === 'Z' ) {\r\n\r\n\t\t\t\trotationAxis.copy( _unit[ axis ] );\r\n\r\n\t\t\t\t_tempVector.copy( _unit[ axis ] );\r\n\r\n\t\t\t\tif ( space === 'local' ) {\r\n\r\n\t\t\t\t\t_tempVector.applyQuaternion( worldQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\trotationAngle = offset.dot( _tempVector.cross( eye ).normalize() ) * ROTATION_SPEED;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply rotation snap\r\n\r\n\t\t\tif ( this.rotationSnap ) rotationAngle = Math.round( rotationAngle / this.rotationSnap ) * this.rotationSnap;\r\n\r\n\t\t\tthis.rotationAngle = rotationAngle;\r\n\r\n\t\t\t// Apply rotate\r\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\r\n\r\n\t\t\t\tobject.quaternion.copy( quaternionStart );\r\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( rotationAxis, rotationAngle ) ).normalize();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trotationAxis.applyQuaternion( parentQuaternionInv );\r\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( rotationAxis, rotationAngle ) );\r\n\t\t\t\tobject.quaternion.multiply( quaternionStart ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent( changeEvent );\r\n\t\tthis.dispatchEvent( objectChangeEvent );\r\n\r\n\t};\r\n\r\n\tthis.pointerUp = function ( pointer ) {\r\n\r\n\t\tif ( pointer.button !== undefined && pointer.button !== 0 ) return;\r\n\r\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\r\n\r\n\t\t\tmouseUpEvent.mode = this.mode;\r\n\t\t\tthis.dispatchEvent( mouseUpEvent );\r\n\r\n\t\t}\r\n\r\n\t\tthis.dragging = false;\r\n\r\n\t\tif ( pointer.button === undefined ) this.axis = null;\r\n\r\n\t};\r\n\r\n\t// normalize mouse / touch pointer and remap {x,y} to view space.\r\n\r\n\tfunction getPointer( event ) {\r\n\r\n\t\tif ( scope.domElement.ownerDocument.pointerLockElement ) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\tbutton: event.button\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\r\n\r\n\t\t\tvar rect = domElement.getBoundingClientRect();\r\n\r\n\t\t\treturn {\r\n\t\t\t\tx: ( pointer.clientX - rect.left ) / rect.width * 2 - 1,\r\n\t\t\t\ty: - ( pointer.clientY - rect.top ) / rect.height * 2 + 1,\r\n\t\t\t\tbutton: event.button\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// mouse / touch event handlers\r\n\r\n\tfunction onPointerHover( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tscope.pointerHover( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\tfunction onPointerDown( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tscope.domElement.ownerDocument.addEventListener( \"mousemove\", onPointerMove, false );\r\n\r\n\t\tscope.pointerHover( getPointer( event ) );\r\n\t\tscope.pointerDown( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\tfunction onPointerMove( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tscope.pointerMove( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\tfunction onPointerUp( event ) {\r\n\r\n\t\tif ( ! scope.enabled ) return;\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( \"mousemove\", onPointerMove, false );\r\n\r\n\t\tscope.pointerUp( getPointer( event ) );\r\n\r\n\t}\r\n\r\n\t// TODO: deprecate\r\n\r\n\tthis.getMode = function () {\r\n\r\n\t\treturn scope.mode;\r\n\r\n\t};\r\n\r\n\tthis.setMode = function ( mode ) {\r\n\r\n\t\tscope.mode = mode;\r\n\r\n\t};\r\n\r\n\tthis.setTranslationSnap = function ( translationSnap ) {\r\n\r\n\t\tscope.translationSnap = translationSnap;\r\n\r\n\t};\r\n\r\n\tthis.setRotationSnap = function ( rotationSnap ) {\r\n\r\n\t\tscope.rotationSnap = rotationSnap;\r\n\r\n\t};\r\n\r\n\tthis.setScaleSnap = function ( scaleSnap ) {\r\n\r\n\t\tscope.scaleSnap = scaleSnap;\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( size ) {\r\n\r\n\t\tscope.size = size;\r\n\r\n\t};\r\n\r\n\tthis.setSpace = function ( space ) {\r\n\r\n\t\tscope.space = space;\r\n\r\n\t};\r\n\r\n\tthis.update = function () {\r\n\r\n\t\tconsole.warn( 'THREE.TransformControls: update function has no more functionality and therefore has been deprecated.' );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTransformControls.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: TransformControls,\r\n\r\n\tisTransformControls: true\r\n\r\n} );\r\n\r\n\r\nvar TransformControlsGizmo = function () {\r\n\r\n\t'use strict';\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'TransformControlsGizmo';\r\n\r\n\t// shared materials\r\n\r\n\tvar gizmoMaterial = new MeshBasicMaterial( {\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false,\r\n\t\ttransparent: true,\r\n\t\tside: DoubleSide,\r\n\t\tfog: false,\r\n\t\ttoneMapped: false\r\n\t} );\r\n\r\n\tvar gizmoLineMaterial = new LineBasicMaterial( {\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false,\r\n\t\ttransparent: true,\r\n\t\tlinewidth: 1,\r\n\t\tfog: false,\r\n\t\ttoneMapped: false\r\n\t} );\r\n\r\n\t// Make unique material for each axis/color\r\n\r\n\tvar matInvisible = gizmoMaterial.clone();\r\n\tmatInvisible.opacity = 0.15;\r\n\r\n\tvar matHelper = gizmoMaterial.clone();\r\n\tmatHelper.opacity = 0.33;\r\n\r\n\tvar matRed = gizmoMaterial.clone();\r\n\tmatRed.color.set( 0xff0000 );\r\n\r\n\tvar matGreen = gizmoMaterial.clone();\r\n\tmatGreen.color.set( 0x00ff00 );\r\n\r\n\tvar matBlue = gizmoMaterial.clone();\r\n\tmatBlue.color.set( 0x0000ff );\r\n\r\n\tvar matWhiteTransparent = gizmoMaterial.clone();\r\n\tmatWhiteTransparent.opacity = 0.25;\r\n\r\n\tvar matYellowTransparent = matWhiteTransparent.clone();\r\n\tmatYellowTransparent.color.set( 0xffff00 );\r\n\r\n\tvar matCyanTransparent = matWhiteTransparent.clone();\r\n\tmatCyanTransparent.color.set( 0x00ffff );\r\n\r\n\tvar matMagentaTransparent = matWhiteTransparent.clone();\r\n\tmatMagentaTransparent.color.set( 0xff00ff );\r\n\r\n\tvar matYellow = gizmoMaterial.clone();\r\n\tmatYellow.color.set( 0xffff00 );\r\n\r\n\tvar matLineRed = gizmoLineMaterial.clone();\r\n\tmatLineRed.color.set( 0xff0000 );\r\n\r\n\tvar matLineGreen = gizmoLineMaterial.clone();\r\n\tmatLineGreen.color.set( 0x00ff00 );\r\n\r\n\tvar matLineBlue = gizmoLineMaterial.clone();\r\n\tmatLineBlue.color.set( 0x0000ff );\r\n\r\n\tvar matLineCyan = gizmoLineMaterial.clone();\r\n\tmatLineCyan.color.set( 0x00ffff );\r\n\r\n\tvar matLineMagenta = gizmoLineMaterial.clone();\r\n\tmatLineMagenta.color.set( 0xff00ff );\r\n\r\n\tvar matLineYellow = gizmoLineMaterial.clone();\r\n\tmatLineYellow.color.set( 0xffff00 );\r\n\r\n\tvar matLineGray = gizmoLineMaterial.clone();\r\n\tmatLineGray.color.set( 0x787878 );\r\n\r\n\tvar matLineYellowTransparent = matLineYellow.clone();\r\n\tmatLineYellowTransparent.opacity = 0.25;\r\n\r\n\t// reusable geometry\r\n\r\n\tvar arrowGeometry = new CylinderBufferGeometry( 0, 0.05, 0.2, 12, 1, false );\r\n\r\n\tvar scaleHandleGeometry = new BoxBufferGeometry( 0.125, 0.125, 0.125 );\r\n\r\n\tvar lineGeometry = new BufferGeometry();\r\n\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\r\n\r\n\tvar CircleGeometry = function ( radius, arc ) {\r\n\r\n\t\tvar geometry = new BufferGeometry( );\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i <= 64 * arc; ++ i ) {\r\n\r\n\t\t\tvertices.push( 0, Math.cos( i / 32 * Math.PI ) * radius, Math.sin( i / 32 * Math.PI ) * radius );\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n\t\treturn geometry;\r\n\r\n\t};\r\n\r\n\t// Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\r\n\r\n\tvar TranslateHelperGeometry = function () {\r\n\r\n\t\tvar geometry = new BufferGeometry();\r\n\r\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 1, 1, 1 ], 3 ) );\r\n\r\n\t\treturn geometry;\r\n\r\n\t};\r\n\r\n\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\r\n\r\n\tvar gizmoTranslate = {\r\n\t\tX: [\r\n\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 1, 0, 0 ], [ 0, 0, - Math.PI / 2 ], null, 'fwd' ],\r\n\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 1, 0, 0 ], [ 0, 0, Math.PI / 2 ], null, 'bwd' ],\r\n\t\t\t[ new Line( lineGeometry, matLineRed ) ]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 1, 0 ], null, null, 'fwd' ],\r\n\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 1, 0 ], [ Math.PI, 0, 0 ], null, 'bwd' ],\r\n\t\t\t[ new Line( lineGeometry, matLineGreen ), null, [ 0, 0, Math.PI / 2 ]]\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 1 ], [ Math.PI / 2, 0, 0 ], null, 'fwd' ],\r\n\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 1 ], [ - Math.PI / 2, 0, 0 ], null, 'bwd' ],\r\n\t\t\t[ new Line( lineGeometry, matLineBlue ), null, [ 0, - Math.PI / 2, 0 ]]\r\n\t\t],\r\n\t\tXYZ: [\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.1, 0 ), matWhiteTransparent.clone() ), [ 0, 0, 0 ], [ 0, 0, 0 ]]\r\n\t\t],\r\n\t\tXY: [\r\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.295, 0.295 ), matYellowTransparent.clone() ), [ 0.15, 0.15, 0 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.18, 0.3, 0 ], null, [ 0.125, 1, 1 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.3, 0.18, 0 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]]\r\n\t\t],\r\n\t\tYZ: [\r\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.295, 0.295 ), matCyanTransparent.clone() ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.18, 0.3 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.3, 0.18 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\r\n\t\t],\r\n\t\tXZ: [\r\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.295, 0.295 ), matMagentaTransparent.clone() ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.18, 0, 0.3 ], null, [ 0.125, 1, 1 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.3, 0, 0.18 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\r\n\t\t]\r\n\t};\r\n\r\n\tvar pickerTranslate = {\r\n\t\tX: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), matInvisible ), [ 0.6, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), matInvisible ), [ 0, 0.6, 0 ]]\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), matInvisible ), [ 0, 0, 0.6 ], [ Math.PI / 2, 0, 0 ]]\r\n\t\t],\r\n\t\tXYZ: [\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.2, 0 ), matInvisible ) ]\r\n\t\t],\r\n\t\tXY: [\r\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.4, 0.4 ), matInvisible ), [ 0.2, 0.2, 0 ]]\r\n\t\t],\r\n\t\tYZ: [\r\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.4, 0.4 ), matInvisible ), [ 0, 0.2, 0.2 ], [ 0, Math.PI / 2, 0 ]]\r\n\t\t],\r\n\t\tXZ: [\r\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.4, 0.4 ), matInvisible ), [ 0.2, 0, 0.2 ], [ - Math.PI / 2, 0, 0 ]]\r\n\t\t]\r\n\t};\r\n\r\n\tvar helperTranslate = {\r\n\t\tSTART: [\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\r\n\t\t],\r\n\t\tEND: [\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\r\n\t\t],\r\n\t\tDELTA: [\r\n\t\t\t[ new Line( TranslateHelperGeometry(), matHelper ), null, null, null, 'helper' ]\r\n\t\t],\r\n\t\tX: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t]\r\n\t};\r\n\r\n\tvar gizmoRotate = {\r\n\t\tX: [\r\n\t\t\t[ new Line( CircleGeometry( 1, 0.5 ), matLineRed ) ],\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.04, 0 ), matRed ), [ 0, 0, 0.99 ], null, [ 1, 3, 1 ]],\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Line( CircleGeometry( 1, 0.5 ), matLineGreen ), null, [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.04, 0 ), matGreen ), [ 0, 0, 0.99 ], null, [ 3, 1, 1 ]],\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Line( CircleGeometry( 1, 0.5 ), matLineBlue ), null, [ 0, Math.PI / 2, 0 ]],\r\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.04, 0 ), matBlue ), [ 0.99, 0, 0 ], null, [ 1, 3, 1 ]],\r\n\t\t],\r\n\t\tE: [\r\n\t\t\t[ new Line( CircleGeometry( 1.25, 1 ), matLineYellowTransparent ), null, [ 0, Math.PI / 2, 0 ]],\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ 1.17, 0, 0 ], [ 0, 0, - Math.PI / 2 ], [ 1, 1, 0.001 ]],\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ - 1.17, 0, 0 ], [ 0, 0, Math.PI / 2 ], [ 1, 1, 0.001 ]],\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ 0, - 1.17, 0 ], [ Math.PI, 0, 0 ], [ 1, 1, 0.001 ]],\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ 0, 1.17, 0 ], [ 0, 0, 0 ], [ 1, 1, 0.001 ]],\r\n\t\t],\r\n\t\tXYZE: [\r\n\t\t\t[ new Line( CircleGeometry( 1, 1 ), matLineGray ), null, [ 0, Math.PI / 2, 0 ]]\r\n\t\t]\r\n\t};\r\n\r\n\tvar helperRotate = {\r\n\t\tAXIS: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t]\r\n\t};\r\n\r\n\tvar pickerRotate = {\r\n\t\tX: [\r\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ]],\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t],\r\n\t\tE: [\r\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1.25, 0.1, 2, 24 ), matInvisible ) ]\r\n\t\t],\r\n\t\tXYZE: [\r\n\t\t\t[ new Mesh( new SphereBufferGeometry( 0.7, 10, 8 ), matInvisible ) ]\r\n\t\t]\r\n\t};\r\n\r\n\tvar gizmoScale = {\r\n\t\tX: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.8, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineRed ), null, null, [ 0.8, 1, 1 ]]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.8, 0 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineGreen ), null, [ 0, 0, Math.PI / 2 ], [ 0.8, 1, 1 ]]\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, 0.8 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineBlue ), null, [ 0, - Math.PI / 2, 0 ], [ 0.8, 1, 1 ]]\r\n\t\t],\r\n\t\tXY: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matYellowTransparent ), [ 0.85, 0.85, 0 ], null, [ 2, 2, 0.2 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.855, 0.98, 0 ], null, [ 0.125, 1, 1 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.98, 0.855, 0 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]]\r\n\t\t],\r\n\t\tYZ: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matCyanTransparent ), [ 0, 0.85, 0.85 ], null, [ 0.2, 2, 2 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.855, 0.98 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.98, 0.855 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\r\n\t\t],\r\n\t\tXZ: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matMagentaTransparent ), [ 0.85, 0, 0.85 ], null, [ 2, 0.2, 2 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.855, 0, 0.98 ], null, [ 0.125, 1, 1 ]],\r\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.98, 0, 0.855 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\r\n\t\t],\r\n\t\tXYZX: [\r\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.125, 0.125, 0.125 ), matWhiteTransparent.clone() ), [ 1.1, 0, 0 ]],\r\n\t\t],\r\n\t\tXYZY: [\r\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.125, 0.125, 0.125 ), matWhiteTransparent.clone() ), [ 0, 1.1, 0 ]],\r\n\t\t],\r\n\t\tXYZZ: [\r\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.125, 0.125, 0.125 ), matWhiteTransparent.clone() ), [ 0, 0, 1.1 ]],\r\n\t\t]\r\n\t};\r\n\r\n\tvar pickerScale = {\r\n\t\tX: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0, 0.5, 0 ]]\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]]\r\n\t\t],\r\n\t\tXY: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matInvisible ), [ 0.85, 0.85, 0 ], null, [ 3, 3, 0.2 ]],\r\n\t\t],\r\n\t\tYZ: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matInvisible ), [ 0, 0.85, 0.85 ], null, [ 0.2, 3, 3 ]],\r\n\t\t],\r\n\t\tXZ: [\r\n\t\t\t[ new Mesh( scaleHandleGeometry, matInvisible ), [ 0.85, 0, 0.85 ], null, [ 3, 0.2, 3 ]],\r\n\t\t],\r\n\t\tXYZX: [\r\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 1.1, 0, 0 ]],\r\n\t\t],\r\n\t\tXYZY: [\r\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 1.1, 0 ]],\r\n\t\t],\r\n\t\tXYZZ: [\r\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 0, 1.1 ]],\r\n\t\t]\r\n\t};\r\n\r\n\tvar helperScale = {\r\n\t\tX: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t],\r\n\t\tY: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t],\r\n\t\tZ: [\r\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t]\r\n\t};\r\n\r\n\t// Creates an Object3D with gizmos described in custom hierarchy definition.\r\n\r\n\tvar setupGizmo = function ( gizmoMap ) {\r\n\r\n\t\tvar gizmo = new Object3D();\r\n\r\n\t\tfor ( var name in gizmoMap ) {\r\n\r\n\t\t\tfor ( var i = gizmoMap[ name ].length; i --; ) {\r\n\r\n\t\t\t\tvar object = gizmoMap[ name ][ i ][ 0 ].clone();\r\n\t\t\t\tvar position = gizmoMap[ name ][ i ][ 1 ];\r\n\t\t\t\tvar rotation = gizmoMap[ name ][ i ][ 2 ];\r\n\t\t\t\tvar scale = gizmoMap[ name ][ i ][ 3 ];\r\n\t\t\t\tvar tag = gizmoMap[ name ][ i ][ 4 ];\r\n\r\n\t\t\t\t// name and tag properties are essential for picking and updating logic.\r\n\t\t\t\tobject.name = name;\r\n\t\t\t\tobject.tag = tag;\r\n\r\n\t\t\t\tif ( position ) {\r\n\r\n\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( rotation ) {\r\n\r\n\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( scale ) {\r\n\r\n\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.updateMatrix();\r\n\r\n\t\t\t\tvar tempGeometry = object.geometry.clone();\r\n\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\r\n\t\t\t\tobject.geometry = tempGeometry;\r\n\t\t\t\tobject.renderOrder = Infinity;\r\n\r\n\t\t\t\tobject.position.set( 0, 0, 0 );\r\n\t\t\t\tobject.rotation.set( 0, 0, 0 );\r\n\t\t\t\tobject.scale.set( 1, 1, 1 );\r\n\r\n\t\t\t\tgizmo.add( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn gizmo;\r\n\r\n\t};\r\n\r\n\t// Reusable utility variables\r\n\r\n\tvar tempVector = new Vector3( 0, 0, 0 );\r\n\tvar tempEuler = new Euler();\r\n\tvar alignVector = new Vector3( 0, 1, 0 );\r\n\tvar zeroVector = new Vector3( 0, 0, 0 );\r\n\tvar lookAtMatrix = new Matrix4();\r\n\tvar tempQuaternion = new Quaternion();\r\n\tvar tempQuaternion2 = new Quaternion();\r\n\tvar identityQuaternion = new Quaternion();\r\n\r\n\tvar unitX = new Vector3( 1, 0, 0 );\r\n\tvar unitY = new Vector3( 0, 1, 0 );\r\n\tvar unitZ = new Vector3( 0, 0, 1 );\r\n\r\n\t// Gizmo creation\r\n\r\n\tthis.gizmo = {};\r\n\tthis.picker = {};\r\n\tthis.helper = {};\r\n\r\n\tthis.add( this.gizmo[ \"translate\" ] = setupGizmo( gizmoTranslate ) );\r\n\tthis.add( this.gizmo[ \"rotate\" ] = setupGizmo( gizmoRotate ) );\r\n\tthis.add( this.gizmo[ \"scale\" ] = setupGizmo( gizmoScale ) );\r\n\tthis.add( this.picker[ \"translate\" ] = setupGizmo( pickerTranslate ) );\r\n\tthis.add( this.picker[ \"rotate\" ] = setupGizmo( pickerRotate ) );\r\n\tthis.add( this.picker[ \"scale\" ] = setupGizmo( pickerScale ) );\r\n\tthis.add( this.helper[ \"translate\" ] = setupGizmo( helperTranslate ) );\r\n\tthis.add( this.helper[ \"rotate\" ] = setupGizmo( helperRotate ) );\r\n\tthis.add( this.helper[ \"scale\" ] = setupGizmo( helperScale ) );\r\n\r\n\t// Pickers should be hidden always\r\n\r\n\tthis.picker[ \"translate\" ].visible = false;\r\n\tthis.picker[ \"rotate\" ].visible = false;\r\n\tthis.picker[ \"scale\" ].visible = false;\r\n\r\n\t// updateMatrixWorld will update transformations and appearance of individual handles\r\n\r\n\tthis.updateMatrixWorld = function () {\r\n\r\n\t\tvar space = this.space;\r\n\r\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\r\n\r\n\t\tvar quaternion = space === \"local\" ? this.worldQuaternion : identityQuaternion;\r\n\r\n\t\t// Show only gizmos for current transform mode\r\n\r\n\t\tthis.gizmo[ \"translate\" ].visible = this.mode === \"translate\";\r\n\t\tthis.gizmo[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n\t\tthis.gizmo[ \"scale\" ].visible = this.mode === \"scale\";\r\n\r\n\t\tthis.helper[ \"translate\" ].visible = this.mode === \"translate\";\r\n\t\tthis.helper[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n\t\tthis.helper[ \"scale\" ].visible = this.mode === \"scale\";\r\n\r\n\r\n\t\tvar handles = [];\r\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\r\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\r\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\r\n\r\n\t\tfor ( var i = 0; i < handles.length; i ++ ) {\r\n\r\n\t\t\tvar handle = handles[ i ];\r\n\r\n\t\t\t// hide aligned to camera\r\n\r\n\t\t\thandle.visible = true;\r\n\t\t\thandle.rotation.set( 0, 0, 0 );\r\n\t\t\thandle.position.copy( this.worldPosition );\r\n\r\n\t\t\tvar factor;\r\n\r\n\t\t\tif ( this.camera.isOrthographicCamera ) {\r\n\r\n\t\t\t\tfactor = ( this.camera.top - this.camera.bottom ) / this.camera.zoom;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfactor = this.worldPosition.distanceTo( this.cameraPosition ) * Math.min( 1.9 * Math.tan( Math.PI * this.camera.fov / 360 ) / this.camera.zoom, 7 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( factor * this.size / 7 );\r\n\r\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\r\n\r\n\t\t\tif ( handle.tag === 'helper' ) {\r\n\r\n\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\tif ( handle.name === 'AXIS' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.visible = !! this.axis;\r\n\r\n\t\t\t\t\tif ( this.axis === 'X' ) {\r\n\r\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, 0, 0 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'Y' ) {\r\n\r\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, 0, Math.PI / 2 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'Z' ) {\r\n\r\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, Math.PI / 2, 0 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'XYZE' ) {\r\n\r\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, Math.PI / 2, 0 ) );\r\n\t\t\t\t\t\talignVector.copy( this.rotationAxis );\r\n\t\t\t\t\t\thandle.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( zeroVector, alignVector, unitY ) );\r\n\t\t\t\t\t\thandle.quaternion.multiply( tempQuaternion );\r\n\t\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'E' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else if ( handle.name === 'START' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else if ( handle.name === 'END' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPosition );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\r\n\t\t\t\t\ttempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\r\n\t\t\t\t\ttempVector.applyQuaternion( this.worldQuaternionStart.clone().inverse() );\r\n\t\t\t\t\thandle.scale.copy( tempVector );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thandle.quaternion.copy( quaternion );\r\n\r\n\t\t\t\t\tif ( this.dragging ) {\r\n\r\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis ) {\r\n\r\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If updating helper, skip rest of the loop\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Align handles to current local or world rotation\r\n\r\n\t\t\thandle.quaternion.copy( quaternion );\r\n\r\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\r\n\r\n\t\t\t\t// Hide translate and scale axis facing the camera\r\n\r\n\t\t\t\tvar AXIS_HIDE_TRESHOLD = 0.99;\r\n\t\t\t\tvar PLANE_HIDE_TRESHOLD = 0.2;\r\n\t\t\t\tvar AXIS_FLIP_TRESHOLD = 0.0;\r\n\r\n\r\n\t\t\t\tif ( handle.name === 'X' || handle.name === 'XYZX' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Y' || handle.name === 'XYZY' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Z' || handle.name === 'XYZZ' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'XY' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'YZ' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'XZ' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Flip translate and scale axis ocluded behind another axis\r\n\r\n\t\t\t\tif ( handle.name.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tif ( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\thandle.scale.x *= - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tif ( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\thandle.scale.y *= - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name.search( 'Z' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tif ( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\thandle.scale.z *= - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( this.mode === 'rotate' ) {\r\n\r\n\t\t\t\t// Align handles to current local or world rotation\r\n\r\n\t\t\t\ttempQuaternion2.copy( quaternion );\r\n\t\t\t\talignVector.copy( this.eye ).applyQuaternion( tempQuaternion.copy( quaternion ).inverse() );\r\n\r\n\t\t\t\tif ( handle.name.search( \"E\" ) !== - 1 ) {\r\n\r\n\t\t\t\t\thandle.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( this.eye, zeroVector, unitY ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'X' ) {\r\n\r\n\t\t\t\t\ttempQuaternion.setFromAxisAngle( unitX, Math.atan2( - alignVector.y, alignVector.z ) );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion2, tempQuaternion );\r\n\t\t\t\t\thandle.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Y' ) {\r\n\r\n\t\t\t\t\ttempQuaternion.setFromAxisAngle( unitY, Math.atan2( alignVector.x, alignVector.z ) );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion2, tempQuaternion );\r\n\t\t\t\t\thandle.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Z' ) {\r\n\r\n\t\t\t\t\ttempQuaternion.setFromAxisAngle( unitZ, Math.atan2( alignVector.y, alignVector.x ) );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion2, tempQuaternion );\r\n\t\t\t\t\thandle.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Hide disabled axes\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"X\" ) === - 1 || this.showX );\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"Y\" ) === - 1 || this.showY );\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"Z\" ) === - 1 || this.showZ );\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"E\" ) === - 1 || ( this.showX && this.showY && this.showZ ) );\r\n\r\n\t\t\t// highlight selected axis\r\n\r\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\r\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\r\n\r\n\t\t\thandle.material.color.copy( handle.material._color );\r\n\t\t\thandle.material.opacity = handle.material._opacity;\r\n\r\n\t\t\tif ( ! this.enabled ) {\r\n\r\n\t\t\t\thandle.material.opacity *= 0.5;\r\n\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t} else if ( this.axis ) {\r\n\r\n\t\t\t\tif ( handle.name === this.axis ) {\r\n\r\n\t\t\t\t\thandle.material.opacity = 1.0;\r\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\r\n\r\n\t\t\t\t\treturn handle.name === a;\r\n\r\n\t\t\t\t} ) ) {\r\n\r\n\t\t\t\t\thandle.material.opacity = 1.0;\r\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thandle.material.opacity *= 0.25;\r\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTransformControlsGizmo.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: TransformControlsGizmo,\r\n\r\n\tisTransformControlsGizmo: true\r\n\r\n} );\r\n\r\n\r\nvar TransformControlsPlane = function () {\r\n\r\n\t'use strict';\r\n\r\n\tMesh.call( this,\r\n\t\tnew PlaneBufferGeometry( 100000, 100000, 2, 2 ),\r\n\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false } )\r\n\t);\r\n\r\n\tthis.type = 'TransformControlsPlane';\r\n\r\n\tvar unitX = new Vector3( 1, 0, 0 );\r\n\tvar unitY = new Vector3( 0, 1, 0 );\r\n\tvar unitZ = new Vector3( 0, 0, 1 );\r\n\r\n\tvar tempVector = new Vector3();\r\n\tvar dirVector = new Vector3();\r\n\tvar alignVector = new Vector3();\r\n\tvar tempMatrix = new Matrix4();\r\n\tvar identityQuaternion = new Quaternion();\r\n\r\n\tthis.updateMatrixWorld = function () {\r\n\r\n\t\tvar space = this.space;\r\n\r\n\t\tthis.position.copy( this.worldPosition );\r\n\r\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\r\n\r\n\t\tunitX.set( 1, 0, 0 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\r\n\t\tunitY.set( 0, 1, 0 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\r\n\t\tunitZ.set( 0, 0, 1 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\r\n\r\n\t\t// Align the plane for current transform mode, axis and space.\r\n\r\n\t\talignVector.copy( unitY );\r\n\r\n\t\tswitch ( this.mode ) {\r\n\r\n\t\t\tcase 'translate':\r\n\t\t\tcase 'scale':\r\n\t\t\t\tswitch ( this.axis ) {\r\n\r\n\t\t\t\t\tcase 'X':\r\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitX );\r\n\t\t\t\t\t\tdirVector.copy( unitX ).cross( alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Y':\r\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitY );\r\n\t\t\t\t\t\tdirVector.copy( unitY ).cross( alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Z':\r\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitZ );\r\n\t\t\t\t\t\tdirVector.copy( unitZ ).cross( alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'XY':\r\n\t\t\t\t\t\tdirVector.copy( unitZ );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'YZ':\r\n\t\t\t\t\t\tdirVector.copy( unitX );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'XZ':\r\n\t\t\t\t\t\talignVector.copy( unitZ );\r\n\t\t\t\t\t\tdirVector.copy( unitY );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'XYZ':\r\n\t\t\t\t\tcase 'E':\r\n\t\t\t\t\t\tdirVector.set( 0, 0, 0 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'rotate':\r\n\t\t\tdefault:\r\n\t\t\t\t// special case for rotate\r\n\t\t\t\tdirVector.set( 0, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirVector.length() === 0 ) {\r\n\r\n\t\t\t// If in rotate mode, make the plane parallel to camera\r\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttempMatrix.lookAt( tempVector.set( 0, 0, 0 ), dirVector, alignVector );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( tempMatrix );\r\n\r\n\t\t}\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTransformControlsPlane.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: TransformControlsPlane,\r\n\r\n\tisTransformControlsPlane: true\r\n\r\n} );\r\n\r\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\r\n","import {Vector2, Vector3, PointLight, PointLightHelper, DirectionalLightHelper, MeshBasicMaterial, Mesh,\r\n  SpotLightHelper, HemisphereLightHelper, SphereBufferGeometry, DirectionalLight, SpotLight, HemisphereLight} from 'three';\r\nimport {TransformControls} from \"../lib_external/TransformControls\";\r\nimport MainScene from \"../MainScene\";\r\nimport Layers from \"../Layers\";\r\nimport * as Const from \"../consts/Constants\";\r\n\r\nlet LightTool = function () {\r\n  let eventLightSelected = {type: 'light selected', light:null};\r\n  let eventLightMoved = {type: 'light moved', light:null};\r\n  let eventLightRemoved = {type: 'light removed', id: null};\r\n  let enabled = true;\r\n\r\n  let lights = [], lightPickers = [], dom = MainScene.getDom();\r\n  let transformControls = new TransformControls( MainScene.getCamera(), dom );\r\n  let scene = MainScene.scene();\r\n  let trackballControls = MainScene.cameraControl();\r\n  scene.add( transformControls );\r\n  transformControls.addEventListener( \"change\", () => {\r\n    if (transformControls.object) {\r\n      transformControls.object.userData.helper.update();\r\n      eventLightMoved.light = transformControls.object;\r\n      scene.dispatchEvent(eventLightMoved);\r\n    }\r\n  });\r\n\r\n  let onDownPos = new Vector2(), onUpPos = new Vector2();\r\n  function mousedown4PickLight(event) {\r\n    trackballControls.enabled = !transformControls.dragging;\r\n    if (!enabled)\r\n      return;\r\n    if (transformControls.dragging)\r\n      return;\r\n    let lst = MainScene.getIntersects(event.clientX, event.clientY, lightPickers);\r\n    if (lst.length == 0) {\r\n      onDownPos.set(event.clientX, event.clientY);\r\n      return;\r\n    }\r\n    let lightPicker = lst[0].object;\r\n    transformControls.attach(lightPicker.userData.object);\r\n    eventLightSelected.light = transformControls.object;\r\n    scene.dispatchEvent(eventLightSelected);\r\n  }\r\n  function mouseup4PickLight(event) {\r\n    onUpPos.set(event.clientX, event.clientY);\r\n    if (onDownPos.manhattanDistanceTo(onUpPos) == 0) {\r\n      transformControls.detach();\r\n      trackballControls.enabled = true;\r\n      eventLightSelected.light = null;\r\n      scene.dispatchEvent(eventLightSelected);\r\n    }\r\n  }\r\n  function selectLight(light) {\r\n    if (transformControls && light && light !== transformControls.object) {\r\n      eventLightSelected.light = light;\r\n      scene.dispatchEvent(eventLightSelected);\r\n      transformControls.attach(light);\r\n    }\r\n  }\r\n\r\n  let that = {\r\n    toggle3dEditing(val) {\r\n      trackballControls.lockFromZ = !val;\r\n      let lst = Layers.availableMeshes(true, false);\r\n      lst.forEach(it => it.holder.displayAs3D(val) );\r\n      if (val) {\r\n        MainScene.coordTool().hide();\r\n        dom.addEventListener('mousedown', mousedown4PickLight);\r\n        dom.addEventListener('mouseup', mouseup4PickLight);\r\n        lights.forEach(light => {\r\n          light.userData.helper.visible = true;\r\n          light.userData.helper.update();\r\n        });\r\n        trackballControls.staticMoving = true;\r\n      } else {\r\n        dom.removeEventListener('mousedown', mousedown4PickLight);\r\n        dom.removeEventListener('mouseup', mouseup4PickLight);\r\n        transformControls.detach();\r\n        eventLightSelected.light = null;\r\n        scene.dispatchEvent(eventLightSelected);\r\n        lights.forEach(light => light.userData.helper.visible = false);\r\n        trackballControls.enabled = true;\r\n        trackballControls.staticMoving = false;\r\n        MainScene.resetCamera();\r\n      }\r\n    },\r\n    visible(val) {\r\n      enabled = val;\r\n      if (!enabled)\r\n        transformControls.detach();\r\n      lights.forEach(light => light.userData.helper.visible = val);\r\n    },\r\n    allLights() {\r\n      return lights;\r\n    },\r\n    selectedLight() {\r\n      return transformControls.object;\r\n    },\r\n    selectLightBy(uuid) {\r\n      let light = that.getLightById(uuid);\r\n      selectLight(light);\r\n    },\r\n    getLightById(uuid) {\r\n      for (let light of lights) {\r\n        if (light.uuid === uuid)\r\n          return light;\r\n      }\r\n      return null;\r\n    },\r\n    updateLight(lightId, updateObj) {\r\n      let light = that.getLightById(lightId);\r\n      if (light) {\r\n        if (updateObj.position)\r\n          light.position.copy(updateObj.position);\r\n        if (updateObj.color){\r\n          light.color.copy(updateObj.color);\r\n        }\r\n        if (updateObj.groundColor){\r\n          light.groundColor.copy(updateObj.groundColor);\r\n        }\r\n        if (updateObj.intensity != null) {\r\n          light.intensity = updateObj.intensity;\r\n        }\r\n        if (updateObj.distance != null) {\r\n          light.distance = updateObj.distance;\r\n        }\r\n        if (updateObj.angle != null) {\r\n          light.angle = updateObj.angle;\r\n        }\r\n        light.userData.helper.update();\r\n      }\r\n    },\r\n    deleteLightBy(uuid) {\r\n      let light = that.getLightById(uuid);\r\n      if (light)\r\n        that.deleteLight(light);\r\n    },\r\n    deleteLight(light) {\r\n      if (transformControls.object === light) {\r\n        transformControls.detach();\r\n      }\r\n      scene.remove(light);\r\n      scene.remove(light.userData.helper);\r\n      let index = lights.indexOf(light);\r\n      lights.splice(index, 1);\r\n      lightPickers.splice(index, 1);\r\n      eventLightRemoved.id = light.uuid;\r\n      scene.dispatchEvent(eventLightRemoved);\r\n    },\r\n    addLight(lightType, position, skipSelect) {\r\n      let light, helper;\r\n      let defaultColor = 0xffffff;\r\n      let intensity = 1;\r\n      if (lightType == Const.lightTypePoint) {\r\n        light = new PointLight(defaultColor);\r\n        helper = new PointLightHelper( light, 1 );\r\n      } else if (lightType == Const.lightTypeDirection) {\r\n        light = new DirectionalLight(defaultColor, intensity);\r\n        light.position.set( 5, 10, 7.5 );\r\n        helper = new DirectionalLightHelper( light, 1 );\r\n      } else if (lightType == Const.lightTypeSpot) {\r\n        let distance = 0;\r\n        let angle = Math.PI * 0.1;\r\n        let penumbra = 0;\r\n        light = new SpotLight( defaultColor, intensity, distance, angle, penumbra );\r\n        helper = new SpotLightHelper(light, 1);\r\n      } else if (lightType == Const.lightTypeHemiSphere) {\r\n        let groundColor = 0x0;\r\n        light = new HemisphereLight( defaultColor, groundColor, intensity );\r\n        light.position.set( 0, 10, 0 );\r\n        helper = new HemisphereLightHelper(light, 1);\r\n      }\r\n      let geometry = new SphereBufferGeometry( 2, 4, 2 );\r\n      let material = new MeshBasicMaterial( { color: 0xff0000, visible: false } );\r\n      let picker = new Mesh( geometry, material );\r\n      picker.name = 'picker';\r\n      picker.userData.object = light;\r\n      helper.add( picker );\r\n      lightPickers.push(picker);\r\n\r\n      light.userData.helper = helper;\r\n      lights.push(light);\r\n      scene.add(light);\r\n      scene.add(helper);\r\n      helper.visible = MainScene.isEditingIn3D();\r\n      if (position) {\r\n        light.position.copy(position);\r\n        if (!skipSelect)\r\n          helper.update();\r\n      }\r\n\r\n      if (!skipSelect)\r\n        selectLight(light);\r\n      return light;\r\n    },\r\n    deleteSelectedLight() {\r\n      if (!transformControls.object)\r\n        return;\r\n      that.deleteLight(transformControls.object);\r\n    },\r\n    toggleLightVisible(lightId) {\r\n      let light = that.getLightById(lightId);\r\n      if (light) {\r\n        let visible = !light.visible;\r\n        light.userData.helper.visible = visible;\r\n        light.visible = visible;\r\n      }\r\n    },\r\n    deleteAllLights() {\r\n      let lights0 = lights.slice();\r\n      for (let light of lights0) {\r\n        that.deleteLight(light);\r\n      }\r\n    },\r\n    serializeLights() {\r\n      let obj = {clearColor: MainScene.getRenderer().getClearColor().getHex(), clearAlpha: MainScene.getRenderer().getClearAlpha(), lights: []};\r\n      for (let light of lights) {\r\n        let lightType = Const.getLightType(light);\r\n        let objL = {type: lightType, pos: light.position.toArray(), intensity: light.intensity, visible: light.visible };\r\n        objL.color = light.color.getHex();\r\n        if ( light.groundColor !== undefined ) objL.groundColor = light.groundColor.getHex();\r\n\r\n        if ( light.distance !== undefined ) objL.distance = light.distance;\r\n        if ( light.angle !== undefined ) objL.angle = light.angle;\r\n        obj.lights.push(objL);\r\n      }\r\n      return obj;\r\n    },\r\n    deserializeLights(obj) {\r\n      this.deleteAllLights();\r\n      MainScene.setClearColor(obj.clearColor, obj.clearAlpha);\r\n      let tmp = new Vector3();\r\n      for (let objL of obj.lights) {\r\n        tmp.fromArray(objL.pos);\r\n        let light = that.addLight(objL.type, tmp, true);\r\n        light.intensity = objL.intensity;\r\n        light.color.setHex(objL.color), light.visible = objL.visible;\r\n\r\n        if (objL.groundColor !== undefined) light.groundColor.setHex(objL.groundColor);\r\n        if (objL.distance !== undefined) light.distance = objL.distance;\r\n        if (objL.angle !== undefined) light.angle = objL.angle;\r\n        light.userData.helper.update();\r\n      }\r\n    }\r\n  };\r\n  return that;\r\n};\r\n\r\nexport default LightTool;\r\n","import {Vector3} from 'three';\r\nimport Layers from \"../Layers\";\r\nimport {getMeasurePoint, getMeasuringLineSegment, getMeasuredLines, getMeasuredAreaMesh, getPolygonsAreaMesh, ShapeUtils} from \"../util/StaticMethods\"\r\nimport Main from \"../MainScene\";\r\nimport Config from \"../configurable/Config\";\r\nimport TriCut from \"../lib/TriangleCut\";\r\n\r\nlet MeasureTool = function () {\r\n  let eventUpdateTip = {type: \"update tip\", meters:0, distance:0, areaMeters: 0, area: 0, mapCoord:null};\r\n  let eventAddTip = {type: \"add tip\", meters:0, distance:0, areaMeters: 0, area: 0, mapCoord:null};\r\n  let eventRemoveTips = {type: \"remove all tips\"};\r\n  let eventCancelAddTip = {type: \"cancel add tips\"};\r\n  let STATUS_FREE = 0;\r\n  let STATUS_MEASURE_LENGTH = 1;\r\n  let STATUS_MEASURE_AREA = 2;\r\n  let status = STATUS_FREE;\r\n  let measurePoint = getMeasurePoint(new Vector3(), '#3b3b3b', true);\r\n  let currentSegment, lastSegment;\r\n  let meshes = Layers.availableMeshes();\r\n  let points = [], pointObjs = [];\r\n  let segments = [], measuredLst = [];\r\n  let dom = Main.getDom();\r\n  let scene = Main.scene();\r\n  let dashSize = 0.4, gapSize = 0.3, _scalar = 1;\r\n  let measuredLen = 0;\r\n\r\n  dom.addEventListener('mousedown', mousedown);\r\n  function mousedown(event) {\r\n    if (event.button === 2) {\r\n      //鼠标右键 取消测量\r\n      if (status == STATUS_MEASURE_LENGTH || status == STATUS_MEASURE_AREA) {\r\n        endMeasuring()\r\n      }\r\n    }\r\n  }\r\n\r\n  let tempVector = new Vector3()\r\n  function mousemove4Measure(event) {\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    let pos = lst[0].point;\r\n    if (Config.ui.enableEditPointAdhere) {\r\n      let targets = [];\r\n      meshes.forEach(mesh => {\r\n        let obj = mesh.holder.getPointOnEdges(pos, true);\r\n        if (obj.ctrlPoint) {\r\n          targets.push(obj);\r\n        }\r\n      });\r\n      if (targets.length > 0) {\r\n        targets.sort((a, b) => a.distanceSq - b.distanceSq );\r\n        pos = targets[0].ctrlPos;\r\n      }\r\n    }\r\n\r\n    measurePoint.position.copy(pos);\r\n    if (!measurePoint.parent) {\r\n      Layers.editingLayer.add(measurePoint);\r\n    }\r\n    if (!currentSegment) {\r\n      return;\r\n    }\r\n    let attr = currentSegment.geometry.attributes.position;\r\n    attr.setXYZ(1, pos.x, pos.y, pos.z);\r\n    attr.needsUpdate = true;\r\n    currentSegment.computeLineDistances();\r\n    if (lastSegment) {\r\n      attr = lastSegment.geometry.attributes.position;\r\n      attr.setXYZ(0, pos.x, pos.y, pos.z);\r\n      attr.needsUpdate = true;\r\n      lastSegment.computeLineDistances();\r\n    }\r\n\r\n    eventUpdateTip.mapCoord = pos;\r\n    if (points.length>0) {\r\n      if (status == STATUS_MEASURE_AREA) {\r\n        tempVector.set(0,0,0);\r\n        points.forEach(pt => tempVector.add(pt));\r\n        tempVector.add(pos).divideScalar(points.length + 1);\r\n        eventUpdateTip.mapCoord = tempVector;\r\n        if (points.length > 1) {\r\n          let area = Math.abs(ShapeUtils.area(points.concat([pos])) );\r\n          eventUpdateTip.area = area.toFixed(2);\r\n          eventUpdateTip.areaMeters = (area * Main.mapScale() * Main.mapScale()).toFixed(2);\r\n        } else {\r\n          eventUpdateTip.area = 0;\r\n          eventUpdateTip.areaMeters = 0;\r\n        }\r\n      } else if (status == STATUS_MEASURE_LENGTH) {\r\n        let curLen = points[points.length-1].distanceTo(pos);\r\n        eventUpdateTip.distance = (measuredLen + curLen).toFixed(2);\r\n        eventUpdateTip.meters = ((measuredLen + curLen) * Main.mapScale()).toFixed(2);\r\n      }\r\n\r\n      scene.dispatchEvent(eventUpdateTip);\r\n    }\r\n  }\r\n  function mouseclick4Measure(event) {\r\n    if (!measurePoint.parent) {\r\n      return;\r\n    }\r\n    let pos = measurePoint.position;\r\n    if (points.length > 0) {\r\n      let latest = points[points.length - 1];\r\n      if (latest.manhattanDistanceTo(pos) < 0.01) {\r\n        return;\r\n      }\r\n    }\r\n    points.push(pos.clone());\r\n\r\n    currentSegment = getMeasuringLineSegment(pos, pos, dashSize * _scalar, gapSize * _scalar);\r\n    segments.push(currentSegment);\r\n    Layers.editingLayer.add(currentSegment);\r\n    if (points.length > 1) {\r\n      if (status == STATUS_MEASURE_LENGTH) {\r\n        measuredLen += points[points.length-2].distanceTo(points[points.length-1]);\r\n      } else if (status == STATUS_MEASURE_AREA && lastSegment == null) {\r\n        lastSegment = getMeasuringLineSegment(pos, points[0], dashSize * _scalar, gapSize * _scalar);\r\n        segments.push(lastSegment);\r\n        Layers.editingLayer.add(lastSegment);\r\n      }\r\n    }\r\n  }\r\n  function mousedblclick4Measure() {\r\n    if (points.length < 2)\r\n      return;\r\n    let measuredLines = getMeasuredLines(points, points.length > 2 && status == STATUS_MEASURE_AREA);\r\n    Layers.editingLayer.add(measuredLines);\r\n    measuredLst.push(measuredLines);\r\n    // if (status == STATUS_MEASURE_AREA) {\r\n    //   let areaMesh = getMeasuredAreaMesh(points);\r\n    //   Layers.editingLayer.add(areaMesh);\r\n    //   measuredLst.push(areaMesh);\r\n    // }\r\n\r\n    points.forEach(it => {\r\n      let pointObj = getMeasurePoint(it, '#5f5f5f');\r\n      Layers.editingLayer.add(pointObj);\r\n      pointObjs.push(pointObj);\r\n    })\r\n\r\n    if (points.length > 1) {\r\n      eventAddTip.distance = measuredLen.toFixed(2);\r\n      eventAddTip.meters = (measuredLen * Main.mapScale()).toFixed(2);\r\n      eventAddTip.mapCoord = eventUpdateTip.mapCoord.clone();\r\n      if (status == STATUS_MEASURE_AREA) {\r\n        let polygons = TriCut.getSliceLinesPolygons(points);\r\n        let area = TriCut.getPolygonsArea(polygons);\r\n        eventAddTip.areaMeters = (area * Main.mapScale() * Main.mapScale()).toFixed(2);\r\n        eventAddTip.area = area.toFixed(2);\r\n\r\n        let areaMesh = getPolygonsAreaMesh(polygons);\r\n        Layers.editingLayer.add(areaMesh);\r\n        measuredLst.push(areaMesh);\r\n      }\r\n      scene.dispatchEvent(eventAddTip);\r\n    }\r\n    clearTempMeasuring();\r\n  }\r\n  function clearTempMeasuring() {\r\n    segments.forEach(it => {\r\n      if (it.parent)\r\n        it.parent.remove(it)\r\n    });\r\n    segments.splice(0, segments.length);\r\n    points.splice(0, points.length);\r\n    lastSegment = currentSegment = null;\r\n    measuredLen = 0;\r\n  }\r\n  function endMeasuring() {\r\n    status = STATUS_FREE;\r\n    dom.removeEventListener('mousemove', mousemove4Measure);\r\n    dom.removeEventListener('click', mouseclick4Measure);\r\n    dom.removeEventListener('dblclick', mousedblclick4Measure);\r\n\r\n    clearTempMeasuring();\r\n    if (measurePoint.parent) {\r\n      measurePoint.parent.remove(measurePoint);\r\n    }\r\n    scene.dispatchEvent(eventCancelAddTip);\r\n  }\r\n\r\n  function startMeasuring() {\r\n    meshes = Layers.availableMeshes();\r\n    dom.addEventListener('mousemove', mousemove4Measure);\r\n    dom.addEventListener('click', mouseclick4Measure);\r\n    dom.addEventListener('dblclick', mousedblclick4Measure);\r\n  }\r\n  let that = {\r\n    updateScaleFactor(scalar) {\r\n      _scalar = scalar;\r\n      segments.forEach(it => {\r\n        it.material.dashSize = dashSize * _scalar;\r\n        it.material.gapSize = gapSize * _scalar;\r\n      });\r\n    },\r\n    startMeasureLength() {\r\n      status = STATUS_MEASURE_LENGTH;\r\n      startMeasuring()\r\n      eventUpdateTip.isArea = eventAddTip.isArea = false;\r\n    },\r\n    startMeasureArea() {\r\n      status = STATUS_MEASURE_AREA;\r\n      startMeasuring()\r\n      eventUpdateTip.isArea = eventAddTip.isArea = true;\r\n    },\r\n    clearMeasures() {\r\n      if (status == STATUS_MEASURE_LENGTH || status == STATUS_MEASURE_AREA) {\r\n        endMeasuring()\r\n      }\r\n      status = STATUS_FREE;\r\n\r\n      pointObjs.forEach(it => it.parent.remove(it));\r\n      pointObjs = [];\r\n      measuredLst.forEach(it => it.parent.remove(it));\r\n      measuredLst = [];\r\n      scene.dispatchEvent(eventRemoveTips);\r\n    },\r\n  }\r\n  return that;\r\n}\r\n\r\nexport default MeasureTool;\r\n","import Main from \"../MainScene\";\r\nimport TextMark from \"../instance/TextMark\";\r\nimport Layers from \"../Layers\";\r\nimport Config from \"../configurable/Config\";\r\nimport History from \"../undo/History\";\r\n\r\nlet MarkerTool = function (dom) {\r\n  let eventMarkersSelectChange = {type: 'markers select change'};\r\n\r\n  let isAddingTextMark = false;\r\n  let contextMenuEnabled = true;\r\n\r\n  let currentTextMark = new TextMark('新增标注');\r\n  let editingLayer = Layers.editingLayer;\r\n  let selectedMarkers = [];\r\n  let scene = Main.scene();\r\n  let mouseDownPos;\r\n\r\n  scene.addEventListener('selectionBoxUpdated', mouseup4SelectionBox);\r\n  scene.addEventListener('lock change', onLockChange);\r\n\r\n  function onLockChange(event) {\r\n    if (isAddingTextMark) {\r\n      endAddTextMark();\r\n    }\r\n    let locked = event.layerObj.locked, hidden = event.layerObj.hidden, layer = event.layerObj.group;\r\n    let lst = layer.children;\r\n    for (let i = 0; i < lst.length; i++) {\r\n      if (lst[i].holder == undefined || !lst[i].holder.isMarker)\r\n        continue;\r\n      let sprite = lst[i].holder.sprite();\r\n      if (locked || hidden) {\r\n        let index = selectedMarkers.indexOf(sprite);\r\n        if (index >= 0) {\r\n          selectedMarkers[index].holder.unselect();\r\n          selectedMarkers.splice(index, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function getLayer() {\r\n    let markLayer = Layers.markLayer;\r\n    if (markLayer.hidden || markLayer.locked) {\r\n      return Layers.getLayer()\r\n    }\r\n    return markLayer;\r\n  }\r\n  function startAddTextMark() {\r\n    isAddingTextMark = true;\r\n    contextMenuEnabled = false;\r\n    dom.addEventListener('mousemove', mousemove4MarkAdding, false);\r\n    dom.addEventListener('mousedown', mousedown4MarkAdding, false);\r\n  }\r\n  function endAddTextMark() {\r\n    isAddingTextMark = false;\r\n    dom.removeEventListener('mousemove', mousemove4MarkAdding, false);\r\n    dom.removeEventListener('mousedown', mousedown4MarkAdding, false);\r\n    if (currentTextMark.sprite().parent) {\r\n      currentTextMark.sprite().parent.remove(currentTextMark.sprite());\r\n    }\r\n  }\r\n\r\n  function mouseup4SelectionBox(event) {\r\n    if (isAddingTextMark || Layers.navPathTabSelected() )\r\n      return;\r\n    let markers = Layers.availableMarkers(false);\r\n    if (markers.length == 0) {\r\n      return;\r\n    }\r\n    let allSelected = event.selectBox.selectRings(markers);\r\n    selectedMarkers.forEach(it => it.holder.unselect() );\r\n    allSelected.forEach(it => it.holder.select() );\r\n    selectedMarkers = allSelected;\r\n    scene.dispatchEvent(eventMarkersSelectChange);\r\n  }\r\n\r\n  function mousemove4MarkAdding(event) {\r\n    if (!currentTextMark.sprite().parent)\r\n      editingLayer.add(currentTextMark.sprite());\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length > 0) {\r\n      currentTextMark.sprite().position.copy(lst[0].point);\r\n    }\r\n  }\r\n  function mousedown4MarkAdding(event) {\r\n    event.cancelBubble = true;\r\n    event.stopPropagation();\r\n\r\n    if (event.button === 2) {\r\n      //鼠标右键 取消新增标注\r\n      endAddTextMark();\r\n      setTimeout(function () {\r\n        contextMenuEnabled = true;\r\n      }, 100);\r\n    } else {\r\n      addMark();\r\n    }\r\n  }\r\n\r\n  function mousedown4Select(event) {\r\n    if (isAddingTextMark)\r\n      return true;\r\n    let arr = Layers.availableMarkers(false);\r\n    if (arr.length == 0)\r\n      return false;\r\n    let lst = Main.getIntersects(event.clientX, event.clientY, arr);\r\n    if (lst.length == 0) {\r\n      if (!Main.pressingShift()) setSelectMark(null);\r\n      return false;\r\n    }\r\n    let mark = lst[0].object;\r\n    setSelectMark(mark);\r\n    mouseDownPos = lst[0].point;\r\n    selectedMarkers.forEach(it => it.holder.updatePosition() );\r\n    dom.addEventListener('mousemove', mousemove4Drag);\r\n    document.addEventListener('mouseup', mouseup4Drag);\r\n    return true;\r\n  }\r\n\r\n  function mousemove4Drag(event) {\r\n    if (event.buttons == 2) {\r\n      return;\r\n    }\r\n    let lst = Main.getIntersectsOnPlane(event.clientX, event.clientY);\r\n    if (lst.length == 0) {\r\n      return;\r\n    }\r\n    let curPos = lst[0].point;\r\n    let vector = curPos.clone().sub(mouseDownPos);\r\n    selectedMarkers.forEach(marker => marker.holder.move(vector) );\r\n  }\r\n  function mouseup4Drag() {\r\n    let undoContext = {meshes:[], positions:[], oldPositions:[] };\r\n    selectedMarkers.forEach(it => {\r\n      undoContext.meshes.push(it);\r\n      undoContext.oldPositions.push(it.holder.getOldPos().clone() );\r\n      it.holder.updatePosition();\r\n      undoContext.positions.push(it.holder.getOldPos().clone() );\r\n    } );\r\n\r\n    if (undoContext.positions.length > 0 &&\r\n      undoContext.positions[0].manhattanDistanceTo(undoContext.oldPositions[0]) >= Config.code.moveSlightlyStep) {\r\n      History.addAction(\"update models position\", undoContext);\r\n    }\r\n\r\n    dom.removeEventListener('mousemove', mousemove4Drag);\r\n    document.removeEventListener('mouseup', mouseup4Drag);\r\n  }\r\n\r\n  function setSelectMark(sprite) {\r\n    if (sprite == null) {\r\n      selectedMarkers.forEach(it => it.holder.unselect() );\r\n      selectedMarkers = [];\r\n      scene.dispatchEvent(eventMarkersSelectChange);\r\n      return;\r\n    }\r\n    if (Main.pressingShift() && !isAddingTextMark) {\r\n      sprite.holder.select();\r\n      if (selectedMarkers.indexOf(sprite) < 0) {\r\n        selectedMarkers.push(sprite);\r\n      } else {\r\n        sprite.holder.unselect();\r\n        selectedMarkers.splice(selectedMarkers.indexOf(sprite), 1);\r\n      }\r\n      scene.dispatchEvent(eventMarkersSelectChange);\r\n    } else {\r\n      if (isAddingTextMark || selectedMarkers.indexOf(sprite) < 0) {\r\n        selectedMarkers.forEach(it => it.holder.unselect() );\r\n        selectedMarkers.splice(0, selectedMarkers.length);\r\n        sprite.holder.select();\r\n        selectedMarkers[0] = sprite;\r\n        scene.dispatchEvent(eventMarkersSelectChange);\r\n      }\r\n    }\r\n  }\r\n\r\n  function addMark() {\r\n    let layer = getLayer();\r\n    let mark = new TextMark(currentTextMark.text());\r\n    mark.setPosition(currentTextMark.sprite().position);\r\n    mark.attach(layer);\r\n  }\r\n\r\n  function removeMark(holder) {\r\n    let index = selectedMarkers.indexOf(holder);\r\n    if (index >= 0) {\r\n      selectedMarkers.splice(index, 1);\r\n    }\r\n    holder.detach();\r\n  }\r\n\r\n  let that = {\r\n    mousedown4Select: mousedown4Select,\r\n\r\n    startAddTextMark: startAddTextMark,\r\n    endAddTextMark: endAddTextMark,\r\n    contextMenuEnabled() {\r\n      return contextMenuEnabled;\r\n    },\r\n    selectedMarkers() {\r\n      return selectedMarkers;\r\n    },\r\n    unifyMarkersName(name) {\r\n      selectedMarkers.forEach(marker => marker.holder.updateText(name))\r\n    },\r\n    removeSelected() {\r\n      if (selectedMarkers.length == 0 || isAddingTextMark) {\r\n        return;\r\n      }\r\n\r\n      selectedMarkers.forEach(mark => mark.holder.detach() );\r\n      selectedMarkers = [];\r\n      scene.dispatchEvent(eventMarkersSelectChange);\r\n    },\r\n    removeAll() {\r\n      let markers = Layers.availableMarkers(true);\r\n      markers.forEach(it => {\r\n        if (it.parent)\r\n          it.parent.remove(it)\r\n      })\r\n      selectedMarkers = [];\r\n      scene.dispatchEvent(eventMarkersSelectChange);\r\n    },\r\n    setSelection(sprite) {\r\n      setSelectMark(sprite)\r\n    },\r\n  };\r\n  return that;\r\n}\r\nexport default MarkerTool;\r\n","/**\r\n * @author HypnosNova / https://www.threejs.org.cn/gallery\r\n * This is a class to check whether objects are in a selection area in 3D space\r\n */\r\nimport {Vector3, Frustum} from 'three'\r\n\r\nlet SelectionBox = ( function () {\r\n\r\n\tvar frustum = new Frustum();\r\n\tvar center = new Vector3();\r\n\r\n\tfunction SelectionBox( camera, scene, deep ) {\r\n\r\n\t\tthis.camera = camera;\r\n\t\tthis.scene = scene;\r\n\t\tthis.startPoint = new Vector3();\r\n\t\tthis.endPoint = new Vector3();\r\n\t\tthis.collection = [];\r\n\t\tthis.deep = deep || Number.MAX_VALUE;\r\n\r\n\t}\r\n\r\n\tSelectionBox.prototype.select = function (meshLst, startPoint, endPoint ) {\r\n\r\n\t\tthis.startPoint = startPoint || this.startPoint;\r\n\t\tthis.endPoint = endPoint || this.endPoint;\r\n\t\tthis.collection = [];\r\n\r\n\t\tthis.updateFrustum( this.startPoint, this.endPoint );\r\n\t\tif (meshLst != null && meshLst.length > 0) {\r\n\t\t\tmeshLst.forEach(it => this.searchChildInFrustum(frustum, it, true));\r\n\t\t} else {\r\n\t\t\tthis.searchChildInFrustum( frustum, this.scene, false );\r\n\t\t}\r\n\r\n\t\treturn this.collection;\r\n\t};\r\n\r\n\tSelectionBox.prototype.selectRings = function (rings ) {\r\n\t\tthis.collection = [];\r\n\r\n\t\tthis.updateFrustum( this.startPoint, this.endPoint );\r\n\t\tif (rings != null && rings.length > 0) {\r\n\t\t\trings.forEach(ring => {\r\n\t\t\t\tif (frustum.containsPoint( ring.position ) ) {\r\n\t\t\t\t\tthis.collection.push(ring);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.collection;\r\n\t};\r\n\r\n\tSelectionBox.prototype.updateFrustum = function ( startPoint, endPoint ) {\r\n\r\n\t\tstartPoint = startPoint || this.startPoint;\r\n\t\tendPoint = endPoint || this.endPoint;\r\n\r\n\t\tthis.camera.updateProjectionMatrix();\r\n\t\tthis.camera.updateMatrixWorld();\r\n\r\n\t\tvar tmpPoint = startPoint.clone();\r\n\t\ttmpPoint.x = Math.min( startPoint.x, endPoint.x );\r\n\t\ttmpPoint.y = Math.max( startPoint.y, endPoint.y );\r\n\t\tendPoint.x = Math.max( startPoint.x, endPoint.x );\r\n\t\tendPoint.y = Math.min( startPoint.y, endPoint.y );\r\n\r\n\t\tvar vecNear = this.camera.position.clone();\r\n\t\tvar vecTopLeft = tmpPoint.clone();\r\n\t\tvar vecTopRight = new Vector3( endPoint.x, tmpPoint.y, 0 );\r\n\t\tvar vecDownRight = endPoint.clone();\r\n\t\tvar vecDownLeft = new Vector3( tmpPoint.x, endPoint.y, 0 );\r\n\t\tvecTopLeft.unproject( this.camera );\r\n\t\tvecTopRight.unproject( this.camera );\r\n\t\tvecDownRight.unproject( this.camera );\r\n\t\tvecDownLeft.unproject( this.camera );\r\n\r\n\t\tvar vectemp1 = vecTopLeft.clone().sub( vecNear );\r\n\t\tvar vectemp2 = vecTopRight.clone().sub( vecNear );\r\n\t\tvar vectemp3 = vecDownRight.clone().sub( vecNear );\r\n\t\tvectemp1.normalize();\r\n\t\tvectemp2.normalize();\r\n\t\tvectemp3.normalize();\r\n\r\n\t\tvectemp1.multiplyScalar( this.deep );\r\n\t\tvectemp2.multiplyScalar( this.deep );\r\n\t\tvectemp3.multiplyScalar( this.deep );\r\n\t\tvectemp1.add( vecNear );\r\n\t\tvectemp2.add( vecNear );\r\n\t\tvectemp3.add( vecNear );\r\n\r\n\t\tvar planes = frustum.planes;\r\n\r\n\t\tplanes[ 0 ].setFromCoplanarPoints( vecNear, vecTopLeft, vecTopRight );\r\n\t\tplanes[ 1 ].setFromCoplanarPoints( vecNear, vecTopRight, vecDownRight );\r\n\t\tplanes[ 2 ].setFromCoplanarPoints( vecDownRight, vecDownLeft, vecNear );\r\n\t\tplanes[ 3 ].setFromCoplanarPoints( vecDownLeft, vecTopLeft, vecNear );\r\n\t\tplanes[ 4 ].setFromCoplanarPoints( vecTopRight, vecDownRight, vecDownLeft );\r\n\t\tplanes[ 5 ].setFromCoplanarPoints( vectemp3, vectemp2, vectemp1 );\r\n\t\tplanes[ 5 ].normal.multiplyScalar( - 1 );\r\n\r\n\t};\r\n\r\n\tSelectionBox.prototype.searchChildInFrustum = function ( frustum, object, skipChild ) {\r\n\r\n\t\tif ( object.isMesh ) {\r\n\r\n\t\t\tif ( object.material !== undefined ) {\r\n\r\n\t\t\t\tobject.geometry.computeBoundingSphere();\r\n\r\n\t\t\t\tcenter.copy( object.geometry.boundingSphere.center );\r\n\r\n\t\t\t\tcenter.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\t\tif ( frustum.containsPoint( center ) ) {\r\n\t\t\t\t\tthis.collection.push( object );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( object.children.length > 0 && !skipChild) {\r\n\r\n\t\t\tfor ( var x = 0; x < object.children.length; x ++ ) {\r\n\r\n\t\t\t\tthis.searchChildInFrustum( frustum, object.children[ x ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn SelectionBox;\r\n\r\n} )();\r\n\r\nexport default SelectionBox;\r\n","/**\r\n * @author HypnosNova / https://www.threejs.org.cn/gallery\r\n */\r\nimport {Vector2} from 'three'\r\n\r\nlet SelectionHelper = ( function () {\r\n\r\n\tfunction SelectionHelper( selectionBox, renderer, cssClassName ) {\r\n\r\n\t\tthis.element = document.createElement( 'div' );\r\n\t\tthis.element.classList.add( cssClassName );\r\n\t\tthis.element.style.pointerEvents = 'none';\r\n\t\tthis.element.style.display = 'none';\r\n\r\n\t\tthis.renderer = renderer;\r\n\r\n\t\tthis.startPoint = new Vector2();\r\n\t\tthis.pointTopLeft = new Vector2();\r\n\t\tthis.pointBottomRight = new Vector2();\r\n\r\n\t\tthis.isDown = false;\r\n\r\n\t\tthis.renderer.domElement.addEventListener( 'mousedown', function ( event ) {\r\n\r\n\t\t\tthis.isDown = true;\r\n\t\t\tthis.onSelectStart( event );\r\n\r\n\t\t}.bind( this ), false );\r\n\r\n\t\tthis.renderer.domElement.addEventListener( 'mousemove', function ( event ) {\r\n\r\n\t\t\tif ( this.isDown ) {\r\n\r\n\t\t\t\tthis.onSelectMove( event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}.bind( this ), false );\r\n\r\n\t\tthis.renderer.domElement.addEventListener( 'mouseup', function ( event ) {\r\n\r\n\t\t\tthis.isDown = false;\r\n\t\t\tthis.onSelectOver( event );\r\n\r\n\t\t}.bind( this ), false );\r\n\r\n\t}\r\n\tSelectionHelper.prototype.setEnabled = function(enable) {\r\n\t\tif (enable) {\r\n\t\t\tthis.element.style.display = 'block';\r\n\t\t} else {\r\n\t\t\tthis.element.style.display = 'none';\r\n\t\t}\r\n\t};\r\n\r\n\tSelectionHelper.prototype.onSelectStart = function ( event ) {\r\n\t\tthis.renderer.domElement.parentElement.appendChild( this.element );\r\n\r\n\t\tthis.element.style.left = event.clientX + 'px';\r\n\t\tthis.element.style.top = event.clientY + 'px';\r\n\t\tthis.element.style.width = '0px';\r\n\t\tthis.element.style.height = '0px';\r\n\r\n\t\tthis.startPoint.x = event.clientX;\r\n\t\tthis.startPoint.y = event.clientY;\r\n\r\n\t};\r\n\r\n\tSelectionHelper.prototype.onSelectMove = function ( event ) {\r\n\t\tthis.pointBottomRight.x = Math.max( this.startPoint.x, event.clientX );\r\n\t\tthis.pointBottomRight.y = Math.max( this.startPoint.y, event.clientY );\r\n\t\tthis.pointTopLeft.x = Math.min( this.startPoint.x, event.clientX );\r\n\t\tthis.pointTopLeft.y = Math.min( this.startPoint.y, event.clientY );\r\n\r\n\t\tthis.element.style.left = this.pointTopLeft.x + 'px';\r\n\t\tthis.element.style.top = this.pointTopLeft.y + 'px';\r\n\t\tthis.element.style.width = ( this.pointBottomRight.x - this.pointTopLeft.x ) + 'px';\r\n\t\tthis.element.style.height = ( this.pointBottomRight.y - this.pointTopLeft.y ) + 'px';\r\n\r\n\t};\r\n\r\n\tSelectionHelper.prototype.onSelectOver = function () {\r\n\t\tif (this.element.parentElement) {\r\n\t\t\tthis.element.parentElement.removeChild( this.element );\r\n\t\t}\r\n\t};\r\n\r\n\treturn SelectionHelper;\r\n\r\n} )();\r\nexport default SelectionHelper;\r\n","import {WebGLRenderer, Scene, PerspectiveCamera, GridHelper, PlaneBufferGeometry, MeshBasicMaterial,\r\n  Texture, RGBAFormat, RGBFormat, FrontSide, Raycaster, LinearToneMapping, SphereGeometry,\r\n  BoxHelper, Vector3, Vector2, Group, Mesh} from 'three';\r\nimport {LCS} from \"../../external_lib/util\";\r\nimport Stats from 'three/examples/jsm/libs/stats.module'\r\n\r\nimport Config from \"./configurable/Config\";\r\nimport Layers from './Layers';\r\nimport TrackballControls from \"./lib/TrackballControls\";\r\nimport PolygonTool from \"./tool/PolygonTool\";\r\nimport NavPathTool from \"./tool/NavPathTool\";\r\nimport CoordCorrelateTool from \"./tool/CoordCorrelateTool\";\r\nimport {getRectMesh, getRectOutline, getGridOrigin, getRandHeatmapMaterial, updateUvAttribute} from \"./util/StaticMethods\";\r\nimport PathTrack from \"./instance/PathTrack\";\r\nimport LightTool from \"./tool/LightTool\";\r\nimport MeasureTool from \"./tool/MeasureTool\";\r\nimport Serializer from \"./util/Serialization\";\r\nimport History from \"./undo/History\";\r\nimport MarkerTool from \"./tool/MarkerTool\";\r\nimport SelectionBox from \"./lib/SelectionBox\";\r\nimport SelectionHelper from \"./lib/SelectionHelper\";\r\n\r\nlet MainScene = function () {\r\n  let eventZRotateChange = {type: 'zRotate', value: 0};\r\n  let eventResetUI = {type: 'reset ui'};\r\n  let eventAddRefLayer = {type: 'add ref layer'};\r\n  let eventDivideRef = {type: 'divide ref layer', value:\"1x1\"};\r\n  let eventDividedRefSelected = {type: 'divide ref selected', value:-1};\r\n  let eventSelectionBoxUpdated = {type: 'selectionBoxUpdated'};\r\n  let trackballControls;\r\n  let renderer;\r\n  let scene, camera, stats;\r\n  let planeHelper;\r\n  let polygonTool, navPathTool, coordTool, lightTool, measureTool, markerTool;\r\n\r\n  let pressingAlt = false, pressingCtrl = false, pressingShift = false;\r\n  let initialScale;\r\n  let zRotateInTotal = 0;\r\n  let divideRects = [];\r\n  let gridSize = 60;\r\n  let panFrames = 20, zoomFrames = 40;\r\n  let cameraAni;\r\n  let gridOrigin;\r\n  let editingIn3D = false;\r\n  let pathTrack;\r\n\r\n  //框选相关\r\n  let selectionBox;\r\n  let selectionBoxHelper;\r\n\r\n  function addGrid(parentItem) {\r\n    let grid = new GridHelper( gridSize, 60, 0x444444, 0x888888 );\r\n    grid.rotation.x = Math.PI / 2;\r\n    grid.material.transparent = true;\r\n    let array = grid.geometry.attributes.color.array;\r\n\r\n    for ( let i = 0; i < array.length; i += 60 ) {\r\n      for ( let j = 0; j < 12; j ++ ) {\r\n        array[ i + j ] = 0.26;\r\n      }\r\n    }\r\n    parentItem.add( grid );\r\n    gridOrigin = getGridOrigin(15);\r\n    parentItem.add( gridOrigin );\r\n  }\r\n\r\n  function initControl() {\r\n    trackballControls = new TrackballControls(camera);\r\n    trackballControls.rotateSpeed = 2.0;\r\n    trackballControls.zoomSpeed = 1.5;\r\n    trackballControls.panSpeed = 1.2;\r\n    trackballControls.noZoom = false;\r\n    trackballControls.noPan = false;\r\n    trackballControls.staticMoving = false;\r\n    trackballControls.dynamicDampingFactor = 0.3;\r\n    trackballControls.lockFromZ = true;\r\n    trackballControls.addEventListener( \"change\", updateMeshesScale);\r\n    trackballControls.addEventListener( \"rotateByZ\", cameraRotateByZAxis);\r\n  }\r\n\r\n  function init(divElement) {\r\n    scene = new Scene();\r\n    addGrid(Layers.backgroundLayer);\r\n    // helpers\r\n    let helperGeometry = new PlaneBufferGeometry(999, 999, 2, 2);\r\n    let helperMaterial = new MeshBasicMaterial({color: 0x00cc00, wireframe: true, transparent: true, opacity: 0, depthWrite: false});\r\n    planeHelper = new Mesh(helperGeometry, helperMaterial);\r\n    scene.add(planeHelper);\r\n\r\n    // create a render and set the size\r\n    renderer = new WebGLRenderer({ antialias: true });\r\n    // renderer.setClearColor( 0xa0a0a0, 1 );\r\n    renderer.setClearColor( '#ffffff', 1 );\r\n    // renderer.setPixelRatio( window.devicePixelRatio );\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    renderer.setTransparentSort(transparentSort);\r\n    renderer.toneMapping = LinearToneMapping;\r\n    // renderer.autoClear = false;\r\n\r\n    camera = new PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );\r\n    camera.position.z = 20;\r\n    initialScale = camera.position.z;\r\n    initControl();\r\n\r\n    selectionBox = new SelectionBox( camera, scene );\r\n    selectionBoxHelper = new SelectionHelper( selectionBox, renderer, 'selectBox' );\r\n    eventSelectionBoxUpdated.selectBox = selectionBox;\r\n\r\n    document.getElementById(\"WebGL-output\").appendChild(renderer.domElement);\r\n    if (Config.ui.showFps) {\r\n      stats = new Stats();\r\n      document.getElementById(\"WebGL-output\").appendChild( stats.dom );\r\n    }\r\n    window.onblur = function() {\r\n      // console.log(\"canvas lose focus\");\r\n      pressingShift = pressingCtrl = pressingAlt = false;\r\n      trackballControls.clearPressing();\r\n    };\r\n\r\n    render();\r\n    function render() {\r\n      trackballControls.update();\r\n      requestAnimationFrame(render);\r\n      if (Config.ui.showFps)\r\n        stats.update();\r\n\r\n      renderer.render( scene, camera);\r\n      if (navPathTool) {\r\n        navPathTool.navigator().animatePathIndicator();\r\n      }\r\n      if (cameraAni) {\r\n        let nextCameraAni = cameraAni.animate();\r\n        if (nextCameraAni == null) {\r\n          if (cameraAni.isFinished() )\r\n            endChangeCameraManually();\r\n        } else {\r\n          cameraAni = nextCameraAni;\r\n        }\r\n      }\r\n      if (pathTrack && pathTrack.attached() ) {\r\n        if (pathTrack.reachEnd() )  {//pathTrack.ended()\r\n          pathTrack.detach();\r\n        } else {\r\n          pathTrack.update();\r\n        }\r\n      }\r\n    }\r\n    function endChangeCameraManually() {\r\n      trackballControls.enabled = true;\r\n      cameraAni = null;\r\n    }\r\n\r\n    polygonTool = PolygonTool(divElement);\r\n    navPathTool = NavPathTool();\r\n    coordTool = CoordCorrelateTool();\r\n    lightTool = LightTool();\r\n    measureTool = MeasureTool();\r\n    markerTool = MarkerTool(renderer.domElement);\r\n    renderer.domElement.addEventListener('mousedown', event => {\r\n      if (pressingCtrl) {\r\n        mousedown4SelectionBox(event);\r\n      } else {\r\n        let used = markerTool.mousedown4Select(event);\r\n        if (!used)\r\n          polygonTool.mousedown4Select(event);\r\n      }\r\n    });\r\n    if (Config.code.autoSaveInterval > 0) {\r\n      setInterval(() => {\r\n        if (History.actionModified) {  //有改动才自动保存\r\n          console.log(\"saveToLoal called\")\r\n          Serializer.saveToLoal(false);\r\n          History.actionModified = false;\r\n        }\r\n      }, Config.code.autoSaveInterval * 1000);\r\n    }\r\n  }\r\n\r\n  function mousedown4SelectionBox(event) {\r\n    selectionBox.startPoint.set(\r\n      ( event.clientX / window.innerWidth ) * 2 - 1,\r\n      - ( event.clientY / window.innerHeight ) * 2 + 1,\r\n      0.5 );\r\n    document.addEventListener('mousemove', mousemove4SelectionBox);\r\n    document.addEventListener('mouseup', mouseup4SelectionBox);\r\n    selectionBoxHelper.setEnabled(true);\r\n  }\r\n  function mousemove4SelectionBox(event) {\r\n    if ( selectionBoxHelper.isDown ) {\r\n      selectionBox.endPoint.set(\r\n        ( event.clientX / window.innerWidth ) * 2 - 1,\r\n        - ( event.clientY / window.innerHeight ) * 2 + 1,\r\n        0.5 );\r\n    }\r\n  }\r\n  function mouseup4SelectionBox(event) {\r\n    selectionBox.endPoint.set(\r\n      ( event.clientX / window.innerWidth ) * 2 - 1,\r\n      - ( event.clientY / window.innerHeight ) * 2 + 1,\r\n      0.5 );\r\n    if (!Layers.navPathTabSelected()) {\r\n      scene.dispatchEvent(eventSelectionBoxUpdated);\r\n    } else {\r\n      Layers.navPathLayer.dispatchEvent(eventSelectionBoxUpdated);\r\n    }\r\n\r\n    document.removeEventListener('mousemove', mousemove4SelectionBox);\r\n    document.removeEventListener('mouseup', mouseup4SelectionBox);\r\n    selectionBoxHelper.setEnabled(false);\r\n  }\r\n\r\n  window.addEventListener( 'resize', function () {\r\n    if (!camera)\r\n      return;\r\n    camera.aspect = window.innerWidth / window.innerHeight;\r\n    camera.updateProjectionMatrix();\r\n\r\n    renderer.setSize( window.innerWidth, window.innerHeight );\r\n    trackballControls.handleResize();\r\n\r\n  }, false );\r\n\r\n  window.addEventListener('keydown', function (event) {\r\n    pressingAlt = event.altKey;\r\n    pressingCtrl = event.ctrlKey;\r\n    pressingShift = event.shiftKey;\r\n  });\r\n  window.addEventListener('keyup', function (event) {\r\n    // console.log('window keyup: ' + event.keyCode, event.altKey, event.ctrlKey, event.shiftKey );\r\n    pressingAlt = false, pressingCtrl = false, pressingShift = false;\r\n  });\r\n\r\n  let _this = this;\r\n  function updateMeshesScale() {\r\n    // console.log(\"building num: \" + Layers.buildingsLayer.children.length);\r\n    // console.log(\"floor num: \" + Layers.floorLayer.children.length);\r\n    let scalar = _this.currentCameraScale();\r\n    measureTool.updateScaleFactor(scalar);\r\n    navPathTool.navigator().updatePathIndicatorScale(scalar);\r\n    if (Layers.navPathTabSelected()) {\r\n      let lineSegments = Layers.navPathLayer.children;\r\n      lineSegments.forEach(it => {\r\n        if (it.holder) {\r\n          it.holder.updateScaleFactor(scalar);\r\n        }\r\n      });\r\n    } else {\r\n      Layers.availableMeshes(true, true).forEach(mesh => {\r\n        if (mesh.holder) {\r\n          mesh.holder.updateScaleFactor(scalar)\r\n        }\r\n      } );\r\n    }\r\n  }\r\n  function cameraRotateByZAxis(event) {\r\n    // console.log('cameraRotateByZAxis, ' + event.value);\r\n    zRotateInTotal += event.value;\r\n    let degreeInTotal = zRotateInTotal * 180 / Math.PI;\r\n    // console.log('cameraRotateByZAxis, degreeInTotal = ' + degreeInTotal);\r\n    eventZRotateChange.value = degreeInTotal;\r\n    scene.dispatchEvent(eventZRotateChange);\r\n  }\r\n  function transToScreenCoord(vector) {\r\n    var screenCoord = {};\r\n    vector.project(camera);\r\n    screenCoord.x = (0.5 + vector.x / 2) * window.innerWidth;\r\n    screenCoord.y = (0.5 - vector.y / 2) * window.innerHeight;\r\n    return screenCoord;\r\n  }\r\n\r\n  this.init = init;\r\n  this.polgyonTool = function () {\r\n    return polygonTool;\r\n  };\r\n  this.markerTool = function () {\r\n    return markerTool;\r\n  };\r\n  this.contextMenuEnabled = function() {\r\n    return polygonTool.getContextMenuEnabled() && markerTool.contextMenuEnabled();\r\n  };\r\n  this.removeAll = function () {\r\n    polygonTool.removeAll();\r\n    navPathTool.removeAll();\r\n    coordTool.clearBinding();\r\n    markerTool.removeAll();\r\n    this.resetUI();\r\n  };\r\n  this.pathTool = function () {\r\n    return navPathTool;\r\n  };\r\n  this.resetCamera = function () {\r\n    zRotateInTotal = 0;\r\n    trackballControls.reset();\r\n  };\r\n  this.resetCameraRotate = function () {\r\n    zRotateInTotal = 0;\r\n    trackballControls.resetRotation();\r\n  };\r\n  this.resetCameraPos = function () {\r\n    trackballControls.resetPos();\r\n  };\r\n  let bacMaterials = [], meshes4Heatmap, heatmapMaterial;\r\n  this.applyHeatmapToSelected = function() {\r\n    meshes4Heatmap = polygonTool.getSelectedMeshes();\r\n    if (meshes4Heatmap.length == 0)\r\n      return;\r\n    if (!heatmapMaterial)\r\n      heatmapMaterial = getRandHeatmapMaterial();\r\n    meshes4Heatmap.forEach(it => {\r\n      updateUvAttribute(it);\r\n      bacMaterials.push(it.material);\r\n      it.material = heatmapMaterial;\r\n    } );\r\n  };\r\n  this.unapplyHeatmapToSelected = function() {\r\n    if (meshes4Heatmap.length == 0)\r\n      return;\r\n    meshes4Heatmap.forEach((it, index) => {\r\n      it.material = bacMaterials[index];\r\n    } );\r\n  };\r\n\r\n  this.showRandomHeatmap = function () {\r\n    let width = 25, height = 25;\r\n    let geometry = new PlaneBufferGeometry(width, height , 1, 1);\r\n    heatmapMaterial = getRandHeatmapMaterial();\r\n    let heatmapPlane = new Mesh(geometry, heatmapMaterial );\r\n    Layers.clearLayer(Layers.referLayer);\r\n    Layers.referLayer.add(heatmapPlane);\r\n  };\r\n  this.clearHeatmap = function () {\r\n    Layers.clearLayer(Layers.referLayer);\r\n  };\r\n  this.setReferImg = function(imgDom, isJpeg) {\r\n    let iw = imgDom.naturalWidth, ih = imgDom.naturalHeight;\r\n    let size = 33;\r\n    let texture = new Texture();\r\n    texture.image = imgDom;\r\n    texture.format = isJpeg ? RGBFormat : RGBAFormat;\r\n    texture.needsUpdate = true;\r\n    let width = size * (iw/ih), height = size;\r\n    let geometry = new PlaneBufferGeometry(width, height , 1, 1);\r\n    let material = new MeshBasicMaterial({transparent: true, opacity: 1, map: texture, side:FrontSide});\r\n    // let material = new MeshBasicMaterial({color: 0x00bb00, wireframe: true, transparent: true, opacity: 1, depthWrite: false});\r\n    let backImgPlane = new Mesh(geometry, material);\r\n    backImgPlane.userData = {w: width, h: height};\r\n    backImgPlane.name = \"refImg\";\r\n    Layers.setReferLayer(backImgPlane);\r\n    scene.dispatchEvent(eventAddRefLayer);\r\n  };\r\n  this.divideRefImg = function (divideStr) {\r\n    let backImgPlane = Layers.referMesh();\r\n    if (!backImgPlane) {\r\n      throw \"拆分底图前，必须先设置背景层图片\";\r\n    }\r\n    let childLst = backImgPlane.children.slice();\r\n    childLst.forEach(child => child.parent.remove(child));\r\n    divideRects = [];\r\n\r\n    let arr = divideStr.split('x');\r\n    let dw = parseInt(arr[0]), dh = parseInt(arr[1]);\r\n    if (dw > 1 || dh > 1) {\r\n      let sw = backImgPlane.userData.w / dw;\r\n      let sh = backImgPlane.userData.h / dh;\r\n      let halfW = backImgPlane.userData.w / 2;\r\n      let halfH = backImgPlane.userData.h / 2;\r\n      let rectOutline = getRectOutline(sw, sh, '#990000');\r\n      for (let i = 0; i < dh; i++) {\r\n        for (let j = 0; j < dw; j++) {\r\n          let rect = rectOutline.clone();\r\n          rect.position.set(sw*(j+0.5) - halfW, sh*(i+0.5) - halfH, 0);\r\n          // rect.userData = {w: sw, h: sh, id: i * dh + j};\r\n          let len = backImgPlane.children.length;\r\n          backImgPlane.add(rect);\r\n          let rectMesh = getRectMesh(sw, sh);\r\n          rectMesh.position.copy(rect.position);\r\n          rectMesh.userData = {w: sw, h: sh, id: len};\r\n          divideRects.push(rectMesh);\r\n        }\r\n      }\r\n      divideRects.forEach(mesh => backImgPlane.add(mesh) );\r\n    }\r\n\r\n    eventDivideRef.value = divideStr;\r\n    scene.dispatchEvent(eventDivideRef);\r\n  };\r\n\r\n  function transparentSort(a, b) {\r\n    let layerA = Layers.getObjLayer(a.object);\r\n    let layerB = Layers.getObjLayer(b.object);\r\n    if ( layerA !== layerB ) {\r\n\r\n      return layerA.renderOrder - layerB.renderOrder;\r\n\r\n    } else if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n      return a.renderOrder - b.renderOrder;\r\n\r\n    } else if ( a.z !== b.z ) {\r\n\r\n      return a.z - b.z;\r\n\r\n    } else {\r\n\r\n      return a.id - b.id;\r\n\r\n    }\r\n  }\r\n\r\n  let ChainedAnimation = function (frames, initialFunc, updateFunc, endFunc) {\r\n    let curFrame = 0;\r\n    this.next = null;\r\n    let cur = this;\r\n    this.append = function () {\r\n      let len = arguments.length - 1;\r\n      for (let i = 0; i < len; i++) {\r\n        arguments[i].next = arguments[i + 1];\r\n      }\r\n      if (arguments.length > 0) {\r\n        let current = cur;\r\n        while(current.next) {\r\n          current = current.next;\r\n        }\r\n        current.next = arguments[0];\r\n      }\r\n    };\r\n    this.animate = () => {\r\n      curFrame++;\r\n      if (curFrame > frames) {\r\n        if (endFunc) {\r\n          endFunc();\r\n        }\r\n        return this.next;\r\n      } else {\r\n        if (curFrame === 1) {\r\n          initialFunc();\r\n        }\r\n        updateFunc();\r\n        return null;\r\n      }\r\n    };\r\n    this.isFinished = () => {\r\n      return curFrame > frames;\r\n    }\r\n\r\n  };\r\n\r\n  function startPanZoomCamera(pos, width, height, index) {\r\n    if (!trackballControls.enabled) {\r\n      return false;\r\n    }\r\n    cameraAni = new ChainedAnimation(panFrames, () => {\r\n      trackballControls.startPanCamera(pos, panFrames);\r\n      trackballControls.enabled = false;\r\n    }, () => {\r\n      trackballControls.panManually();\r\n    } );\r\n\r\n    cameraAni.next = new ChainedAnimation(zoomFrames, () => {\r\n      let p0 = pos.clone(), p1 = pos.clone();\r\n      p0.y -= height/2, p1.y += height/2;\r\n      p0.x -= width/2, p1.x += width/2;\r\n      prepareZoomCamera(p0, p1);\r\n    }, () => {\r\n      trackballControls.zoomManually();\r\n    }, () => {\r\n      if (index != undefined) {\r\n        eventDividedRefSelected.value = index;\r\n        scene.dispatchEvent(eventDividedRefSelected);\r\n      }\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  function startMergeAnimation() {\r\n    let backImgPlane = Layers.referMesh();\r\n    if (!backImgPlane) {\r\n      throw \"合并背景层前，必须先设置背景层图片\";\r\n    }\r\n    if (cameraAni)\r\n      return;\r\n    let origin = new Vector3(0,0,0);\r\n    cameraAni = new ChainedAnimation(panFrames, () => {\r\n      trackballControls.startPanCamera(origin, panFrames);\r\n      trackballControls.enabled = false;\r\n    }, () => {\r\n      trackballControls.panManually();\r\n    } );\r\n\r\n    let zoomAni0 = new ChainedAnimation(zoomFrames, () => {\r\n      let p0 = new Vector3(-gridSize, -gridSize, 0), p1 = new Vector3(gridSize, gridSize, 0);\r\n      prepareZoomCamera(p0, p1);\r\n    }, () => {\r\n      trackballControls.zoomManually();\r\n    });\r\n\r\n    let rotateAni = new ChainedAnimation(60, () => {\r\n      trackballControls.startRotateCamera(Math.PI * 6, 60);\r\n    }, () => {\r\n      trackballControls.rotateManually();\r\n    });\r\n\r\n    let zoomAni1 = new ChainedAnimation(zoomFrames, () => {\r\n      let p0 = new Vector3(-gridSize/2, -gridSize/2, 0), p1 = new Vector3(gridSize/2, gridSize/2, 0);\r\n      prepareZoomCamera(p0, p1);\r\n    }, () => {\r\n      trackballControls.zoomManually();\r\n    }, () => {\r\n      let childLst = Layers.referMesh().children.slice();\r\n      childLst.forEach(child => child.parent.remove(child));\r\n      divideRects = [];\r\n      eventDivideRef.value = \"1x1\";\r\n      scene.dispatchEvent(eventDivideRef);\r\n    });\r\n    cameraAni.append(zoomAni0, rotateAni, zoomAni1);\r\n  }\r\n\r\n  function prepareZoomCamera(p0, p1) {\r\n    let q0 = transToScreenCoord(p0), q1 = transToScreenCoord(p1);\r\n    let height2 = q0.y - q1.y, scaleH = window.innerHeight / height2;\r\n    let width2 = q1.x - q0.x, scaleW = window.innerWidth / width2;\r\n    let scale = scaleW < scaleH ? scaleW : scaleH;\r\n    trackballControls.startZoomCamera(scale, zoomFrames);\r\n  }\r\n\r\n  this.resetUI = function () {\r\n    Layers.initLayers();\r\n    Config.ui.modelTextVisible = true;\r\n    Config.ui.enableEditPointAdhere = true;\r\n    scene.dispatchEvent(eventResetUI);\r\n  }\r\n  this.transToScreenCoord = transToScreenCoord;\r\n  this.getRenderer = function () {\r\n    return renderer;\r\n  }\r\n  this.scene = function () {\r\n    return scene;\r\n  }\r\n  this.getCamera = function () {\r\n    return camera;\r\n  }\r\n  this.currentCameraScale = function() {\r\n    return camera.position.z / initialScale;\r\n  }\r\n  this.currentCameraPhi = function () {\r\n    return 0;\r\n  }\r\n  this.getGpsLocIndicatorPos = function () {\r\n    return new Vector3();\r\n  }\r\n  this.cameraControl = function () {\r\n    return trackballControls;\r\n  }\r\n  this.getDom = function () {\r\n    return renderer.domElement;\r\n  }\r\n  this.biliSegmentWidth = function () {\r\n    let p0 = new Vector3(), p1 = new Vector3(2,0,0);\r\n    let s0 = transToScreenCoord(p0), s1 = transToScreenCoord(p1);\r\n    return s1.x - s0.x\r\n  }\r\n\r\n  this.getIntersectsWith = (function () {\r\n    let tmpVector = new Vector3();\r\n    return function(vector, objects) {\r\n      tmpVector.copy(vector);\r\n      let raycaster = new Raycaster(camera.position, tmpVector.sub(camera.position).normalize());\r\n\r\n      return raycaster.intersectObjects(objects);\r\n    }\r\n  } () );\r\n  this.getIntersects = function (x, y, objects) {\r\n    let screen = trackballControls.screen;\r\n    if (screen.width == 0 || screen.height == 0) {\r\n      return [];\r\n    }\r\n\r\n    let vector = new Vector3(( ( x - screen.left ) / screen.width ) * 2 - 1, -( ( y - screen.top ) / screen.height ) * 2 + 1, 0.5);\r\n    vector = vector.unproject(camera);\r\n\r\n    let raycaster = new Raycaster(camera.position, vector.sub(camera.position).normalize());\r\n    raycaster.camera = camera;\r\n    return raycaster.intersectObjects(objects);\r\n  }\r\n  this.getIntersectsOnPlane = function (x, y) {\r\n    return this.getIntersects(x, y, [planeHelper]);\r\n  }\r\n  this.updateCameraByDivideRects = function (x, y) {\r\n    if (trackballControls.currentScale() > 0.4 || divideRects.length < 2) {\r\n      return false;\r\n    }\r\n    let lst = this.getIntersects(x, y, divideRects);\r\n    console.log(\"updateCameraByDivideRects \" + lst.length);\r\n    if (lst.length == 0) {\r\n      return false;\r\n    }\r\n    let rect = lst[0].object;\r\n    startPanZoomCamera(rect.position.clone().applyMatrix4(rect.parent.matrix),\r\n        rect.userData.w * rect.parent.scale.x,\r\n        rect.userData.h * rect.parent.scale.y, divideRects.indexOf(rect) );\r\n    return true;\r\n  }\r\n  this.onNavPathTabSelected = function() {\r\n    if (editingIn3D)\r\n      return;\r\n    polygonTool.onNavPathTabSelected();\r\n    Layers.onNavPathTabSelected();\r\n    updateMeshesScale();\r\n  }\r\n  this.onNavPathTabUnselected = function () {\r\n    if (editingIn3D)\r\n      return;\r\n    Layers.onNavPathTabUnselected();\r\n    navPathTool.prepareToFree();\r\n  }\r\n  this.onSettingsTabSelected = function() {\r\n    if (!editingIn3D)\r\n      coordTool.show();\r\n  }\r\n  this.onSettingsTabUnelected = function() {\r\n    coordTool.hide();\r\n  }\r\n  this.coordTool = function() {\r\n    return coordTool;\r\n  }\r\n  this.initCoordBinding = function (objFromJson) {\r\n    coordTool.deserialize(objFromJson);\r\n    // Layers.applyRotationFromCoordBinding(coordTool.rotation())\r\n  }\r\n\r\n  this.mapScale = function() {//地图比例尺\r\n    return coordTool.getScale() || 1;\r\n  }\r\n  this.moveCameraToDivideIndex = function (index) {\r\n    let rect = divideRects[index];\r\n    return startPanZoomCamera(rect.position.clone().applyMatrix4(rect.parent.matrix),\r\n        rect.userData.w * rect.parent.scale.x,\r\n        rect.userData.h * rect.parent.scale.y);\r\n  }\r\n  this.toggleModelsNames = function () {\r\n    Layers.availableMeshes(true, true).forEach(it => it.holder.setTextVisibility(Config.ui.modelTextVisible) );\r\n  }\r\n  this.showRandomTrack = function () {\r\n    if (pathTrack && pathTrack.attached() )\r\n      return;\r\n    let positions = navPathTool.navigator().getRandomTrack(true, 10, 0.3);\r\n    if (positions.length == 0)\r\n      return;\r\n    pathTrack = new PathTrack(Layers.editingLayer, positions, 40);\r\n    pathTrack.attach();\r\n  }\r\n  this.setClearColor = function (color, opacity) {\r\n    renderer.setClearColor( color, opacity );\r\n  }\r\n  this.getClearColor = function () {\r\n    let str = renderer.getClearColor().getHexString() + \" \" + renderer.getClearAlpha();\r\n    // console.log(\"clear color: \" + str);\r\n    return str;\r\n  }\r\n  this.toggle3dEditing = function (val) {\r\n    lightTool.toggle3dEditing(val);\r\n    editingIn3D = val;\r\n    polygonTool.set3D(val);\r\n  }\r\n  this.isEditingIn3D = function() {\r\n    return editingIn3D;\r\n  }\r\n  this.lightTool = function () {\r\n    return lightTool;\r\n  }\r\n  this.measureTool = function () {\r\n    return measureTool;\r\n  }\r\n  this.changeGlobalMaterial = function (materialType) {\r\n    let allMeshes = Layers.availableMeshes(true);\r\n    allMeshes.forEach(mesh => mesh.holder.change3dMaterial(materialType) );\r\n  };\r\n\r\n  this.updateMeshesScale = updateMeshesScale;\r\n  this.startMergeAnimation = startMergeAnimation;\r\n  this.pressingCtrl = function () {\r\n    return pressingCtrl;\r\n  }\r\n  this.pressingShift = function () {\r\n    return pressingShift;\r\n  }\r\n  this.pressingAlt = function () {\r\n    return pressingAlt;\r\n  }\r\n  //根据名称搜索 元素和标注\r\n  this.search = function (keyword) {\r\n    let target = [];\r\n    let meshes = Layers.availableMeshes(true);\r\n    let markers = Layers.availableMarkers(true);\r\n    meshes.forEach(mesh => {\r\n      let addressName = mesh.holder.getName();\r\n      if (LCS(keyword, addressName) == keyword.length) {\r\n        target.push({name: addressName, id: mesh.uuid, isMesh:true, type:\"元素\" });\r\n      }\r\n    });\r\n    markers.forEach(mark => {\r\n      let name = mark.holder.text();\r\n      if (LCS(keyword, name) == keyword.length) {\r\n        target.push({name: name, id: mark.uuid, isMark:true, type:\"标注\" });\r\n      }\r\n    })\r\n    return target;\r\n  }\r\n  this.setSelectByUuid = function (uuid) {\r\n    let meshes = Layers.availableMeshes(true);\r\n    let list = meshes.filter(mesh => mesh.uuid === uuid);\r\n    if (list.length > 0) {\r\n      polygonTool.setSelection(list[0]);\r\n      return;\r\n    }\r\n    let markers = Layers.availableMarkers(true);\r\n    list = markers.filter(marker => marker.uuid === uuid);\r\n    if (list.length > 0) {\r\n      markerTool.setSelection(list[0]);\r\n    }\r\n  }\r\n};\r\nlet main3d = new MainScene();\r\nexport default main3d;\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTopBar.vue?vue&type=style&index=0&id=74840708&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuideBox.vue?vue&type=style&index=0&id=47085c1a&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SquareButton.vue?vue&type=style&index=0&id=07b07470&scoped=true&lang=css&\"","import {Vector3, Line3} from \"three\"\r\nimport * as Consts from \"../consts/Constants\"\r\n\r\nlet PathEdge = function () {\r\n  this.from = null;// = new PathPoint();\r\n  this.to = null;\r\n  this.pathType = Consts.pathTypeBold;\r\n  this.pathDirection = Consts.pathDirBoth;\r\n  this.cost = 0;\r\n  let line3;\r\n  let tmp = new Vector3();\r\n\r\n  this.setFromPathSegment = function (segment, rings, pathPoints) {\r\n    let fromIndex = rings.indexOf(segment.fromCircle());\r\n    let toIndex = rings.indexOf(segment.toCircle());\r\n    this.from = pathPoints[fromIndex];\r\n    this.to = pathPoints[toIndex];\r\n    line3 = new Line3(this.from.pos, this.to.pos);\r\n    this.cost = segment.getCost();\r\n    this.pathType = segment.getPathType();\r\n    this.pathDirection = segment.getPathDirection();\r\n    return this;\r\n  };\r\n\r\n  this.initFromSerilization = function (obj, pathPoints) {\r\n    this.from = pathPoints[obj.from];\r\n    this.to = pathPoints[obj.to];\r\n    line3 = new Line3(this.from.pos, this.to.pos);\r\n    if (obj.cost == undefined) {\r\n      this.cost = this.from.pos.distanceTo(this.to.pos);\r\n    } else {\r\n      this.cost = obj.cost;\r\n    }\r\n    this.pathType = obj.pathType;\r\n    this.pathDirection = obj.pathDirection;\r\n    return this;\r\n  };\r\n\r\n  this.getClosestPointOnEdge = function (point) {\r\n    let t = line3.closestPointToPointParameter(point, false);\r\n    if (t > 1 || t < 0) {\r\n      return null;\r\n    }\r\n    line3.closestPointToPoint(point, false, tmp);\r\n    return tmp;\r\n  }\r\n};\r\n\r\nexport default PathEdge;\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=182495ac&scoped=true&lang=css&\"","import {Vector3} from \"three\"\r\n\r\nlet PathPoint = function (vector3) {\r\n  this.pos = new Vector3().copy(vector3);\r\n  this.dstNum = 0; //入度，有几条边可以到达 此点\r\n  this.nearPlaces = []; //array of {to: edge.to (PathPoint type), cost: 12.23} 出度: nearPlaces长度为有几条边从这里出发\r\n  this.toPlaces = null; //array of {points: [array of PathPoint ], cost: 12.23}\r\n  this.onFloor = true;\r\n  this.abstract = false;\r\n};\r\n\r\nexport default PathPoint;\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./collapse-item.vue?vue&type=style&index=0&id=77c4d461&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImgButton.vue?vue&type=style&index=0&id=4516ac28&scoped=true&lang=css&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=2c13fb0c&scoped=true&lang=css&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dropdown-item.vue?vue&type=style&index=0&id=409dd98a&scoped=true&lang=css&\"","var Earcut = {\r\n\r\n\ttriangulate: function ( data, holeIndices, dim ) {\r\n\r\n\t\tdim = dim || 2;\r\n\r\n\t\tvar hasHoles = holeIndices && holeIndices.length,\r\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\r\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\r\n\t\t\ttriangles = [];\r\n\r\n\t\tif ( ! outerNode ) return triangles;\r\n\r\n\t\tvar minX, minY, maxX, maxY, x, y, invSize;\r\n\r\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\r\n\r\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\r\n\r\n\t\tif ( data.length > 80 * dim ) {\r\n\r\n\t\t\tminX = maxX = data[ 0 ];\r\n\t\t\tminY = maxY = data[ 1 ];\r\n\r\n\t\t\tfor ( var i = dim; i < outerLen; i += dim ) {\r\n\r\n\t\t\t\tx = data[ i ];\r\n\t\t\t\ty = data[ i + 1 ];\r\n\t\t\t\tif ( x < minX ) minX = x;\r\n\t\t\t\tif ( y < minY ) minY = y;\r\n\t\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\t\tif ( y > maxY ) maxY = y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\r\n\r\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\r\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\r\n\r\n\t\t}\r\n\r\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\r\n\r\n\t\treturn triangles;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// create a circular doubly linked list from polygon points in the specified winding order\r\n\r\nfunction linkedList( data, start, end, dim, clockwise ) {\r\n\r\n\tvar i, last;\r\n\r\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\r\n\r\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t}\r\n\r\n\tif ( last && equals( last, last.next ) ) {\r\n\r\n\t\tremoveNode( last );\r\n\t\tlast = last.next;\r\n\r\n\t}\r\n\r\n\treturn last;\r\n\r\n}\r\n\r\n// eliminate colinear or duplicate points\r\n\r\nfunction filterPoints( start, end ) {\r\n\r\n\tif ( ! start ) return start;\r\n\tif ( ! end ) end = start;\r\n\r\n\tvar p = start, again;\r\n\r\n\tdo {\r\n\r\n\t\tagain = false;\r\n\r\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\r\n\r\n\t\t\tremoveNode( p );\r\n\t\t\tp = end = p.prev;\r\n\t\t\tif ( p === p.next ) break;\r\n\t\t\tagain = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tp = p.next;\r\n\r\n\t\t}\r\n\r\n\t} while ( again || p !== end );\r\n\r\n\treturn end;\r\n\r\n}\r\n\r\n// main ear slicing loop which triangulates a polygon (given as a linked list)\r\n\r\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\r\n\r\n\tif ( ! ear ) return;\r\n\r\n\t// interlink polygon nodes in z-order\r\n\r\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\r\n\r\n\tvar stop = ear, prev, next;\r\n\r\n\t// iterate through ears, slicing them one by one\r\n\r\n\twhile ( ear.prev !== ear.next ) {\r\n\r\n\t\tprev = ear.prev;\r\n\t\tnext = ear.next;\r\n\r\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\r\n\r\n\t\t\t// cut off the triangle\r\n\t\t\ttriangles.push( prev.i / dim );\r\n\t\t\ttriangles.push( ear.i / dim );\r\n\t\t\ttriangles.push( next.i / dim );\r\n\r\n\t\t\tremoveNode( ear );\r\n\r\n\t\t\t// skipping the next vertice leads to less sliver triangles\r\n\t\t\tear = next.next;\r\n\t\t\tstop = next.next;\r\n\r\n\t\t\tcontinue;\r\n\r\n\t\t}\r\n\r\n\t\tear = next;\r\n\r\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\r\n\r\n\t\tif ( ear === stop ) {\r\n\r\n\t\t\t// try filtering points and slicing again\r\n\r\n\t\t\tif ( ! pass ) {\r\n\r\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\r\n\r\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\r\n\r\n\t\t\t} else if ( pass === 1 ) {\r\n\r\n\t\t\t\tear = cureLocalIntersections( ear, triangles, dim );\r\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\r\n\r\n\t\t\t// as a last resort, try splitting the remaining polygon into two\r\n\r\n\t\t\t} else if ( pass === 2 ) {\r\n\r\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// check whether a polygon node forms a valid ear with adjacent nodes\r\n\r\nfunction isEar( ear ) {\r\n\r\n\tvar a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// now make sure we don't have other points inside the potential ear\r\n\tvar p = ear.next.next;\r\n\r\n\twhile ( p !== ear.prev ) {\r\n\r\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction isEarHashed( ear, minX, minY, invSize ) {\r\n\r\n\tvar a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// triangle bbox; min & max are calculated like this for speed\r\n\r\n\tvar minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\r\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\r\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\r\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\r\n\r\n\t// z-order range for the current triangle bbox;\r\n\r\n\tvar minZ = zOrder( minTX, minTY, minX, minY, invSize ),\r\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\r\n\r\n\t// first look for points inside the triangle in increasing z-order\r\n\r\n\tvar p = ear.nextZ;\r\n\r\n\twhile ( p && p.z <= maxZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.nextZ;\r\n\r\n\t}\r\n\r\n\t// then look for points in decreasing z-order\r\n\r\n\tp = ear.prevZ;\r\n\r\n\twhile ( p && p.z >= minZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\r\n\t\tp = p.prevZ;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\n// go through all polygon nodes and cure small local self-intersections\r\n\r\nfunction cureLocalIntersections( start, triangles, dim ) {\r\n\r\n\tvar p = start;\r\n\r\n\tdo {\r\n\r\n\t\tvar a = p.prev, b = p.next.next;\r\n\r\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\r\n\r\n\t\t\ttriangles.push( a.i / dim );\r\n\t\t\ttriangles.push( p.i / dim );\r\n\t\t\ttriangles.push( b.i / dim );\r\n\r\n\t\t\t// remove two nodes involved\r\n\r\n\t\t\tremoveNode( p );\r\n\t\t\tremoveNode( p.next );\r\n\r\n\t\t\tp = start = b;\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn p;\r\n\r\n}\r\n\r\n// try splitting polygon into two and triangulate them independently\r\n\r\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\r\n\r\n\t// look for a valid diagonal that divides the polygon into two\r\n\r\n\tvar a = start;\r\n\r\n\tdo {\r\n\r\n\t\tvar b = a.next.next;\r\n\r\n\t\twhile ( b !== a.prev ) {\r\n\r\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\r\n\r\n\t\t\t\t// split the polygon in two by the diagonal\r\n\r\n\t\t\t\tvar c = splitPolygon( a, b );\r\n\r\n\t\t\t\t// filter colinear points around the cuts\r\n\r\n\t\t\t\ta = filterPoints( a, a.next );\r\n\t\t\t\tc = filterPoints( c, c.next );\r\n\r\n\t\t\t\t// run earcut on each half\r\n\r\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\r\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tb = b.next;\r\n\r\n\t\t}\r\n\r\n\t\ta = a.next;\r\n\r\n\t} while ( a !== start );\r\n\r\n}\r\n\r\n// link every hole into the outer loop, producing a single-ring polygon without holes\r\n\r\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\r\n\r\n\tvar queue = [], i, len, start, end, list;\r\n\r\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\r\n\r\n\t\tstart = holeIndices[ i ] * dim;\r\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\r\n\t\tlist = linkedList( data, start, end, dim, false );\r\n\t\tif ( list === list.next ) list.steiner = true;\r\n\t\tqueue.push( getLeftmost( list ) );\r\n\r\n\t}\r\n\r\n\tqueue.sort( compareX );\r\n\r\n\t// process holes from left to right\r\n\r\n\tfor ( i = 0; i < queue.length; i ++ ) {\r\n\r\n\t\teliminateHole( queue[ i ], outerNode );\r\n\t\touterNode = filterPoints( outerNode, outerNode.next );\r\n\r\n\t}\r\n\r\n\treturn outerNode;\r\n\r\n}\r\n\r\nfunction compareX( a, b ) {\r\n\r\n\treturn a.x - b.x;\r\n\r\n}\r\n\r\n// find a bridge between vertices that connects hole with an outer ring and and link it\r\n\r\nfunction eliminateHole( hole, outerNode ) {\r\n\r\n\touterNode = findHoleBridge( hole, outerNode );\r\n\r\n\tif ( outerNode ) {\r\n\r\n\t\tvar b = splitPolygon( outerNode, hole );\r\n\r\n\t\tfilterPoints( b, b.next );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\r\n\r\nfunction findHoleBridge( hole, outerNode ) {\r\n\r\n\tvar p = outerNode,\r\n\t\thx = hole.x,\r\n\t\thy = hole.y,\r\n\t\tqx = - Infinity,\r\n\t\tm;\r\n\r\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\r\n\t// segment's endpoint with lesser x will be potential connection point\r\n\r\n\tdo {\r\n\r\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\r\n\r\n\t\t\tvar x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\r\n\r\n\t\t\tif ( x <= hx && x > qx ) {\r\n\r\n\t\t\t\tqx = x;\r\n\r\n\t\t\t\tif ( x === hx ) {\r\n\r\n\t\t\t\t\tif ( hy === p.y ) return p;\r\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== outerNode );\r\n\r\n\tif ( ! m ) return null;\r\n\r\n\tif ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\r\n\r\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\r\n\t// if there are no points found, we have a valid connection;\r\n\t// otherwise choose the point of the minimum angle with the ray as connection point\r\n\r\n\tvar stop = m,\r\n\t\tmx = m.x,\r\n\t\tmy = m.y,\r\n\t\ttanMin = Infinity,\r\n\t\ttan;\r\n\r\n\tp = m.next;\r\n\r\n\twhile ( p !== stop ) {\r\n\r\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\r\n\t\t\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\r\n\r\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\r\n\r\n\t\t\tif ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\r\n\r\n\t\t\t\tm = p;\r\n\t\t\t\ttanMin = tan;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t}\r\n\r\n\treturn m;\r\n\r\n}\r\n\r\n// interlink polygon nodes in z-order\r\n\r\nfunction indexCurve( start, minX, minY, invSize ) {\r\n\r\n\tvar p = start;\r\n\r\n\tdo {\r\n\r\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\r\n\t\tp.prevZ = p.prev;\r\n\t\tp.nextZ = p.next;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\tp.prevZ.nextZ = null;\r\n\tp.prevZ = null;\r\n\r\n\tsortLinked( p );\r\n\r\n}\r\n\r\n// Simon Tatham's linked list merge sort algorithm\r\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\r\n\r\nfunction sortLinked( list ) {\r\n\r\n\tvar i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;\r\n\r\n\tdo {\r\n\r\n\t\tp = list;\r\n\t\tlist = null;\r\n\t\ttail = null;\r\n\t\tnumMerges = 0;\r\n\r\n\t\twhile ( p ) {\r\n\r\n\t\t\tnumMerges ++;\r\n\t\t\tq = p;\r\n\t\t\tpSize = 0;\r\n\r\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\r\n\r\n\t\t\t\tpSize ++;\r\n\t\t\t\tq = q.nextZ;\r\n\t\t\t\tif ( ! q ) break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tqSize = inSize;\r\n\r\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\r\n\r\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\r\n\r\n\t\t\t\t\te = p;\r\n\t\t\t\t\tp = p.nextZ;\r\n\t\t\t\t\tpSize --;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\te = q;\r\n\t\t\t\t\tq = q.nextZ;\r\n\t\t\t\t\tqSize --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( tail ) tail.nextZ = e;\r\n\t\t\t\telse list = e;\r\n\r\n\t\t\t\te.prevZ = tail;\r\n\t\t\t\ttail = e;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp = q;\r\n\r\n\t\t}\r\n\r\n\t\ttail.nextZ = null;\r\n\t\tinSize *= 2;\r\n\r\n\t} while ( numMerges > 1 );\r\n\r\n\treturn list;\r\n\r\n}\r\n\r\n// z-order of a point given coords and inverse of the longer side of data bbox\r\n\r\nfunction zOrder( x, y, minX, minY, invSize ) {\r\n\r\n\t// coords are transformed into non-negative 15-bit integer range\r\n\r\n\tx = 32767 * ( x - minX ) * invSize;\r\n\ty = 32767 * ( y - minY ) * invSize;\r\n\r\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\r\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\r\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\r\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\r\n\r\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\r\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\r\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\r\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\r\n\r\n\treturn x | ( y << 1 );\r\n\r\n}\r\n\r\n// find the leftmost node of a polygon ring\r\n\r\nfunction getLeftmost( start ) {\r\n\r\n\tvar p = start, leftmost = start;\r\n\r\n\tdo {\r\n\r\n\t\tif ( p.x < leftmost.x ) leftmost = p;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn leftmost;\r\n\r\n}\r\n\r\n// check if a point lies within a convex triangle\r\n\r\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\r\n\r\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\r\n\t ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\r\n\t ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\r\n\r\n}\r\n\r\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\r\n\r\nfunction isValidDiagonal( a, b ) {\r\n\r\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\r\n\t\tlocallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\r\n\r\n}\r\n\r\n// signed area of a triangle\r\n\r\nfunction area( p, q, r ) {\r\n\r\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\r\n\r\n}\r\n\r\n// check if two points are equal\r\n\r\nfunction equals( p1, p2 ) {\r\n\r\n\treturn p1.x === p2.x && p1.y === p2.y;\r\n\r\n}\r\n\r\n// check if two segments intersect\r\n\r\nfunction intersects( p1, q1, p2, q2 ) {\r\n\r\n\tif ( ( equals( p1, q1 ) && equals( p2, q2 ) ) ||\r\n\t\t\t( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\r\n\r\n\treturn area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\r\n\t\t\t\t area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\r\n\r\n}\r\n\r\n// check if a polygon diagonal intersects any polygon segments\r\n\r\nfunction intersectsPolygon( a, b ) {\r\n\r\n\tvar p = a;\r\n\r\n\tdo {\r\n\r\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\r\n\t\t\t\t\t\tintersects( p, p.next, a, b ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n// check if a polygon diagonal is locally inside the polygon\r\n\r\nfunction locallyInside( a, b ) {\r\n\r\n\treturn area( a.prev, a, a.next ) < 0 ?\r\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\r\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\r\n\r\n}\r\n\r\n// check if the middle point of a polygon diagonal is inside the polygon\r\n\r\nfunction middleInside( a, b ) {\r\n\r\n\tvar p = a,\r\n\t\tinside = false,\r\n\t\tpx = ( a.x + b.x ) / 2,\r\n\t\tpy = ( a.y + b.y ) / 2;\r\n\r\n\tdo {\r\n\r\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\r\n\t\t\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) ) {\r\n\r\n\t\t\tinside = ! inside;\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn inside;\r\n\r\n}\r\n\r\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\r\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\r\n\r\nfunction splitPolygon( a, b ) {\r\n\r\n\tvar a2 = new Node( a.i, a.x, a.y ),\r\n\t\tb2 = new Node( b.i, b.x, b.y ),\r\n\t\tan = a.next,\r\n\t\tbp = b.prev;\r\n\r\n\ta.next = b;\r\n\tb.prev = a;\r\n\r\n\ta2.next = an;\r\n\tan.prev = a2;\r\n\r\n\tb2.next = a2;\r\n\ta2.prev = b2;\r\n\r\n\tbp.next = b2;\r\n\tb2.prev = bp;\r\n\r\n\treturn b2;\r\n\r\n}\r\n\r\n// create a node and optionally link it with previous one (in a circular doubly linked list)\r\n\r\nfunction insertNode( i, x, y, last ) {\r\n\r\n\tvar p = new Node( i, x, y );\r\n\r\n\tif ( ! last ) {\r\n\r\n\t\tp.prev = p;\r\n\t\tp.next = p;\r\n\r\n\t} else {\r\n\r\n\t\tp.next = last.next;\r\n\t\tp.prev = last;\r\n\t\tlast.next.prev = p;\r\n\t\tlast.next = p;\r\n\r\n\t}\r\n\r\n\treturn p;\r\n\r\n}\r\n\r\nfunction removeNode( p ) {\r\n\r\n\tp.next.prev = p.prev;\r\n\tp.prev.next = p.next;\r\n\r\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\r\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\r\n\r\n}\r\n\r\nfunction Node( i, x, y ) {\r\n\r\n\t// vertice index in coordinates array\r\n\tthis.i = i;\r\n\r\n\t// vertex coordinates\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\r\n\t// previous and next vertice nodes in a polygon ring\r\n\tthis.prev = null;\r\n\tthis.next = null;\r\n\r\n\t// z-order curve value\r\n\tthis.z = null;\r\n\r\n\t// previous and next nodes in z-order\r\n\tthis.prevZ = null;\r\n\tthis.nextZ = null;\r\n\r\n\t// indicates whether this is a steiner point\r\n\tthis.steiner = false;\r\n\r\n}\r\n\r\nfunction signedArea( data, start, end, dim ) {\r\n\r\n\tvar sum = 0;\r\n\r\n\tfor ( var i = start, j = end - dim; i < end; i += dim ) {\r\n\r\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\r\n\t\tj = i;\r\n\r\n\t}\r\n\r\n\treturn sum;\r\n\r\n}\r\n\r\nexport default Earcut;\r\n","'use strict';\r\n\r\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\r\n\r\nvar Vue = _interopDefault(require('vue'));\r\n\r\nvar OVERFLOW_PROPERTYS = ['overflow', 'overflow-x', 'overflow-y'];\r\n\r\nvar SCROLL_TYPES = ['scroll', 'auto'];\r\n\r\n// 根元素\r\nvar ROOT = document.body;\r\n\r\n// 竖直方向\r\nvar VERTICAL = ['top', 'bottom'];\r\n// 水平方向\r\nvar HORIZONTAL = ['left', 'right'];\r\n\r\n// 默认限制显示方向如下，显示优先级按顺序以此递减\r\nvar DEFAULT_PLACEMENT_QUEUE = ['top', 'right', 'bottom', 'left'];\r\n\r\n// 最大值\r\nvar MAX = 4;\r\n\r\n// 获取目标元素相对于参考容器的位置信息\r\nfunction getBoxMargin(el, parent) {\r\n  if (!el) return;\r\n  var eBox = el.getBoundingClientRect();\r\n  var pBox = parent.getBoundingClientRect();\r\n\r\n  var vw = pBox.width,\r\n      vh = pBox.height;\r\n  var width = eBox.width,\r\n      height = eBox.height;\r\n\r\n\r\n  var top = eBox.top - pBox.top;\r\n  var left = eBox.left - pBox.left;\r\n  var right = eBox.right - pBox.left;\r\n  var bottom = eBox.bottom - pBox.top;\r\n\r\n  var midX = left + width / 2;\r\n  var midY = top + height / 2;\r\n\r\n  // 目标的顶点坐标 [top-left, top-right, bottom-right, botton-left]\r\n  var vertex = {\r\n    tl: { x: left, y: top },\r\n    tr: { x: right, y: top },\r\n    br: { x: right, y: bottom },\r\n    bl: { x: left, y: bottom }\r\n  };\r\n\r\n  return {\r\n    width: width,\r\n    height: height,\r\n    margin: {\r\n      top: {\r\n        placement: 'top',\r\n        size: top,\r\n        start: vertex.tl,\r\n        mid: { x: midX, y: top },\r\n        end: vertex.tr\r\n      },\r\n      bottom: {\r\n        placement: 'bottom',\r\n        size: vh - bottom,\r\n        start: vertex.bl,\r\n        mid: { x: midX, y: bottom },\r\n        end: vertex.br\r\n      },\r\n      left: {\r\n        placement: 'left',\r\n        size: left,\r\n        start: vertex.tl,\r\n        mid: { x: left, y: midY },\r\n        end: vertex.bl\r\n      },\r\n      right: {\r\n        placement: 'right',\r\n        size: vw - right,\r\n        start: vertex.tr,\r\n        mid: { x: right, y: midY },\r\n        end: vertex.br\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\n// 获取最优展示方向，weight 越大对应方向的优先级越高\r\nfunction getBestPlacement(queue) {\r\n  return queue.sort(function (a, b) {\r\n    return b.weight - a.weight;\r\n  })[0];\r\n}\r\n\r\n// 是否是个可滚动的元素\r\nfunction checkScrollable(element) {\r\n  var css = window.getComputedStyle(element, null);\r\n  return OVERFLOW_PROPERTYS.some(function (property) {\r\n    return ~SCROLL_TYPES.indexOf(css[property]);\r\n  });\r\n}\r\n\r\n// 获取参考元素第一个可滚动的元素\r\nfunction getScrollContainer(el) {\r\n  if (!el) return ROOT;\r\n  var parent = el.parentNode;\r\n  while (parent && parent !== ROOT) {\r\n    if (checkScrollable(parent)) {\r\n      return parent;\r\n    }\r\n    parent = parent.parentNode;\r\n  }\r\n  return ROOT;\r\n}\r\n\r\n// 基于参考元素的某一侧的中点来计算目标元素的坐标\r\nfunction computeCoordinateBaseMid(placementInfo, offset) {\r\n  var placement = placementInfo.placement,\r\n      mid = placementInfo.mid,\r\n      tw = placementInfo.tw,\r\n      th = placementInfo.th;\r\n\r\n  switch (placement) {\r\n    case 'top':\r\n      return {\r\n        placement: 'top-mid',\r\n        x: mid.x - tw / 2,\r\n        y: mid.y - th - offset\r\n      };\r\n    case 'bottom':\r\n      return {\r\n        placement: 'bottom-mid',\r\n        x: mid.x - tw / 2,\r\n        y: mid.y + offset\r\n      };\r\n    case 'left':\r\n      return {\r\n        placement: 'left-mid',\r\n        x: mid.x - tw - offset,\r\n        y: mid.y - th / 2\r\n      };\r\n    case 'right':\r\n      return {\r\n        placement: 'right-mid',\r\n        x: mid.x + offset,\r\n        y: mid.y - th / 2\r\n      };\r\n  }\r\n}\r\n\r\n// 基于参考元素某一侧的边界来计算目标元素位置\r\nfunction computeCoordinateBaseEdge(placementInfo, offset) {\r\n  var placement = placementInfo.placement,\r\n      start = placementInfo.start,\r\n      end = placementInfo.end,\r\n      dHor = placementInfo.dHor,\r\n      dVer = placementInfo.dVer,\r\n      tw = placementInfo.tw,\r\n      th = placementInfo.th,\r\n      ew = placementInfo.ew,\r\n      eh = placementInfo.eh;\r\n\r\n  var nearRight = dHor > 0;\r\n  var nearBottom = dVer > 0;\r\n  switch (placement) {\r\n    case 'top':\r\n      return {\r\n        placement: nearRight ? 'top-end' : 'top-start',\r\n        x: nearRight ? end.x - tw : start.x,\r\n        y: start.y - th - offset,\r\n        arrowsOffset: ew / 2\r\n      };\r\n    case 'bottom':\r\n      return {\r\n        placement: nearRight ? 'bottom-end' : 'bottom-start',\r\n        x: nearRight ? end.x - tw : start.x,\r\n        y: end.y + offset,\r\n        arrowsOffset: ew / 2\r\n      };\r\n    case 'left':\r\n      return {\r\n        placement: nearBottom ? 'left-end' : 'left-start',\r\n        x: start.x - tw - offset,\r\n        y: nearBottom ? end.y - th : start.y,\r\n        arrowsOffset: eh / 2\r\n      };\r\n    case 'right':\r\n      return {\r\n        placement: nearBottom ? 'right-end' : 'right-start',\r\n        x: end.x + offset,\r\n        y: nearBottom ? end.y - th : start.y,\r\n        arrowsOffset: eh / 2\r\n      };\r\n  }\r\n}\r\n\r\n// ref 参考元素，container 容器， target 需要动态计算坐标的元素，limitQueue 限制展示方向\r\nfunction computePlacementInfo(ref, container, target, limitQueue, offset) {\r\n  if (!ref || !target) return;\r\n  var placementQueue = limitQueue && limitQueue.length ? limitQueue : DEFAULT_PLACEMENT_QUEUE;\r\n\r\n  var _getBoxMargin = getBoxMargin(ref, container),\r\n      ew = _getBoxMargin.width,\r\n      eh = _getBoxMargin.height,\r\n      margin = _getBoxMargin.margin;\r\n\r\n  var _target$getBoundingCl = target.getBoundingClientRect(),\r\n      tw = _target$getBoundingCl.width,\r\n      th = _target$getBoundingCl.height;\r\n\r\n  var dw = (tw - ew) / 2;\r\n  var dh = (th - eh) / 2;\r\n\r\n  var queueLen = placementQueue.length;\r\n  var processedQueue = Object.keys(margin).map(function (key) {\r\n    var placementItem = margin[key];\r\n    // 这里 index 可以用来标记显示方向的优先级 index 越大，优先级越高\r\n    var index = placementQueue.indexOf(placementItem.placement);\r\n    placementItem.weight = index > -1 ? MAX - index : MAX - queueLen;\r\n\r\n    // 上下方向上可容纳目标元素\r\n    var verSingleBiasCheck = ~VERTICAL.indexOf(placementItem.placement) && placementItem.size > th + offset;\r\n    // 上下方向上可容纳目标元素 && 目标元素上下显示时左右也可完整显示目标元素\r\n    var verFullBiasCheck = verSingleBiasCheck && margin.left.size > dw && margin.right.size > dw;\r\n    // 左右方向上可容纳目标元素\r\n    var horSingleBiasCheck = HORIZONTAL.indexOf(placementItem.placement) > -1 && placementItem.size > tw + offset;\r\n    // 左右方向上可容纳目标元素 && 显示时上下也可完整显示目标元素\r\n    var horFullBiasCheck = horSingleBiasCheck && margin.top.size > dh && margin.bottom.size > dh;\r\n    // 竖直方向上的 top 与 bottom 的间距差值\r\n    placementItem.dVer = margin.top.size - margin.bottom.size;\r\n    // 水平方向上的 left 与 right 的间距差值\r\n    placementItem.dHor = margin.left.size - margin.right.size;\r\n    placementItem.mod = 'edge';\r\n\r\n    if (verFullBiasCheck || horFullBiasCheck) {\r\n      placementItem.mod = 'mid';\r\n      placementItem.weight += 3 + placementItem.weight / MAX;\r\n      return placementItem;\r\n    }\r\n    if (verSingleBiasCheck || horSingleBiasCheck) {\r\n      placementItem.weight += 2 + placementItem.weight / MAX;\r\n    }\r\n    return placementItem;\r\n  });\r\n  return Object.assign({ ew: ew, eh: eh, tw: tw, th: th, dw: dw, dh: dh }, getBestPlacement(processedQueue));\r\n}\r\n\r\n// 用于计算小三角形在 tip 窗口中的位置\r\nfunction computeArrowPos(placement, offset, size) {\r\n  var start = offset + 'px';\r\n  var end = offset - size * 2 + 'px';\r\n  var posMap = {\r\n    'top-start': { top: '100%', left: start },\r\n    'top-mid': { top: '100%', left: '50%' },\r\n    'top-end': { top: '100%', right: end },\r\n\r\n    'bottom-start': { top: '0', left: start },\r\n    'bottom-mid': { top: '0', left: '50%' },\r\n    'bottom-end': { top: '0', right: end },\r\n\r\n    'left-start': { top: start, left: '100%' },\r\n    'left-mid': { top: '50%', left: '100%' },\r\n    'left-end': { bottom: end, left: '100%' },\r\n\r\n    'right-start': { top: start, left: '0' },\r\n    'right-mid': { top: '50%', left: '0' },\r\n    'right-end': { bottom: end, left: '0' }\r\n  };\r\n  return posMap[placement];\r\n}\r\n\r\nfunction debounce(fn, delay) {\r\n  var timer = void 0;\r\n  return function () {\r\n    var context = this;\r\n    var args = arguments;\r\n    clearTimeout(timer);\r\n    timer = setTimeout(function () {\r\n      fn.apply(context, args);\r\n    }, delay);\r\n  };\r\n}\r\n\r\n// passive support check\r\nvar supportsPassive = false;\r\ndocument.addEventListener('passive-check', function () {}, {\r\n  get passive() {\r\n    supportsPassive = { passive: true };\r\n  }\r\n});\r\n\r\nvar main = {\r\n  render: function render() {\r\n    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c('transition', { attrs: { \"name\": \"v-tip-fade\" } }, [_c('div', { directives: [{ name: \"show\", rawName: \"v-show\", value: _vm.visible, expression: \"visible\" }], staticClass: \"v-tip-container\", class: _vm.boxClass, style: _vm.boxStyle, on: { \"mouseenter\": _vm.showTip, \"mouseleave\": function mouseleave($event) {\r\n          return _vm.hiddenTip(true);\r\n        } } }, [_c('div', { directives: [{ name: \"show\", rawName: \"v-show\", value: _vm.placement, expression: \"placement\" }], staticClass: \"v-tip-arrows\", class: _vm.placement, style: _vm.arrowBox }), _vm._v(\" \"), _vm.title ? _c('span', { staticClass: \"v-tip-title\" }, [_vm._v(\"\\n      \" + _vm._s(_vm.title) + \"\\n    \")]) : _vm._e(), _vm._v(\" \"), _vm.content ? _c('p', { staticClass: \"v-tip-content\", style: _vm.contentHeight }, [_vm._v(\"\\n      \" + _vm._s(_vm.content) + \"\\n    \")]) : _vm._e(), _vm._v(\" \"), _vm.customComponent ? _c(_vm.customComponent, _vm._g(_vm._b({ tag: \"component\", on: { \"hidden-tip\": _vm.hiddenTip, \"update-tip\": _vm.updateTip } }, 'component', _vm.customProps, false), _vm.customListeners)) : _vm._e()], 1)]);\r\n  },\r\n  staticRenderFns: [],\r\n  name: 'Vtip',\r\n\r\n  props: {\r\n    // 标题\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n\r\n    // 显示的内容\r\n    content: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n\r\n    // 工具函数调用时附加到自定义组件 props 上面的\r\n    customProps: {\r\n      type: Object,\r\n      default: function _default() {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    // 对应 <component> 组件 is 属性\r\n    customComponent: {\r\n      type: [String, Function, Object],\r\n      default: ''\r\n    },\r\n\r\n    // 用于监听自定义组件 emit 的事件\r\n    customListeners: Object,\r\n\r\n    // tip 绑定的目标元素\r\n    target: null,\r\n\r\n    // tip 的容器，默认插入 body 中\r\n    container: null,\r\n\r\n    // 用于限制 tip 展示的方向，优先级按顺序\r\n    placements: {\r\n      type: Array,\r\n      default: function _default() {\r\n        return ['top', 'right', 'bottom', 'left'];\r\n      }\r\n    },\r\n\r\n    // tip 窗口多久后自动消失，为 <=0 不消失\r\n    duration: {\r\n      type: Number,\r\n      default: 300\r\n    },\r\n\r\n    // 是否为 tip 添加 transfrom 过渡\r\n    transition: Boolean,\r\n\r\n    // 提示用的小箭头大小\r\n    arrowsSize: {\r\n      type: Number,\r\n      default: 8\r\n    },\r\n\r\n    // 组件的宽度\r\n    width: {\r\n      type: [String, Number],\r\n      default: 'auto'\r\n    },\r\n\r\n    // 内容的高度\r\n    height: {\r\n      type: [String, Number],\r\n      default: 'auto'\r\n    },\r\n\r\n    // tip 的 z-index\r\n    zIndex: {\r\n      type: Number,\r\n      default: 999\r\n    },\r\n\r\n    // 主题 light dark 默认为 light\r\n    theme: {\r\n      type: String,\r\n      default: 'light'\r\n    },\r\n\r\n    // 自定义 class 的类名\r\n    customClass: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n\r\n  data: function data() {\r\n    this.containerNode = null;\r\n    this.targetParentNode = null;\r\n    this.visibleTimer = null;\r\n    return {\r\n      // tip 的展示方向（小箭头的方向）\r\n      placement: '',\r\n      visible: false,\r\n      arrowsPos: {}\r\n    };\r\n  },\r\n\r\n\r\n  computed: {\r\n    arrowBox: function arrowBox() {\r\n      return Object.assign({\r\n        borderWidth: this.arrowsSize + 'px'\r\n      }, this.arrowsPos);\r\n    },\r\n    boxStyle: function boxStyle() {\r\n      var width = this.width;\r\n      return {\r\n        width: typeof width === 'string' ? width : width + 'px',\r\n        zIndex: this.zIndex\r\n      };\r\n    },\r\n    boxClass: function boxClass() {\r\n      var customClass = this.customClass,\r\n          theme = this.theme,\r\n          transition = this.transition;\r\n\r\n      var tsClass = transition ? 'transition-transfrom' : '';\r\n      return [customClass, theme, tsClass];\r\n    },\r\n    contentHeight: function contentHeight() {\r\n      var height = this.height;\r\n      return {\r\n        height: typeof height === 'string' ? height : height + 'px'\r\n      };\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    showTip: function showTip() {\r\n      clearTimeout(this.visibleTimer);\r\n      this.visible = true;\r\n    },\r\n\r\n\r\n    // 隐藏 tip\r\n    hiddenTip: function hiddenTip(immedia) {\r\n      if (immedia) {\r\n        this.visible = false;\r\n      } else {\r\n        this.setVisible(false);\r\n      }\r\n    },\r\n\r\n\r\n    // 更新 tip 位置\r\n    updateTip: function updateTip() {\r\n      this.setContainerNode();\r\n      this.showTip();\r\n      this.asynSetCoordinate();\r\n    },\r\n\r\n\r\n    // 设置 tip 的容器\r\n    setContainerNode: function setContainerNode() {\r\n      var $el = this.$el,\r\n          target = this.target,\r\n          container = this.container,\r\n          targetParentNode = this.targetParentNode,\r\n          oldNode = this.containerNode;\r\n      // 目标元素的父级节点相同则不需要重新计算容器\r\n\r\n      if (!target || target.parentNode === targetParentNode) return;\r\n      this.targetParentNode = target.parentNode;\r\n      var newNode = container || getScrollContainer(target);\r\n      if (newNode === oldNode) return;\r\n      if ($el.parentNode !== newNode) {\r\n        newNode.appendChild($el);\r\n      }\r\n      var position = window.getComputedStyle(newNode, null).position;\r\n      if (!position || position === 'static') {\r\n        newNode.style.position = 'relative';\r\n      }\r\n      if (oldNode) {\r\n        oldNode.removeEventListener('scroll', this.scrollHandler, supportsPassive);\r\n      }\r\n      if (checkScrollable(newNode)) {\r\n        newNode.addEventListener('scroll', this.scrollHandler, supportsPassive);\r\n      }\r\n      this.containerNode = newNode;\r\n    },\r\n    setCoordinate: function setCoordinate() {\r\n      var $el = this.$el,\r\n          target = this.target,\r\n          containerNode = this.containerNode,\r\n          placements = this.placements,\r\n          arrowsSize = this.arrowsSize;\r\n\r\n      if (!$el || !target || !containerNode) return;\r\n      var placementInfo = computePlacementInfo(target, containerNode, $el, placements, arrowsSize);\r\n      var coordinate = placementInfo.mod === 'mid' ? computeCoordinateBaseMid(placementInfo, arrowsSize) : computeCoordinateBaseEdge(placementInfo, arrowsSize);\r\n      this.setArrowsPos(coordinate);\r\n      this.placement = coordinate.placement;\r\n      var x = coordinate.x + containerNode.scrollLeft;\r\n      var y = coordinate.y + containerNode.scrollTop;\r\n      this.$el.style.transform = 'translate3d(' + x + 'px, ' + y + 'px, 0)';\r\n    },\r\n    asynSetCoordinate: function asynSetCoordinate() {\r\n      this.$nextTick(this.setCoordinate);\r\n    },\r\n\r\n\r\n    // 设置小三角形的位置\r\n    setArrowsPos: function setArrowsPos(_ref) {\r\n      var placement = _ref.placement,\r\n          arrowsOffset = _ref.arrowsOffset;\r\n\r\n      this.arrowsPos = computeArrowPos(placement, arrowsOffset, this.arrowsSize);\r\n    },\r\n\r\n\r\n    // 设置 tip 经过 duration ms 后的状态\r\n    setVisible: function setVisible(v) {\r\n      var _this = this;\r\n\r\n      clearTimeout(this.visibleTimer);\r\n      this.visibleTimer = setTimeout(function () {\r\n        _this.visible = v;\r\n        _this.visibleTimer = null;\r\n      }, this.duration);\r\n    },\r\n\r\n\r\n    // 参考元素父级容器发生滚动时的处理\r\n    scrollHandler: debounce(function () {\r\n      this.setCoordinate();\r\n    }, 200),\r\n\r\n    clearScrollEvent: function clearScrollEvent() {\r\n      if (this.containerNode) {\r\n        this.containerNode.removeEventListener('scroll', this.scrollHandler, supportsPassive);\r\n      }\r\n    },\r\n    removeParentNode: function removeParentNode() {\r\n      if (this.$el.parentNode) {\r\n        this.$el.parentNode.removeChild(this.$el);\r\n      }\r\n    },\r\n    destroy: function destroy() {\r\n      this.clearScrollEvent();\r\n      this.removeParentNode();\r\n      this.$destroy();\r\n    }\r\n  }\r\n};\r\n\r\nvar VtipConstructor = Vue.extend(main);\r\n\r\nvar props = main.props;\r\nvar defaultOptions = {};\r\nObject.keys(props).forEach(function (key) {\r\n  var prop = props[key];\r\n  var dv = prop.default;\r\n  if (prop && prop.default != null) {\r\n    defaultOptions[key] = typeof dv === 'function' ? dv() : dv;\r\n  }\r\n});\r\n\r\nvar vtipInstance = null;\r\n\r\nfunction tip(options) {\r\n  options = options || {};\r\n  // 如果已经存在 tip 的实例,直接更新属性值\r\n  if (vtipInstance && vtipInstance.$el.parentNode) {\r\n    Object.assign(vtipInstance, defaultOptions, options);\r\n    if (vtipInstance.content.trim().length == 0) {\r\n      vtipInstance.hiddenTip(true);\r\n    } else if (vtipInstance.target) {\r\n      vtipInstance.updateTip();\r\n    } else {\r\n      vtipInstance.hiddenTip();\r\n    }\r\n    return vtipInstance;\r\n  }\r\n  // 否则创建一个 tip 实例\r\n  vtipInstance = new VtipConstructor({\r\n    propsData: options\r\n  }).$mount();\r\n  vtipInstance.updateTip();\r\n  return vtipInstance;\r\n}\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\r\n  return typeof obj;\r\n} : function (obj) {\r\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n};\r\n\r\nfunction clearEvent(el) {\r\n  if (el._tipHandler) {\r\n    el.removeEventListener('click', el._tipHandler);\r\n    el.removeEventListener('mouseenter', el._tipHandler);\r\n  }\r\n  if (el._tipMouseleaveHandler) {\r\n    el.removeEventListener('mouseleave', el._tipMouseleaveHandler);\r\n  }\r\n  delete el._tipHandler;\r\n  delete el._tipMouseleaveHandler;\r\n  delete el._tipOptions;\r\n  delete el._tipInstance;\r\n}\r\n\r\nvar directive = {\r\n  install: function install(Vue$$1, options) {\r\n    options = options || {};\r\n    // 自定义指令的名字，默认为 tip\r\n    var name = options.directiveName || 'tip';\r\n    // tip 的展示方向\r\n    var allPlacements = ['top', 'right', 'bottom', 'left'];\r\n\r\n    Vue$$1.directive(name, {\r\n      bind: function bind(el, binding) {\r\n        clearEvent(el);\r\n        var _binding$modifiers = binding.modifiers,\r\n            click = _binding$modifiers.click,\r\n            dark = _binding$modifiers.dark,\r\n            transition = _binding$modifiers.transition;\r\n\r\n        var limitPlacementQueue = allPlacements.filter(function (placement) {\r\n          return binding.modifiers[placement];\r\n        });\r\n        el._tipOptions = binding.value;\r\n        el._tipHandler = function tipHandler() {\r\n          if (this._tipOptions == null) return;\r\n          var options = this._tipOptions;\r\n          var placements = limitPlacementQueue.length ? limitPlacementQueue : allPlacements;\r\n          var mix = {\r\n            placements: placements,\r\n            transition: transition,\r\n            theme: dark ? 'dark' : 'light'\r\n            // 一般情况为 v-tip 绑定需要显示的内容\r\n            // 需要配置时可以直接绑定一个配置对象\r\n          };\r\n          var tipOptions = (typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object' ? Object.assign(mix, options, { target: this }) : Object.assign(mix, { content: String(options), target: this });\r\n          this._tipInstance = tip(tipOptions);\r\n        };\r\n        el._tipMouseleaveHandler = function tipMouseleaveHandler() {\r\n          if (this._tipInstance) {\r\n            this._tipInstance.hiddenTip();\r\n          }\r\n        };\r\n        // 默认触发方式为 hover 触发\r\n        if (click) {\r\n          el.addEventListener('click', el._tipHandler);\r\n        } else {\r\n          el.addEventListener('mouseenter', el._tipHandler);\r\n        }\r\n        el.addEventListener('mouseleave', el._tipMouseleaveHandler);\r\n      },\r\n      update: function update(el, _ref) {\r\n        var value = _ref.value,\r\n            oldValue = _ref.oldValue;\r\n\r\n        if (value === oldValue) return;\r\n        el._tipOptions = value;\r\n      },\r\n      unbind: function unbind(el) {\r\n        var instance = el._tipInstance;\r\n        if (instance && instance.destroy) {\r\n          instance.destroy();\r\n        }\r\n        clearEvent(el);\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nvar index = { tip: tip, directive: directive };\r\n\r\nmodule.exports = index;\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","module.exports = __webpack_public_path__ + \"img/compass3.a498b488.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopBar.vue?vue&type=style&index=0&id=b57856d0&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabBar.vue?vue&type=style&index=0&id=06b571e6&scoped=true&lang=css&\"","import el from \"../../../components/element/locale/lang/el\";\r\n\r\nlet TriangleCut = function () {\r\n  const ON_LEFT_SIDE = 1;\r\n  const ON_RIGHT_SIDE = 2;\r\n  const ON_LINE_IN = 3;\r\n  const ON_LINE_OUT = 4;\r\n  const BETWEEN_IN = 1\r\n  const BETWEEN_ON = 2\r\n  const BETWEEN_NOT = 3\r\n  const POLYGON_INSIDE = 1\r\n  const POLYGON_ON_EDGE = 2\r\n  const POLYGON_OUTSIDE = 3\r\n\r\n  let precision = -1;\r\n  let minimum = 0.0001;\r\n  const EPS = 0.000001;\r\n  const bool_union = 1  //求两个图形的合并\r\n  const bool_a_sub_b = 2  //求图形a 减去 图形b后得到的图形列表\r\n  const bool_intersection = 3 //求图形a 和 图形b 相交后得到的图形列表\r\n\r\n  function isBetween0 (m, a, b) {\r\n    if (Math.abs(m - a) <= minimum || Math.abs(m - b) <= minimum) {\r\n      return BETWEEN_ON //m 和 a 或 b 过于接近，则认为 m == a 或 m == b\r\n    }\r\n    return ((m > a && m < b) || (m > b && m < a)) ? BETWEEN_IN : BETWEEN_NOT\r\n  }\r\n  function isBetween2 (m, a, b) {\r\n    let target = isBetween0(m, a, b)\r\n    return target == BETWEEN_ON || target == BETWEEN_IN\r\n  }\r\n  function isBetween3 (m, a, b, countBounds = true) {\r\n    let a0 = a, b0 = b\r\n    if (a > b) {\r\n      a0 = b\r\n      b0 = a\r\n    }\r\n    let target = isBetween0(m, a0, b0)\r\n    if (countBounds) {\r\n      return target == BETWEEN_ON || target == BETWEEN_IN\r\n    } else {\r\n      return target == BETWEEN_IN\r\n    }\r\n  }\r\n  //求以point为起点，竖直向上的射线和线段（p1, p2）的交点\r\n  function rayUpSegmentCross(point, p1, p2) {\r\n    if (point.y > p1.y + minimum && point.y > p2.y + minimum) {\r\n      return null\r\n    }\r\n\r\n    let small, big\r\n    if (p1.x > p2.x) {\r\n      small = p2\r\n      big = p1\r\n    } else {\r\n      small = p1\r\n      big = p2\r\n    }\r\n    let res = isBetween0(point.x, small.x, big.x)\r\n    if (res == BETWEEN_NOT) {\r\n      return null\r\n    } else if (res == BETWEEN_ON) {\r\n      if (p1.x == p2.x) {\r\n        if (small.y >= point.y - minimum) {\r\n          return [small, big]\r\n        } else if (big.y > point.y - minimum) {\r\n          return [point]\r\n        } else {\r\n          return null\r\n        }\r\n      } else if (p1.x == point.x) {\r\n        return [p1]\r\n      } else {\r\n        return [p2]\r\n      }\r\n    } else {  //res == BETWEEN_IN\r\n      let rate = (point.x - small.x) / (big.x - small.x)  // lerp alpha\r\n      let dx = big.x - small.x\r\n      let dy = big.y - small.y\r\n      let cross = {x: small.x + dx * rate, y: small.y + dy * rate}\r\n      if (cross.y >= point.y - minimum) {  // ? cross.y === point.y\r\n        return [ cross ]\r\n      }\r\n      return null\r\n    }\r\n  }\r\n\r\n  //耳切法  如果 点 正好在某条边上，返回false\r\n  function isPointInEdges(point, edges) {\r\n    let target = isPointInEdges0(point, edges)\r\n    return target === POLYGON_INSIDE\r\n  }\r\n  function isPointInEdges0 (point, edges) {\r\n    let crossedPoints = []\r\n    let checked = []\r\n    for (let i = 0; i < edges.length; i++) {\r\n      let edge = edges[i]\r\n      if (checked.indexOf(edge) >= 0) {\r\n        continue\r\n      }\r\n      let arr = rayUpSegmentCross(point, edge.from, edge.to)\r\n      if (!arr) {\r\n        continue\r\n      }\r\n\r\n      let prev = i - 1, next = i + 1\r\n      if (prev < 0) {\r\n        prev = edges.length - 1\r\n      }\r\n      if (next > edges.length - 1) {\r\n        next = 0\r\n      }\r\n      if (arr.length == 1) {\r\n        let pt = arr[0]\r\n        if (equals(point, pt, true)) {\r\n          return POLYGON_ON_EDGE\r\n        }\r\n        if (pt != edge.from && pt != edge.to) {\r\n          crossedPoints.push(pt)\r\n        } else if (pt == edge.to) {\r\n          let edgeNext = edges[next]\r\n          checked.push(edgeNext)\r\n          if (edgeNext.vertical()) {\r\n            if (isBetween3(point.y, edgeNext.from.y, edgeNext.to.y)) {\r\n              return POLYGON_ON_EDGE\r\n            }\r\n            next += 1\r\n            if (next > edges.length - 1) {\r\n              next = 0\r\n            }\r\n            edgeNext = edges[next]\r\n            checked.push(edgeNext)\r\n          }\r\n          if (isBetween3(point.x, edge.from.x, edgeNext.to.x, false)) {\r\n            crossedPoints.push(pt)\r\n          }\r\n        } else {  //pt == edge.from\r\n          let edgePrev = edges[prev]\r\n          checked.push(edgePrev)\r\n          if (edgePrev.vertical()) {\r\n            if (isBetween3(point.y, edgePrev.from.y, edgePrev.to.y) ) {\r\n              return POLYGON_ON_EDGE\r\n            }\r\n            prev -= 1\r\n            if (prev < 0) {\r\n              prev = edges.length - 1\r\n            }\r\n            edgePrev = edges[prev]\r\n            checked.push(edgePrev)\r\n          }\r\n          if (isBetween3(point.x, edgePrev.from.x, edge.to.x, false)) {\r\n            crossedPoints.push(pt)\r\n          }\r\n        }\r\n      } else if (arr.length == 2) {\r\n        let edgeNext = edges[next]\r\n        let edgePrev = edges[prev]\r\n        if (isBetween2(point.y, arr[0], arr[1])) {\r\n          return POLYGON_ON_EDGE\r\n        }\r\n        if (isBetween3(point.x, edgePrev.from.x, edgeNext.to.x, false)) {\r\n          crossedPoints.push(arr[0])\r\n        }\r\n      }\r\n    }\r\n    return crossedPoints.length % 2 == 1 ? POLYGON_INSIDE : POLYGON_OUTSIDE\r\n  }\r\n\r\n  let Edge = function (from, to, belong, holeId) {\r\n    let checked = false;\r\n    this.from = from, this.to = to;\r\n    this.belong = belong;\r\n    this.holeId = holeId;\r\n    this.splitBy = [];\r\n    this.addSplitBy = function (point) {\r\n      if (!equals(this.from, point, true) && !equals(this.to, point, true) && this.splitBy.indexOf(point) < 0) {\r\n        this.splitBy.push(point);\r\n        return point;\r\n      }\r\n      return null;\r\n    };\r\n    this.setChecked = function () {\r\n      checked = true;\r\n    };\r\n    this.getChecked = function () {\r\n      return checked;\r\n    };\r\n    this.reverseEdge = function () {\r\n      if (this.reversedTo) {\r\n        return this.reversedTo;\r\n      }\r\n      let edge = new Edge(this.to, this.from, belong, holeId);\r\n      edge.reversedFrom = this;\r\n      this.reversedTo = edge;\r\n      return edge;\r\n    };\r\n    this.clone = function () {\r\n      let cloned = new Edge(this.from, this.to, belong, holeId);\r\n      return cloned;\r\n    };\r\n    this.setFrom = function (from) {\r\n      this.from = from;\r\n      return this;\r\n    };\r\n    this.setTo = function (to) {\r\n      this.to = to;\r\n      return this;\r\n    };\r\n    this.sliceBy = function (crossPoint) {\r\n      return [this.clone().setTo(crossPoint), this.clone().setFrom(crossPoint)];\r\n    };\r\n    this.sourceId = function () {\r\n      let maxX = Math.max(this.from.x, this.to.x);\r\n      let minX = Math.min(this.from.x, this.to.x);\r\n      let maxY = Math.max(this.from.y, this.to.y);\r\n      let minY = Math.min(this.from.y, this.to.y);\r\n      return maxX+','+minX+\";\"+maxY+\",\"+minY;\r\n    };\r\n    this.sameSource = function (edge) {\r\n      if (equals(this.from, edge.from) && equals(this.to, edge.to)) {\r\n        return {similarType: 4};\r\n      } else if (equals(this.from, edge.to) && equals(this.to, edge.from)) {\r\n        return {similarType: 3};\r\n      }\r\n      return null;\r\n    };\r\n    this.subEdge = function (other) {\r\n      if (this.sameSource(other)) {\r\n        return [];\r\n      }\r\n      let arr = specialSegmentCross(this.from, this.to, other.from, other.to);\r\n      if (arr.length == 0) {\r\n        return [this];\r\n      }\r\n\r\n      if (arr.indexOf(this.from) >= 0 && arr.indexOf(this.to) >= 0) {\r\n        return [];\r\n      } else if (arr.indexOf(this.from) < 0 && arr.indexOf(this.to) < 0) {\r\n        let d1 = getDistanceSquare(this.from, other.from), d2 = getDistanceSquare(this.from, other.to);\r\n        if (d1 < d2) {\r\n          return [new Edge(this.from, other.from, belong, holeId), new Edge(other.to, this.to, belong, holeId)];\r\n        } else {\r\n          return [new Edge(this.from, other.to, belong, holeId), new Edge(other.from, this.to, belong, holeId)];\r\n        }\r\n      } else {\r\n        let pc = arr.indexOf(other.from) >= 0 ? other.from : other.to;\r\n        if (arr.indexOf(this.from) >= 0) {\r\n          return [new Edge(pc, this.to, belong, holeId) ];\r\n        } else {\r\n          return [new Edge(this.from, pc, belong, holeId) ];\r\n        }\r\n      }\r\n    };\r\n    this.getMidPoint = function () {\r\n      return {x: (this.from.x + this.to.x) / 2, y: (this.from.y + this.to.y) / 2};\r\n    };\r\n    this.length = function () {\r\n      return getDistance(this.from, this.to);\r\n    };\r\n    this.lerpToEnd = function (alpha) {\r\n      let x = this.from.x + (this.to.x - this.from.x) * alpha;\r\n      let y = this.from.y + (this.to.y - this.from.y) * alpha;\r\n      return {x: x, y: y};\r\n    }\r\n    this.getNear = function (isFrom) {\r\n      let alpha = minimum / this.length();\r\n      return this.lerpToEnd(isFrom ? alpha : 1 - alpha);\r\n    }\r\n    this.vertical = function () {\r\n      return this.from.x == this.to.x\r\n    }\r\n  };\r\n\r\n  let Triangle = function (a, b, c) {\r\n    let pa = a, pb = b, pc = c;\r\n    let ia = a.id, ib = b.id, ic = c.id;\r\n    let ab = {x: b.x - a.x, y: b.y - a.y}, ac = {x: c.x - a.x, y: c.y - a.y};\r\n    let cross_product = ab.x * ac.y - ac.x * ab.y;  // ab x ac\r\n    let isClockwise = cross_product < 0;\r\n\r\n    this.toString = function () {\r\n      return \"(\" + ia + \", \" + ib + \", \" + ic + \")\";\r\n    };\r\n    this.getVertices = function () {\r\n      return [pa, pb, pc];\r\n    };\r\n    this.getIndices = function () {\r\n      return [ia, ib, ic];\r\n    };\r\n    this.isClockwise = function () {\r\n      return isClockwise;\r\n    };\r\n    this.changeSequence = function () {\r\n      let tmp = ib;\r\n      ib = ic;\r\n      ic = tmp;\r\n      tmp = pb;\r\n      pb = pc;\r\n      pc = tmp;\r\n      isClockwise = !isClockwise;\r\n    };\r\n  };\r\n\r\n  function threePointInOneLine(v1, v2, v3) {\r\n    if (v1.x == v2.x) {\r\n      return v3.x == v2.x;\r\n    }\r\n    if (v2.x == v3.x) {\r\n      return v1.x == v2.x;\r\n    }\r\n    let k12 = (v1.y - v2.y) / (v1.x - v2.x);\r\n    let k23 = (v3.y - v2.y) / (v3.x - v2.x);\r\n    return Math.abs(k12 - k23) < 0.0002;\r\n  }\r\n\r\n  //求两线段的交点\r\n  function lineSegmentCross(p1, p2, q1, q2) {\r\n    if (p1 == q1 || p1 == q2) {\r\n      return p1;\r\n    }\r\n    if (p2 == q1 || p2 == q2) {\r\n      return p2;\r\n    }\r\n    let cross = getCrossPoint(p1, p2, q1, q2);\r\n    if (cross == null) {\r\n      //the two line is parallel\r\n      if (getPointOnVectorSide(p1, p2, q1) == ON_LINE_IN) {\r\n        return q1;\r\n      }\r\n      if (getPointOnVectorSide(p1, p2, q2) == ON_LINE_IN) {\r\n        return q2;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    if (isBetween(cross.x, p1.x, p2.x) && isBetween(cross.x, q1.x, q2.x) &&\r\n        isBetween(cross.y, p1.y, p2.y) && isBetween(cross.y, q1.y, q2.y)) {\r\n      let arr = [p1, p2, q1, q2];\r\n      for (let pt of arr) {\r\n        if (equals(pt, cross, true) ) {\r\n          return pt;\r\n        }\r\n      }\r\n      return cross;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  //return point p's position regards vector v1 to v2, use 3d right hand's coordinate system\r\n  function getPointOnVectorSide(v1, v2, p) {\r\n    if (equals(v1, p) || equals(v2, p)) {\r\n      return ON_LINE_IN;\r\n    }\r\n    let v1_v2 = {x: v2.x - v1.x, y: v2.y - v1.y};   //vector v1 to v2\r\n    let v1_p = {x: p.x - v1.x, y: p.y - v1.y};      //vector v1 to p\r\n    let cross_product = v1_v2.x * v1_p.y - v1_p.x * v1_v2.y;\r\n\r\n    if (cross_product > EPS) {\r\n      // return ON_RIGHT_SIDE;\r\n      return ON_LEFT_SIDE;\r\n    } else if (cross_product < -EPS) {\r\n      // return ON_LEFT_SIDE;\r\n      return ON_RIGHT_SIDE;\r\n    } else {\r\n      if (isBetween(p.x, v1.x, v2.x) && isBetween(p.y, v1.y, v2.y)) {\r\n        return ON_LINE_IN;\r\n      }\r\n      return ON_LINE_OUT;\r\n    }\r\n  }\r\n\r\n  //return true if number m is between a and b\r\n  function isBetween(m, a, b) {\r\n    if (m >= a && m <= b) {\r\n      return true;\r\n    }\r\n    if (m >= b && m <= a) {\r\n      return true;\r\n    }\r\n    let ma = Math.abs(m - a), mb = Math.abs(m - b);\r\n    if (ma <= minimum || mb <= minimum) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  //求两直线的交点\r\n  function getCrossPoint(start1, end1, start2, end2) {\r\n    let a1 = end1.y - start1.y;\r\n    let b1 = start1.x - end1.x;\r\n    let c1 = end1.x * start1.y - start1.x * end1.y;\r\n    let a2 = end2.y - start2.y;\r\n    let b2 = start2.x - end2.x;\r\n    let c2 = end2.x * start2.y - start2.x * end2.y;\r\n    let denominator = (a2 * b1 - a1 * b2);\r\n    if (denominator == 0) {\r\n      return null;\r\n    }\r\n    let x = (b2 * c1 - b1 * c2) / denominator;\r\n    let y = (a1 * c2 - a2 * c1) / denominator;\r\n    return {x: x, y: y};\r\n  }\r\n\r\n  function getDistance(v1, v2) {\r\n    return Math.sqrt(getDistanceSquare(v1, v2));\r\n  }\r\n\r\n  function getDistanceSquare(v1, v2) {\r\n    let dx = v2.x - v1.x;\r\n    let dy = v2.y - v1.y;\r\n    return dx * dx + dy * dy;\r\n  }\r\n\r\n  function getAngleWithX_axis(v1, v2) {\r\n    let distance = getDistance(v1, v2);\r\n    let dx = v2.x - v1.x;\r\n    let cosA = dx / distance;\r\n    if (v2.y >= v1.y) {\r\n      return Math.acos(cosA);\r\n    } else {\r\n      return 2 * Math.PI - Math.acos(cosA);\r\n    }\r\n  }\r\n\r\n  function getAngle(a, b, c) {\r\n    let a1 = getAngleWithX_axis(b, a);\r\n    let a2 = getAngleWithX_axis(b, c);\r\n    let ret = Math.abs(a1 - a2);\r\n    if (ret > Math.PI) {\r\n      return Math.PI * 2 - ret;\r\n    } else {\r\n      return ret;\r\n    }\r\n  }\r\n\r\n  //凸多边形 三角剖分\r\n  function getTriangles4ConvexPolygon(vertices, output) {\r\n    if (vertices == null || vertices.length < 3) {\r\n      console.log(\"invaild input parameter\");\r\n      return;\r\n    }\r\n    if (vertices.length == 3) {\r\n      output.push(new Triangle(vertices[0], vertices[1], vertices[2]));\r\n      return;\r\n    }\r\n    let removed = [];\r\n    for (let i = 0; i < vertices.length - 2;) {\r\n      let a = vertices[i], b = vertices[i + 1], c = vertices[i + 2];\r\n      if (threePointInOneLine(a, b, c)) {\r\n        i++;\r\n        continue;\r\n      }\r\n      output.push(new Triangle(a, b, c));\r\n      removed.push(vertices[i + 1]);\r\n      i += 2;\r\n    }\r\n    getTriangles4ConvexPolygon(subtract(vertices, removed), output);\r\n  }\r\n\r\n  //凹多边形 三角剖分\r\n  function getTriangles4ConcavPolygon(vertices) {\r\n    let convexPolygons = [], output = [];\r\n    concavToConvex(vertices, convexPolygons);\r\n    for (let i = 0; i < convexPolygons.length; i++) {\r\n      getTriangles4ConvexPolygon(convexPolygons[i], output);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  function concavToConvex(vertices, output) {\r\n    // let points = filterOutUselessVertex(vertices);\r\n    let points = vertices.slice();\r\n    let total = points.length;\r\n    let isClockwise = isClockwiseSquence(points);\r\n    let concavPoint = null;\r\n    let concavIndex = -1;\r\n    for (let i = 0; i < total; i++) {   //寻找凹点的索引\r\n      let v0 = points[i];\r\n      let v1 = points[getValidIndex(i + 1, total)];\r\n      let v2 = points[getValidIndex(i + 2, total)];\r\n      if (threePointInOneLine(v0, v1, v2)) {\r\n        continue;\r\n      }\r\n      let curSide = getPointOnVectorSide(v0, v1, v2);\r\n      if (isClockwise && curSide == ON_LEFT_SIDE) {\r\n        concavPoint = v1;\r\n        concavIndex = getValidIndex(i + 1, total);\r\n        break;\r\n      } else if (!isClockwise && curSide == ON_RIGHT_SIDE) {\r\n        concavPoint = v1;\r\n        concavIndex = getValidIndex(i + 1, total);\r\n        break;\r\n      }\r\n    }\r\n    if (concavPoint != null) {\r\n      let index = concavIndex;\r\n      let p2 = getValidIndex(index + 1, total);\r\n      let p1 = getValidIndex(index - 1, total);\r\n      let angle = getAngle(points[p1], points[index], points[p2]);\r\n      let halfAngle = (Math.PI * 2 - angle) / 2;\r\n      let minAngle = 100;\r\n      let divideIndex;\r\n      for (let i = 0; i < total; i++) {\r\n        if (i == index || i == p1 || i == p2) {\r\n          continue;\r\n        }\r\n        let side = getPointOnVectorSide(points[p1], points[index], points[i]);\r\n        if ((isClockwise && side == ON_RIGHT_SIDE) ||\r\n            (!isClockwise && side == ON_LEFT_SIDE) ||\r\n            side == ON_LINE_OUT) {\r\n          if (!isCrossWithEdges(points, index, i)) {\r\n            let curAngle = getAngle(points[p1], points[index], points[i]);\r\n            let delta = Math.abs(curAngle - halfAngle);\r\n            if (delta < minAngle) {\r\n              minAngle = delta;\r\n              divideIndex = i;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (divideIndex == undefined) {\r\n        console.log(\"error! found in concavToConvex() \");\r\n        return;\r\n      }\r\n      let arr = splitArray(points, index, divideIndex);\r\n      concavToConvex(arr[0], output);\r\n      concavToConvex(arr[1], output);\r\n    } else {\r\n      output.push(points);\r\n    }\r\n  }\r\n\r\n  function splitArray(vertices, index1, index2) {\r\n    let small = Math.min(index1, index2);\r\n    let big = Math.max(index1, index2);\r\n    let v1 = vertices[small];\r\n    let v2 = vertices[big];\r\n    let start = small + 1;\r\n    let numbersBetween = Math.abs(index1 - index2) - 1;\r\n    let newSeries;\r\n    let delta = start + numbersBetween - vertices.length;\r\n    if (delta > 0) {\r\n      console.log(\"splitArray, attention! how is it possible to go here\");\r\n      for (let i = 0; i < delta; i++) {\r\n        let item = vertices.shift();\r\n        vertices.push(item);\r\n        start--;\r\n      }\r\n    }\r\n    newSeries = vertices.splice(start, numbersBetween);\r\n    newSeries.push(v2, v1);\r\n    return [newSeries, vertices];\r\n  }\r\n\r\n//如果线段[ vertices[index]， vertices[checkingIndex] ] 和 vertices中的任意边相交，返回true\r\n  function isCrossWithEdges(vertices, index, checkingIndex) {\r\n    let q1 = getValidIndex(checkingIndex - 1, vertices.length);\r\n    let q2 = getValidIndex(checkingIndex + 1, vertices.length);\r\n    let p1 = getValidIndex(index - 1, vertices.length);\r\n    let p2 = getValidIndex(index + 1, vertices.length);\r\n    let needSkip1 = [p1, index, p2];\r\n    let needSkip2 = [q1, checkingIndex, q2];\r\n    for (let i = 0; i < vertices.length; i++) {\r\n      let edgeIndex = (i + 1) % vertices.length;\r\n      if (needSkip1.indexOf(i) >= 0 && needSkip1.indexOf(edgeIndex) >= 0) {\r\n        continue;\r\n      }\r\n      if (needSkip2.indexOf(i) >= 0 && needSkip2.indexOf(edgeIndex) >= 0) {\r\n        continue;\r\n      }\r\n      if (lineSegmentCross(vertices[i], vertices[edgeIndex], vertices[index], vertices[checkingIndex])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function getValidIndex(index, total) {\r\n    if (index >= total) {\r\n      return index % total;\r\n    }\r\n    if (index < 0) {\r\n      return total + index % total;\r\n    }\r\n    return index;\r\n  }\r\n\r\n  function isClockwiseSquence(vertices) {\r\n    let leftAngleSum = 0;\r\n    let rightAngleSum = 0;\r\n    for (let i = 0; i < vertices.length; i++) {\r\n      let v2Index = getValidIndex(i + 1, vertices.length);\r\n      let pIndex = getValidIndex(i + 2, vertices.length);\r\n      if (threePointInOneLine(vertices[i], vertices[v2Index], vertices[pIndex])) {\r\n        continue;\r\n      }\r\n      let curSide = getPointOnVectorSide(vertices[i], vertices[v2Index], vertices[pIndex]);\r\n      let angle = Math.PI - getAngle(vertices[i], vertices[v2Index], vertices[pIndex]);\r\n      if (curSide == ON_LEFT_SIDE) {\r\n        vertices[v2Index].mark = \"left\";\r\n        leftAngleSum += angle;\r\n      } else if (curSide == ON_RIGHT_SIDE) {\r\n        vertices[v2Index].mark = \"right\";\r\n        rightAngleSum += angle;\r\n      }\r\n    }\r\n    if (rightAngleSum == 0 && leftAngleSum == 0) {\r\n      console.log(\"vertices is invalid, all points on one line\");\r\n      return false;\r\n    }\r\n    //Math.abs(rightAngleSum - leftAngleSum)/2 equal with Math.PI\r\n    if (rightAngleSum > leftAngleSum) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  //return arr1 - arr2;\r\n  function subtract(arr1, arr2) {\r\n    let ret = [];\r\n    for (let i = 0; i < arr1.length; i++) {\r\n      let flag = true;\r\n      for (let j = 0; j < arr2.length; j++) {\r\n        if (arr1[i] == arr2[j]) {\r\n          flag = false;\r\n          break;\r\n        }\r\n      }\r\n      if (flag) {\r\n        ret.push(arr1[i]);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  //要求 vertices 为逆时钟序列, 判断二维点在 是否凸多边形内部（包含边）\r\n  function isInConvex(point, vertexLst) {\r\n    let vertices = vertexLst;\r\n    if (isClockwiseSquence(vertexLst)) {\r\n      vertices = vertexLst.slice().reverse();\r\n    }\r\n    let i;\r\n    for (i = 0; i < vertices.length - 1; i++) {\r\n      let side = getPointOnVectorSide(vertices[i], vertices[i + 1], point);\r\n      if (side === ON_LINE_IN) {\r\n        return true;\r\n      }\r\n      if (side !== ON_LEFT_SIDE) {\r\n        return false;\r\n      }\r\n    }\r\n    let side = getPointOnVectorSide(vertices[i], vertices[0], point);\r\n    if (side === ON_LEFT_SIDE || side === ON_LINE_IN) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function isInConvexPolygons(point, convexPolygons) {\r\n    for (let i = 0; i < convexPolygons.length; i++) {\r\n      let convex = convexPolygons[i];\r\n      if (isInConvex(point, convex)) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  //去除 相邻的 重复顶点\r\n  function removeNearDuplicate(pointsCircle) {\r\n    let target = [], current = null;\r\n    for (let point of pointsCircle) {\r\n      if (current == null || current.x != point.x || current.y != point.y ) {\r\n        target.push(point);\r\n        current = point;\r\n      }\r\n    }\r\n    if (equals(target[0], target[target.length - 1]) ) {\r\n      target.pop();\r\n    }\r\n    return target;\r\n  }\r\n  //去除 毛刺点\r\n  function removeRags(pointsCircle) {\r\n    let map = {}, keys = [];\r\n    for (let i = 0; i < pointsCircle.length; i++) {\r\n      let point = pointsCircle[i];\r\n      let key = point.x + \",\" + point.y;\r\n      if (map[key] == undefined) {\r\n        map[key] = [i];\r\n      } else {\r\n        map[key].push(i);\r\n        if (keys.indexOf(key) < 0) {\r\n          keys.push(key);\r\n        }\r\n      }\r\n    }\r\n    for (let i = keys.length - 1; i > -1; i--) {\r\n      let key = keys[i];\r\n      let start = map[key][0] + 1, deleteCount = map[key][1] - map[key][0];\r\n      if (deleteCount > 3)  //避免数组首尾节点一样时 引发bug\r\n        continue;\r\n      let point = pointsCircle[start - 1];\r\n      let key0 = point.x + \",\" + point.y;\r\n      if (key0 == key) {\r\n        pointsCircle.splice(start, deleteCount);\r\n      }\r\n    }\r\n    return pointsCircle;\r\n  }\r\n\r\n  function createEdges4Circles(circles, polygonIndex) {\r\n    let edges2 = [];\r\n    let count = 0;\r\n    for (let circle of circles) {\r\n      let edges = createEdges(circle, polygonIndex, count++);\r\n      edges2.push(edges);\r\n    }\r\n    return edges2;\r\n  }\r\n\r\n  function createEdges(vertices, polygonIndex, holeId) {\r\n    let edges = [];\r\n    let i;\r\n    for (i = 0; i < vertices.length; i++) {\r\n      if (i == vertices.length - 1) {\r\n        edges[i] = new Edge(vertices[i], vertices[0], polygonIndex, holeId || 0);\r\n      } else {\r\n        edges[i] = new Edge(vertices[i], vertices[i + 1], polygonIndex, holeId || 0);\r\n      }\r\n    }\r\n\r\n    return edges;\r\n  }\r\n\r\n  function processSplitBy(edge) {\r\n    if (edge.splitBy.length == 0) {\r\n      return [edge];\r\n    }\r\n    let distanceSqs = [];\r\n    edge.splitBy.forEach(it => distanceSqs.push(getDistanceSquare(edge.from, it)));\r\n    let distanceSqsSorted = distanceSqs.slice().sort((a, b) => a - b);\r\n    let from = edge.from, to;\r\n    let splited = [];\r\n    for (let i = 0; i < distanceSqsSorted.length; i++) {\r\n      let index = distanceSqs.indexOf(distanceSqsSorted[i]);\r\n      to = edge.splitBy[index];\r\n      // if (from.x == to.x && from.y == to.y) {\r\n      //     console.log(\"strange edge 0 found\");\r\n      // }\r\n      splited.push(new Edge(from, to, edge.belong, edge.holeId));\r\n      from = to;\r\n    }\r\n    splited.push(new Edge(to, edge.to, edge.belong, edge.holeId));\r\n    return splited;\r\n  }\r\n\r\n  function equals(pt0, pt1, notPrecise) {\r\n    if (pt0 === pt1) {\r\n      return true;\r\n    }\r\n    if (notPrecise) {\r\n      return Math.abs(pt0.x - pt1.x) < minimum && Math.abs(pt0.y - pt1.y) < minimum;\r\n    }\r\n    return pt0.x == pt1.x && pt0.y == pt1.y;\r\n  }\r\n\r\n  function findBox2(vertices) {\r\n    let max = {}, min = {};\r\n    let arrX = [], arrY = [];\r\n    vertices.forEach(it => {\r\n      arrX.push(it.x), arrY.push(it.y);\r\n    });\r\n    max.x = Math.max(...arrX);\r\n    max.y = Math.max(...arrY);\r\n    min.x = Math.min(...arrX);\r\n    min.y = Math.min(...arrY);\r\n    return {\r\n      max: max, min: min, contain(p) {  //p正好在二维包围盒的边上时，return false;\r\n        let yMid = p.y < this.max.y && p.y > this.min.y;\r\n        let xMid = p.x < this.max.x && p.x > this.min.x;\r\n        return ((xMid && yMid) ||\r\n            (p.x == this.max.x && this.max.x == this.min.x && yMid) ||\r\n            (p.y == this.max.y && this.max.y == this.min.y && xMid));\r\n      },\r\n      scale(scalar) {\r\n        let center = {x: (this.min.x + this.max.x)/2, y: (this.min.y + this.max.y)/2};\r\n        let dx = center.x - this.min.x, dy = center.y - this.min.y;\r\n        dx *= scalar, dy *= scalar;\r\n        this.min.x = center.x - dx, this.min.y = center.y - dy;\r\n        this.max.x = center.x + dx, this.max.y = center.y + dy;\r\n      }\r\n    };\r\n  }\r\n\r\n  function findOutestPoint(vertices, box2) {\r\n    let distances = [];\r\n    let boxCenter = {x: (box2.max.x + box2.min.x) / 2, y: (box2.max.y + box2.min.y) / 2};\r\n    for (let vertex of vertices) {\r\n      if (box2.contain(vertex)) {\r\n        distances.push(-1);\r\n      } else {\r\n        distances.push(getDistanceSquare(boxCenter, vertex));\r\n      }\r\n    }\r\n    let max = Math.max(...distances);\r\n    if (max < 0) {\r\n      return null;\r\n    }\r\n    return vertices[distances.indexOf(max)];\r\n  }\r\n\r\n  function findStartEdgeOfHole(restEdges0, restEdges1) {\r\n    let restEdges = restEdges0.concat(restEdges1);\r\n    let filtered = restEdges.filter(arr => arr.length > 0);\r\n    if (filtered.length == 0) {\r\n      return null;\r\n    }\r\n    return filtered[0][0];\r\n  }\r\n\r\n  function findNextEdgeForHole(curEdge, restEdges0, restEdges1) {\r\n    let flatten = [], candidates = [];\r\n    restEdges0.concat(restEdges1).forEach(arr => flatten.push(...arr));\r\n    flatten.forEach(edge => {\r\n      if (edge.from == curEdge.to)\r\n        candidates.push(edge);\r\n    });\r\n    if (candidates.length == 0) {\r\n      console.log(\"error! findNextEdgeForHole failed to find next\");\r\n      return null;\r\n    }\r\n    for (let edge of candidates) {\r\n      if (edge.belong !== curEdge.belong) {\r\n        return edge;\r\n      }\r\n    }\r\n    return candidates[0];\r\n  }\r\n\r\n  function findStartEdge(splited0, splited1) {\r\n    let vertices0 = edges2Points(splited0), vertices1 = edges2Points(splited1);\r\n    let box0 = findBox2(vertices0), box1 = findBox2(vertices1);\r\n    let edges = splited1;\r\n    let p = findOutestPoint(vertices1, box0);\r\n    if (p == null) {\r\n      edges = splited0;\r\n      p = findOutestPoint(vertices0, box1);\r\n    }\r\n    for (let edge of edges) {\r\n      if (edge.from == p) {\r\n        return edge;\r\n      }\r\n    }\r\n    for (let edge of edges) {\r\n      if (edge.to == p) {\r\n        return edge;\r\n      }\r\n    }\r\n    console.log(\"findStartEdge shall not go here\");\r\n    return null;\r\n  }\r\n\r\n  function findNextEdge(curEdge, edges0, edges1) {\r\n    let first, second;\r\n    // if (edges0[0].belong < 0) {\r\n    //   first = edges0, second = edges1;\r\n    // } else if (edges1[0].belong < 0) {\r\n    //   first = edges1, second = edges0;\r\n    // } else\r\n    if (edges0.length > 0 && curEdge.belong == edges0[0].belong) {\r\n      first = edges1, second = edges0;\r\n    } else {\r\n      first = edges0, second = edges1;\r\n    }\r\n    for (let i = 0; i < first.length; i++) {\r\n      let edge = first[i];\r\n      if (edge.from === curEdge.to && curEdge.reverseEdge() != edge) {\r\n        return edge;\r\n      }\r\n    }\r\n    for (let i = 0; i < second.length; i++) {\r\n      let edge = second[i];\r\n      if (edge.from === curEdge.to) {\r\n        return edge;\r\n      }\r\n    }\r\n    console.log(\"findNextEdge shall never go here\");\r\n    return null;\r\n  }\r\n\r\n  //根据 剩余边列表restEdges0， 剩余边列表restEdges1，返回由二维点组成的二维数组output\r\n  function findHoles(restEdges0, restEdges1, output) {\r\n    let firstEdge = findStartEdgeOfHole(restEdges0, restEdges1);\r\n    if (firstEdge == null) {\r\n      return;\r\n    }\r\n    let holePoints = [];\r\n    let curEdge = firstEdge;\r\n    let holeStart = -1;\r\n    holePoints.push(curEdge.from);\r\n    while (true) {\r\n      curEdge = findNextEdgeForHole(curEdge, restEdges1, restEdges0);\r\n      if (curEdge != null) {\r\n        holePoints.push(curEdge.from);\r\n        //check if hole already found\r\n        if (holePoints.length > 2) {\r\n          holeStart = holePoints.indexOf(curEdge.to);\r\n          if (holeStart >= 0) {\r\n            holePoints = holePoints.slice(holeStart, holePoints.length);\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n    if (curEdge == null) {\r\n      return;\r\n    }\r\n    let restEdges00 = getRestEdges(restEdges0, holePoints);\r\n    let restEdges01 = getRestEdges(restEdges1, holePoints);\r\n    output.push(holePoints);\r\n    findHoles(restEdges00, restEdges01, output);\r\n  }\r\n\r\n  function getRestEdges(edges2, excludePoints, specialPoints) {\r\n    let restEdges2 = [];\r\n    edges2.forEach(edges => {\r\n      let restEdges = [];\r\n      edges.forEach(edge => {\r\n        if (excludePoints.indexOf(edge.from) < 0 && excludePoints.indexOf(edge.to) < 0) {\r\n          restEdges.push(edge);\r\n        }\r\n        if (specialPoints && specialPoints.length > 0) {\r\n          if (specialPoints.indexOf(edge.from) > -1 || specialPoints.indexOf(edge.to) > -1 ) {\r\n            if (excludePoints.indexOf(edge.from) < 0 || excludePoints.indexOf(edge.to) < 0) {\r\n              restEdges.push(edge);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      restEdges2.push(restEdges);\r\n    });\r\n    return restEdges2;\r\n  }\r\n\r\n  //判断二维点point 是否在带孔多边形内部，convexPolygons2 是二维数组，内容格式如下\r\n  //[多边形最外层剖分为 n个凸多边形的列表, 多边形第一个孔剖分为 n个凸多边形的列表, ...多边形第n个孔剖分为 n个凸多边形的列表]\r\n  function isPointInPolygonWithHoles(point, convexPolygons2) {\r\n    let outestPolygons = convexPolygons2[0];\r\n    let isInOutestCircle = isInConvexPolygons(point, outestPolygons);\r\n    if (!isInOutestCircle || convexPolygons2.length === 1) {\r\n      return isInOutestCircle;\r\n    }\r\n    for (let i = 1; i < convexPolygons2.length; i++) {\r\n      let convexPolygonsOfHole = convexPolygons2[i];\r\n      let isInHole = isInConvexPolygons(point, convexPolygonsOfHole);\r\n      if (isInHole) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function removeEdges(edges20, edges21, polygons20, polygons21, boolType) {\r\n    removeOutlineEdges(edges20[0], edges21[0], polygons20, polygons21, boolType);\r\n    let holeEdges0 = [], holeEdges1 = [];\r\n    let holes0 = edges20.slice(1), holes1 = edges21.slice(1);\r\n    holes0.forEach(edges => holeEdges0.push(...edges));\r\n    holes1.forEach(edges => holeEdges1.push(...edges));\r\n\r\n    let len0 = holeEdges0.length, len1 = holeEdges1.length;\r\n    if (holeEdges0.length > 0 && holeEdges1.length > 0) {\r\n      removeOutlineEdges(holeEdges0, holeEdges1, polygons20, polygons21, boolType);\r\n      if (len0 > holeEdges0.length) {\r\n        holes0.forEach(edges => arrAonB(edges, holeEdges0));\r\n      }\r\n      if (len1 > holeEdges1.length) {\r\n        holes1.forEach(edges => arrAonB(edges, holeEdges1));\r\n      }\r\n    }\r\n  }\r\n\r\n  function removeOutlineEdges(outline0, outline1, polygons20, polygons21, boolType = bool_union) {\r\n    let edge0in1 = [], edge1in0 = [];\r\n    let edge0notIn1 = [], edge1notIn0 = [];\r\n    let edges = outline0.concat(outline1);\r\n    for (let i = 0; i < edges.length; i++) {\r\n      let edge = edges[i];\r\n      if (edge.getChecked())\r\n        continue;\r\n      let polygons2 = edge.belong == 0 ? polygons21 : polygons20;\r\n      let isIn = isPointInPolygonWithHoles(edge.getMidPoint(), polygons2);\r\n      if (isIn) {\r\n        edge.belong == 0 ? edge0in1.push(edge) : edge1in0.push(edge);\r\n      } else {\r\n        edge.belong == 0 ? edge0notIn1.push(edge) : edge1notIn0.push(edge);\r\n      }\r\n    }\r\n\r\n    if (boolType == bool_union || boolType == bool_a_sub_b) {\r\n      if (edge0in1.length > 0) {\r\n        arrAsubB(outline0, edge0in1);\r\n      }\r\n    }\r\n    if (boolType == bool_union) {\r\n      if (edge1in0.length > 0) {\r\n        arrAsubB(outline1, edge1in0);\r\n      }\r\n    } else if (boolType == bool_a_sub_b) {\r\n      if (edge1notIn0.length > 0) {\r\n        arrAsubB(outline1, edge1notIn0);\r\n      }\r\n    }\r\n    if (boolType == bool_intersection) {\r\n      outline0.splice(0, outline0.length)\r\n      outline1.splice(0, outline1.length)\r\n      outline0.push(...edge0in1)\r\n      outline1.push(...edge1in0)\r\n    }\r\n  }\r\n\r\n  //针对特殊情况的处理，当个两个图形边互相重叠时，删除共享边，有两种共享边，相叠 与 不相叠\r\n  //相叠, 边1 {from: a, to: b}, 边2 {from: a, to: b}, 这时只删除 边1 或者 边2\r\n  //不相叠, 边1 {from: a, to: b}, 边2 {from: b, to: a}, 这时边1 和 边2都需要删除\r\n  function removeOverlapEdges(edges20, edges21) {\r\n    for (let edges0 of edges20) {\r\n      for (let edges1 of edges21) {\r\n        removeOverlapOutlineEdges(edges0, edges1);\r\n      }\r\n    }\r\n    let empty0 = edges20.filter(edges => edges.length === 0);\r\n    let empty1 = edges21.filter(edges => edges.length === 0);\r\n    if (empty0.length > 0)\r\n      arrAsubB(edges20, empty0);\r\n    if (empty1.length > 0)\r\n      arrAsubB(edges21, empty1);\r\n  }\r\n\r\n  function removeOverlapOutlineEdges(outline0, outline1) {\r\n    let sharedEdges0 = [], sharedEdges1 = [];\r\n    for (let i = 0; i < outline0.length; i++) {\r\n      let edge0 = outline0[i];\r\n      let j = 0;\r\n      for (; j < outline1.length; j++) {\r\n        let edge1 = outline1[j];\r\n        let obj = edge0.sameSource(edge1);\r\n        if (obj) {\r\n          if (obj.similarType == 3) { //异向，同端点\r\n            sharedEdges0.push(edge0);\r\n            sharedEdges1.push(edge1);\r\n          } else {    //同向，同端点；\r\n            sharedEdges0.push(edge0);\r\n            edge1.setChecked();\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (sharedEdges0.length > 0) {\r\n      arrAsubB(outline0, sharedEdges0);\r\n      arrAsubB(outline1, sharedEdges1);\r\n    }\r\n  }\r\n\r\n  //返回被至少四条边共用的顶点，针对可能合并出半环的特殊情况\r\n  function findSpecialPoints(edges) {\r\n    let map = {}, target = [];\r\n    for (let edge of edges) {\r\n      addSpecialPoint(map, edge.from, target);\r\n      addSpecialPoint(map, edge.to, target);\r\n    }\r\n    return target;\r\n  }\r\n  function addSpecialPoint(map, point, target) {\r\n    let pointId = point.x + \", \" + point.y;\r\n    if (map[pointId] == undefined)\r\n      map[pointId] = 1;\r\n    else\r\n      map[pointId]++;\r\n    if (map[pointId] > 3 && target.indexOf(point) < 0) {\r\n      target.push(point);\r\n    }\r\n  }\r\n\r\n  //返回三维数组，其中每个二维数组代表一个带孔多边形\r\n  function findCircles(splited0, splited1, circles0, circles1, boolType) {\r\n    let outestCircles = [];\r\n    let polygons20 = [], polygons21 = [];\r\n    circles0.forEach(circle => {\r\n      let polygons = [];\r\n      concavToConvex(circle, polygons);\r\n      polygons20.push(polygons);\r\n    });\r\n    circles1.forEach(circle => {\r\n      let polygons = [];\r\n      concavToConvex(circle, polygons);\r\n      polygons21.push(polygons);\r\n    });\r\n\r\n    removeOverlapEdges(splited0, splited1);\r\n    if (splited0.length == 0 || splited1.length == 0) {\r\n      let edges4Circles = splited0.concat(splited1);\r\n      return edgesLst2PointsCircles(edges4Circles);\r\n    }\r\n    removeEdges(splited0, splited1, polygons20, polygons21, boolType);\r\n\r\n    let outlineEdgesA = splited0[0].slice(), outlineEdgesB = splited1[0].slice()\r\n    let excludePoints = []\r\n    while (outlineEdgesA.length > 0) {\r\n      let outestCircle = [], usedEdges = []\r\n      let startEdge = findStartEdge(outlineEdgesA, outlineEdgesB);\r\n      let curEdge = startEdge;\r\n      usedEdges.push(curEdge)\r\n      outestCircle.push(startEdge.from);\r\n      while (curEdge.to != startEdge.from) {\r\n        curEdge = findNextEdge(curEdge, outlineEdgesA, outlineEdgesB);\r\n        usedEdges.push(curEdge)\r\n        if (outestCircle.indexOf(curEdge.from) > -1) {\r\n          console.log(\"Error! findCircles() dead loop in.\");\r\n          return [];  //避免死循环\r\n        }\r\n        outestCircle.push(curEdge.from);\r\n      }\r\n      arrAsubB(outlineEdgesA, usedEdges)\r\n      arrAsubB(outlineEdgesB, usedEdges)\r\n      outestCircles.push(outestCircle)\r\n      outestCircle.forEach(it => excludePoints.push(it))\r\n    }\r\n\r\n    let pointsSharedByCircles = [];\r\n    if (boolType == bool_union) {\r\n      pointsSharedByCircles = findSpecialPoints(splited0[0].concat(splited1[0] ) )\r\n    }\r\n    let restEdges0 = getRestEdges(splited0, excludePoints, pointsSharedByCircles);\r\n    let restEdges1 = getRestEdges(splited1, excludePoints, pointsSharedByCircles);\r\n    let holes = [];\r\n    findHoles(restEdges0, restEdges1, holes);\r\n    if (outestCircles.length == 1) {\r\n      let outestPoints = outestCircles[0]\r\n      return [ [outestPoints].concat(holes) ]\r\n    } else {\r\n      let polygons = []\r\n      outestCircles.forEach((circle, index) => {\r\n        polygons.push({pointsArr: [circle], outlineEdges: createEdges(circle, index, 0)})\r\n      })\r\n      for (let i = 0; i < holes.length; i++) {\r\n        let hole = holes[i]\r\n        for (let j = 0; j < polygons.length; j++) {\r\n          let polygonObj = polygons[j]\r\n          let holePoint = {x: (hole[0].x + hole[1].x) * 0.5, y: (hole[0].y + hole[1].y) * 0.5}\r\n          if (isPointInEdges(holePoint, polygonObj.outlineEdges)) {\r\n            polygonObj.pointsArr.push(hole)\r\n            break\r\n          }\r\n        }\r\n      }\r\n      let target = polygons.map(it => it.pointsArr)\r\n      return target\r\n    }\r\n  }\r\n\r\n  function mergeVertices(vertices0, vertices1) {\r\n    let map = [], mergeCount = 0;\r\n    for (let i = 0; i < vertices0.length; i++) {\r\n      for (let j = 0; j < vertices1.length; j++) {\r\n        if (!map[j] && equals(vertices1[j], vertices0[i], true)) {\r\n          vertices1[j] = vertices0[i];\r\n          vertices1[j].shared = true;\r\n          map[j] = 1;\r\n          mergeCount++;\r\n        }\r\n      }\r\n    }\r\n    if (equals(vertices1[0], vertices1[vertices1.length - 1], true)) {\r\n      vertices1[vertices1.length - 1] = vertices1[0];\r\n      vertices1[0].sharedBySelf = true;\r\n    }\r\n    return mergeCount;\r\n  }\r\n\r\n  //精简 不带孔多边形的点序列, 如果顶点在多边形的边上则清除它\r\n  function simplifyCircle(pointsCircle) {\r\n    let keyPoints = [];\r\n    for (let i = 0; i < pointsCircle.length; i++) {\r\n      let pre = i - 1, nxt = i + 1;\r\n      if (pre < 0) {\r\n        pre = pointsCircle.length - 1;\r\n      }\r\n      if (nxt > pointsCircle.length - 1) {\r\n        nxt = 0;\r\n      }\r\n      let prePoint = pointsCircle[pre], curPoint = pointsCircle[i], nxtPoint = pointsCircle[nxt];\r\n      let flag = getPointOnVectorSide(prePoint, nxtPoint, curPoint);\r\n      if (flag != ON_LINE_IN) {\r\n        keyPoints.push(curPoint);\r\n      }\r\n    }\r\n    return keyPoints;\r\n  }\r\n\r\n  function mergeEdges(edges) {\r\n    let points = edges2Points(edges);\r\n    let mapPointsReplace = {}, flag = false;\r\n    for (let i = 0; i < points.length - 1; i++) {//合并邻近顶点\r\n      let pt0 = points[i];\r\n      for (let j = i+1; j < points.length; j++) {\r\n        let pt1 = points[j];\r\n        let dx = Math.abs(pt1.x - pt0.x), dy = Math.abs(pt1.y - pt0.y);\r\n        if (dx < minimum && dy < minimum) {\r\n          let pointId = pt1.x+\",\"+pt1.y;\r\n          mapPointsReplace[pointId] = pt0;\r\n          flag = true;\r\n        }\r\n      }\r\n    }\r\n    if (!flag)\r\n      return edges;\r\n    let target = [], edgeSourceIds = [], edgeMap = {}, prepareRemove=[];\r\n    for (let edge of edges) { //两点之间的连线有多条时，删除这些多条边；并删除长度为零的边\r\n      let fromId = edge.from.x+\",\"+edge.from.y;\r\n      let toId = edge.to.x+\",\"+edge.to.y;\r\n      if (mapPointsReplace[fromId])\r\n        edge.from = mapPointsReplace[fromId];\r\n      if (mapPointsReplace[toId])\r\n        edge.to = mapPointsReplace[toId];\r\n      if (edge.from == edge.to)\r\n        continue; //删除长度为零的边\r\n      let sourceId = edge.sourceId();\r\n      if (edgeSourceIds.indexOf(sourceId) > -1) {\r\n        if (prepareRemove.indexOf(edgeMap[sourceId]) < 0)\r\n          prepareRemove.push(edgeMap[sourceId] );\r\n        continue;\r\n      }\r\n      edgeMap[sourceId] = edge;\r\n      edgeSourceIds.push(sourceId);\r\n      target.push(edge);\r\n    }\r\n    return arrAsubB(target, prepareRemove);\r\n  }\r\n\r\n  //返回 二维点 的二维数组\r\n  function parseToCircles(verticesHoles, noSimplify) {\r\n    let vecLst = verticesHoles[0], holeIndices = verticesHoles[1];\r\n    let circles = [], circles2 = [];\r\n    if (holeIndices.length > 0) {\r\n      for (let i = 0; i < holeIndices.length; i++) {\r\n        let arr;\r\n        if (i == 0) {\r\n          arr = vecLst.slice(0, holeIndices[i]);\r\n        } else {\r\n          arr = vecLst.slice(holeIndices[i - 1], holeIndices[i]);\r\n        }\r\n        circles.push(arr);\r\n      }\r\n      circles.push(vecLst.slice(holeIndices[holeIndices.length - 1], vecLst.length));\r\n    } else {\r\n      circles = [vecLst];\r\n    }\r\n    circles = circles.map(circle => removeNearDuplicate(circle) );\r\n    circles.forEach((circle, index) => {\r\n      removeRags(circle);\r\n      if (index == 0) {\r\n        if (isClockwiseSquence(circle)) circle.reverse();\r\n      } else {\r\n        if (!isClockwiseSquence(circle)) circle.reverse();\r\n      }\r\n      if (!noSimplify) {\r\n        circles2.push(simplifyCircle(circle));\r\n      }\r\n    });\r\n    return noSimplify ? circles : circles2;\r\n  }\r\n\r\n  function splitTwoEdges(edges0, edges1) {\r\n    let crossLst = [];\r\n    for (let i = 0; i < edges0.length; i++) {\r\n      let a = edges0[i];\r\n      for (let j = 0; j < edges1.length; j++) {\r\n        let b = edges1[j];\r\n        let cross = lineSegmentCross(a.from, a.to, b.from, b.to);\r\n        if (cross == null) {\r\n          continue;\r\n        }\r\n\r\n        let pt = a.addSplitBy(cross);\r\n        if (pt)\r\n          crossLst.push(pt);\r\n        pt = b.addSplitBy(cross);\r\n        if (pt)\r\n          crossLst.push(pt);\r\n      }\r\n    }\r\n    return crossLst.length > 0;\r\n  }\r\n\r\n  function splitEdgesOfCircles(edges4Circles0, edges4Circles1) {\r\n    let mergeSuccess = false;\r\n    for (let edges0 of edges4Circles0) {\r\n      for (let edges1 of edges4Circles1) {\r\n        let splited = splitTwoEdges(edges0, edges1);\r\n        mergeSuccess = mergeSuccess || splited;\r\n      }\r\n    }\r\n    return mergeSuccess;\r\n  }\r\n\r\n  //精度处理，降低 输入数据精度\r\n  function processPrecision(vLst0, vLst1) {\r\n    if (precision < 0) {\r\n      return;\r\n    }\r\n    let objXyLst = vLst0;\r\n    if (vLst1) {\r\n      objXyLst = vLst0.concat(vLst1);\r\n    }\r\n    for (let i = 0; i < objXyLst.length; i++) {\r\n      let obj = objXyLst[i];\r\n      obj.x = parseFloat(obj.x.toFixed(precision));\r\n      obj.y = parseFloat(obj.y.toFixed(precision));\r\n    }\r\n  }\r\n\r\n  function edges2Points(edges) {\r\n    let points = [];\r\n    if (edges.length > 0) {\r\n      edges.forEach(edge => {\r\n        if (points.indexOf(edge.from) < 0)\r\n          points.push(edge.from);\r\n        if (points.indexOf(edge.to) < 0)\r\n          points.push(edge.to);\r\n      });\r\n    }\r\n    return points;\r\n  }\r\n\r\n  //集合A - 集合B，arrA 会被修改，arrB不改变\r\n  function arrAsubB(arrA, arrB) {\r\n    arrB.forEach(it => {\r\n      let ind = arrA.indexOf(it);\r\n      if (ind >= 0) {\r\n        arrA.splice(ind, 1);\r\n      }\r\n    });\r\n    return arrA;\r\n  }\r\n\r\n  //集合A 与 集合B 的并集，arrA 会被修改，arrB不改变\r\n  function arrAonB(arrA, arrB) {\r\n    let shared = [];\r\n    arrB.forEach(it => {\r\n      let ind = arrA.indexOf(it);\r\n      if (ind >= 0) {\r\n        shared.push(it);\r\n      }\r\n    });\r\n    arrA.splice(0, arrA.length);\r\n    arrA.push(...shared);\r\n    return arrA;\r\n  }\r\n\r\n  function boolPolygons(verticesHolesA, verticesHolesB, boolType) {\r\n    processPrecision(verticesHolesA[0], verticesHolesB[0]);\r\n    let map = mergeVertices(verticesHolesA[0], verticesHolesB[0]);\r\n    let sharedCount = verticesHolesB[0].filter(it => it.shared).length;\r\n    let circlesA = parseToCircles(verticesHolesA);\r\n    let circlesB = parseToCircles(verticesHolesB);\r\n    if (boolType == bool_a_sub_b) {\r\n      circlesB.forEach(circle => circle.reverse())\r\n    }\r\n    let edges4Circles0 = createEdges4Circles(circlesA, 0);\r\n    let edges4Circles1 = createEdges4Circles(circlesB, 1);\r\n    let mergeSuccess = splitEdgesOfCircles(edges4Circles0, edges4Circles1);\r\n\r\n    if (!mergeSuccess && sharedCount < 2) {\r\n      let outlineA = circlesA[0], outlineB = circlesB[0]\r\n      let edgesA = createEdges(outlineA, 0, 0)\r\n      let edgesB = createEdges(outlineB, 1, 0)\r\n      for (let i = 0; i < outlineB.length; i++) {\r\n        let target = isPointInEdges0(outlineB[i], edgesA)\r\n        if (target === POLYGON_OUTSIDE) {\r\n          break\r\n        } else if (target === POLYGON_INSIDE) { //polygon B totally inside polygon A\r\n          if (boolType === bool_union) {\r\n            return [verticesHolesA]\r\n          } else if (boolType === bool_intersection) {\r\n            return [verticesHolesB]\r\n          } else if (boolType === bool_a_sub_b) {\r\n            let holeIndices = verticesHolesA[1]\r\n            holeIndices.push(verticesHolesA[0].length)\r\n            verticesHolesA[0].push(...outlineB)\r\n            let polygonsCreatedByHoles = []\r\n            for (let j = 1; j < circlesB.length; j++) {\r\n              let polygon = [circlesB[j], []]\r\n              polygonsCreatedByHoles.push(polygon)\r\n            }\r\n            return [verticesHolesA].concat(polygonsCreatedByHoles)\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < outlineA.length; i++) {\r\n        let target = isPointInEdges0(outlineA[i], edgesB)\r\n        if (target === POLYGON_OUTSIDE) {\r\n          break\r\n        } else if (target === POLYGON_INSIDE) { //polygon A totally inside polygon B\r\n          if (boolType === bool_union) {\r\n            return [verticesHolesB]\r\n          } else if (boolType === bool_intersection) {\r\n            return [verticesHolesA]\r\n          } else if (boolType === bool_a_sub_b) {\r\n            return []\r\n          }\r\n        }\r\n      }\r\n      return [];\r\n    }\r\n    let splited0 = [], splited1 = [];\r\n    edges4Circles0.forEach(edges4Circle => {\r\n      let arr = [];\r\n      edges4Circle.forEach(edge => arr.push(...processSplitBy(edge)));\r\n      splited0.push(arr);\r\n    });\r\n    edges4Circles1.forEach(edges4Circle => {\r\n      let arr = [];\r\n      edges4Circle.forEach(edge => arr.push(...processSplitBy(edge)));\r\n      splited1.push(arr);\r\n    });\r\n    let outlineAndHolesLst = findCircles(splited0, splited1, circlesA, circlesB, boolType);\r\n    let target = []\r\n    for (let j = 0; j < outlineAndHolesLst.length; j++) {\r\n      let outlineAndHoles = outlineAndHolesLst[j]\r\n      let holeIndices = [], allVertices = [];\r\n      outlineAndHoles.forEach((it, index) => {\r\n        let simplified = simplifyCircle(it)\r\n        outlineAndHoles[index] = simplified\r\n        allVertices = allVertices.concat(simplified)\r\n      });\r\n      if (outlineAndHoles.length > 1) {\r\n        let curHoleIndex = 0;\r\n        for (let i = 1; i < outlineAndHoles.length; i++) {\r\n          let len = outlineAndHoles[i - 1].length;\r\n          curHoleIndex += len;\r\n          holeIndices.push(curHoleIndex);\r\n        }\r\n      }\r\n      target.push([allVertices, holeIndices])\r\n    }\r\n    return target;\r\n  }\r\n\r\n  //vertices0 vertices1 要求都是返回数据格式的顶点序列\r\n  //可能返回一个带孔图形，例如：已知合并后的最外轮廓的逆时钟序列（v0, v1, v3, v4, v5)\r\n  // 孔1的顺时钟序列（m0, m1, m2), 孔2的顺时钟序列（n0, n1, n2, n3)\r\n  // 最终返回 二维数组 [[v0, v1, v3, v4, v5, m0, m1, m2, n0, n1, n2, n3], [6, 9]]\r\n  function mergePolygons(verticesHoles0, verticesHoles1) {\r\n    let target = boolPolygons(verticesHoles0, verticesHoles1, bool_union)\r\n    return target.length > 0 ? target[0] : target\r\n  }\r\n\r\n//-------------------拆分相关-------------------\r\n  let Polygon = function (edges, isClockwise) {//不带孔多边形\r\n    this.getPoints = function () {\r\n      let points = [];\r\n      for (let edge of this.edges) {\r\n        points.push(edge.from);\r\n      }\r\n      return points;\r\n    };\r\n    this.contain = function (point) {\r\n      return isInConvexPolygons(point, convexPolygons);\r\n    };\r\n    this.containEdges = function(edges) {\r\n      let points = edges2Points(edges);\r\n      for (let point of points) {\r\n        if (!this.contain(point)) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n\r\n    this.edges = edges;\r\n    if (isClockwise != undefined) {\r\n      this.isClockwise = isClockwise;\r\n    } else {\r\n      this.isClockwise = isClockwiseSquence(this.getPoints());\r\n    }\r\n    let convexPolygons = [];\r\n    concavToConvex(this.getPoints(), convexPolygons);\r\n  };\r\n\r\n  //两条直线的四点共线时，求交点\r\n  function specialSegmentCross(p0, p1, q0, q1) {\r\n    let target = [];\r\n    let flag0 = getPointOnVectorSide(p0, p1, q0);\r\n    let flag1 = getPointOnVectorSide(p0, p1, q1);\r\n    let arr = [ON_LINE_OUT, ON_LINE_IN];\r\n    if (arr.indexOf(flag0) < 0 || arr.indexOf(flag1) < 0) {\r\n      return target;\r\n    }\r\n    let pBox = findBox2([p0, p1]);\r\n    if (pBox.contain(q1) ) {\r\n      target.push(q1);\r\n    }\r\n    if (pBox.contain(q0) ) {\r\n      target.push(q0);\r\n    }\r\n    let qBox = findBox2([q0, q1]);\r\n    if (qBox.contain(p1)) {\r\n      target.push(p1);\r\n    }\r\n    if (qBox.contain(p0)) {\r\n      target.push(p0);\r\n    }\r\n    return target;\r\n  }\r\n\r\n  //noSlice = true, latestEdge暂时不被拆分\r\n  function sliceCircleEdges(segments, latestEdge, crossPoints, noSlice) {\r\n    let beSliceObjs = [];\r\n    let needUpdate = false;\r\n    for (let edge of segments) {\r\n      if (edge.to === latestEdge.from) {\r\n        continue;\r\n      }\r\n      let cross = lineSegmentCross(edge.from, edge.to, latestEdge.from, latestEdge.to);\r\n      if (cross == null) {\r\n        continue;\r\n      }\r\n      needUpdate = true;\r\n      crossPoints.push(cross);\r\n      let pt = edge.addSplitBy(cross);\r\n      if (pt)\r\n        beSliceObjs.push({originEdge: edge, slicePoint: pt});\r\n      latestEdge.addSplitBy(cross);\r\n    }\r\n\r\n    return {\r\n      latestEdges: noSlice ? [latestEdge] : processSplitBy(latestEdge),\r\n      beSlice: beSliceObjs,\r\n      needUpdate: needUpdate\r\n    };\r\n  }\r\n\r\n  function formatEdges2(edges2) {\r\n    let allPoints = [], indices = [];\r\n    let sum = 0;\r\n    edges2.forEach(edges => {\r\n      edges.forEach(edge => allPoints.push(edge.from));\r\n      sum += edges.length;\r\n      indices.push(sum);\r\n    });\r\n    indices.pop();\r\n    return [allPoints, indices];\r\n  }\r\n\r\n  function getCrossPointsBySliceEdges(sliceEdges) {\r\n    let crossArr = [];\r\n    if (sliceEdges.length < 2) {\r\n      return crossArr;\r\n    }\r\n    for (let i = 0; i < sliceEdges.length - 1; i++) {\r\n      let beSlicing = sliceEdges[i];\r\n      for (let j = i + 1; j < sliceEdges.length; j++) {\r\n        let edge = sliceEdges[j];\r\n        if (beSlicing.to === edge.from)\r\n          continue;\r\n        let cross = lineSegmentCross(beSlicing.from, beSlicing.to, edge.from, edge.to);\r\n        // let arr = [];   //[beSlicing.from, beSlicing.to, edge.from, edge.to];\r\n        if (cross) {\r\n          crossArr.push(cross);\r\n          beSlicing.addSplitBy(cross);\r\n          edge.addSplitBy(cross);\r\n        }\r\n      }\r\n    }\r\n    return crossArr;\r\n  }\r\n\r\n  function splitSliceEdges(sliceEdges, crossPoints) {\r\n    let points = getCrossPointsBySliceEdges(sliceEdges);\r\n    crossPoints.push(...points);\r\n    let splitted = [];\r\n    sliceEdges.forEach(edge => splitted.push(...processSplitBy(edge)));\r\n    return splitted;\r\n  }\r\n\r\n  //定义了拆分图形的选边策略，优先从edges0中选下一条边，在从edges1中选当前边位于不同孔的边\r\n  //最后才选择和当前边同孔的边，是贪心策略，最后找到边集可能包含连体孔，必须过滤部分属于连体孔的边\r\n  //连体孔的定义在findUsefulEdges的注释里\r\n  function findNextEdge4Slicing(curEdge, edges0, edges1) {\r\n    let first = edges0, second = edges1;\r\n    for (let i = 0; i < first.length; i++) {\r\n      let edge = first[i];\r\n      if (edge.from === curEdge.to && curEdge.reverseEdge() != edge) {\r\n        return edge;\r\n      }\r\n    }\r\n    let candidate = null;\r\n    for (let i = 0; i < second.length; i++) {\r\n      let edge = second[i];\r\n      if (edge.from === curEdge.to) {\r\n        if (edge.holeId != curEdge.holeId) {\r\n          return edge;\r\n        }\r\n        candidate = edge;\r\n      }\r\n    }\r\n    return candidate;\r\n  }\r\n\r\n  //寻找有公共顶点的孔，比如孔1，孔2，孔3 之间有公共顶点， 孔4和孔5有公共顶点\r\n  function findSharePointHolesLst(circles) {\r\n    let target = [];\r\n    for (let i = 0; i < circles.length; i++) {\r\n      let circleI = circles[i];\r\n      for (let j = i + 1; j < circles.length; j++) {\r\n        let circleJ = circles[j];\r\n        let count = mergeVertices(circleI, circleJ);\r\n        if (count > 0) {\r\n          let subLst = target.filter(arr => arr.indexOf(i) > -1 || arr.indexOf(j) > -1);\r\n          let exists = subLst.length > 0;\r\n          let sub = [];\r\n          if (subLst.length > 0) {\r\n            sub = subLst[0];\r\n          }\r\n          if (sub.indexOf(i) < 0)\r\n            sub.push(i);\r\n          if (sub.indexOf(j) < 0)\r\n            sub.push(j);\r\n          if (!exists) {\r\n            target.push(sub);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return target;\r\n  }\r\n\r\n  //从拆分边edges中，寻找一个可用的拆分线集合，有多个情况\r\n  //简称 （孔0：最外轮廓，孔1：最外轮廓的第一个孔，..., 孔n：最外轮廓的第 n 个孔\r\n  //1. 拆分边集合在 被拆分多边形内部相互自交\r\n  //2. 拆分线从 孔0 穿入， 然后又从 孔0 穿出\r\n  //3. 拆分线从 孔n (n>0) 穿出， 然后又穿入 孔n (n>0) 中\r\n  //4. 拆分线从 孔0 出发， 然后又穿入 孔n (n>0) 中，并且孔n 和 孔0有公共顶点，被拆分图形是半环, sharePointHolesLst派上用场\r\n  //5. 拆分线从 孔n (n>0) 穿出， 然后又穿入孔m (m>0), 并且孔n 和 孔m是连在一起的，sharePointHolesLst派上用场\r\n  //孔n 和 孔m是连在一起指，孔n 和 孔m有公共顶点或者 孔n 和 孔m虽然没有公共顶点，但它们是间接相连，比如孔n和孔h有公共顶点，孔h和孔m又有公共顶点，则孔m, h, n都是连为一体的\r\n  function findUsefulEdges(edges, sharePointHolesLst) {\r\n    let fromStack = [], fromIndices = [], fromPoints = [];\r\n    for (let i = 0; i < edges.length; i++) {\r\n      let edge = edges[i];\r\n      if (edge.from.onCircle != undefined) {\r\n        fromStack.push(edge.from.onCircle);\r\n        fromIndices.push(i);\r\n      }\r\n      if (edge.to.onCircle != undefined) {\r\n        let toHoleId = edge.to.onCircle;\r\n        let index = fromStack.indexOf(toHoleId);\r\n        let lst = sharePointHolesLst.filter(arr => arr.indexOf(toHoleId) > -1);\r\n        if (index < 0 && lst.length > 0 && fromStack.length > 0) {\r\n          let sharePointHoles = lst[0];\r\n          for (let j = 0; j < sharePointHoles.length; j++) {//情况4、5\r\n            let holeId = sharePointHoles[j];\r\n            index = fromStack.indexOf(holeId);\r\n            if (index >= 0)\r\n              break;\r\n          }\r\n        }\r\n        if (index >= 0) {\r\n          return edges.slice(fromIndices[index], i + 1);\r\n        }\r\n      }\r\n\r\n      fromPoints.push(edge.from);\r\n      let ind = fromPoints.indexOf(edge.to);\r\n      if (ind >= 0) { //拆分线自交, 情况1\r\n        return edges.slice(ind, i + 1);\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  function createHolesArr(edges4Circles) {\r\n    let target = [];\r\n    for (let i = 0; i < edges4Circles.length; i++) {\r\n      let hole = edges4Circles[i];\r\n      target[i] = {len: hole.length, used: 0, holeId: i};\r\n    }\r\n    return target;\r\n  }\r\n  function changeHolesArr(arr, edge) {\r\n    if (edge.belong > -1) {\r\n      arr[edge.holeId].used++;\r\n    }\r\n  }\r\n\r\n  //sliceEdges 将被拆分多边形一分为二 立即返回\r\n  //由于整个拆分，合并带孔图形的都有这样的约定，最外轮廓的顶点数组必须是逆时针序列，孔的顶点数组必须是顺时针序列\r\n  //拆分与合并过程出现的新孔必然也是顺时针序列，非孔图形必然是逆时针序列\r\n  //拆分出现的新孔时，最外轮廓必然还没有被破坏\r\n  function sliceOutOne(edges4CirclesFlatted, sliceEdges, firstEdge, edges4Circles) {\r\n    let edges = [firstEdge], involvedHoles = [];\r\n    let holesTracks = createHolesArr(edges4Circles);\r\n    changeHolesArr(holesTracks, firstEdge);\r\n    let nextEdge = findNextEdge4Slicing(firstEdge, sliceEdges, edges4CirclesFlatted);\r\n    while (nextEdge != null) {\r\n      if (nextEdge.holeId > -1 && involvedHoles.indexOf(nextEdge.holeId) < 0)\r\n        involvedHoles.push(nextEdge.holeId);\r\n      changeHolesArr(holesTracks, nextEdge);\r\n      if (edges.indexOf(nextEdge) > -1) {//避免死循环\r\n        console.log(\"error happen in sliceOutOne\");\r\n        return {edges: edges, holes: involvedHoles, error:true, nextEdge: nextEdge};\r\n      }\r\n      edges.push(nextEdge);\r\n      if (nextEdge.to == firstEdge.from)\r\n        break;\r\n      nextEdge = findNextEdge4Slicing(nextEdge, sliceEdges, edges4CirclesFlatted);\r\n    }\r\n    let arr = holesTracks.filter(it => it.len == it.used);\r\n    if (arr.length > 0) {//拆分出的边集合如果包含一个孔的所有边，那么需要从集合中删除所有属于该孔的边\r\n      let needlessHoles = arr.map(it => it.holeId);\r\n      edges = edges.filter(edge => needlessHoles.indexOf(edge.holeId) < 0);\r\n      arrAsubB(involvedHoles, needlessHoles);\r\n    }\r\n    return {edges: edges, holes: involvedHoles};\r\n  }\r\n\r\n\r\n  //如果sliceEdges 不是环，则被切多边形一分为二，返回边的三维数组\r\n  function slicePolygonWithEdges(edges4Circles, sliceEdges) {\r\n    let remainedHoleIndices = []; //保存没有被破坏的孔 的索引\r\n    let edges4CirclesFlatted = [];\r\n    edges4Circles.forEach((it, index) => {\r\n      edges4CirclesFlatted.push(...it);\r\n      if (index > 0) {\r\n        remainedHoleIndices.push(index);\r\n      }\r\n    });\r\n    let sliceEdgesPair = [];\r\n    sliceEdges.forEach(it => sliceEdgesPair.push(it.reverseEdge()));\r\n    sliceEdgesPair = sliceEdges.concat(sliceEdgesPair);\r\n    let newPolygonsEdges = [];\r\n    while (sliceEdgesPair.length > 0) {\r\n      let firstEdge = sliceEdgesPair[0];\r\n      let obj = sliceOutOne(edges4CirclesFlatted, sliceEdgesPair, firstEdge, edges4Circles);\r\n      if (obj.error)\r\n        return [edges4Circles];\r\n      newPolygonsEdges.push(obj.edges);\r\n      arrAsubB(sliceEdgesPair, obj.edges);\r\n      arrAsubB(remainedHoleIndices, obj.holes);\r\n    }\r\n\r\n    let holesExists = [], groups = [];\r\n    remainedHoleIndices.forEach(index => holesExists.push(edges4Circles[index]) );\r\n    let newPolygons = [], newHolePolygon = null;\r\n    newPolygonsEdges.forEach(edges => {\r\n      let polygon = new Polygon(edges);\r\n      if (polygon.isClockwise) {  //因为对slicePolygon输入参数约定限制，顺时针序列必然是新孔，\r\n        // findUsefulEdges保证了一次slicePolygonWithEdges调用，最多一个新孔出现\r\n        if (newHolePolygon) console.log(\"warning, new hole polygon already exists\");\r\n        newHolePolygon = polygon;\r\n      } else {\r\n        newPolygons.push(polygon);\r\n      }\r\n    });\r\n    for (let i = 0; i < newPolygons.length; i++) {\r\n      let polygon = newPolygons[i];\r\n      groups.push([polygon.edges]);\r\n      for (let j = 0; j < holesExists.length; j++) {\r\n        let point = holesExists[j][0].getMidPoint();\r\n        if (polygon.contain(point)) {\r\n          groups[i].push(holesExists[j]);\r\n        }\r\n      }\r\n      holesExists = holesExists.filter(it => groups[i].indexOf(it) < 0);\r\n    }\r\n    if (newHolePolygon) { //拆分线还没有破坏最外层轮廓\r\n      let outline = [edges4Circles[0] ];\r\n      holesExists.forEach(edges => outline.push(edges) );\r\n      outline.push(newHolePolygon.edges);\r\n      return [outline].concat(groups);\r\n    }\r\n    return groups;\r\n  }\r\n\r\n  function getHoleId(pointsCircles, point) {\r\n    for (let i = 0; i < pointsCircles.length; i++) {\r\n      let circle = pointsCircles[i];\r\n      if (circle.indexOf(point) > -1) {\r\n        return i;\r\n      }\r\n    }\r\n    return -2;\r\n  }\r\n\r\n  function edgesLst2PointsCircles(edges4Circles) {\r\n    let pointsCircles = [];\r\n    edges4Circles.forEach( (edges, index) => {\r\n      pointsCircles.push(edges2Points(edges) );\r\n      edges.forEach(edge => edge.holeId = index);\r\n    } );\r\n    return pointsCircles;\r\n  }\r\n\r\n  function slicePolygonRecursively(edges4Circles, sliceEdges) {\r\n    let pointsCircles = edgesLst2PointsCircles(edges4Circles);\r\n    //半环：孔与最外轮廓 或者 孔与孔之间有公共点 的特殊带孔图形\r\n    let sharePointHolesLst = findSharePointHolesLst(pointsCircles); //仅针对半环\r\n    if (sharePointHolesLst.length > 0) {\r\n      let edges4CirclesOld = edges4Circles.slice();\r\n      edges4Circles = createEdges4Circles(pointsCircles, 20);\r\n      //保留边的belong属性，便于以后区分多边形中哪些边是源于被拆分图形，哪些边是源于拆分线\r\n      for (let i = 0; i < edges4Circles.length; i++) {\r\n        let edges = edges4Circles[i];\r\n        for (let j = 0; j < edges.length; j++) {\r\n          edges[j].belong = edges4CirclesOld[i][j].belong;\r\n        }\r\n      }\r\n    }\r\n    //初始化 组成拆分边的端点的onCircle属性\r\n    let slicePoints = edges2Points(sliceEdges);\r\n    for (let point of slicePoints) {\r\n      point.onCircle = undefined;\r\n      let holeId = getHoleId(pointsCircles, point);\r\n      if (holeId >= 0)\r\n        point.onCircle = holeId;\r\n    }\r\n    let polygons2 = [];\r\n    pointsCircles.forEach(circle => {\r\n      let polygons = [];\r\n      concavToConvex(circle, polygons);\r\n      polygons2.push(polygons);\r\n    });\r\n    //过滤掉 在多边形外的拆分边\r\n    let sliceEdgesCopy = sliceEdges.filter(it => isPointInPolygonWithHoles(it.getMidPoint(), polygons2));\r\n\r\n    let usingEdges = findUsefulEdges(sliceEdgesCopy, sharePointHolesLst);\r\n    if (usingEdges.length == 0)\r\n      return [edges4Circles];\r\n    let edgesLst = slicePolygonWithEdges(edges4Circles, usingEdges);\r\n\r\n    sliceEdgesCopy = arrAsubB(sliceEdges.slice(), usingEdges);\r\n    if (sliceEdgesCopy.length == 0) {\r\n      return edgesLst;\r\n    }\r\n    let target = [];\r\n    for (let edges2 of edgesLst) {\r\n      let edges3 = slicePolygonRecursively(edges2, sliceEdgesCopy);\r\n      target = target.concat(edges3);\r\n    }\r\n    return target;\r\n  }\r\n\r\n  function getArea(contour) {\r\n    let n = contour.length;\r\n    let a = 0.0;\r\n\r\n    for (let p = n - 1, q = 0; q < n; p = q++) {\r\n\r\n      a += contour[p].x * contour[q].y - contour[q].x * contour[p].y;\r\n\r\n    }\r\n\r\n    return a * 0.5;\r\n  }\r\n\r\n  function getPolygonArea(polygon) {\r\n    let contour = polygon[0], holeIndices = polygon[1], holesVectices = [], vertices = contour;\r\n    if (holeIndices.length > 0) {\r\n      for (let i = 0; i < holeIndices.length; i++) {\r\n        if (i == 0) {\r\n          vertices = contour.slice(0, holeIndices[i]);\r\n        } else {\r\n          let arr = contour.slice(holeIndices[i - 1], holeIndices[i]);\r\n          holesVectices.push(arr);\r\n        }\r\n      }\r\n      holesVectices.push(contour.slice(holeIndices[holeIndices.length - 1], contour.length));\r\n    }\r\n    let area = Math.abs(getArea(vertices));\r\n    holesVectices.forEach(arr => area -= Math.abs(getArea(arr)));\r\n    return area;\r\n  }\r\n  function getPolygonsArea(polygons) {\r\n    let area = 0;\r\n    polygons.forEach(it => area += getPolygonArea(it));\r\n    return area;\r\n  }\r\n  //返回完全由拆分线组成的图形\r\n  function getSliceLinesPolygons(slicePoints) {\r\n    let pts = slicePoints.map(p => {\r\n      return {x: p.x, y: p.y}\r\n    });\r\n    let box = findBox2(pts);\r\n    box.scale(2);\r\n    let v0 = box.min, v1 = {x: box.max.x, y: box.min.y};\r\n    let v2 = box.max, v3 = {x: box.min.x, y: box.max.y};\r\n    //注意v0, v1, v2, v3 是逆时针序列\r\n    let edges3 = slicePolygon([[v0, v1, v2, v3], []], slicePoints, true);\r\n    let polygonsFromSliceLines = [];\r\n    for (let j = 0; j < edges3.length; j++) {\r\n      let edges2 = edges3[j];\r\n      let valid = true;\r\n      for (let i = 0; i < edges2.length; i++) {\r\n        let edges = edges2[i];\r\n        for (let h = 0; h < edges.length; h++) {\r\n          let edge = edges[h];\r\n          if (edge.belong >= 0) {\r\n            valid = false;\r\n            break;\r\n          }\r\n        }\r\n        if (!valid) {\r\n          break;\r\n        }\r\n      }\r\n      if (valid) {\r\n        polygonsFromSliceLines.push(formatEdges2(edges2));\r\n      }\r\n    }\r\n    return polygonsFromSliceLines;\r\n  }\r\n  //拆分二维面 verticesHoles, 最外轮廓必须是逆时钟序列，孔的顶点集必须是顺时钟序列\r\n  function slicePolygon(verticesHoles, slicePoints, noFormat) {\r\n    let vertices0 = verticesHoles[0];\r\n    mergeVertices(vertices0, slicePoints);\r\n    let circles = parseToCircles(verticesHoles);\r\n    let edges4Circles = createEdges4Circles(circles, 0);\r\n\r\n    let slicedEdges0 = createEdges(slicePoints, -1, -1);\r\n    if (!noFormat)\r\n      slicedEdges0.pop();\r\n\r\n    let slicedEdges = [];\r\n    //过滤掉 和原有图形的轮廓 重合的拆分边\r\n    slicedEdges0.forEach(edge0 => {\r\n      for (let i = 0; i < edges4Circles.length; i++) {\r\n        for (let j = 0; j < edges4Circles[i].length; j++) {\r\n          let edge = edges4Circles[i][j];\r\n          let arr = edge0.subEdge(edge), len = arr.length;\r\n          if (len == 0 || len == 2 || arr[0] !== edge0) {\r\n            slicedEdges.push(...arr);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      slicedEdges.push(edge0);\r\n    });\r\n\r\n    let crossPoints = [], segments = [];\r\n    for (let i = 0; i < slicedEdges.length; i++) {  //每个拆分线段依次与被拆图形的边做\r\n      let edgeFromSlice = slicedEdges[i];\r\n      for (let j = 0; j < edges4Circles.length; j++) {\r\n        let edges = edges4Circles[j];\r\n        let points = [];\r\n        let obj = sliceCircleEdges(edges, edgeFromSlice, points, true);//标记交点为拆分边做准备\r\n        for (let sliceObj of obj.beSlice) {\r\n          let beSliceEdge = sliceObj.originEdge, slicePoint = sliceObj.slicePoint;\r\n          let index = edges.indexOf(beSliceEdge);\r\n          let sliced = beSliceEdge.sliceBy(slicePoint); //被拆图形的边，这里真正被拆分\r\n          edges.splice(index, 1, ...sliced);\r\n        }\r\n        crossPoints.push(...points);\r\n      }\r\n      segments.push(...processSplitBy(edgeFromSlice));  //拆分边 在 这里真正被拆分\r\n    }\r\n    //做若干拆分线段之间的相交与互相切割处理\r\n    let cross4Sliced = [];\r\n    segments = splitSliceEdges(segments, cross4Sliced);\r\n    segments = mergeEdges(segments);\r\n    let edges3 = slicePolygonRecursively(edges4Circles, segments);\r\n\r\n    if (noFormat) {\r\n      return edges3;\r\n    }\r\n    let formattedLst = [];\r\n    edges3.forEach(edges2 => formattedLst.push(formatEdges2(edges2)));\r\n    return formattedLst;\r\n  }\r\n\r\n  function slicePolygons(verticesHolesLst, slicePoints) {\r\n    let target = [];\r\n    for (let i = 0; i < verticesHolesLst.length; i++) {\r\n      let verticesHoles = verticesHolesLst[i];\r\n      let sliced = slicePolygon(verticesHoles, slicePoints);\r\n      target.push(...sliced);\r\n    }\r\n    return target;\r\n  }\r\n\r\n  let that = {\r\n    setPrecision(num) {\r\n      precision = num;\r\n      minimum = Math.pow(0.1, num);\r\n    },\r\n    arrAsubB: arrAsubB,\r\n    triangulate(arr) {//不支持带孔图形的三角化\r\n      let lst = [];\r\n      for (let i = 0; i < arr.length; i += 2) {\r\n        lst.push({x: arr[i], y: arr[i + 1], id: ~~(i / 2)});\r\n      }\r\n      let triangles = getTriangles4ConcavPolygon(lst);\r\n      let target = [];\r\n      for (let i = 0; i < triangles.length; i++) {\r\n        let triangle = triangles[i];\r\n        if (triangle.isClockwise()) {\r\n          triangle.changeSequence();\r\n        }\r\n        target = target.concat(triangle.getIndices());\r\n      }\r\n      return target;\r\n    },\r\n    lineSegmentCross: lineSegmentCross,\r\n    equals: equals,\r\n    concavToConvex: concavToConvex,\r\n    isPointInPolygonWithHoles: isPointInPolygonWithHoles,\r\n    getAngleWithX_axis: getAngleWithX_axis,\r\n    mergePolygons: mergePolygons,\r\n    polygonAsubB(verticesHolesA, verticesHolesB) {\r\n      return boolPolygons(verticesHolesA, verticesHolesB, bool_a_sub_b)\r\n    },\r\n    polygonAintersectB(verticesHolesA, verticesHolesB) {\r\n      return boolPolygons(verticesHolesA, verticesHolesB, bool_intersection)\r\n    },\r\n    slicePolygon: slicePolygon,\r\n    //获取完全由拆分线形成的图形\r\n    getSliceLinesPolygons: getSliceLinesPolygons,\r\n    getPolygonsArea: getPolygonsArea,\r\n  };\r\n  return that;\r\n};\r\n\r\nlet TriCut = TriangleCut();\r\nexport default TriCut;\r\n\r\n","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7a4817ba&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {Vector3} from 'three'\r\nimport {makeCanvasTextSprite, generateTextCanvas, generateSpriteBox} from \"../util/StaticMethods\"\r\n// import Config from \"../configurable/Config\";\r\n\r\nlet TextMark = function (txt, option) {\r\n  let extraWidth = 18, extraHeight= 12;\r\n  let text = txt;\r\n  let oldPos = new Vector3();\r\n  let sprite;\r\n  if (txt != null) {\r\n    sprite = makeCanvasTextSprite(generateTextCanvas('新增标注', option));\r\n  }\r\n  let textHeight = 0;\r\n  let spriteBox;\r\n  let opt = option || {};\r\n\r\n  function renewSpriteBox() {\r\n    if (spriteBox && spriteBox.parent)\r\n      spriteBox.parent.remove(spriteBox);\r\n    if (!sprite.parent)\r\n      return;\r\n    let w = sprite.userData.poi.w + extraWidth, h = sprite.userData.poi.h + extraHeight;\r\n    spriteBox = generateSpriteBox(w, h, 4, '#1730ff');\r\n    spriteBox.visible = false;\r\n    sprite.parent.add(spriteBox);\r\n    spriteBox.position.copy(sprite.position);\r\n  }\r\n//{size: 40, textColor: '#000', outlineColor: '#fff'}\r\n  let that = {\r\n    isMarker: true,\r\n    getOption() {\r\n      return {\r\n        size: opt.size || 40,\r\n        textColor: opt.textColor || '#000000',\r\n        outlineColor: opt.outlineColor || '#ffffff',\r\n      }\r\n    },\r\n    text() {\r\n      return text;\r\n    },\r\n    getOldPos() {\r\n      return oldPos;\r\n    },\r\n    updatePosition() {\r\n      oldPos.copy(sprite.position);\r\n    },\r\n    move(vector) {\r\n      let pos = oldPos.clone().add(vector);\r\n      sprite.position.copy(pos);\r\n      spriteBox.position.copy(pos);\r\n    },\r\n    setPosition(pos) {\r\n      sprite.position.copy(pos);\r\n      if (spriteBox)\r\n        spriteBox.position.copy(pos);\r\n      oldPos.copy(pos);\r\n    },\r\n    updateText(name, option, published) {\r\n      if (option) {\r\n        if (option.size != null)\r\n          opt.size = option.size;\r\n        if (option.textColor != null)\r\n          opt.textColor = option.textColor;\r\n        if (option.outlineColor != null)\r\n          opt.outlineColor = option.outlineColor;\r\n      }\r\n\r\n      let parent;\r\n      if (sprite) {\r\n        parent = sprite.parent;\r\n        if (parent) {\r\n          parent.remove(sprite);\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n      if (name != null) {\r\n        let canvas = generateTextCanvas(name, that.getOption() );\r\n        let textSprite = makeCanvasTextSprite(canvas);\r\n        if (parent) {\r\n          parent.add(textSprite);\r\n          textSprite.position.copy(sprite.position);\r\n        }\r\n        sprite = textSprite;\r\n        text = name;\r\n        sprite.holder = that;\r\n        if (!published)\r\n          renewSpriteBox();\r\n        // textSprite.visible = Config.ui.modelTextVisible;\r\n      }\r\n    },\r\n    sprite() {\r\n      return sprite;\r\n    },\r\n    getTextHeight() {\r\n      return textHeight;\r\n    },\r\n    setTextHeight(val) {\r\n      textHeight = val.toFixed(2)*1;\r\n    },\r\n    select() {\r\n      if (spriteBox)\r\n        spriteBox.visible = true;\r\n    },\r\n    unselect() {\r\n      if (spriteBox)\r\n        spriteBox.visible = false;\r\n    },\r\n    changeParent(parent) {\r\n      parent.add(sprite);\r\n      if (spriteBox)\r\n        parent.add(spriteBox);\r\n    },\r\n    attach(layer) {\r\n      layer.add(sprite);\r\n      renewSpriteBox();\r\n    },\r\n    detach() {\r\n      if (sprite.parent) {\r\n        sprite.parent.remove(sprite);\r\n        spriteBox.parent.remove(spriteBox);\r\n      }\r\n    },\r\n    serialize() {\r\n      let target = {\r\n        isMarker: true,\r\n        name: text,\r\n        th: textHeight,\r\n        pos: sprite.position.toArrayFixed(2)\r\n      };\r\n      Object.assign(target, opt);\r\n      return target;\r\n    },\r\n    deserialize(obj, published) {\r\n      that.updateText(obj.name, obj, published);\r\n      let pos = new Vector3().fromArray(obj.pos);\r\n      if (published)\r\n        pos.z = obj.th;\r\n      that.setPosition(pos);\r\n      textHeight = obj.th;\r\n      return that;\r\n    },\r\n  }\r\n  if (sprite)\r\n    sprite.holder = that;\r\n  return that;\r\n}\r\n\r\nexport default TextMark;\r\n","import {Vector2} from \"three\"\r\nimport Layers from \"../Layers\";\r\nimport {getStartEndIcon, getMinNum, getPathIndicator, scalePathIndicator} from \"../util/StaticMethods\"\r\nimport PathPoint from \"../model/PathPoint\";\r\nimport Config from \"../configurable/Config\";\r\nimport browser from \"../util/Browser\";\r\nimport * as Consts from \"../consts/Constants\"\r\nimport PublishedScene from \"../PublishedScene\";\r\nimport fr from \"../../../components/element/locale/lang/fr\";\r\n\r\nlet NavigatorTool = function (sceneHolder) {\r\n  let eventRemainMeters = {type: 'remain meters', meters: 0};\r\n  let eventRefindPath = {type: 're-find path'};\r\n  let eventRecaculatePath = {type: 'recaculate path', count: 0};\r\n  //地图选点事件\r\n  let eventMapPosSelect = {type: 'map pos select', start: '我的位置', end: ''};\r\n  //地图建筑选中事件\r\n  let eventBuildingSelected = {type: 'building selected', modelName: '', posObj: null, destination: false};\r\n\r\n  let pathPoints, pathPointsOnFloor, pathPointsOnBuilding, pathEdges;\r\n  let editingLayer = Layers.editingLayer;\r\n  let startPointObj = getStartEndIcon( true), endPointObj = getStartEndIcon(false);\r\n  let startPoint, endPoint;\r\n  let pathIndicator;\r\n  let span = 2;\r\n  let thresh = span * span;\r\n  let buildings = [];\r\n  let enablePathFinding = true;\r\n  let startPosAdjust = false, endPosAdjust = true;\r\n  let needClearAbstractEdges = false;\r\n  let findPathResult;\r\n  let STATUS_NAVIGATING = 1, STATUS_NAVIGATING_END = 2, STATUS_NAVIGATE_FREE = 0;\r\n  let status = STATUS_NAVIGATE_FREE;\r\n  let pathRefreshInterval = 3, curPathRefreshCount = 0;\r\n  let preSelectedMesh;\r\n\r\n  let settingStartMarker, settingEndMarker;\r\n  let touchEnd = new Vector2();\r\n\r\n  function addAbstractEdge(from, to) {\r\n    from.nearPlaces.push({to: to, cost: from.pos.distanceTo(to.pos), abstract:true });\r\n    if (!from.abstract) {\r\n      needClearAbstractEdges = true;\r\n    }\r\n  }\r\n\r\n  function clearExtraEdges() {\r\n    if (needClearAbstractEdges) {\r\n      for (let pathPoint of pathPoints) {\r\n        pathPoint.nearPlaces = pathPoint.nearPlaces.filter(it => !it.abstract);\r\n      }\r\n      needClearAbstractEdges = false;\r\n    }\r\n  }\r\n\r\n  function getPathPointsInArr(vector3, arr, len) {\r\n    if (arr.length <= len) {\r\n      return arr;\r\n    }\r\n    let distances = [], target = [];\r\n    for (let pathPoint of arr) {\r\n      let distanceSq = pathPoint.pos.distanceToSquared(vector3);\r\n      distances.push(distanceSq);\r\n    }\r\n    let sorted = distances.slice().sort((a, b) => a - b);\r\n    for (let distance of sorted) {\r\n      let index = distances.indexOf(distance);\r\n      target.push(arr[index]);\r\n      if (target.length == len) {\r\n        break;\r\n      }\r\n    }\r\n    return target;\r\n  }\r\n  //在路径节点数组 arr 中，寻找和vector3最接近的一个路径点\r\n  //vector3 是终点 ？isEnd = true : isEnd = false\r\n  function getPathPointInArr(vector3, arr, noSpan, isEnd) {\r\n    let min = Infinity, target = null;\r\n    for (let pathPoint of arr) {\r\n      if (pathPoint.nearPlaces.length == 0 && !isEnd) {\r\n        continue; //vector3 是起点，当前点出度为零，故跳过\r\n      }\r\n      if (pathPoint.dstNum == 0 && isEnd) {\r\n        continue; //vector3 是终点，当前点入度为零，故跳过\r\n      }\r\n      let distanceSq = pathPoint.pos.distanceToSquared(vector3);\r\n      if ( (noSpan || distanceSq <= thresh) && min > distanceSq) {\r\n        min = distanceSq;\r\n        target = pathPoint;\r\n      }\r\n    }\r\n    return target;\r\n  }\r\n\r\n  function buildPathFindingGraph() {\r\n    if (!Config.ui.isPublished()) {\r\n      Layers.initPreviewPath();\r\n    }\r\n    pathEdges = Layers.getPreviewPath().pathEdges;\r\n    pathPoints = Layers.getPreviewPath().pathPoints;\r\n    for (let  pathPoint of pathPoints) {\r\n      pathPoint.dstNum = 0;\r\n    }\r\n    for (let  pathPoint of pathPoints) {\r\n      pathPoint.nearPlaces = [];\r\n      pathPoint.toPlaces = []; //{points:[], cost: 10}\r\n      for (let edge of pathEdges) {\r\n        let dir = edge.pathDirection;\r\n        if ( pathPoint == edge.from) {\r\n          if (dir == Consts.pathDirFromTo || dir == Consts.pathDirBoth) {\r\n            pathPoint.nearPlaces.push({to: edge.to, cost: edge.cost});\r\n            edge.to.dstNum++;\r\n          }\r\n        } else if ( pathPoint == edge.to) {\r\n          if (dir == Consts.pathDirToFrom || dir == Consts.pathDirBoth) {\r\n            pathPoint.nearPlaces.push({to: edge.from, cost: edge.cost});\r\n            edge.from.dstNum++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    pathPointsOnFloor = pathPoints.filter(it => it.onFloor);\r\n    pathPointsOnBuilding = pathPoints.filter(it => !it.onFloor);\r\n  }\r\n\r\n  function findPathSegment(pathPoint0, pathPoint1) {\r\n    for (let edge of pathEdges) {\r\n      let to = edge.to, from = edge.from;\r\n      if ((pathPoint0 == to && pathPoint1 == from) || (pathPoint1 == to && pathPoint0 == from)) {\r\n        return edge;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  //迪杰斯特拉最短路径寻路\r\n  function findPath(from, to) {\r\n    if (from == null || to == null) {\r\n      console.log(\"null 无效输入\");\r\n      return null;\r\n    }\r\n    if (from === to) {\r\n      // console.log(\"自身到自身的无效输入\");\r\n      return null;\r\n    }\r\n    let finded = [from];\r\n    from.toPlaces = [];\r\n    let nearPlaces = from.nearPlaces.slice(), toPlaces = from.toPlaces;\r\n    if (nearPlaces.length < 1) {\r\n      console.log(\"special circle, no neighbor\");\r\n      return null;\r\n    }\r\n    //按 cost 由小到大排列\r\n    nearPlaces.sort((a, b) => a.cost - b.cost);\r\n    for (let i = 0; i < nearPlaces.length; i++) {\r\n      let edge = nearPlaces[i];\r\n      toPlaces.push({points: [edge.to], cost: edge.cost});\r\n    }//from.toPlaces属性 初始化完毕\r\n    let curPath = toPlaces[0];\r\n\r\n    while (true) {\r\n      let midCircle = curPath.points[curPath.points.length - 1];\r\n      finded.push(midCircle);\r\n      if (midCircle === to) {\r\n        // console.log(\"finded shortest path, costs: \" + curPath.cost);\r\n        let arr = [from].concat(curPath.points);\r\n        let target = {points: [], edges: [], pathPoints: [], cost: curPath.cost};\r\n        for (let i = 0; i < arr.length - 1; i++) {\r\n          let holder = findPathSegment(arr[i], arr[i+1]);\r\n          target.edges.push(holder);\r\n        }\r\n        arr.forEach(it => {\r\n          target.points.push(it.pos.clone());\r\n          target.pathPoints.push(it);\r\n        });\r\n        // clearExtraEdges();\r\n        return target;\r\n      }\r\n      let placesFromMid = midCircle.nearPlaces.filter(it => finded.indexOf(it.to) < 0);\r\n      placesFromMid.sort((a, b) => a.cost - b.cost);\r\n\r\n      for (let index in placesFromMid) {\r\n        let edge = placesFromMid[index];\r\n        let curCost = curPath.cost + edge.cost;\r\n        let filtered = toPlaces.filter(it => it.points[it.points.length - 1] === edge.to);\r\n        if (filtered.length > 0) {\r\n          let existCost = filtered[0].cost;\r\n          let ind = toPlaces.indexOf(filtered[0]);\r\n          if (existCost > curCost) {\r\n            toPlaces[ind] = {points: curPath.points.concat(edge.to), cost: curCost};\r\n          }\r\n        } else {\r\n          let newPath = {points: curPath.points.concat(edge.to), cost: curCost};\r\n          toPlaces.push(newPath);\r\n        }\r\n      }\r\n      let filtered = toPlaces.filter(it => finded.indexOf(it.points[it.points.length - 1]) < 0);\r\n      if (filtered.length > 0) {\r\n        filtered.sort((a, b) => a.cost - b.cost);\r\n        curPath = filtered[0];\r\n      } else {\r\n        // console.log(\"穷举完毕，无法找到可达路径\");\r\n        // clearExtraEdges();\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  function setStartIcon(position) {\r\n    if (!startPointObj.parent) {\r\n      editingLayer.add(startPointObj);\r\n    }\r\n    startPointObj.position.copy(position);\r\n  }\r\n  function setEndIcon(position) {\r\n    if (!endPointObj.parent) {\r\n      editingLayer.add(endPointObj);\r\n    }\r\n    endPointObj.position.copy(position);\r\n  }\r\n  function setIconByName(name, isStart) {\r\n    let lst = getMeshsByName(name);\r\n    if (lst.length == 0)\r\n      return;\r\n    if (isStart) {\r\n      setStartIcon(lst[0].holder.getModelPos());\r\n      if (lst[0].holder.bindPathPoints.length == 0) {\r\n        console.log(\"根据名称设置起点，起点没有绑定路径节点\");\r\n        return;\r\n      }\r\n      startPoint = lst[0].holder.bindPathPoints[0];\r\n      startPoint.obj = null;\r\n    } else {\r\n      // setEndIcon(lst[0].holder.getModelPos());\r\n      if (lst[0].holder.bindPathPoints.length == 0) {\r\n        console.log(\"根据名称设置终点，终点没有绑定路径节点\");\r\n        return;\r\n      }\r\n      eventBuildingSelected.destination = true;\r\n      eventBuildingSelected.posObj = {pathPoint: lst[0].holder.bindPathPoints[0], skipExtra: true};\r\n      eventBuildingSelected.modelName = name;\r\n      sceneHolder.scene().dispatchEvent(eventBuildingSelected);\r\n    }\r\n    if (preSelectedMesh) {\r\n      preSelectedMesh.holder.clearSelection();\r\n    }\r\n    PublishedScene.startMovingCamera(lst[0].holder.getModelPos() );\r\n    lst[0].holder.startSelectAnimation();\r\n    preSelectedMesh = lst[0];\r\n  }\r\n\r\n  function clearPathIndicator() {\r\n    if (pathIndicator && pathIndicator.parent) {\r\n      pathIndicator.parent.remove(pathIndicator);\r\n    }\r\n  }\r\n  function reversePathIndicator() {\r\n    if (pathIndicator && pathIndicator.parent) {\r\n      pathIndicator.parent.remove(pathIndicator);\r\n      offsetX = 0;\r\n      pathIndicator = getPathIndicator(findPathResult.points.reverse(), findPathResult.cost, getPathIndicatorBack(),\r\n          sceneHolder.currentCameraScale(), sceneHolder.currentCameraPhi());\r\n      editingLayer.add(pathIndicator);\r\n    }\r\n  }\r\n\r\n  function clearPathAnimation() {\r\n    clearExtraEdges();\r\n    settingEndMarker = settingStartMarker = false;\r\n    if (startPointObj.parent) {\r\n      startPointObj.parent.remove(startPointObj);\r\n    }\r\n    if (endPointObj.parent) {\r\n      endPointObj.parent.remove(endPointObj);\r\n    }\r\n    clearPathIndicator();\r\n\r\n    startPoint = endPoint = null;\r\n    status = STATUS_NAVIGATE_FREE;\r\n  }\r\n\r\n  function pathFindingOnGpsChange() {\r\n    eventRecaculatePath.count++;\r\n    sceneHolder.scene().dispatchEvent(eventRecaculatePath);\r\n    let gpsPos = sceneHolder.getGpsLocIndicatorPos();\r\n    let target = {};\r\n    selectPointOnMapByVector3(gpsPos, target);\r\n    startPoint = new PathPoint(target.rawPoint);\r\n    startPoint.obj = target;\r\n    startPoint.onFloor = !target.inBuilding;\r\n    target.rawPathPoint = startPoint;\r\n    setStartIcon(startPoint.pos);\r\n    createExtraEdges(true);\r\n    let oldPathPoints = [];\r\n    if (findPathResult) {\r\n      oldPathPoints = findPathResult.pathPoints;\r\n    }\r\n    findPathResult = findPath(startPoint, endPoint);\r\n    if (findPathResult != null) {\r\n      eventRemainMeters.meters = findPathResult.cost * sceneHolder.mapScale();\r\n      sceneHolder.scene().dispatchEvent(eventRemainMeters);\r\n      refreshPathIndicator();\r\n      comparePaths(oldPathPoints, findPathResult.pathPoints);\r\n    }\r\n  }\r\n\r\n  function comparePaths(oldPoints, currentPoints) {\r\n    if (oldPoints.length == 0) {\r\n      return;\r\n    }\r\n    let diffCount = 0;\r\n    for (let pathPoint of currentPoints) {\r\n      if (pathPoint.abstract) continue;\r\n      if (oldPoints.indexOf(pathPoint) < 0) {\r\n        diffCount++;\r\n      }\r\n    }\r\n    if (diffCount > 1) {\r\n      sceneHolder.scene().dispatchEvent(eventRefindPath);\r\n    }\r\n  }\r\n\r\n  function getPickedMesh(vector) {\r\n    let pickedMeshes = sceneHolder.getIntersectsWith(vector, buildings);\r\n    if (pickedMeshes.length > 0) {\r\n      return pickedMeshes[0].object;\r\n    }\r\n    return null;\r\n  }\r\n  function getMeshsByName(name) {\r\n    let target = [];\r\n    buildings.forEach(mesh => {\r\n      if (mesh.holder.name() == name) {\r\n        target.push(mesh);\r\n      }\r\n    });\r\n    return target;\r\n  }\r\n\r\n  function setMarkerPos(clientX, clientY, isEnd, isStart) {\r\n    if (!enablePathFinding) {\r\n      return;\r\n    }\r\n    if (status === STATUS_NAVIGATING) {\r\n      return;\r\n    }\r\n    let obj = selectPointOnMap(clientX, clientY, isEnd);\r\n    if (!settingStartMarker && !settingEndMarker) {\r\n      eventBuildingSelected.posObj = obj;\r\n      eventBuildingSelected.modelName = '';\r\n      if (obj.inBuilding) {\r\n        eventBuildingSelected.modelName = obj.name;\r\n      }\r\n      eventBuildingSelected.destination = isEnd;\r\n      sceneHolder.scene().dispatchEvent(eventBuildingSelected);\r\n    }\r\n    //\r\n    if (obj.pathPoint) {\r\n      let pos = obj.pathPoint.pos;\r\n      if (isEnd) {\r\n        if (!endPosAdjust) {\r\n          pos = obj.rawPoint;\r\n        }\r\n        setEndIcon(pos);\r\n        if (!endPosAdjust) {\r\n          obj.rawPathPoint = new PathPoint(obj.rawPoint);\r\n          endPoint = obj.rawPathPoint;\r\n        } else {\r\n          endPoint = obj.pathPoint;\r\n        }\r\n        endPoint.obj = obj;\r\n\r\n        eventMapPosSelect.end = obj.name;\r\n        sceneHolder.scene().dispatchEvent(eventMapPosSelect);\r\n      } else if (isStart) {\r\n        if (!startPosAdjust) {\r\n          pos = obj.rawPoint;\r\n        }\r\n        setStartIcon(pos);\r\n        if (!startPosAdjust) {\r\n          obj.rawPathPoint = new PathPoint(obj.rawPoint);\r\n          startPoint = obj.rawPathPoint;\r\n        } else {\r\n          startPoint = obj.pathPoint;\r\n        }\r\n        startPoint.obj = obj;\r\n\r\n        eventMapPosSelect.start = obj.name;\r\n        sceneHolder.scene().dispatchEvent(eventMapPosSelect);\r\n      }\r\n    }\r\n  }\r\n  //地图选点\r\n  function selectPointOnMap(clientX, clientY, isEnd) {\r\n    let target = {};\r\n    if (dataInvaild() ) {\r\n      return target;\r\n    }\r\n\r\n    let lst = sceneHolder.getIntersectsOnPlane(clientX, clientY);\r\n    if (lst.length > 0) {\r\n      selectPointOnMapByVector3(lst[0].point, target, isEnd);\r\n    }\r\n    return target;\r\n  }\r\n\r\n  function selectPointOnMapByVector3(curVector, target, isEnd) {\r\n    target.rawPoint = curVector;\r\n    if (preSelectedMesh) {\r\n      preSelectedMesh.holder.clearSelection();\r\n    }\r\n    let selectedMesh = getPickedMesh(curVector);\r\n    if (selectedMesh) {\r\n      preSelectedMesh = selectedMesh;\r\n      selectedMesh.holder.startSelectAnimation();\r\n      let bindPathPoints = selectedMesh.holder.bindPathPoints;\r\n      let points = getPathPointsInArr(curVector, bindPathPoints, 1);\r\n      target.pathPoint = points[0], target.nearPoints = bindPathPoints, target.inBuilding = true;\r\n      target.name = selectedMesh.holder.name();\r\n    } else {\r\n      target.name = '路径节点';\r\n      let edgeDistances = [], pointsOnEdge = [], edges = [];\r\n      pathEdges.forEach((pathEdge, index) => {\r\n        if (pathEdge.pathDirection == Consts.pathDirBan) {\r\n          return;\r\n        }\r\n        let pt = pathEdge.getClosestPointOnEdge(curVector);\r\n        if (pt) {\r\n          let distanceSq = curVector.distanceToSquared(pt);\r\n          if (distanceSq <= Config.code.pathAdhereSpanSq) {\r\n            edgeDistances.push(distanceSq);\r\n            pointsOnEdge.push(pt);\r\n            edges.push(index);\r\n          }\r\n        }\r\n      });\r\n\r\n      if (edgeDistances.length > 0) {\r\n        let minDistance = getMinNum(edgeDistances);\r\n        let index = edgeDistances.indexOf(minDistance);\r\n        target.pathPoint = new PathPoint(pointsOnEdge[index]), target.onEdge = pathEdges[ edges[index] ];\r\n      } else {\r\n        let closestPathPoint = getPathPointInArr(curVector, pathPoints, true, isEnd);\r\n        target.pathPoint = closestPathPoint, target.out = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  function createExtraEdges(isStart) {\r\n    let obj = isStart ? startPoint.obj : endPoint.obj;\r\n    if (!obj || obj.skipExtra)\r\n      return;\r\n    let rawPathPoint = obj.rawPathPoint, pathPoint = obj.pathPoint;\r\n    if (obj.inBuilding) {\r\n      if (isStart) {\r\n        if (rawPathPoint) addAbstractEdge(rawPathPoint, pathPoint);\r\n      } else {\r\n        if (rawPathPoint) addAbstractEdge(pathPoint, rawPathPoint);\r\n      }\r\n      return;\r\n    }\r\n    if (obj.onEdge) {\r\n      let edge = obj.onEdge;\r\n      if (isStart) {\r\n        if (edge.pathDirection == Consts.pathDirBoth || edge.pathDirection == Consts.pathDirToFrom) {\r\n          addAbstractEdge(pathPoint, edge.from);\r\n        }\r\n        if (edge.pathDirection == Consts.pathDirBoth || edge.pathDirection == Consts.pathDirFromTo) {\r\n          addAbstractEdge(pathPoint, edge.to);\r\n        }\r\n        if (!startPosAdjust) {\r\n          addAbstractEdge(rawPathPoint, pathPoint);\r\n        }\r\n      } else {\r\n        if (edge.pathDirection == Consts.pathDirBoth || edge.pathDirection == Consts.pathDirFromTo) {\r\n          addAbstractEdge(edge.from, pathPoint);\r\n        }\r\n        if (edge.pathDirection == Consts.pathDirBoth || edge.pathDirection == Consts.pathDirToFrom) {\r\n          addAbstractEdge(edge.to, pathPoint);\r\n        }\r\n        if (!endPosAdjust) {\r\n          addAbstractEdge(pathPoint, rawPathPoint);\r\n        }\r\n      }\r\n    } else {\r\n      if (isStart) {\r\n        if (!startPosAdjust) addAbstractEdge(rawPathPoint, pathPoint);\r\n      } else {\r\n        if (!endPosAdjust) {\r\n          addAbstractEdge(pathPoint, rawPathPoint);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function onPathFinding() {\r\n    if (dataInvaild() ) {\r\n      return;\r\n    }\r\n    if (status == STATUS_NAVIGATING_END) {\r\n      status = STATUS_NAVIGATE_FREE;\r\n    }\r\n    if (endPoint == null) {\r\n      console.log(\"没有选定终点，无法导航\");\r\n      return;\r\n    }\r\n    createExtraEdges(false);\r\n    if (!startPoint) {\r\n      pathFindingOnGpsChange();\r\n    } else {\r\n      createExtraEdges(true);\r\n    }\r\n\r\n    findPathResult = findPath(startPoint, endPoint);\r\n    if (findPathResult != null) {\r\n      let msgs = getNavigateMsgs(findPathResult.points);\r\n      msgs.forEach(msg => console.log(msg.getDesc(sceneHolder.mapScale() ) ) );\r\n      eventRemainMeters.meters = findPathResult.cost * sceneHolder.mapScale();\r\n      sceneHolder.scene().dispatchEvent(eventRemainMeters);\r\n      clearPathIndicator();\r\n      offsetX = 0;\r\n      pathIndicator = getPathIndicator(findPathResult.points, findPathResult.cost, getPathIndicatorBack(),\r\n          sceneHolder.currentCameraScale(), sceneHolder.currentCameraPhi());\r\n      editingLayer.add(pathIndicator);\r\n    }\r\n  }\r\n\r\n\r\n  function getPathIndicatorBack() {\r\n    let backColor = null;\r\n    if (status == STATUS_NAVIGATING) {\r\n      backColor = \"#4b8bff\";\r\n    } else if (status == STATUS_NAVIGATING_END) {\r\n      backColor = \"#999\";\r\n    }\r\n    return backColor;\r\n  }\r\n\r\n  function touchstart4PathFinding(event) {\r\n    touchEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY);\r\n    sceneHolder.dom().addEventListener(\"touchend\", touchend4PathFinding);\r\n    sceneHolder.dom().addEventListener(\"touchmove\", touchmove4PathFinding);\r\n  }\r\n  function touchmove4PathFinding(event) {\r\n    touchEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY);\r\n    sceneHolder.dom().removeEventListener(\"touchend\", touchend4PathFinding);\r\n    sceneHolder.dom().removeEventListener(\"touchmove\", touchmove4PathFinding);\r\n\r\n    // console.log(\"touchmove4PathFinding, manhattanDistanceTo = \" + touchEnd.manhattanDistanceTo(touchStart));\r\n  }\r\n  function touchend4PathFinding(event) {\r\n    setMarkerPos(touchEnd.x, touchEnd.y, settingEndMarker, settingStartMarker);\r\n  }\r\n\r\n  function mousedown4PathFinding(event) {\r\n    sceneHolder.dom().addEventListener(\"mousemove\", mousemove4PathFinding);\r\n    sceneHolder.dom().addEventListener(\"mouseup\", mouseup4PathFinding);\r\n  }\r\n  function mousemove4PathFinding(event) {\r\n    sceneHolder.dom().removeEventListener(\"mousemove\", mousemove4PathFinding);\r\n    sceneHolder.dom().removeEventListener(\"mouseup\", mouseup4PathFinding);\r\n  }\r\n\r\n  function mouseup4PathFinding(event) {\r\n    setMarkerPos(event.clientX, event.clientY, settingEndMarker, settingStartMarker);\r\n  }\r\n\r\n  let offsetX = 0;\r\n\r\n  function refreshPathIndicator(scalar, phi) {\r\n    scalar = scalar || sceneHolder.currentCameraScale();\r\n    phi = phi || sceneHolder.currentCameraPhi();\r\n    if (pathIndicator && pathIndicator.parent) {\r\n      let parentObj = pathIndicator.parent;\r\n      pathIndicator.parent.remove(pathIndicator);\r\n      pathIndicator = getPathIndicator(findPathResult.points, findPathResult.cost, getPathIndicatorBack(), scalar, phi);\r\n      parentObj.add(pathIndicator);\r\n    }\r\n  }\r\n\r\n  function dataInvaild() {\r\n    return !pathPoints || !pathEdges || pathPoints.length == 0 || pathEdges.length == 0\r\n  }\r\n  function interpolateLinear(from, to, span) {\r\n    let target = [from], current = from;\r\n    let distance = current.distanceTo(to);\r\n    while (distance > span) {\r\n      current = current.clone().lerp(to, span / distance);\r\n      target.push(current);\r\n      distance -= span;\r\n    }\r\n    return target;\r\n  }\r\n\r\n  // 语音导航相关代码\r\n  let go_straight = 0, go_along_left = 1, go_left = 2, go_left_back = 3;\r\n  let go_turn_around = 7, go_along_right = 4, go_right = 5, go_right_back = 6;\r\n  function getNavigateMsgs(vector3s) {\r\n    let msgs = []; // {type: 1, distance: 11}\r\n    let vector2s = vector3s.map(it => new Vector2(it.x, it.y));\r\n    if (vector2s.length < 2)\r\n      return msgs;\r\n    let point = vector2s[0];\r\n    let keyPoints = [point];\r\n    for (let i = 1; i < vector2s.length; i++) {\r\n      let cur = vector2s[i];\r\n      if (point.distanceTo(cur) >= 1) {\r\n        keyPoints.push(cur);\r\n        point = cur;\r\n      }\r\n    }\r\n    let directions = [], angles = [];\r\n    for (let i = 1; i < keyPoints.length; i++) {\r\n      let dir = keyPoints[i].clone().sub(keyPoints[i - 1]);\r\n      directions.push(dir);\r\n    }\r\n    for (let i = 0; i < directions.length - 1; i++) {\r\n      let angle = directions[i].angleTo(directions[i+1]) * Config.mathConsts.radianToDegree;\r\n      angles.push(angle)\r\n    }\r\n    console.log(\"keyPoints:\",keyPoints)\r\n    // console.log(\"directions:\",directions)\r\n    console.log(\"angles:\", angles)\r\n    if (directions.length == 0)\r\n      return msgs;\r\n    let currentMsg = new NavigateInfo(0, directions[0].length());\r\n    msgs.push(currentMsg);\r\n    for (let i = 1; i < directions.length; i++) {\r\n      let navInfo = new NavigateInfo(angles[i-1], directions[i].length());\r\n      let merged = currentMsg.merge(navInfo);\r\n      if (!merged) {\r\n        msgs.push(navInfo);\r\n        currentMsg = navInfo;\r\n      }\r\n    }\r\n    return msgs;\r\n  }\r\n\r\n//正负20度  直行\r\n//20度～70度 靠右行驶\r\n//70度～100度 右转\r\n//100度～170度 向右后方行驶\r\n//同一道路/道路尽头 掉头\r\n//靠左同理\r\n  let naviMsgs = [\"直行\", \"靠左行驶\", \"左转行驶\", \"向左后方行驶\", \"靠右行驶\", \"右转行驶\", \"向右后方行驶\", \"掉头行驶\"];\r\n  function NavigateInfo(angleByDegree, distance) {\r\n    let goType = 0\r\n    if (angleByDegree >= 20 && angleByDegree < 70) {\r\n      goType = go_along_left\r\n    } else if (angleByDegree >= 70 && angleByDegree < 100) {\r\n      goType = go_left\r\n    } else if (angleByDegree >= 100 && angleByDegree < 170) {\r\n      goType = go_left_back\r\n    } else if ( (angleByDegree >= 170 && angleByDegree <= 180) ||\r\n        angleByDegree <= -170 && angleByDegree >= -180 ) {\r\n      goType = go_turn_around\r\n    } else if (angleByDegree <= -20 && angleByDegree > -70) {\r\n      goType = go_along_right\r\n    } else if (angleByDegree <= -70 && angleByDegree > -100) {\r\n      goType = go_right\r\n    } else if (angleByDegree <= -100 && angleByDegree > -170) {\r\n      goType = go_right_back\r\n    }\r\n    let target = {type: goType, distance: distance}\r\n\r\n    target.getDesc = function (scalar) {\r\n      return naviMsgs[target.type] + ~~(target.distance * scalar) + \"米\";\r\n    }\r\n    target.merge = function (otherInfo) {\r\n      if (otherInfo.type !== go_straight)\r\n        return false;\r\n      target.distance += otherInfo.distance;\r\n      return true;\r\n    }\r\n    return target;\r\n  }\r\n\r\n  let that = {\r\n    buildPathFindingGraph: buildPathFindingGraph,\r\n    findPath: findPath,\r\n    setMarkerPos: setMarkerPos,\r\n    getRandomTrack(inEditor, minimumDistance, span) {\r\n      let pahtPointLst = pathPointsOnBuilding;\r\n      let distanceSquared = minimumDistance * minimumDistance;\r\n      if (inEditor) {\r\n        buildPathFindingGraph();\r\n        pahtPointLst = pathPoints;\r\n      }\r\n      if (pahtPointLst.length < 3) {\r\n        console.log(\"建筑内部无路径节点\");\r\n        return [];\r\n      }\r\n      let result, count = 0, dd;\r\n      let startP, endP;\r\n      do {\r\n        let startNum = ~~ (pahtPointLst.length * Math.random() );\r\n        let endNum = ~~ (pahtPointLst.length * Math.random() );\r\n        startP = pahtPointLst[startNum], endP = pahtPointLst[endNum];\r\n        dd = startP.pos.distanceToSquared(endP.pos);\r\n        count++;\r\n      } while (count < 900 && dd < distanceSquared);\r\n      result = findPath(startP, endP);\r\n      if (!result) {\r\n        console.log(\"getRandomTrack failed\");\r\n        return [];\r\n      }\r\n      console.log(\"getRandomTrack, count: \" + count + \", cost: \" + result.cost);\r\n      let target = [], points = result.points;\r\n      for (let i = 0; i < points.length - 1; i++) {\r\n        let from = points[i], to = points[i + 1];\r\n        let arr = interpolateLinear(from, to, span);\r\n        target.push(...arr);\r\n      }\r\n      return target;\r\n    },\r\n    startPoint() {\r\n      return startPoint;\r\n    },\r\n    endPoint() {\r\n      return endPoint;\r\n    },\r\n    findPathFromCircles(fromCircle, toCircle) {\r\n      let ringLst = Layers.getPathSegmentRings();\r\n      let pathPoints = Layers.getPreviewPath().pathPoints;\r\n      if (pathPoints.length == 0) {\r\n        return null;\r\n      }\r\n      let fromPoint = pathPoints[ ringLst.indexOf(fromCircle) ];\r\n      let toPoint = pathPoints[ ringLst.indexOf(toCircle) ];\r\n      return that.findPath(fromPoint, toPoint);\r\n    },\r\n    initBuildings() {\r\n      buildings = [];\r\n      let meshLst = Layers.availableMeshes(true, true);\r\n      meshLst.forEach(mesh => {\r\n        if (mesh.holder && mesh.holder.bindPathPoints.length > 0) buildings.push(mesh);\r\n      } );\r\n    },\r\n    onMapChange() {\r\n      clearPathAnimation();\r\n      buildPathFindingGraph();\r\n\r\n      that.initBuildings();\r\n      if (Config.remote.track == 2) {\r\n        PublishedScene.showRandomTrack(true);\r\n      }\r\n    },\r\n    switchMarker() {\r\n      if (startPoint && endPoint) {\r\n        setEndIcon(startPoint.pos);\r\n        setStartIcon(endPoint.pos);\r\n        // console.log(startPoint.pos, endPoint.pos)\r\n        let temp = startPoint;\r\n        startPoint = endPoint;\r\n        endPoint = temp;\r\n      }\r\n\r\n      reversePathIndicator();\r\n    },\r\n    setDistination() {\r\n      let obj = eventBuildingSelected.posObj;\r\n      setEndIcon(obj.pathPoint.pos);\r\n      endPoint = obj.pathPoint;\r\n      endPoint.obj = obj;\r\n      // settingStartMarker = true; //下次选中的建筑，设置为起点\r\n      eventMapPosSelect.end = obj.name;\r\n    },\r\n    setIconByName: setIconByName,\r\n    startSetEndPosition(val) {\r\n      // enablePathFinding = val;\r\n      settingEndMarker = val;\r\n    },\r\n    onPathFinding: onPathFinding,\r\n    clearPathAnimation: clearPathAnimation,\r\n    animatePathIndicator() {\r\n      if (pathIndicator && pathIndicator.parent) {\r\n        offsetX -= 0.03;\r\n        let Tube = pathIndicator.userData.tubeSetting;\r\n        pathIndicator.material.map.offset.set( offsetX, Tube.offsetY );\r\n      }\r\n    },\r\n    updatePathIndicatorScale(scalar) {\r\n      if (pathIndicator && pathIndicator.parent) {\r\n        scalePathIndicator(pathIndicator, scalar);\r\n      }\r\n    },\r\n    rotatePathIndicator(phi) {\r\n      if (pathIndicator && pathIndicator.parent) {\r\n        pathIndicator.userData.tubeSetting.offsetY = (phi/ (Math.PI/2)) * 0.5;\r\n      }\r\n    },\r\n    addListeners() {\r\n      if (browser.runOnMobile() ) {\r\n        sceneHolder.dom().addEventListener('touchstart', touchstart4PathFinding);\r\n      } else {\r\n        sceneHolder.dom().addEventListener('mousedown', mousedown4PathFinding);\r\n      }\r\n    },\r\n    onGpsPostitionChange() {\r\n      if (status !== STATUS_NAVIGATING) {\r\n        return;\r\n      }\r\n      curPathRefreshCount++;\r\n      if (curPathRefreshCount >= pathRefreshInterval) {\r\n        curPathRefreshCount = 0;\r\n        pathFindingOnGpsChange();\r\n      }\r\n    },\r\n    toggleNavigatingSwitch(isNavigating) {\r\n      if (dataInvaild() ) {\r\n        return;\r\n      }\r\n      if (isNavigating) {\r\n        status = STATUS_NAVIGATING;\r\n      } else {\r\n        status = STATUS_NAVIGATE_FREE;\r\n      }\r\n      eventRecaculatePath.count = 0;\r\n      refreshPathIndicator();\r\n    },\r\n    endNavigating() {\r\n      status = STATUS_NAVIGATING_END;\r\n      eventRecaculatePath.count = 0;\r\n      refreshPathIndicator();\r\n    }\r\n  };\r\n  return that;\r\n};\r\n\r\nexport default NavigatorTool;\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerItem.vue?vue&type=style&index=0&id=a142b9b4&scoped=true&lang=css&\"","export const Ref_Flag = 'setRefImageFlag';\r\nexport const Editing_For_3d = 'editingFor3d';\r\nexport const Show_CompassItem = 'showCompassItem';\r\nexport const Show_BottomBox = 'showBottomBox';\r\nexport const Show_BottomInfo = 'showBottomInfo';\r\nexport const Show_GraphicAdd = 'showGraphicAdd';\r\nexport const Is_Navigating = 'isNavigating';\r\nexport const Lights_Editable = 'lightsEditable';\r\n","module.exports = __webpack_public_path__ + \"img/guide_unshow.504c4709.png\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxLayers.vue?vue&type=style&index=0&id=eea3cdac&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"title\",rawName:\"v-title\"}],staticClass:\"home\",attrs:{\"data-title\":_vm.pageTitle}},[_c('main3d'),_c('main-top-bar'),_c('tab-view',[_c('main-tab-bar',{on:{\"tabClick\":_vm.onTabClick}}),_c('main-tab-box',{ref:\"tabBoxes\"})],1),_c('guide-box',{ref:\"guide\"}),_c('compass-item',{staticClass:\"compassIndicator\"}),_c('location-reset-item',{staticClass:\"locationIndicator\"}),_c('editor-toolbar',{staticClass:\"editor-float-bar\"}),_c('bili-text')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('top-bar',[_c('page-title',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"室内地图编辑器\")])]),_c('div',{staticStyle:{\"display\":\"flex\",\"margin-right\":\"auto\",\"align-items\":\"center\"},attrs:{\"slot\":\"center\"},slot:\"center\"},[_c('el-dropdown',{on:{\"command\":_vm.onSearchByDropdownClose}},[_c('div',{staticClass:\"search-pre-box\"},[_c('i',{staticClass:\"iconfont icongengduo2\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":0,\"selected\":_vm.searchBySelectIndex==0}},[_vm._v(_vm._s(_vm.searchByLst[0]))]),_c('el-dropdown-item',{attrs:{\"command\":1,\"selected\":_vm.searchBySelectIndex==1}},[_vm._v(_vm._s(_vm.searchByLst[1]))]),_c('el-dropdown-item',{attrs:{\"command\":2,\"selected\":_vm.searchBySelectIndex==2}},[_vm._v(_vm._s(_vm.searchByLst[2]))])],1)],1),_c('el-select',{attrs:{\"size\":\"small\",\"placeholder\":_vm.searchPlaceholder,\"filterable\":\"\",\"noIconRotate\":\"\",\"input-style\":\"border-radius: 0 5px 5px 0\",\"remote\":\"\",\"remote-method\":_vm.filterFromEditor,\"customIcon\":\"iconfont iconsousuo searchIcon\"},on:{\"change\":_vm.onSearchItemClick},model:{value:(_vm.searchTxt),callback:function ($$v) {_vm.searchTxt=$$v},expression:\"searchTxt\"}},_vm._l((_vm.searchOptions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.name))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(item.type))])])}),1)],1),_c('div',{staticStyle:{\"display\":\"flex\"},attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"btnGroup0\"},[_c('i',{staticClass:\"iconfont iconchexiao1 bareIcon\",class:{'enabled': _vm.undoEnabled},on:{\"click\":_vm.performUndo}}),_c('div',{staticStyle:{\"width\":\"10px\"}}),_c('i',{staticClass:\"iconfont iconhuanyuan bareIcon\",class:{'enabled': _vm.redoEnabled},on:{\"click\":_vm.performRedo}})]),_c('div',{staticClass:\"btnGroup1\"},[_c('img-button',{on:{\"btnClick\":_vm.onClickSave}},[_c('span',{staticClass:\"iconfont iconbaocun\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"保存\")])]),_c('img-button',{on:{\"btnClick\":_vm.onClickLoad}},[_c('span',{staticClass:\"iconfont iconfanhui\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"载入\")])]),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"jsonInput\",\"accept\":\"application/json\"},on:{\"input\":_vm.selectMapJson}})],1),_c('div',{staticClass:\"btnGroup2\"},[_c('img-button',{on:{\"btnClick\":_vm.publishMap}},[_c('span',{staticClass:\"iconfont iconfabu\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"发布\")])]),_c('img-button',{on:{\"btnClick\":_vm.onClickPreview}},[_c('span',{staticClass:\"iconfont iconyulan\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"预览\")])]),_c('img-button',{on:{\"btnClick\":function($event){return _vm.onClickPreview(true)}}},[_c('span',{staticClass:\"iconfont iconyulan\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"pc预览\")])]),_c('img-button',{on:{\"btnClick\":_vm.showDownloadPrompt}},[_c('span',{staticClass:\"iconfont iconxiazai\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"下载\")])])],1),_c('div',{staticClass:\"username\"},[_vm._v(\" \"+_vm._s(_vm.userName)+\" \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"box\",class:[\n  _vm.type === 'textarea' ? 'el-textarea' : 'el-input',\n  _vm.inputSize ? 'el-input--' + _vm.inputSize : '',\n  {\n    'is-disabled': _vm.inputDisabled,\n    'is-exceed': _vm.inputExceed,\n    'el-input-group': _vm.$slots.prepend || _vm.$slots.append,\n    'el-input-group--append': _vm.$slots.append,\n    'el-input-group--prepend': _vm.$slots.prepend,\n    'el-input--prefix': _vm.$slots.prefix || _vm.prefixIcon,\n    'el-input--suffix': _vm.$slots.suffix || _vm.suffixIcon || _vm.clearable || _vm.showPassword\n  },\n  {'focus-anim': _vm.focusAnimEnabled}\n  ],on:{\"mouseenter\":function($event){_vm.hovering = true},\"mouseleave\":function($event){_vm.hovering = false}}},[(_vm.type !== 'textarea')?[(_vm.$slots.prepend)?_c('div',{staticClass:\"el-input-group__prepend\"},[_vm._t(\"prepend\")],2):_vm._e(),(_vm.type !== 'textarea')?_c('input',_vm._b({directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.invalidNumMsg),expression:\"invalidNumMsg\",modifiers:{\"dark\":true}}],ref:\"input\",staticClass:\"el-input__inner\",class:{'jscolor {alphaEnabled: true}': _vm.colorAlphaEnabled, 'jscolor': _vm.colorEnabled, 'hideBorder': _vm.hideBorder,\n        'number-invalid': _vm.numberInvalid},style:(_vm.inputStyle),attrs:{\"tabindex\":_vm.tabindex,\"type\":_vm.showPassword ? (_vm.passwordVisible ? 'text': 'password') : _vm.type,\"disabled\":_vm.inputDisabled,\"readonly\":_vm.readonly,\"autocomplete\":_vm.autoComplete || _vm.autocomplete,\"aria-label\":_vm.label},on:{\"compositionstart\":_vm.handleCompositionStart,\"compositionupdate\":_vm.handleCompositionUpdate,\"compositionend\":_vm.handleCompositionEnd,\"input\":_vm.handleInput,\"focus\":_vm.handleFocus,\"blur\":_vm.handleBlur,\"change\":_vm.handleChange}},'input',_vm.$attrs,false)):_vm._e(),(_vm.$slots.prefix || _vm.prefixIcon)?_c('span',{staticClass:\"el-input__prefix\"},[_vm._t(\"prefix\"),(_vm.prefixIcon)?_c('i',{staticClass:\"el-input__icon\",class:_vm.prefixIcon}):_vm._e()],2):_vm._e(),(_vm.getSuffixVisible())?_c('span',{staticClass:\"el-input__suffix\"},[_c('span',{staticClass:\"el-input__suffix-inner\"},[(!_vm.showClear || !_vm.showPwdVisible || !_vm.isWordLimitVisible)?[_vm._t(\"suffix\"),(_vm.suffixIcon)?_c('i',{staticClass:\"el-input__icon\",class:_vm.suffixIcon}):_vm._e()]:_vm._e(),(_vm.showClear)?_c('i',{staticClass:\"el-input__icon el-icon-circle-close el-input__clear\",on:{\"mousedown\":function($event){$event.preventDefault();},\"click\":_vm.clear}}):_vm._e(),(_vm.showPwdVisible)?_c('i',{staticClass:\"el-input__icon el-icon-view el-input__clear\",on:{\"click\":_vm.handlePasswordVisible}}):_vm._e(),(_vm.isWordLimitVisible)?_c('span',{staticClass:\"el-input__count\"},[_c('span',{staticClass:\"el-input__count-inner\"},[_vm._v(\" \"+_vm._s(_vm.textLength)+\"/\"+_vm._s(_vm.upperLimit)+\" \")])]):_vm._e()],2),(_vm.validateState)?_c('i',{staticClass:\"el-input__icon\",class:['el-input__validateIcon', _vm.validateIcon]}):_vm._e()]):_vm._e(),(_vm.$slots.append)?_c('div',{staticClass:\"el-input-group__append\"},[_vm._t(\"append\")],2):_vm._e()]:_c('textarea',_vm._b({ref:\"textarea\",staticClass:\"el-textarea__inner\",style:(_vm.textareaStyle),attrs:{\"tabindex\":_vm.tabindex,\"disabled\":_vm.inputDisabled,\"readonly\":_vm.readonly,\"autocomplete\":_vm.autoComplete || _vm.autocomplete,\"aria-label\":_vm.label},on:{\"compositionstart\":_vm.handleCompositionStart,\"compositionupdate\":_vm.handleCompositionUpdate,\"compositionend\":_vm.handleCompositionEnd,\"input\":_vm.handleInput,\"focus\":_vm.handleFocus,\"blur\":_vm.handleBlur,\"change\":_vm.handleChange}},'textarea',_vm.$attrs,false)),(_vm.isWordLimitVisible && _vm.type === 'textarea')?_c('span',{staticClass:\"el-input__count\"},[_vm._v(_vm._s(_vm.textLength)+\"/\"+_vm._s(_vm.upperLimit))]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","function broadcast(componentName, eventName, params) {\r\n  this.$children.forEach(child => {\r\n    var name = child.$options.componentName;\r\n\r\n    if (name === componentName) {\r\n      child.$emit.apply(child, [eventName].concat(params));\r\n    } else {\r\n      broadcast.apply(child, [componentName, eventName].concat([params]));\r\n    }\r\n  });\r\n}\r\nexport default {\r\n  methods: {\r\n    dispatch(componentName, eventName, params) {\r\n      var parent = this.$parent || this.$root;\r\n      var name = parent.$options.componentName;\r\n\r\n      while (parent && (!name || name !== componentName)) {\r\n        parent = parent.$parent;\r\n\r\n        if (parent) {\r\n          name = parent.$options.componentName;\r\n        }\r\n      }\r\n      if (parent) {\r\n        parent.$emit.apply(parent, [eventName].concat(params));\r\n      }\r\n    },\r\n    broadcast(componentName, eventName, params) {\r\n      broadcast.call(this, componentName, eventName, params);\r\n    }\r\n  }\r\n};\r\n","export function isString(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object String]';\r\n}\r\n\r\nexport function isObject(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\n\r\nexport function isHtmlElement(node) {\r\n  return node && node.nodeType === Node.ELEMENT_NODE;\r\n}\r\n\r\nexport const isFunction = (functionToCheck) => {\r\n  var getType = {};\r\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\r\n};\r\n\r\nexport const isUndefined = (val)=> {\r\n  return val === void 0;\r\n};\r\n\r\nexport const isDefined = (val) => {\r\n  return val !== undefined && val !== null;\r\n};\r\n","import Vue from 'vue';\r\nimport { isString, isObject } from '../utils/types';\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\nexport function noop() {};\r\n\r\nexport function hasOwn(obj, key) {\r\n  return hasOwnProperty.call(obj, key);\r\n};\r\n\r\nfunction extend(to, _from) {\r\n  for (let key in _from) {\r\n    to[key] = _from[key];\r\n  }\r\n  return to;\r\n};\r\n\r\nexport function toObject(arr) {\r\n  var res = {};\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (arr[i]) {\r\n      extend(res, arr[i]);\r\n    }\r\n  }\r\n  return res;\r\n};\r\n\r\nexport const getValueByPath = function(object, prop) {\r\n  prop = prop || '';\r\n  const paths = prop.split('.');\r\n  let current = object;\r\n  let result = null;\r\n  for (let i = 0, j = paths.length; i < j; i++) {\r\n    const path = paths[i];\r\n    if (!current) break;\r\n\r\n    if (i === j - 1) {\r\n      result = current[path];\r\n      break;\r\n    }\r\n    current = current[path];\r\n  }\r\n  return result;\r\n};\r\n\r\nexport function getPropByPath(obj, path, strict) {\r\n  let tempObj = obj;\r\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1');\r\n  path = path.replace(/^\\./, '');\r\n\r\n  let keyArr = path.split('.');\r\n  let i = 0;\r\n  for (let len = keyArr.length; i < len - 1; ++i) {\r\n    if (!tempObj && !strict) break;\r\n    let key = keyArr[i];\r\n    if (key in tempObj) {\r\n      tempObj = tempObj[key];\r\n    } else {\r\n      if (strict) {\r\n        throw new Error('please transfer a valid prop path to form item!');\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return {\r\n    o: tempObj,\r\n    k: keyArr[i],\r\n    v: tempObj ? tempObj[keyArr[i]] : null\r\n  };\r\n};\r\n\r\nexport const generateId = function() {\r\n  return Math.floor(Math.random() * 10000);\r\n};\r\n\r\nexport const valueEquals = (a, b) => {\r\n  // see: https://stackoverflow.com/questions/3115982/how-to-check-if-two-arrays-are-equal-with-javascript\r\n  if (a === b) return true;\r\n  if (!(a instanceof Array)) return false;\r\n  if (!(b instanceof Array)) return false;\r\n  if (a.length !== b.length) return false;\r\n  for (let i = 0; i !== a.length; ++i) {\r\n    if (a[i] !== b[i]) return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const escapeRegexpString = (value = '') => String(value).replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\r\n\r\n// TODO: use native Array.find, Array.findIndex when IE support is dropped\r\nexport const arrayFindIndex = function(arr, pred) {\r\n  for (let i = 0; i !== arr.length; ++i) {\r\n    if (pred(arr[i])) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nexport const arrayFind = function(arr, pred) {\r\n  const idx = arrayFindIndex(arr, pred);\r\n  return idx !== -1 ? arr[idx] : undefined;\r\n};\r\n\r\n// coerce truthy value to array\r\nexport const coerceTruthyValueToArray = function(val) {\r\n  if (Array.isArray(val)) {\r\n    return val;\r\n  } else if (val) {\r\n    return [val];\r\n  } else {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const isIE = function() {\r\n  return !Vue.prototype.$isServer && !isNaN(Number(document.documentMode));\r\n};\r\n\r\nexport const isEdge = function() {\r\n  return !Vue.prototype.$isServer && navigator.userAgent.indexOf('Edge') > -1;\r\n};\r\n\r\nexport const isFirefox = function() {\r\n  return !Vue.prototype.$isServer && !!window.navigator.userAgent.match(/firefox/i);\r\n};\r\n\r\nexport const autoprefixer = function(style) {\r\n  if (typeof style !== 'object') return style;\r\n  const rules = ['transform', 'transition', 'animation'];\r\n  const prefixes = ['ms-', 'webkit-'];\r\n  rules.forEach(rule => {\r\n    const value = style[rule];\r\n    if (rule && value) {\r\n      prefixes.forEach(prefix => {\r\n        style[prefix + rule] = value;\r\n      });\r\n    }\r\n  });\r\n  return style;\r\n};\r\n\r\nexport const kebabCase = function(str) {\r\n  const hyphenateRE = /([^-])([A-Z])/g;\r\n  return str\r\n    .replace(hyphenateRE, '$1-$2')\r\n    .replace(hyphenateRE, '$1-$2')\r\n    .toLowerCase();\r\n};\r\n\r\nexport const capitalize = function(str) {\r\n  if (!isString(str)) return str;\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n};\r\n\r\nexport const looseEqual = function(a, b) {\r\n  const isObjectA = isObject(a);\r\n  const isObjectB = isObject(b);\r\n  if (isObjectA && isObjectB) {\r\n    return JSON.stringify(a) === JSON.stringify(b);\r\n  } else if (!isObjectA && !isObjectB) {\r\n    return String(a) === String(b);\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const arrayEquals = function(arrayA, arrayB) {\r\n  arrayA = arrayA || [];\r\n  arrayB = arrayB || [];\r\n\r\n  if (arrayA.length !== arrayB.length) {\r\n    return false;\r\n  }\r\n\r\n  for (let i = 0; i < arrayA.length; i++) {\r\n    if (!looseEqual(arrayA[i], arrayB[i])) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport const isEqual = function(value1, value2) {\r\n  if (Array.isArray(value1) && Array.isArray(value2)) {\r\n    return arrayEquals(value1, value2);\r\n  }\r\n  return looseEqual(value1, value2);\r\n};\r\n\r\nexport const isEmpty = function(val) {\r\n  // null or undefined\r\n  if (val == null) return true;\r\n\r\n  if (typeof val === 'boolean') return false;\r\n\r\n  if (typeof val === 'number') return !val;\r\n\r\n  if (val instanceof Error) return val.message === '';\r\n\r\n  switch (Object.prototype.toString.call(val)) {\r\n    // String or Array\r\n    case '[object String]':\r\n    case '[object Array]':\r\n      return !val.length;\r\n\r\n    // Map or Set or File\r\n    case '[object File]':\r\n    case '[object Map]':\r\n    case '[object Set]': {\r\n      return !val.size;\r\n    }\r\n    // Plain Object\r\n    case '[object Object]': {\r\n      return !Object.keys(val).length;\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport function rafThrottle(fn) {\r\n  let locked = false;\r\n  return function(...args) {\r\n    if (locked) return;\r\n    locked = true;\r\n    window.requestAnimationFrame(_ => {\r\n      fn.apply(this, args);\r\n      locked = false;\r\n    });\r\n  };\r\n}\r\n\r\nexport function objToArray(obj) {\r\n  if (Array.isArray(obj)) {\r\n    return obj;\r\n  }\r\n  return isEmpty(obj) ? [] : [obj];\r\n}\r\n","import { kebabCase } from '@/components/element/utils/util';\r\n/**\r\n * Show migrating guide in browser console.\r\n *\r\n * Usage:\r\n * import Migrating from 'element-ui/src/mixins/migrating';\r\n *\r\n * mixins: [Migrating]\r\n *\r\n * add getMigratingConfig method for your component.\r\n *  getMigratingConfig() {\r\n *    return {\r\n *      props: {\r\n *        'allow-no-selection': 'allow-no-selection is removed.',\r\n *        'selection-mode': 'selection-mode is removed.'\r\n *      },\r\n *      events: {\r\n *        selectionchange: 'selectionchange is renamed to selection-change.'\r\n *      }\r\n *    };\r\n *  },\r\n */\r\nexport default {\r\n  mounted() {\r\n    if (process.env.NODE_ENV === 'production') return;\r\n    if (!this.$vnode) return;\r\n    const { props = {}, events = {} } = this.getMigratingConfig();\r\n    const { data, componentOptions } = this.$vnode;\r\n    const definedProps = data.attrs || {};\r\n    const definedEvents = componentOptions.listeners || {};\r\n\r\n    for (let propName in definedProps) {\r\n      propName = kebabCase(propName); // compatible with camel case\r\n      if (props[propName]) {\r\n        console.warn(`[Element Migrating][${this.$options.name}][Attribute]: ${props[propName]}`);\r\n      }\r\n    }\r\n\r\n    for (let eventName in definedEvents) {\r\n      eventName = kebabCase(eventName); // compatible with camel case\r\n      if (events[eventName]) {\r\n        console.warn(`[Element Migrating][${this.$options.name}][Event]: ${events[eventName]}`);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getMigratingConfig() {\r\n      return {\r\n        props: {},\r\n        events: {}\r\n      };\r\n    }\r\n  }\r\n};\r\n","let hiddenTextarea;\r\n\r\nconst HIDDEN_STYLE = `\r\n  height:0 !important;\r\n  visibility:hidden !important;\r\n  overflow:hidden !important;\r\n  position:absolute !important;\r\n  z-index:-1000 !important;\r\n  top:0 !important;\r\n  right:0 !important\r\n`;\r\n\r\nconst CONTEXT_STYLE = [\r\n  'letter-spacing',\r\n  'line-height',\r\n  'padding-top',\r\n  'padding-bottom',\r\n  'font-family',\r\n  'font-weight',\r\n  'font-size',\r\n  'text-rendering',\r\n  'text-transform',\r\n  'width',\r\n  'text-indent',\r\n  'padding-left',\r\n  'padding-right',\r\n  'border-width',\r\n  'box-sizing'\r\n];\r\n\r\nfunction calculateNodeStyling(targetElement) {\r\n  const style = window.getComputedStyle(targetElement);\r\n\r\n  const boxSizing = style.getPropertyValue('box-sizing');\r\n\r\n  const paddingSize = (\r\n    parseFloat(style.getPropertyValue('padding-bottom')) +\r\n    parseFloat(style.getPropertyValue('padding-top'))\r\n  );\r\n\r\n  const borderSize = (\r\n    parseFloat(style.getPropertyValue('border-bottom-width')) +\r\n    parseFloat(style.getPropertyValue('border-top-width'))\r\n  );\r\n\r\n  const contextStyle = CONTEXT_STYLE\r\n    .map(name => `${name}:${style.getPropertyValue(name)}`)\r\n    .join(';');\r\n\r\n  return { contextStyle, paddingSize, borderSize, boxSizing };\r\n}\r\n\r\nexport default function calcTextareaHeight(\r\n  targetElement,\r\n  minRows = 1,\r\n  maxRows = null\r\n) {\r\n  if (!hiddenTextarea) {\r\n    hiddenTextarea = document.createElement('textarea');\r\n    document.body.appendChild(hiddenTextarea);\r\n  }\r\n\r\n  let {\r\n    paddingSize,\r\n    borderSize,\r\n    boxSizing,\r\n    contextStyle\r\n  } = calculateNodeStyling(targetElement);\r\n\r\n  hiddenTextarea.setAttribute('style', `${contextStyle};${HIDDEN_STYLE}`);\r\n  hiddenTextarea.value = targetElement.value || targetElement.placeholder || '';\r\n\r\n  let height = hiddenTextarea.scrollHeight;\r\n  const result = {};\r\n\r\n  if (boxSizing === 'border-box') {\r\n    height = height + borderSize;\r\n  } else if (boxSizing === 'content-box') {\r\n    height = height - paddingSize;\r\n  }\r\n\r\n  hiddenTextarea.value = '';\r\n  let singleRowHeight = hiddenTextarea.scrollHeight - paddingSize;\r\n\r\n  if (minRows !== null) {\r\n    let minHeight = singleRowHeight * minRows;\r\n    if (boxSizing === 'border-box') {\r\n      minHeight = minHeight + paddingSize + borderSize;\r\n    }\r\n    height = Math.max(minHeight, height);\r\n    result.minHeight = `${ minHeight }px`;\r\n  }\r\n  if (maxRows !== null) {\r\n    let maxHeight = singleRowHeight * maxRows;\r\n    if (boxSizing === 'border-box') {\r\n      maxHeight = maxHeight + paddingSize + borderSize;\r\n    }\r\n    height = Math.min(maxHeight, height);\r\n  }\r\n  result.height = `${ height }px`;\r\n  hiddenTextarea.parentNode && hiddenTextarea.parentNode.removeChild(hiddenTextarea);\r\n  hiddenTextarea = null;\r\n  return result;\r\n};\r\n","export default function(target) {\r\n  for (let i = 1, j = arguments.length; i < j; i++) {\r\n    let source = arguments[i] || {};\r\n    for (let prop in source) {\r\n      if (source.hasOwnProperty(prop)) {\r\n        let value = source[prop];\r\n        if (value !== undefined) {\r\n          target[prop] = value;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return target;\r\n};\r\n","export function isDef(val) {\r\n  return val !== undefined && val !== null;\r\n}\r\nexport function isKorean(text) {\r\n  const reg = /([(\\uAC00-\\uD7AF)|(\\u3130-\\u318F)])+/gi;\r\n  return reg.test(text);\r\n}\r\n","<template>\r\n  <div :class=\"[\r\n    type === 'textarea' ? 'el-textarea' : 'el-input',\r\n    inputSize ? 'el-input--' + inputSize : '',\r\n    {\r\n      'is-disabled': inputDisabled,\r\n      'is-exceed': inputExceed,\r\n      'el-input-group': $slots.prepend || $slots.append,\r\n      'el-input-group--append': $slots.append,\r\n      'el-input-group--prepend': $slots.prepend,\r\n      'el-input--prefix': $slots.prefix || prefixIcon,\r\n      'el-input--suffix': $slots.suffix || suffixIcon || clearable || showPassword\r\n    },\r\n    {'focus-anim': focusAnimEnabled}\r\n    ]\"\r\n       ref=\"box\"\r\n    @mouseenter=\"hovering = true\"\r\n    @mouseleave=\"hovering = false\"\r\n  >\r\n    <template v-if=\"type !== 'textarea'\">\r\n      <!-- 前置元素 -->\r\n      <div class=\"el-input-group__prepend\" v-if=\"$slots.prepend\">\r\n        <slot name=\"prepend\"></slot>\r\n      </div>\r\n      <input\r\n        :tabindex=\"tabindex\"\r\n        v-if=\"type !== 'textarea'\"\r\n        class=\"el-input__inner\"\r\n        :class=\"{'jscolor {alphaEnabled: true}': colorAlphaEnabled, 'jscolor': colorEnabled, 'hideBorder': hideBorder,\r\n          'number-invalid': numberInvalid}\"\r\n        v-tip.dark=\"invalidNumMsg\"\r\n        :style=\"inputStyle\"\r\n        v-bind=\"$attrs\"\r\n        :type=\"showPassword ? (passwordVisible ? 'text': 'password') : type\"\r\n        :disabled=\"inputDisabled\"\r\n        :readonly=\"readonly\"\r\n        :autocomplete=\"autoComplete || autocomplete\"\r\n        ref=\"input\"\r\n        @compositionstart=\"handleCompositionStart\"\r\n        @compositionupdate=\"handleCompositionUpdate\"\r\n        @compositionend=\"handleCompositionEnd\"\r\n        @input=\"handleInput\"\r\n        @focus=\"handleFocus\"\r\n        @blur=\"handleBlur\"\r\n        @change=\"handleChange\"\r\n        :aria-label=\"label\"\r\n      >\r\n      <!-- 前置内容 -->\r\n      <span class=\"el-input__prefix\" v-if=\"$slots.prefix || prefixIcon\">\r\n        <slot name=\"prefix\"></slot>\r\n        <i class=\"el-input__icon\"\r\n           v-if=\"prefixIcon\"\r\n           :class=\"prefixIcon\">\r\n        </i>\r\n      </span>\r\n      <!-- 后置内容 -->\r\n      <span\r\n        class=\"el-input__suffix\"\r\n        v-if=\"getSuffixVisible()\">\r\n        <span class=\"el-input__suffix-inner\">\r\n          <template v-if=\"!showClear || !showPwdVisible || !isWordLimitVisible\">\r\n            <slot name=\"suffix\"></slot>\r\n            <i class=\"el-input__icon\"\r\n              v-if=\"suffixIcon\"\r\n              :class=\"suffixIcon\">\r\n            </i>\r\n          </template>\r\n          <i v-if=\"showClear\"\r\n            class=\"el-input__icon el-icon-circle-close el-input__clear\"\r\n            @mousedown.prevent\r\n            @click=\"clear\"\r\n          ></i>\r\n          <i v-if=\"showPwdVisible\"\r\n            class=\"el-input__icon el-icon-view el-input__clear\"\r\n            @click=\"handlePasswordVisible\"\r\n          ></i>\r\n          <span v-if=\"isWordLimitVisible\" class=\"el-input__count\">\r\n            <span class=\"el-input__count-inner\">\r\n              {{ textLength }}/{{ upperLimit }}\r\n            </span>\r\n          </span>\r\n        </span>\r\n        <i class=\"el-input__icon\"\r\n          v-if=\"validateState\"\r\n          :class=\"['el-input__validateIcon', validateIcon]\">\r\n        </i>\r\n      </span>\r\n      <!-- 后置元素 -->\r\n      <div class=\"el-input-group__append\" v-if=\"$slots.append\">\r\n        <slot name=\"append\"></slot>\r\n      </div>\r\n    </template>\r\n    <textarea\r\n      v-else\r\n      :tabindex=\"tabindex\"\r\n      class=\"el-textarea__inner\"\r\n      @compositionstart=\"handleCompositionStart\"\r\n      @compositionupdate=\"handleCompositionUpdate\"\r\n      @compositionend=\"handleCompositionEnd\"\r\n      @input=\"handleInput\"\r\n      ref=\"textarea\"\r\n      v-bind=\"$attrs\"\r\n      :disabled=\"inputDisabled\"\r\n      :readonly=\"readonly\"\r\n      :autocomplete=\"autoComplete || autocomplete\"\r\n      :style=\"textareaStyle\"\r\n      @focus=\"handleFocus\"\r\n      @blur=\"handleBlur\"\r\n      @change=\"handleChange\"\r\n      :aria-label=\"label\"\r\n    >\r\n    </textarea>\r\n    <span v-if=\"isWordLimitVisible && type === 'textarea'\" class=\"el-input__count\">{{ textLength }}/{{ upperLimit }}</span>\r\n  </div>\r\n</template>\r\n<script>\r\n  import emitter from '@/components/element/mixins/emitter';\r\n  import Migrating from '@/components/element/mixins/migrating';\r\n  import calcTextareaHeight from './calcTextareaHeight';\r\n  import checkNumber from \"./checkNumber\";\r\n  import merge from '@/components/element/utils/merge';\r\n  import {isKorean} from '@/components/element/utils/shared';\r\n  import el from \"../../locale/lang/el\";\r\n\r\n  export default {\r\n    name: 'ElInput',\r\n\r\n    componentName: 'ElInput',\r\n\r\n    mixins: [emitter, Migrating],\r\n\r\n    inheritAttrs: false,\r\n\r\n    inject: {\r\n      elForm: {\r\n        default: ''\r\n      },\r\n      elFormItem: {\r\n        default: ''\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        textareaCalcStyle: {},\r\n        hovering: false,\r\n        focused: false,\r\n        isComposing: false,\r\n        passwordVisible: false,\r\n        numberInvalid: false,\r\n        invalidNumMsg: \"请输入正确的数字\"\r\n      };\r\n    },\r\n\r\n    props: {\r\n      value: [String, Number],\r\n      size: String,\r\n      resize: String,\r\n      form: String,\r\n      disabled: Boolean,\r\n      readonly: Boolean,\r\n      type: {\r\n        type: String,\r\n        default: 'text'\r\n      },\r\n      autosize: {\r\n        type: [Boolean, Object],\r\n        default: false\r\n      },\r\n      autocomplete: {\r\n        type: String,\r\n        default: 'off'\r\n      },\r\n      /** @Deprecated in next major version */\r\n      autoComplete: {\r\n        type: String,\r\n        validator(val) {\r\n          process.env.NODE_ENV !== 'production' &&\r\n            console.warn('[Element Warn][Input]\\'auto-complete\\' property will be deprecated in next major version. please use \\'autocomplete\\' instead.');\r\n          return true;\r\n        }\r\n      },\r\n      validateEvent: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      suffixIcon: String,\r\n      prefixIcon: String,\r\n      label: String,\r\n      clearable: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      showPassword: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      showWordLimit: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      tabindex: String,\r\n      colorEnabled: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      colorAlphaEnabled: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      focusAnimEnabled: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      hideBorder: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      numberOnly: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      inputStyle: {\r\n        type: String,\r\n        default: \"\"\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      _elFormItemSize() {\r\n        return (this.elFormItem || {}).elFormItemSize;\r\n      },\r\n      validateState() {\r\n        return this.elFormItem ? this.elFormItem.validateState : '';\r\n      },\r\n      needStatusIcon() {\r\n        return this.elForm ? this.elForm.statusIcon : false;\r\n      },\r\n      validateIcon() {\r\n        return {\r\n          validating: 'el-icon-loading',\r\n          success: 'el-icon-circle-check',\r\n          error: 'el-icon-circle-close'\r\n        }[this.validateState];\r\n      },\r\n      textareaStyle() {\r\n        return merge({}, this.textareaCalcStyle, { resize: this.resize });\r\n      },\r\n      inputSize() {\r\n        return this.size || this._elFormItemSize || (this.$ELEMENT || {}).size;\r\n      },\r\n      inputDisabled() {\r\n        return this.disabled || (this.elForm || {}).disabled;\r\n      },\r\n      nativeInputValue() {\r\n        return this.value === null || this.value === undefined ? '' : String(this.value);\r\n      },\r\n      showClear() {\r\n        // return true;\r\n        return this.clearable &&\r\n          !this.inputDisabled &&\r\n          !this.readonly &&\r\n          this.nativeInputValue &&\r\n          (this.focused || this.hovering);\r\n      },\r\n      showPwdVisible() {\r\n        return this.showPassword &&\r\n          !this.inputDisabled &&\r\n          !this.readonly &&\r\n          (!!this.nativeInputValue || this.focused);\r\n      },\r\n      isWordLimitVisible() {\r\n        return this.showWordLimit &&\r\n          this.$attrs.maxlength &&\r\n          (this.type === 'text' || this.type === 'textarea') &&\r\n          !this.inputDisabled &&\r\n          !this.readonly &&\r\n          !this.showPassword;\r\n      },\r\n      upperLimit() {\r\n        return this.$attrs.maxlength;\r\n      },\r\n      textLength() {\r\n        if (typeof this.value === 'number') {\r\n          return String(this.value).length;\r\n        }\r\n\r\n        return (this.value || '').length;\r\n      },\r\n      inputExceed() {\r\n        // show exceed style if length of initial value greater then maxlength\r\n        return this.isWordLimitVisible &&\r\n          (this.textLength > this.upperLimit);\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      value(val) {\r\n        this.$nextTick(this.resizeTextarea);\r\n        if (this.validateEvent) {\r\n          this.dispatch('ElFormItem', 'el.form.change', [val]);\r\n        }\r\n      },\r\n      // native input value is set explicitly\r\n      // do not use v-model / :value in template\r\n      // see: https://github.com/ElemeFE/element/issues/14521\r\n      nativeInputValue() {\r\n        this.setNativeInputValue();\r\n      },\r\n      // when change between <input> and <textarea>,\r\n      // update DOM dependent value and styles\r\n      // https://github.com/ElemeFE/element/issues/14857\r\n      type() {\r\n        this.$nextTick(() => {\r\n          this.setNativeInputValue();\r\n          this.resizeTextarea();\r\n          this.updateIconOffset();\r\n        });\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      focus() {\r\n        this.getInput().focus();\r\n      },\r\n      blur() {\r\n        this.getInput().blur();\r\n      },\r\n      getMigratingConfig() {\r\n        return {\r\n          props: {\r\n            'icon': 'icon is removed, use suffix-icon / prefix-icon instead.',\r\n            'on-icon-click': 'on-icon-click is removed.'\r\n          },\r\n          events: {\r\n            'click': 'click is removed.'\r\n          }\r\n        };\r\n      },\r\n      handleBlur(event) {\r\n        this.focused = false;\r\n        this.$emit('blur', event);\r\n        if (this.validateEvent) {\r\n          this.dispatch('ElFormItem', 'el.form.blur', [this.value]);\r\n        }\r\n        if (this.focusAnimEnabled) {\r\n          this.hideUnderLine();\r\n        }\r\n\r\n      },\r\n      showUnderLine() {\r\n        let div = this.$refs.box;\r\n        div.classList.add('focus-anim2');\r\n      },\r\n      hideUnderLine() {\r\n        let div = this.$refs.box;\r\n        div.classList.remove('focus-anim2');\r\n      },\r\n      select() {\r\n        this.getInput().select();\r\n      },\r\n      resizeTextarea() {\r\n        if (this.$isServer) return;\r\n        const { autosize, type } = this;\r\n        if (type !== 'textarea') return;\r\n        if (!autosize) {\r\n          this.textareaCalcStyle = {\r\n            minHeight: calcTextareaHeight(this.$refs.textarea).minHeight\r\n          };\r\n          return;\r\n        }\r\n        const minRows = autosize.minRows;\r\n        const maxRows = autosize.maxRows;\r\n\r\n        this.textareaCalcStyle = calcTextareaHeight(this.$refs.textarea, minRows, maxRows);\r\n      },\r\n      setNativeInputValue() {\r\n        const input = this.getInput();\r\n        if (!input) return;\r\n        if (input.value === this.nativeInputValue) return;\r\n        input.value = this.nativeInputValue;\r\n\r\n      },\r\n      handleFocus(event) {\r\n        // console.log(event);\r\n        this.focused = true;\r\n        this.$emit('focus', event);\r\n        if (this.focusAnimEnabled) {\r\n          // let div = event.target.parentElement;\r\n          this.showUnderLine();\r\n        }\r\n      },\r\n      handleCompositionStart() {\r\n        this.isComposing = true;\r\n      },\r\n      handleCompositionUpdate(event) {\r\n        const text = event.target.value;\r\n        const lastCharacter = text[text.length - 1] || '';\r\n        this.isComposing = !isKorean(lastCharacter);\r\n      },\r\n      handleCompositionEnd(event) {\r\n        if (this.isComposing) {\r\n          this.isComposing = false;\r\n          this.handleInput(event);\r\n        }\r\n      },\r\n      handleInput(event) {\r\n        // should not emit input during composition\r\n        // see: https://github.com/ElemeFE/element/issues/10516\r\n        if (this.isComposing) return;\r\n\r\n        // hack for https://github.com/ElemeFE/element/issues/8548\r\n        // should remove the following line when we don't support IE\r\n        if (event.target.value === this.nativeInputValue) return;\r\n\r\n        this.$emit('input', event.target.value);\r\n\r\n        // ensure native input value is controlled\r\n        // see: https://github.com/ElemeFE/element/issues/12850\r\n        this.$nextTick(this.setNativeInputValue);\r\n        if (this.numberOnly) {\r\n          const input = this.getInput();\r\n          this.numberInvalid = !checkNumber(input.value);\r\n          let el = this.$refs.input;\r\n          if (this.numberInvalid) {\r\n            // console.log(this.$refs.input._tipHandler);\r\n            el.addEventListener('mouseenter', el._tipHandler);\r\n            el.addEventListener('mouseleave', el._tipMouseleaveHandler);\r\n          } else {\r\n            el.removeEventListener('mouseenter', el._tipHandler);\r\n            el.removeEventListener('mouseleave', el._tipMouseleaveHandler);\r\n          }\r\n        }\r\n      },\r\n      handleChange(event) {\r\n        this.$emit('change', event.target.value);\r\n      },\r\n      calcIconOffset(place) {\r\n        let elList = [].slice.call(this.$el.querySelectorAll(`.el-input__${place}`) || []);\r\n        if (!elList.length) return;\r\n        let el = null;\r\n        for (let i = 0; i < elList.length; i++) {\r\n          if (elList[i].parentNode === this.$el) {\r\n            el = elList[i];\r\n            break;\r\n          }\r\n        }\r\n        if (!el) return;\r\n        const pendantMap = {\r\n          suffix: 'append',\r\n          prefix: 'prepend'\r\n        };\r\n\r\n        const pendant = pendantMap[place];\r\n        if (this.$slots[pendant]) {\r\n          el.style.transform = `translateX(${place === 'suffix' ? '-' : ''}${this.$el.querySelector(`.el-input-group__${pendant}`).offsetWidth}px)`;\r\n        } else {\r\n          el.removeAttribute('style');\r\n        }\r\n      },\r\n      updateIconOffset() {\r\n        this.calcIconOffset('prefix');\r\n        this.calcIconOffset('suffix');\r\n      },\r\n      clear() {\r\n        this.$emit('input', '');\r\n        this.$emit('change', '');\r\n        this.$emit('clear');\r\n      },\r\n      handlePasswordVisible() {\r\n        this.passwordVisible = !this.passwordVisible;\r\n        this.focus();\r\n      },\r\n      getInput() {\r\n        return this.$refs.input || this.$refs.textarea;\r\n      },\r\n      getSuffixVisible() {\r\n        return this.$slots.suffix ||\r\n          this.suffixIcon ||\r\n          this.showClear ||\r\n          this.showPassword ||\r\n          this.isWordLimitVisible ||\r\n          (this.validateState && this.needStatusIcon);\r\n      },\r\n      updateColor(color) {\r\n        if (this.colorEnabled || this.colorAlphaEnabled) {\r\n          this.$refs.input.value = color;\r\n          // console.log('input value changed! ' + this.$refs.input.value);\r\n          if (this.$refs.input._jscLinkedInstance)\r\n            this.$refs.input._jscLinkedInstance.importColor();\r\n        }\r\n      }\r\n    },\r\n\r\n    created() {\r\n      this.$on('inputSelect', this.select);\r\n    },\r\n\r\n    mounted() {\r\n      this.setNativeInputValue();\r\n      this.resizeTextarea();\r\n      this.updateIconOffset();\r\n      let el = this.$refs.input;\r\n      if (this.colorEnabled || this.colorAlphaEnabled) {\r\n        el.onFineChange = (jscolor) => {\r\n          this.$emit('colorChange', jscolor);\r\n        };\r\n        el.addEventListener('change', () => {\r\n          this.$emit('colorChangeEnd', this.$refs.input.value);\r\n        });\r\n      }\r\n      if (el && el._tipHandler) {\r\n        el.removeEventListener('mouseenter', el._tipHandler);\r\n        el.removeEventListener('mouseleave', el._tipMouseleaveHandler);\r\n      }\r\n    },\r\n\r\n    updated() {\r\n      this.$nextTick(this.updateIconOffset);\r\n    }\r\n  };\r\n</script>\r\n<style scoped>\r\n  .hideBorder {\r\n    border: none;\r\n  }\r\n  .number-invalid {\r\n    border: solid 2px red;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=2c13fb0c&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=2c13fb0c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c13fb0c\",\n  null\n  \n)\n\nexport default component.exports","import ElInput from './src/input';\r\n\r\n/* istanbul ignore next */\r\nElInput.install = function(Vue) {\r\n  Vue.component(ElInput.name, ElInput);\r\n};\r\n\r\nexport default ElInput;\r\n","import Vue from 'vue';\r\nimport { on } from './dom';\r\n\r\nconst nodeList = [];\r\nconst ctx = '@@clickoutsideContext';\r\n\r\nlet startClick;\r\nlet seed = 0;\r\n\r\n!Vue.prototype.$isServer && on(document, 'mousedown', e => (startClick = e));\r\n\r\n!Vue.prototype.$isServer && on(document, 'mouseup', e => {\r\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\r\n});\r\n\r\nfunction createDocumentHandler(el, binding, vnode) {\r\n  return function(mouseup = {}, mousedown = {}) {\r\n    if (!vnode ||\r\n      !vnode.context ||\r\n      !mouseup.target ||\r\n      !mousedown.target ||\r\n      el.contains(mouseup.target) ||\r\n      el.contains(mousedown.target) ||\r\n      el === mouseup.target ||\r\n      (vnode.context.popperElm &&\r\n      (vnode.context.popperElm.contains(mouseup.target) ||\r\n      vnode.context.popperElm.contains(mousedown.target)))) return;\r\n\r\n    if (binding.expression &&\r\n      el[ctx].methodName &&\r\n      vnode.context[el[ctx].methodName]) {\r\n      vnode.context[el[ctx].methodName]();\r\n    } else {\r\n      el[ctx].bindingFn && el[ctx].bindingFn();\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * v-clickoutside\r\n * @desc 点击元素外面才会触发的事件\r\n * @example\r\n * ```vue\r\n * <div v-element-clickoutside=\"handleClose\">\r\n * ```\r\n */\r\nexport default {\r\n  bind(el, binding, vnode) {\r\n    nodeList.push(el);\r\n    const id = seed++;\r\n    el[ctx] = {\r\n      id,\r\n      documentHandler: createDocumentHandler(el, binding, vnode),\r\n      methodName: binding.expression,\r\n      bindingFn: binding.value\r\n    };\r\n  },\r\n\r\n  update(el, binding, vnode) {\r\n    el[ctx].documentHandler = createDocumentHandler(el, binding, vnode);\r\n    el[ctx].methodName = binding.expression;\r\n    el[ctx].bindingFn = binding.value;\r\n  },\r\n\r\n  unbind(el) {\r\n    let len = nodeList.length;\r\n\r\n    for (let i = 0; i < len; i++) {\r\n      if (nodeList[i][ctx].id === el[ctx].id) {\r\n        nodeList.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    delete el[ctx];\r\n  }\r\n};\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"el-button\",class:[\n    _vm.type ? 'el-button--' + _vm.type : '',\n    _vm.buttonSize ? 'el-button--' + _vm.buttonSize : '',\n    {\n      'is-disabled': _vm.buttonDisabled,\n      'is-loading': _vm.loading,\n      'is-plain': _vm.plain,\n      'is-round': _vm.round,\n      'is-circle': _vm.circle\n    }\n  ],attrs:{\"disabled\":_vm.buttonDisabled || _vm.loading,\"autofocus\":_vm.autofocus,\"type\":_vm.nativeType},on:{\"click\":_vm.handleClick}},[(_vm.loading)?_c('i',{staticClass:\"el-icon-loading\"}):_vm._e(),(_vm.icon && !_vm.loading)?_c('i',{class:_vm.icon}):_vm._e(),(_vm.$slots.default)?_c('span',[_vm._t(\"default\")],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <button\r\n    class=\"el-button\"\r\n    @click=\"handleClick\"\r\n    :disabled=\"buttonDisabled || loading\"\r\n    :autofocus=\"autofocus\"\r\n    :type=\"nativeType\"\r\n    :class=\"[\r\n      type ? 'el-button--' + type : '',\r\n      buttonSize ? 'el-button--' + buttonSize : '',\r\n      {\r\n        'is-disabled': buttonDisabled,\r\n        'is-loading': loading,\r\n        'is-plain': plain,\r\n        'is-round': round,\r\n        'is-circle': circle\r\n      }\r\n    ]\"\r\n  >\r\n    <i class=\"el-icon-loading\" v-if=\"loading\"></i>\r\n    <i :class=\"icon\" v-if=\"icon && !loading\"></i>\r\n    <span v-if=\"$slots.default\"><slot></slot></span>\r\n  </button>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: 'ElButton',\r\n\r\n    inject: {\r\n      elForm: {\r\n        default: ''\r\n      },\r\n      elFormItem: {\r\n        default: ''\r\n      }\r\n    },\r\n\r\n    props: {\r\n      type: {\r\n        type: String,\r\n        default: 'default'\r\n      },\r\n      size: String,\r\n      icon: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      nativeType: {\r\n        type: String,\r\n        default: 'button'\r\n      },\r\n      loading: Boolean,\r\n      disabled: Boolean,\r\n      plain: Boolean,\r\n      autofocus: Boolean,\r\n      round: Boolean,\r\n      circle: Boolean\r\n    },\r\n\r\n    computed: {\r\n      _elFormItemSize() {\r\n        return (this.elFormItem || {}).elFormItemSize;\r\n      },\r\n      buttonSize() {\r\n        return this.size || this._elFormItemSize || (this.$ELEMENT || {}).size;\r\n      },\r\n      buttonDisabled() {\r\n        return this.disabled || (this.elForm || {}).disabled;\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      handleClick(evt) {\r\n        this.$emit('click', evt);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./button.vue?vue&type=template&id=52c13da3&\"\nimport script from \"./button.vue?vue&type=script&lang=js&\"\nexport * from \"./button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ElButton from './src/button';\r\n\r\n/* istanbul ignore next */\r\nElButton.install = function(Vue) {\r\n  Vue.component(ElButton.name, ElButton);\r\n};\r\n\r\nexport default ElButton;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"el-button-group\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"el-button-group\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: 'ElButtonGroup'\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button-group.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button-group.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./button-group.vue?vue&type=template&id=a5adb7be&\"\nimport script from \"./button-group.vue?vue&type=script&lang=js&\"\nexport * from \"./button-group.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ElButtonGroup from '../button/src/button-group';\r\n\r\n/* istanbul ignore next */\r\nElButtonGroup.install = function(Vue) {\r\n  Vue.component(ElButtonGroup.name, ElButtonGroup);\r\n};\r\n\r\nexport default ElButtonGroup;\r\n","var render, staticRenderFns\nimport script from \"./dropdown.vue?vue&type=script&lang=js&\"\nexport * from \"./dropdown.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\r\n  import Clickoutside from '@/components/element/utils/clickoutside';\r\n  import Emitter from '@/components/element/mixins/emitter';\r\n  import Migrating from '@/components/element/mixins/migrating';\r\n  import ElButton from '@/components/element/button';\r\n  import ElButtonGroup from '@/components/element/button-group';\r\n  import { generateId } from '@/components/element/utils/util';\r\n\r\n  export default {\r\n    name: 'ElDropdown',\r\n\r\n    componentName: 'ElDropdown',\r\n\r\n    mixins: [Emitter, Migrating],\r\n\r\n    directives: { Clickoutside },\r\n\r\n    components: {\r\n      ElButton,\r\n      ElButtonGroup\r\n    },\r\n\r\n    provide() {\r\n      return {\r\n        dropdown: this\r\n      };\r\n    },\r\n\r\n    props: {\r\n      trigger: {\r\n        type: String,\r\n        default: 'hover'\r\n      },\r\n      type: String,\r\n      size: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      splitButton: Boolean,\r\n      hideOnClick: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      placement: {\r\n        type: String,\r\n        default: 'bottom-end'\r\n      },\r\n      visibleArrow: {\r\n        default: true\r\n      },\r\n      showTimeout: {\r\n        type: Number,\r\n        default: 250\r\n      },\r\n      hideTimeout: {\r\n        type: Number,\r\n        default: 150\r\n      },\r\n      tabindex: {\r\n        type: Number,\r\n        default: 0\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        timeout: null,\r\n        visible: false,\r\n        triggerElm: null,\r\n        menuItems: null,\r\n        menuItemsArray: null,\r\n        dropdownElm: null,\r\n        focusing: false,\r\n        listId: `dropdown-menu-${generateId()}`\r\n      };\r\n    },\r\n\r\n    computed: {\r\n      dropdownSize() {\r\n        return this.size || (this.$ELEMENT || {}).size;\r\n      }\r\n    },\r\n\r\n    mounted() {\r\n      this.$on('menu-item-click', this.handleMenuItemClick);\r\n    },\r\n\r\n    watch: {\r\n      visible(val) {\r\n        this.broadcast('ElDropdownMenu', 'visible', val);\r\n        this.$emit('visible-change', val);\r\n      },\r\n      focusing(val) {\r\n        const selfDefine = this.$el.querySelector('.el-dropdown-selfdefine');\r\n        if (selfDefine) { // 自定义\r\n          if (val) {\r\n            selfDefine.className += ' focusing';\r\n          } else {\r\n            selfDefine.className = selfDefine.className.replace('focusing', '');\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      getMigratingConfig() {\r\n        return {\r\n          props: {\r\n            'menu-align': 'menu-align is renamed to placement.'\r\n          }\r\n        };\r\n      },\r\n      show() {\r\n        if (this.triggerElm.disabled) return;\r\n        clearTimeout(this.timeout);\r\n        this.timeout = setTimeout(() => {\r\n          this.visible = true;\r\n        }, this.trigger === 'click' ? 0 : this.showTimeout);\r\n      },\r\n      hide() {\r\n        if (this.triggerElm.disabled) return;\r\n        this.removeTabindex();\r\n        if (this.tabindex >= 0) {\r\n          this.resetTabindex(this.triggerElm);\r\n        }\r\n        clearTimeout(this.timeout);\r\n        this.timeout = setTimeout(() => {\r\n          this.visible = false;\r\n        }, this.trigger === 'click' ? 0 : this.hideTimeout);\r\n      },\r\n      handleClick() {\r\n        if (this.triggerElm.disabled) return;\r\n        if (this.visible) {\r\n          this.hide();\r\n        } else {\r\n          this.show();\r\n        }\r\n      },\r\n      handleTriggerKeyDown(ev) {\r\n        const keyCode = ev.keyCode;\r\n        if ([38, 40].indexOf(keyCode) > -1) { // up/down\r\n          this.removeTabindex();\r\n          this.resetTabindex(this.menuItems[0]);\r\n          this.menuItems[0].focus();\r\n          ev.preventDefault();\r\n          ev.stopPropagation();\r\n        } else if (keyCode === 13) { // space enter选中\r\n          this.handleClick();\r\n        } else if ([9, 27].indexOf(keyCode) > -1) { // tab || esc\r\n          this.hide();\r\n        }\r\n      },\r\n      handleItemKeyDown(ev) {\r\n        const keyCode = ev.keyCode;\r\n        const target = ev.target;\r\n        const currentIndex = this.menuItemsArray.indexOf(target);\r\n        const max = this.menuItemsArray.length - 1;\r\n        let nextIndex;\r\n        if ([38, 40].indexOf(keyCode) > -1) { // up/down\r\n          if (keyCode === 38) { // up\r\n            nextIndex = currentIndex !== 0 ? currentIndex - 1 : 0;\r\n          } else { // down\r\n            nextIndex = currentIndex < max ? currentIndex + 1 : max;\r\n          }\r\n          this.removeTabindex();\r\n          this.resetTabindex(this.menuItems[nextIndex]);\r\n          this.menuItems[nextIndex].focus();\r\n          ev.preventDefault();\r\n          ev.stopPropagation();\r\n        } else if (keyCode === 13) { // enter选中\r\n          this.triggerElmFocus();\r\n          target.click();\r\n          if (this.hideOnClick) { // click关闭\r\n            this.visible = false;\r\n          }\r\n        } else if ([9, 27].indexOf(keyCode) > -1) { // tab // esc\r\n          this.hide();\r\n          this.triggerElmFocus();\r\n        }\r\n      },\r\n      resetTabindex(ele) { // 下次tab时组件聚焦元素\r\n        this.removeTabindex();\r\n        ele.setAttribute('tabindex', '0'); // 下次期望的聚焦元素\r\n      },\r\n      removeTabindex() {\r\n        this.triggerElm.setAttribute('tabindex', '-1');\r\n        this.menuItemsArray.forEach((item) => {\r\n          item.setAttribute('tabindex', '-1');\r\n        });\r\n      },\r\n      initAria() {\r\n        this.dropdownElm.setAttribute('id', this.listId);\r\n        this.triggerElm.setAttribute('aria-haspopup', 'list');\r\n        this.triggerElm.setAttribute('aria-controls', this.listId);\r\n\r\n        if (!this.splitButton) { // 自定义\r\n          this.triggerElm.setAttribute('role', 'button');\r\n          this.triggerElm.setAttribute('tabindex', this.tabindex);\r\n          this.triggerElm.setAttribute('class', (this.triggerElm.getAttribute('class') || '') + ' el-dropdown-selfdefine'); // 控制\r\n        }\r\n      },\r\n      initEvent() {\r\n        let { trigger, show, hide, handleClick, splitButton, handleTriggerKeyDown, handleItemKeyDown } = this;\r\n        this.triggerElm = splitButton\r\n          ? this.$refs.trigger.$el\r\n          : this.$slots.default[0].elm;\r\n\r\n        let dropdownElm = this.dropdownElm;\r\n\r\n        this.triggerElm.addEventListener('keydown', handleTriggerKeyDown); // triggerElm keydown\r\n        dropdownElm.addEventListener('keydown', handleItemKeyDown, true); // item keydown\r\n        // 控制自定义元素的样式\r\n        if (!splitButton) {\r\n          this.triggerElm.addEventListener('focus', () => {\r\n            this.focusing = true;\r\n          });\r\n          this.triggerElm.addEventListener('blur', () => {\r\n            this.focusing = false;\r\n          });\r\n          this.triggerElm.addEventListener('click', () => {\r\n            this.focusing = false;\r\n          });\r\n        }\r\n        if (trigger === 'hover') {\r\n          this.triggerElm.addEventListener('mouseenter', show);\r\n          this.triggerElm.addEventListener('mouseleave', hide);\r\n          dropdownElm.addEventListener('mouseenter', show);\r\n          dropdownElm.addEventListener('mouseleave', hide);\r\n        } else if (trigger === 'click') {\r\n          this.triggerElm.addEventListener('click', handleClick);\r\n        }\r\n      },\r\n      handleMenuItemClick(command, instance) {\r\n        if (this.hideOnClick) {\r\n          this.visible = false;\r\n        }\r\n        this.$emit('command', command, instance);\r\n      },\r\n      triggerElmFocus() {\r\n        this.triggerElm.focus && this.triggerElm.focus();\r\n      },\r\n      initDomOperation() {\r\n        this.dropdownElm = this.popperElm;\r\n        this.menuItems = this.dropdownElm.querySelectorAll(\"[tabindex='-1']\");\r\n        this.menuItemsArray = [].slice.call(this.menuItems);\r\n\r\n        this.initEvent();\r\n        this.initAria();\r\n      }\r\n    },\r\n\r\n    render(h) {\r\n      let { hide, splitButton, type, dropdownSize } = this;\r\n\r\n      const handleMainButtonClick = (event) => {\r\n        this.$emit('click', event);\r\n        hide();\r\n      };\r\n\r\n      let triggerElm = !splitButton\r\n        ? this.$slots.default\r\n        : (<el-button-group>\r\n          <el-button type={type} size={dropdownSize} nativeOn-click={handleMainButtonClick}>\r\n            {this.$slots.default}\r\n          </el-button>\r\n          <el-button ref=\"trigger\" type={type} size={dropdownSize} class=\"el-dropdown__caret-button\">\r\n            <i class=\"el-dropdown__icon el-icon-arrow-down\"></i>\r\n          </el-button>\r\n        </el-button-group>);\r\n\r\n      return (\r\n        <div class=\"el-dropdown\" v-clickoutside={hide}>\r\n          {triggerElm}\r\n          {this.$slots.dropdown}\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dropdown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dropdown.vue?vue&type=script&lang=js&\"","import ElDropdown from './src/dropdown';\r\n\r\n/* istanbul ignore next */\r\nElDropdown.install = function(Vue) {\r\n  Vue.component(ElDropdown.name, ElDropdown);\r\n};\r\n\r\nexport default ElDropdown;\r\n","import Vue from 'vue';\r\nimport { addClass, removeClass } from '../dom';\r\n\r\nlet hasModal = false;\r\nlet hasInitZIndex = false;\r\nlet zIndex;\r\n\r\nconst getModal = function() {\r\n  if (Vue.prototype.$isServer) return;\r\n  let modalDom = PopupManager.modalDom;\r\n  if (modalDom) {\r\n    hasModal = true;\r\n  } else {\r\n    hasModal = false;\r\n    modalDom = document.createElement('div');\r\n    PopupManager.modalDom = modalDom;\r\n\r\n    modalDom.addEventListener('touchmove', function(event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    });\r\n\r\n    modalDom.addEventListener('click', function() {\r\n      PopupManager.doOnModalClick && PopupManager.doOnModalClick();\r\n    });\r\n  }\r\n\r\n  return modalDom;\r\n};\r\n\r\nconst instances = {};\r\n\r\nconst PopupManager = {\r\n  modalFade: true,\r\n\r\n  getInstance: function(id) {\r\n    return instances[id];\r\n  },\r\n\r\n  register: function(id, instance) {\r\n    if (id && instance) {\r\n      instances[id] = instance;\r\n    }\r\n  },\r\n\r\n  deregister: function(id) {\r\n    if (id) {\r\n      instances[id] = null;\r\n      delete instances[id];\r\n    }\r\n  },\r\n\r\n  nextZIndex: function() {\r\n    return PopupManager.zIndex++;\r\n  },\r\n\r\n  modalStack: [],\r\n\r\n  doOnModalClick: function() {\r\n    const topItem = PopupManager.modalStack[PopupManager.modalStack.length - 1];\r\n    if (!topItem) return;\r\n\r\n    const instance = PopupManager.getInstance(topItem.id);\r\n    if (instance && instance.closeOnClickModal) {\r\n      instance.close();\r\n    }\r\n  },\r\n\r\n  openModal: function(id, zIndex, dom, modalClass, modalFade) {\r\n    if (Vue.prototype.$isServer) return;\r\n    if (!id || zIndex === undefined) return;\r\n    this.modalFade = modalFade;\r\n\r\n    const modalStack = this.modalStack;\r\n\r\n    for (let i = 0, j = modalStack.length; i < j; i++) {\r\n      const item = modalStack[i];\r\n      if (item.id === id) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const modalDom = getModal();\r\n\r\n    addClass(modalDom, 'v-modal');\r\n    if (this.modalFade && !hasModal) {\r\n      addClass(modalDom, 'v-modal-enter');\r\n    }\r\n    if (modalClass) {\r\n      let classArr = modalClass.trim().split(/\\s+/);\r\n      classArr.forEach(item => addClass(modalDom, item));\r\n    }\r\n    setTimeout(() => {\r\n      removeClass(modalDom, 'v-modal-enter');\r\n    }, 200);\r\n\r\n    if (dom && dom.parentNode && dom.parentNode.nodeType !== 11) {\r\n      dom.parentNode.appendChild(modalDom);\r\n    } else {\r\n      document.body.appendChild(modalDom);\r\n    }\r\n\r\n    if (zIndex) {\r\n      modalDom.style.zIndex = zIndex;\r\n    }\r\n    modalDom.tabIndex = 0;\r\n    modalDom.style.display = '';\r\n\r\n    this.modalStack.push({ id: id, zIndex: zIndex, modalClass: modalClass });\r\n  },\r\n\r\n  closeModal: function(id) {\r\n    const modalStack = this.modalStack;\r\n    const modalDom = getModal();\r\n\r\n    if (modalStack.length > 0) {\r\n      const topItem = modalStack[modalStack.length - 1];\r\n      if (topItem.id === id) {\r\n        if (topItem.modalClass) {\r\n          let classArr = topItem.modalClass.trim().split(/\\s+/);\r\n          classArr.forEach(item => removeClass(modalDom, item));\r\n        }\r\n\r\n        modalStack.pop();\r\n        if (modalStack.length > 0) {\r\n          modalDom.style.zIndex = modalStack[modalStack.length - 1].zIndex;\r\n        }\r\n      } else {\r\n        for (let i = modalStack.length - 1; i >= 0; i--) {\r\n          if (modalStack[i].id === id) {\r\n            modalStack.splice(i, 1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (modalStack.length === 0) {\r\n      if (this.modalFade) {\r\n        addClass(modalDom, 'v-modal-leave');\r\n      }\r\n      setTimeout(() => {\r\n        if (modalStack.length === 0) {\r\n          if (modalDom.parentNode) modalDom.parentNode.removeChild(modalDom);\r\n          modalDom.style.display = 'none';\r\n          PopupManager.modalDom = undefined;\r\n        }\r\n        removeClass(modalDom, 'v-modal-leave');\r\n      }, 200);\r\n    }\r\n  }\r\n};\r\n\r\nObject.defineProperty(PopupManager, 'zIndex', {\r\n  configurable: true,\r\n  get() {\r\n    if (!hasInitZIndex) {\r\n      zIndex = zIndex || (Vue.prototype.$ELEMENT || {}).zIndex || 2000;\r\n      hasInitZIndex = true;\r\n    }\r\n    return zIndex;\r\n  },\r\n  set(value) {\r\n    zIndex = value;\r\n  }\r\n});\r\n\r\nconst getTopPopup = function() {\r\n  if (Vue.prototype.$isServer) return;\r\n  if (PopupManager.modalStack.length > 0) {\r\n    const topPopup = PopupManager.modalStack[PopupManager.modalStack.length - 1];\r\n    if (!topPopup) return;\r\n    const instance = PopupManager.getInstance(topPopup.id);\r\n\r\n    return instance;\r\n  }\r\n};\r\n\r\nif (!Vue.prototype.$isServer) {\r\n  // handle `esc` key when the popup is shown\r\n  window.addEventListener('keydown', function(event) {\r\n    if (event.keyCode === 27) {\r\n      const topPopup = getTopPopup();\r\n\r\n      if (topPopup && topPopup.closeOnPressEscape) {\r\n        topPopup.handleClose\r\n          ? topPopup.handleClose()\r\n          : (topPopup.handleAction ? topPopup.handleAction('cancel') : topPopup.close());\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport default PopupManager;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"el-zoom-in-top\"},on:{\"after-leave\":_vm.doDestroy}},[_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPopper),expression:\"showPopper\"}],staticClass:\"el-dropdown-menu el-popper\",class:[_vm.size && (\"el-dropdown-menu--\" + _vm.size)]},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\r\n\r\nlet scrollBarWidth;\r\n\r\nexport default function() {\r\n  if (Vue.prototype.$isServer) return 0;\r\n  if (scrollBarWidth !== undefined) return scrollBarWidth;\r\n\r\n  const outer = document.createElement('div');\r\n  outer.className = 'el-scrollbar__wrap';\r\n  outer.style.visibility = 'hidden';\r\n  outer.style.width = '100px';\r\n  outer.style.position = 'absolute';\r\n  outer.style.top = '-9999px';\r\n  document.body.appendChild(outer);\r\n\r\n  const widthNoScroll = outer.offsetWidth;\r\n  outer.style.overflow = 'scroll';\r\n\r\n  const inner = document.createElement('div');\r\n  inner.style.width = '100%';\r\n  outer.appendChild(inner);\r\n\r\n  const widthWithScroll = inner.offsetWidth;\r\n  outer.parentNode.removeChild(outer);\r\n  scrollBarWidth = widthNoScroll - widthWithScroll;\r\n\r\n  return scrollBarWidth;\r\n};\r\n","import Vue from 'vue';\r\nimport merge from '@/components/element/utils/merge';\r\nimport PopupManager from '@/components/element/utils/popup/popup-manager';\r\nimport getScrollBarWidth from '../scrollbar-width';\r\nimport { getStyle, addClass, removeClass, hasClass } from '../dom';\r\n\r\nlet idSeed = 1;\r\n\r\nlet scrollBarWidth;\r\n\r\nexport default {\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    openDelay: {},\r\n    closeDelay: {},\r\n    zIndex: {},\r\n    modal: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    modalFade: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    modalClass: {},\r\n    modalAppendToBody: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    lockScroll: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    closeOnPressEscape: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    closeOnClickModal: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  beforeMount() {\r\n    this._popupId = 'popup-' + idSeed++;\r\n    PopupManager.register(this._popupId, this);\r\n  },\r\n\r\n  beforeDestroy() {\r\n    PopupManager.deregister(this._popupId);\r\n    PopupManager.closeModal(this._popupId);\r\n\r\n    this.restoreBodyStyle();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      opened: false,\r\n      bodyPaddingRight: null,\r\n      computedBodyPaddingRight: 0,\r\n      withoutHiddenClass: true,\r\n      rendered: false\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    visible(val) {\r\n      if (val) {\r\n        if (this._opening) return;\r\n        if (!this.rendered) {\r\n          this.rendered = true;\r\n          Vue.nextTick(() => {\r\n            this.open();\r\n          });\r\n        } else {\r\n          this.open();\r\n        }\r\n      } else {\r\n        this.close();\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    open(options) {\r\n      if (!this.rendered) {\r\n        this.rendered = true;\r\n      }\r\n\r\n      const props = merge({}, this.$props || this, options);\r\n\r\n      if (this._closeTimer) {\r\n        clearTimeout(this._closeTimer);\r\n        this._closeTimer = null;\r\n      }\r\n      clearTimeout(this._openTimer);\r\n\r\n      const openDelay = Number(props.openDelay);\r\n      if (openDelay > 0) {\r\n        this._openTimer = setTimeout(() => {\r\n          this._openTimer = null;\r\n          this.doOpen(props);\r\n        }, openDelay);\r\n      } else {\r\n        this.doOpen(props);\r\n      }\r\n    },\r\n\r\n    doOpen(props) {\r\n      if (this.$isServer) return;\r\n      if (this.willOpen && !this.willOpen()) return;\r\n      if (this.opened) return;\r\n\r\n      this._opening = true;\r\n\r\n      const dom = this.$el;\r\n\r\n      const modal = props.modal;\r\n\r\n      const zIndex = props.zIndex;\r\n      if (zIndex) {\r\n        PopupManager.zIndex = zIndex;\r\n      }\r\n\r\n      if (modal) {\r\n        if (this._closing) {\r\n          PopupManager.closeModal(this._popupId);\r\n          this._closing = false;\r\n        }\r\n        PopupManager.openModal(this._popupId, PopupManager.nextZIndex(), this.modalAppendToBody ? undefined : dom, props.modalClass, props.modalFade);\r\n        if (props.lockScroll) {\r\n          this.withoutHiddenClass = !hasClass(document.body, 'el-popup-parent--hidden');\r\n          if (this.withoutHiddenClass) {\r\n            this.bodyPaddingRight = document.body.style.paddingRight;\r\n            this.computedBodyPaddingRight = parseInt(getStyle(document.body, 'paddingRight'), 10);\r\n          }\r\n          scrollBarWidth = getScrollBarWidth();\r\n          let bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\r\n          let bodyOverflowY = getStyle(document.body, 'overflowY');\r\n          if (scrollBarWidth > 0 && (bodyHasOverflow || bodyOverflowY === 'scroll') && this.withoutHiddenClass) {\r\n            document.body.style.paddingRight = this.computedBodyPaddingRight + scrollBarWidth + 'px';\r\n          }\r\n          addClass(document.body, 'el-popup-parent--hidden');\r\n        }\r\n      }\r\n\r\n      if (getComputedStyle(dom).position === 'static') {\r\n        dom.style.position = 'absolute';\r\n      }\r\n\r\n      dom.style.zIndex = PopupManager.nextZIndex();\r\n      this.opened = true;\r\n\r\n      this.onOpen && this.onOpen();\r\n\r\n      this.doAfterOpen();\r\n    },\r\n\r\n    doAfterOpen() {\r\n      this._opening = false;\r\n    },\r\n\r\n    close() {\r\n      if (this.willClose && !this.willClose()) return;\r\n\r\n      if (this._openTimer !== null) {\r\n        clearTimeout(this._openTimer);\r\n        this._openTimer = null;\r\n      }\r\n      clearTimeout(this._closeTimer);\r\n\r\n      const closeDelay = Number(this.closeDelay);\r\n\r\n      if (closeDelay > 0) {\r\n        this._closeTimer = setTimeout(() => {\r\n          this._closeTimer = null;\r\n          this.doClose();\r\n        }, closeDelay);\r\n      } else {\r\n        this.doClose();\r\n      }\r\n    },\r\n\r\n    doClose() {\r\n      this._closing = true;\r\n\r\n      this.onClose && this.onClose();\r\n\r\n      if (this.lockScroll) {\r\n        setTimeout(this.restoreBodyStyle, 200);\r\n      }\r\n\r\n      this.opened = false;\r\n\r\n      this.doAfterClose();\r\n    },\r\n\r\n    doAfterClose() {\r\n      PopupManager.closeModal(this._popupId);\r\n      this._closing = false;\r\n    },\r\n\r\n    restoreBodyStyle() {\r\n      if (this.modal && this.withoutHiddenClass) {\r\n        document.body.style.paddingRight = this.bodyPaddingRight;\r\n        removeClass(document.body, 'el-popup-parent--hidden');\r\n      }\r\n      this.withoutHiddenClass = true;\r\n    }\r\n  }\r\n};\r\n\r\nexport {\r\n  PopupManager\r\n};\r\n","var render, staticRenderFns\nimport script from \"./tag.vue?vue&type=script&lang=js&\"\nexport * from \"./tag.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport {\r\n  PopupManager\r\n} from './popup';\r\n\r\nconst PopperJS = Vue.prototype.$isServer ? function() {} : require('./popper');\r\nconst stop = e => e.stopPropagation();\r\n\r\n/**\r\n * @param {HTMLElement} [reference=$refs.reference] - The reference element used to position the popper.\r\n * @param {HTMLElement} [popper=$refs.popper] - The HTML element used as popper, or a configuration used to generate the popper.\r\n * @param {String} [placement=button] - Placement of the popper accepted values: top(-start, -end), right(-start, -end), bottom(-start, -end), left(-start, -end)\r\n * @param {Number} [offset=0] - Amount of pixels the popper will be shifted (can be negative).\r\n * @param {Boolean} [visible=false] Visibility of the popup element.\r\n * @param {Boolean} [visible-arrow=false] Visibility of the arrow, no style.\r\n */\r\nexport default {\r\n  props: {\r\n    transformOrigin: {\r\n      type: [Boolean, String],\r\n      default: true\r\n    },\r\n    placement: {\r\n      type: String,\r\n      default: 'bottom'\r\n    },\r\n    boundariesPadding: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    reference: {},\r\n    popper: {},\r\n    offset: {\r\n      default: 0\r\n    },\r\n    value: Boolean,\r\n    visibleArrow: Boolean,\r\n    arrowOffset: {\r\n      type: Number,\r\n      default: 35\r\n    },\r\n    appendToBody: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    popperOptions: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          gpuAcceleration: false\r\n        };\r\n      }\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      showPopper: false,\r\n      currentPlacement: ''\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    value: {\r\n      immediate: true,\r\n      handler(val) {\r\n        this.showPopper = val;\r\n        this.$emit('input', val);\r\n      }\r\n    },\r\n\r\n    showPopper(val) {\r\n      if (this.disabled) return;\r\n      val ? this.updatePopper() : this.destroyPopper();\r\n      this.$emit('input', val);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    createPopper() {\r\n      if (this.$isServer) return;\r\n      this.currentPlacement = this.currentPlacement || this.placement;\r\n      if (!/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement)) {\r\n        return;\r\n      }\r\n\r\n      const options = this.popperOptions;\r\n      const popper = this.popperElm = this.popperElm || this.popper || this.$refs.popper;\r\n      let reference = this.referenceElm = this.referenceElm || this.reference || this.$refs.reference;\r\n\r\n      if (!reference &&\r\n        this.$slots.reference &&\r\n        this.$slots.reference[0]) {\r\n        reference = this.referenceElm = this.$slots.reference[0].elm;\r\n      }\r\n\r\n      if (!popper || !reference) return;\r\n      if (this.visibleArrow) this.appendArrow(popper);\r\n      if (this.appendToBody) document.body.appendChild(this.popperElm);\r\n      if (this.popperJS && this.popperJS.destroy) {\r\n        this.popperJS.destroy();\r\n      }\r\n\r\n      options.placement = this.currentPlacement;\r\n      options.offset = this.offset;\r\n      options.arrowOffset = this.arrowOffset;\r\n      this.popperJS = new PopperJS(reference, popper, options);\r\n      this.popperJS.onCreate(_ => {\r\n        this.$emit('created', this);\r\n        this.resetTransformOrigin();\r\n        this.$nextTick(this.updatePopper);\r\n      });\r\n      if (typeof options.onUpdate === 'function') {\r\n        this.popperJS.onUpdate(options.onUpdate);\r\n      }\r\n      this.popperJS._popper.style.zIndex = PopupManager.nextZIndex();\r\n      this.popperElm.addEventListener('click', stop);\r\n    },\r\n\r\n    updatePopper() {\r\n      const popperJS = this.popperJS;\r\n      if (popperJS) {\r\n        popperJS.update();\r\n        if (popperJS._popper) {\r\n          popperJS._popper.style.zIndex = PopupManager.nextZIndex();\r\n        }\r\n      } else {\r\n        this.createPopper();\r\n      }\r\n    },\r\n\r\n    doDestroy(forceDestroy) {\r\n      /* istanbul ignore if */\r\n      if (!this.popperJS || (this.showPopper && !forceDestroy)) return;\r\n      this.popperJS.destroy();\r\n      this.popperJS = null;\r\n    },\r\n\r\n    destroyPopper() {\r\n      if (this.popperJS) {\r\n        this.resetTransformOrigin();\r\n      }\r\n    },\r\n\r\n    resetTransformOrigin() {\r\n      if (!this.transformOrigin) return;\r\n      let placementMap = {\r\n        top: 'bottom',\r\n        bottom: 'top',\r\n        left: 'right',\r\n        right: 'left'\r\n      };\r\n      let placement = this.popperJS._popper.getAttribute('x-placement').split('-')[0];\r\n      let origin = placementMap[placement];\r\n      this.popperJS._popper.style.transformOrigin = typeof this.transformOrigin === 'string'\r\n        ? this.transformOrigin\r\n        : ['top', 'bottom'].indexOf(placement) > -1 ? `center ${ origin }` : `${ origin } center`;\r\n    },\r\n\r\n    appendArrow(element) {\r\n      let hash;\r\n      if (this.appended) {\r\n        return;\r\n      }\r\n\r\n      this.appended = true;\r\n\r\n      for (let item in element.attributes) {\r\n        if (/^_v-/.test(element.attributes[item].name)) {\r\n          hash = element.attributes[item].name;\r\n          break;\r\n        }\r\n      }\r\n\r\n      const arrow = document.createElement('div');\r\n\r\n      if (hash) {\r\n        arrow.setAttribute(hash, '');\r\n      }\r\n      arrow.setAttribute('x-arrow', '');\r\n      arrow.className = 'popper__arrow';\r\n      element.appendChild(arrow);\r\n    }\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.doDestroy(true);\r\n    if (this.popperElm && this.popperElm.parentNode === document.body) {\r\n      this.popperElm.removeEventListener('click', stop);\r\n      document.body.removeChild(this.popperElm);\r\n    }\r\n  },\r\n\r\n  // call destroy in keep-alive mode\r\n  deactivated() {\r\n    this.$options.beforeDestroy[0].call(this);\r\n  }\r\n};\r\n","<template>\r\n  <transition name=\"el-zoom-in-top\" @after-leave=\"doDestroy\">\r\n    <ul class=\"el-dropdown-menu el-popper\" :class=\"[size && `el-dropdown-menu--${size}`]\" v-show=\"showPopper\">\r\n      <slot></slot>\r\n    </ul>\r\n  </transition>\r\n</template>\r\n<script>\r\n  import Popper from '@/components/element/utils/vue-popper';\r\n\r\n  export default {\r\n    name: 'ElDropdownMenu',\r\n\r\n    componentName: 'ElDropdownMenu',\r\n\r\n    mixins: [Popper],\r\n\r\n    props: {\r\n      visibleArrow: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      arrowOffset: {\r\n        type: Number,\r\n        default: 0\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        size: this.dropdown.dropdownSize\r\n      };\r\n    },\r\n\r\n    inject: ['dropdown'],\r\n\r\n    created() {\r\n      this.$on('updatePopper', () => {\r\n        if (this.showPopper) this.updatePopper();\r\n      });\r\n      this.$on('visible', val => {\r\n        this.showPopper = val;\r\n      });\r\n    },\r\n\r\n    mounted() {\r\n      this.dropdown.popperElm = this.popperElm = this.$el;\r\n      this.referenceElm = this.dropdown.$el;\r\n      // compatible with 2.6 new v-slot syntax\r\n      // issue link https://github.com/ElemeFE/element/issues/14345\r\n      this.dropdown.initDomOperation();\r\n    },\r\n\r\n    watch: {\r\n      'dropdown.placement': {\r\n        immediate: true,\r\n        handler(val) {\r\n          this.currentPlacement = val;\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dropdown-menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dropdown-menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dropdown-menu.vue?vue&type=template&id=379ecc10&\"\nimport script from \"./dropdown-menu.vue?vue&type=script&lang=js&\"\nexport * from \"./dropdown-menu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"el-dropdown-menu__item\",class:{\n    'is-disabled': _vm.disabled,\n    'el-dropdown-menu__item--divided': _vm.divided,\n    'dropdown-item-selected': _vm.selected\n  },attrs:{\"aria-disabled\":_vm.disabled,\"tabindex\":_vm.disabled ? null : -1},on:{\"click\":_vm.handleClick}},[(_vm.icon)?_c('i',{class:_vm.icon}):_vm._e(),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <li\r\n    class=\"el-dropdown-menu__item\"\r\n    :class=\"{\r\n      'is-disabled': disabled,\r\n      'el-dropdown-menu__item--divided': divided,\r\n      'dropdown-item-selected': selected\r\n    }\"\r\n    @click=\"handleClick\"\r\n    :aria-disabled=\"disabled\"\r\n    :tabindex=\"disabled ? null : -1\"\r\n  >\r\n    <i :class=\"icon\" v-if=\"icon\"></i>\r\n    <slot></slot>\r\n  </li>\r\n</template>\r\n<script>\r\n  import Emitter from '@/components/element/mixins/emitter';\r\n\r\n  export default {\r\n    name: 'ElDropdownItem',\r\n\r\n    mixins: [Emitter],\r\n\r\n    props: {\r\n      command: {},\r\n      disabled: Boolean,\r\n      divided: Boolean,\r\n      selected: Boolean,\r\n      icon: String\r\n    },\r\n\r\n    methods: {\r\n      handleClick(e) {\r\n        this.dispatch('ElDropdown', 'menu-item-click', [this.command, this]);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style scoped>\r\n  .dropdown-item-selected {\r\n    font-weight: 700;\r\n    color: #409eff;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dropdown-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dropdown-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dropdown-item.vue?vue&type=template&id=409dd98a&scoped=true&\"\nimport script from \"./dropdown-item.vue?vue&type=script&lang=js&\"\nexport * from \"./dropdown-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dropdown-item.vue?vue&type=style&index=0&id=409dd98a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"409dd98a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"clickoutside\",rawName:\"v-clickoutside\",value:(_vm.handleClose),expression:\"handleClose\"}],staticClass:\"el-select\",class:[_vm.selectSize ? 'el-select--' + _vm.selectSize : ''],on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleMenu($event)}}},[(_vm.multiple)?_c('div',{ref:\"tags\",staticClass:\"el-select__tags\",style:({ 'max-width': _vm.inputWidth - 32 + 'px', width: '100%' })},[(_vm.collapseTags && _vm.selected.length)?_c('span',[_c('el-tag',{attrs:{\"closable\":!_vm.selectDisabled,\"size\":_vm.collapseTagSize,\"hit\":_vm.selected[0].hitState,\"type\":\"info\",\"disable-transitions\":\"\"},on:{\"close\":function($event){return _vm.deleteTag($event, _vm.selected[0])}}},[_c('span',{staticClass:\"el-select__tags-text\"},[_vm._v(_vm._s(_vm.selected[0].currentLabel))])]),(_vm.selected.length > 1)?_c('el-tag',{attrs:{\"closable\":false,\"size\":_vm.collapseTagSize,\"type\":\"info\",\"disable-transitions\":\"\"}},[_c('span',{staticClass:\"el-select__tags-text\"},[_vm._v(\"+ \"+_vm._s(_vm.selected.length - 1))])]):_vm._e()],1):_vm._e(),(!_vm.collapseTags)?_c('transition-group',{on:{\"after-leave\":_vm.resetInputHeight}},_vm._l((_vm.selected),function(item){return _c('el-tag',{key:_vm.getValueKey(item),attrs:{\"closable\":!_vm.selectDisabled,\"size\":_vm.collapseTagSize,\"hit\":item.hitState,\"type\":\"info\",\"disable-transitions\":\"\"},on:{\"close\":function($event){return _vm.deleteTag($event, item)}}},[_c('span',{staticClass:\"el-select__tags-text\"},[_vm._v(_vm._s(item.currentLabel))])])}),1):_vm._e(),(_vm.filterable)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"input\",staticClass:\"el-select__input\",class:[_vm.selectSize ? (\"is-\" + _vm.selectSize) : ''],style:({ 'flex-grow': '1', width: _vm.inputLength / (_vm.inputWidth - 32) + '%', 'max-width': _vm.inputWidth - 42 + 'px' }),attrs:{\"type\":\"text\",\"disabled\":_vm.selectDisabled,\"autocomplete\":_vm.autoComplete || _vm.autocomplete},domProps:{\"value\":(_vm.query)},on:{\"focus\":_vm.handleFocus,\"blur\":function($event){_vm.softFocus = false},\"keyup\":_vm.managePlaceholder,\"keydown\":[_vm.resetInputState,function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }$event.preventDefault();return _vm.navigateOptions('next')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }$event.preventDefault();return _vm.navigateOptions('prev')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.selectOption($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }$event.stopPropagation();$event.preventDefault();_vm.visible = false},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"])){ return null; }return _vm.deletePrevTag($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"tab\",9,$event.key,\"Tab\")){ return null; }_vm.visible = false}],\"compositionstart\":_vm.handleComposition,\"compositionupdate\":_vm.handleComposition,\"compositionend\":_vm.handleComposition,\"input\":[function($event){if($event.target.composing){ return; }_vm.query=$event.target.value},_vm.debouncedQueryChange]}}):_vm._e()],1):_vm._e(),_c('el-input',{ref:\"reference\",class:{ 'is-focus': _vm.visible },attrs:{\"type\":\"text\",\"placeholder\":_vm.currentPlaceholder,\"name\":_vm.name,\"id\":_vm.id,\"autocomplete\":_vm.autoComplete || _vm.autocomplete,\"size\":_vm.selectSize,\"disabled\":_vm.selectDisabled,\"readonly\":_vm.readonly,\"validate-event\":false,\"tabindex\":(_vm.multiple && _vm.filterable) ? '-1' : null,\"hideBorder\":_vm.hideBorder,\"focusAnimEnabled\":false,\"inputStyle\":_vm.inputStyle},on:{\"focus\":_vm.handleFocus,\"blur\":_vm.handleBlur},nativeOn:{\"keyup\":function($event){return _vm.debouncedOnInputChange($event)},\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }$event.stopPropagation();$event.preventDefault();return _vm.navigateOptions('next')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }$event.stopPropagation();$event.preventDefault();return _vm.navigateOptions('prev')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.selectOption($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }$event.stopPropagation();$event.preventDefault();_vm.visible = false},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"tab\",9,$event.key,\"Tab\")){ return null; }_vm.visible = false}],\"paste\":function($event){return _vm.debouncedOnInputChange($event)},\"mouseenter\":function($event){_vm.inputHovering = true},\"mouseleave\":function($event){_vm.inputHovering = false}},model:{value:(_vm.selectedLabel),callback:function ($$v) {_vm.selectedLabel=$$v},expression:\"selectedLabel\"}},[(_vm.$slots.prefix)?_c('template',{slot:\"prefix\"},[_vm._t(\"prefix\")],2):_vm._e(),_c('template',{slot:\"suffix\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showClose),expression:\"!showClose\"}],class:['el-select__caret', 'el-input__icon', _vm.iconClass]}),(_vm.showClose)?_c('i',{staticClass:\"el-select__caret el-input__icon el-icon-circle-close\",on:{\"click\":_vm.handleClearClick}}):_vm._e()])],2),_c('transition',{attrs:{\"name\":\"el-zoom-in-top\"},on:{\"before-enter\":_vm.handleMenuEnter,\"after-leave\":_vm.doDestroy}},[_c('el-select-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible && _vm.emptyText !== false),expression:\"visible && emptyText !== false\"}],ref:\"popper\",attrs:{\"append-to-body\":_vm.popperAppendToBody}},[_c('el-scrollbar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.options.length > 0 && !_vm.loading),expression:\"options.length > 0 && !loading\"}],ref:\"scrollbar\",class:{ 'is-empty': !_vm.allowCreate && _vm.query && _vm.filteredOptionsCount === 0 },attrs:{\"tag\":\"ul\",\"wrap-class\":\"el-select-dropdown__wrap\",\"view-class\":\"el-select-dropdown__list\"}},[(_vm.showNewOption)?_c('el-option',{attrs:{\"value\":_vm.query,\"created\":\"\"}}):_vm._e(),_vm._t(\"default\")],2),(_vm.emptyText && (!_vm.allowCreate || _vm.loading || (_vm.allowCreate && _vm.options.length === 0 )))?[(_vm.$slots.empty)?_vm._t(\"empty\"):_c('p',{staticClass:\"el-select-dropdown__empty\"},[_vm._v(\" \"+_vm._s(_vm.emptyText)+\" \")])]:_vm._e()],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function(ref) {\r\n  return {\r\n    methods: {\r\n      focus() {\r\n        this.$refs[ref].focus();\r\n      }\r\n    }\r\n  };\r\n};\r\n","export default {\r\n  el: {\r\n    colorpicker: {\r\n      confirm: '确定',\r\n      clear: '清空'\r\n    },\r\n    datepicker: {\r\n      now: '此刻',\r\n      today: '今天',\r\n      cancel: '取消',\r\n      clear: '清空',\r\n      confirm: '确定',\r\n      selectDate: '选择日期',\r\n      selectTime: '选择时间',\r\n      startDate: '开始日期',\r\n      startTime: '开始时间',\r\n      endDate: '结束日期',\r\n      endTime: '结束时间',\r\n      prevYear: '前一年',\r\n      nextYear: '后一年',\r\n      prevMonth: '上个月',\r\n      nextMonth: '下个月',\r\n      year: '年',\r\n      month1: '1 月',\r\n      month2: '2 月',\r\n      month3: '3 月',\r\n      month4: '4 月',\r\n      month5: '5 月',\r\n      month6: '6 月',\r\n      month7: '7 月',\r\n      month8: '8 月',\r\n      month9: '9 月',\r\n      month10: '10 月',\r\n      month11: '11 月',\r\n      month12: '12 月',\r\n      // week: '周次',\r\n      weeks: {\r\n        sun: '日',\r\n        mon: '一',\r\n        tue: '二',\r\n        wed: '三',\r\n        thu: '四',\r\n        fri: '五',\r\n        sat: '六'\r\n      },\r\n      months: {\r\n        jan: '一月',\r\n        feb: '二月',\r\n        mar: '三月',\r\n        apr: '四月',\r\n        may: '五月',\r\n        jun: '六月',\r\n        jul: '七月',\r\n        aug: '八月',\r\n        sep: '九月',\r\n        oct: '十月',\r\n        nov: '十一月',\r\n        dec: '十二月'\r\n      }\r\n    },\r\n    select: {\r\n      loading: '加载中',\r\n      noMatch: '无匹配数据',\r\n      noData: '无数据',\r\n      placeholder: '请选择'\r\n    },\r\n    cascader: {\r\n      noMatch: '无匹配数据',\r\n      loading: '加载中',\r\n      placeholder: '请选择',\r\n      noData: '暂无数据'\r\n    },\r\n    pagination: {\r\n      goto: '前往',\r\n      pagesize: '条/页',\r\n      total: '共 {total} 条',\r\n      pageClassifier: '页'\r\n    },\r\n    messagebox: {\r\n      title: '提示',\r\n      confirm: '确定',\r\n      cancel: '取消',\r\n      error: '输入的数据不合法!'\r\n    },\r\n    upload: {\r\n      deleteTip: '按 delete 键可删除',\r\n      delete: '删除',\r\n      preview: '查看图片',\r\n      continue: '继续上传'\r\n    },\r\n    table: {\r\n      emptyText: '暂无数据',\r\n      confirmFilter: '筛选',\r\n      resetFilter: '重置',\r\n      clearFilter: '全部',\r\n      sumText: '合计'\r\n    },\r\n    tree: {\r\n      emptyText: '暂无数据'\r\n    },\r\n    transfer: {\r\n      noMatch: '无匹配数据',\r\n      noData: '无数据',\r\n      titles: ['列表 1', '列表 2'],\r\n      filterPlaceholder: '请输入搜索内容',\r\n      noCheckedFormat: '共 {total} 项',\r\n      hasCheckedFormat: '已选 {checked}/{total} 项'\r\n    },\r\n    image: {\r\n      error: '加载失败'\r\n    },\r\n    pageHeader: {\r\n      title: '返回'\r\n    },\r\n    popconfirm: {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消'\r\n    }\r\n  }\r\n};\r\n","import { hasOwn } from '../utils/util';\r\n\r\nconst RE_NARGS = /(%|)\\{([0-9a-zA-Z_]+)\\}/g;\r\n/**\r\n *  String format template\r\n *  - Inspired:\r\n *    https://github.com/Matt-Esch/string-template/index.js\r\n */\r\nexport default function(Vue) {\r\n\r\n  /**\r\n   * template\r\n   *\r\n   * @param {String} string\r\n   * @param {Array} ...args\r\n   * @return {String}\r\n   */\r\n\r\n  function template(string, ...args) {\r\n    if (args.length === 1 && typeof args[0] === 'object') {\r\n      args = args[0];\r\n    }\r\n\r\n    if (!args || !args.hasOwnProperty) {\r\n      args = {};\r\n    }\r\n\r\n    return string.replace(RE_NARGS, (match, prefix, i, index) => {\r\n      let result;\r\n\r\n      if (string[index - 1] === '{' &&\r\n        string[index + match.length] === '}') {\r\n        return i;\r\n      } else {\r\n        result = hasOwn(args, i) ? args[i] : null;\r\n        if (result === null || result === undefined) {\r\n          return '';\r\n        }\r\n\r\n        return result;\r\n      }\r\n    });\r\n  }\r\n\r\n  return template;\r\n}\r\n","import defaultLang from './lang/zh-CN';\r\nimport Vue from 'vue';\r\nimport deepmerge from 'deepmerge';\r\nimport Format from './format';\r\n\r\nconst format = Format(Vue);\r\nlet lang = defaultLang;\r\nlet merged = false;\r\nlet i18nHandler = function() {\r\n  const vuei18n = Object.getPrototypeOf(this || Vue).$t;\r\n  if (typeof vuei18n === 'function' && !!Vue.locale) {\r\n    if (!merged) {\r\n      merged = true;\r\n      Vue.locale(\r\n        Vue.config.lang,\r\n        deepmerge(lang, Vue.locale(Vue.config.lang) || {}, { clone: true })\r\n      );\r\n    }\r\n    return vuei18n.apply(this, arguments);\r\n  }\r\n};\r\n\r\nexport const t = function(path, options) {\r\n  let value = i18nHandler.apply(this, arguments);\r\n  if (value !== null && value !== undefined) return value;\r\n\r\n  const array = path.split('.');\r\n  let current = lang;\r\n\r\n  for (let i = 0, j = array.length; i < j; i++) {\r\n    const property = array[i];\r\n    value = current[property];\r\n    if (i === j - 1) return format(value, options);\r\n    if (!value) return '';\r\n    current = value;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const use = function(l) {\r\n  lang = l || lang;\r\n};\r\n\r\nexport const i18n = function(fn) {\r\n  i18nHandler = fn || i18nHandler;\r\n};\r\n\r\nexport default { use, t, i18n };\r\n","import { t } from '@/components/element/locale';\r\n\r\nexport default {\r\n  methods: {\r\n    t(...args) {\r\n      return t.apply(this, args);\r\n    }\r\n  }\r\n};\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"el-select-dropdown el-popper\",class:[{ 'is-multiple': _vm.$parent.multiple }, _vm.popperClass],style:({ minWidth: _vm.minWidth })},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"el-select-dropdown el-popper\"\r\n    :class=\"[{ 'is-multiple': $parent.multiple }, popperClass]\"\r\n    :style=\"{ minWidth: minWidth }\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/babel\">\r\n  import Popper from '@/components/element/utils/vue-popper';\r\n\r\n  export default {\r\n    name: 'ElSelectDropdown',\r\n\r\n    componentName: 'ElSelectDropdown',\r\n\r\n    mixins: [Popper],\r\n\r\n    props: {\r\n      placement: {\r\n        default: 'bottom-start'\r\n      },\r\n\r\n      boundariesPadding: {\r\n        default: 0\r\n      },\r\n\r\n      popperOptions: {\r\n        default() {\r\n          return {\r\n            gpuAcceleration: false\r\n          };\r\n        }\r\n      },\r\n\r\n      visibleArrow: {\r\n        default: true\r\n      },\r\n\r\n      appendToBody: {\r\n        type: Boolean,\r\n        default: true\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        minWidth: ''\r\n      };\r\n    },\r\n\r\n    computed: {\r\n      popperClass() {\r\n        return this.$parent.popperClass;\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      '$parent.inputWidth'() {\r\n        this.minWidth = this.$parent.$el.getBoundingClientRect().width + 'px';\r\n      }\r\n    },\r\n\r\n    mounted() {\r\n      this.referenceElm = this.$parent.$refs.reference.$el;\r\n      this.$parent.popperElm = this.popperElm = this.$el;\r\n      this.$on('updatePopper', () => {\r\n        if (this.$parent.visible) this.updatePopper();\r\n      });\r\n      this.$on('destroyPopper', this.destroyPopper);\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select-dropdown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select-dropdown.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./select-dropdown.vue?vue&type=template&id=042c5cda&\"\nimport script from \"./select-dropdown.vue?vue&type=script&lang=js&\"\nexport * from \"./select-dropdown.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"el-select-dropdown__item\",class:{\n    'selected': _vm.itemSelected,\n    'is-disabled': _vm.disabled || _vm.groupDisabled || _vm.limitReached,\n    'hover': _vm.hover\n  },on:{\"mouseenter\":_vm.hoverItem,\"click\":function($event){$event.stopPropagation();return _vm.selectOptionClick($event)}}},[_vm._t(\"default\",[_c('span',[_vm._v(_vm._s(_vm.currentLabel))])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <li\r\n    @mouseenter=\"hoverItem\"\r\n    @click.stop=\"selectOptionClick\"\r\n    class=\"el-select-dropdown__item\"\r\n    v-show=\"visible\"\r\n    :class=\"{\r\n      'selected': itemSelected,\r\n      'is-disabled': disabled || groupDisabled || limitReached,\r\n      'hover': hover\r\n    }\">\r\n    <slot>\r\n      <span>{{ currentLabel }}</span>\r\n    </slot>\r\n  </li>\r\n</template>\r\n\r\n<script type=\"text/babel\">\r\n  import Emitter from '@/components/element/mixins/emitter';\r\n  import { getValueByPath, escapeRegexpString } from '@/components/element/utils/util';\r\n\r\n  export default {\r\n    mixins: [Emitter],\r\n\r\n    name: 'ElOption',\r\n\r\n    componentName: 'ElOption',\r\n\r\n    inject: ['select'],\r\n\r\n    props: {\r\n      value: {\r\n        required: true\r\n      },\r\n      label: [String, Number],\r\n      created: Boolean,\r\n      disabled: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        index: -1,\r\n        groupDisabled: false,\r\n        visible: true,\r\n        hitState: false,\r\n        hover: false\r\n      };\r\n    },\r\n\r\n    computed: {\r\n      isObject() {\r\n        return Object.prototype.toString.call(this.value).toLowerCase() === '[object object]';\r\n      },\r\n\r\n      currentLabel() {\r\n        return this.label || (this.isObject ? '' : this.value);\r\n      },\r\n\r\n      currentValue() {\r\n        return this.value || this.label || '';\r\n      },\r\n\r\n      itemSelected() {\r\n        if (!this.select.multiple) {\r\n          return this.isEqual(this.value, this.select.value);\r\n        } else {\r\n          return this.contains(this.select.value, this.value);\r\n        }\r\n      },\r\n\r\n      limitReached() {\r\n        if (this.select.multiple) {\r\n          return !this.itemSelected &&\r\n            (this.select.value || []).length >= this.select.multipleLimit &&\r\n            this.select.multipleLimit > 0;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      currentLabel() {\r\n        if (!this.created && !this.select.remote) this.dispatch('ElSelect', 'setSelected');\r\n      },\r\n      value(val, oldVal) {\r\n        const { remote, valueKey } = this.select;\r\n        if (!this.created && !remote) {\r\n          if (valueKey && typeof val === 'object' && typeof oldVal === 'object' && val[valueKey] === oldVal[valueKey]) {\r\n            return;\r\n          }\r\n          this.dispatch('ElSelect', 'setSelected');\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      isEqual(a, b) {\r\n        if (!this.isObject) {\r\n          return a === b;\r\n        } else {\r\n          const valueKey = this.select.valueKey;\r\n          return getValueByPath(a, valueKey) === getValueByPath(b, valueKey);\r\n        }\r\n      },\r\n\r\n      contains(arr = [], target) {\r\n        if (!this.isObject) {\r\n          return arr && arr.indexOf(target) > -1;\r\n        } else {\r\n          const valueKey = this.select.valueKey;\r\n          return arr && arr.some(item => {\r\n            return getValueByPath(item, valueKey) === getValueByPath(target, valueKey);\r\n          });\r\n        }\r\n      },\r\n\r\n      handleGroupDisabled(val) {\r\n        this.groupDisabled = val;\r\n      },\r\n\r\n      hoverItem() {\r\n        if (!this.disabled && !this.groupDisabled) {\r\n          this.select.hoverIndex = this.select.options.indexOf(this);\r\n        }\r\n      },\r\n\r\n      selectOptionClick() {\r\n        if (this.disabled !== true && this.groupDisabled !== true) {\r\n          this.dispatch('ElSelect', 'handleOptionClick', [this, true]);\r\n        }\r\n      },\r\n\r\n      queryChange(query) {\r\n        this.visible = new RegExp(escapeRegexpString(query), 'i').test(this.currentLabel) || this.created;\r\n        if (!this.visible) {\r\n          this.select.filteredOptionsCount--;\r\n        }\r\n      }\r\n    },\r\n\r\n    created() {\r\n      this.select.options.push(this);\r\n      this.select.cachedOptions.push(this);\r\n      this.select.optionsCount++;\r\n      this.select.filteredOptionsCount++;\r\n\r\n      this.$on('queryChange', this.queryChange);\r\n      this.$on('handleGroupDisabled', this.handleGroupDisabled);\r\n    },\r\n\r\n    beforeDestroy() {\r\n      const { selected, multiple } = this.select;\r\n      let selectedOptions = multiple ? selected : [selected];\r\n      let index = this.select.cachedOptions.indexOf(this);\r\n      let selectedIndex = selectedOptions.indexOf(this);\r\n\r\n      // if option is not selected, remove it from cache\r\n      if (index > -1 && selectedIndex < 0) {\r\n        this.select.cachedOptions.splice(index, 1);\r\n      }\r\n      this.select.onOptionDestroy(this.select.options.indexOf(this));\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./option.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./option.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./option.vue?vue&type=template&id=4898a557&\"\nimport script from \"./option.vue?vue&type=script&lang=js&\"\nexport * from \"./option.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\r\n  export default {\r\n    name: 'ElTag',\r\n    props: {\r\n      text: String,\r\n      closable: Boolean,\r\n      type: String,\r\n      hit: Boolean,\r\n      disableTransitions: Boolean,\r\n      color: String,\r\n      size: String,\r\n      effect: {\r\n        type: String,\r\n        default: 'light',\r\n        validator(val) {\r\n          return ['dark', 'light', 'plain'].indexOf(val) !== -1;\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      handleClose(event) {\r\n        event.stopPropagation();\r\n        this.$emit('close', event);\r\n      },\r\n      handleClick(event) {\r\n        this.$emit('click', event);\r\n      }\r\n    },\r\n    computed: {\r\n      tagSize() {\r\n        return this.size || (this.$ELEMENT || {}).size;\r\n      }\r\n    },\r\n    render(h) {\r\n      const { type, tagSize, hit, effect } = this;\r\n      const classes = [\r\n        'el-tag',\r\n        type ? `el-tag--${type}` : '',\r\n        tagSize ? `el-tag--${tagSize}` : '',\r\n        effect ? `el-tag--${effect}` : '',\r\n        hit && 'is-hit'\r\n      ];\r\n      const tagEl = (\r\n        <span\r\n          class={ classes }\r\n          style={{ backgroundColor: this.color }}\r\n          on-click={ this.handleClick }>\r\n          { this.$slots.default }\r\n          {\r\n            this.closable && <i class=\"el-tag__close el-icon-close\" on-click={ this.handleClose }></i>\r\n          }\r\n        </span>\r\n      );\r\n\r\n      return this.disableTransitions ? tagEl : <transition name=\"el-zoom-in-center\">{ tagEl }</transition>;\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag.vue?vue&type=script&lang=js&\"","import ElTag from './src/tag';\r\n\r\n/* istanbul ignore next */\r\nElTag.install = function(Vue) {\r\n  Vue.component(ElTag.name, ElTag);\r\n};\r\n\r\nexport default ElTag;\r\n","import ResizeObserver from 'resize-observer-polyfill';\r\n\r\nconst isServer = typeof window === 'undefined';\r\n\r\n/* istanbul ignore next */\r\nconst resizeHandler = function(entries) {\r\n  for (let entry of entries) {\r\n    const listeners = entry.target.__resizeListeners__ || [];\r\n    if (listeners.length) {\r\n      listeners.forEach(fn => {\r\n        fn();\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport const addResizeListener = function(element, fn) {\r\n  if (isServer) return;\r\n  if (!element.__resizeListeners__) {\r\n    element.__resizeListeners__ = [];\r\n    element.__ro__ = new ResizeObserver(resizeHandler);\r\n    element.__ro__.observe(element);\r\n  }\r\n  element.__resizeListeners__.push(fn);\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport const removeResizeListener = function(element, fn) {\r\n  if (!element || !element.__resizeListeners__) return;\r\n  element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\r\n  if (!element.__resizeListeners__.length) {\r\n    element.__ro__.disconnect();\r\n  }\r\n};\r\n","export const BAR_MAP = {\r\n  vertical: {\r\n    offset: 'offsetHeight',\r\n    scroll: 'scrollTop',\r\n    scrollSize: 'scrollHeight',\r\n    size: 'height',\r\n    key: 'vertical',\r\n    axis: 'Y',\r\n    client: 'clientY',\r\n    direction: 'top'\r\n  },\r\n  horizontal: {\r\n    offset: 'offsetWidth',\r\n    scroll: 'scrollLeft',\r\n    scrollSize: 'scrollWidth',\r\n    size: 'width',\r\n    key: 'horizontal',\r\n    axis: 'X',\r\n    client: 'clientX',\r\n    direction: 'left'\r\n  }\r\n};\r\n\r\nexport function renderThumbStyle({ move, size, bar }) {\r\n  const style = {};\r\n  const translate = `translate${bar.axis}(${ move }%)`;\r\n\r\n  style[bar.size] = size;\r\n  style.transform = translate;\r\n  style.msTransform = translate;\r\n  style.webkitTransform = translate;\r\n\r\n  return style;\r\n};\r\n","import { on, off } from '@/components/element/utils/dom';\r\nimport { renderThumbStyle, BAR_MAP } from './util';\r\n\r\n/* istanbul ignore next */\r\nexport default {\r\n  name: 'Bar',\r\n\r\n  props: {\r\n    vertical: Boolean,\r\n    size: String,\r\n    move: Number\r\n  },\r\n\r\n  computed: {\r\n    bar() {\r\n      return BAR_MAP[this.vertical ? 'vertical' : 'horizontal'];\r\n    },\r\n\r\n    wrap() {\r\n      return this.$parent.wrap;\r\n    }\r\n  },\r\n\r\n  render(h) {\r\n    const { size, move, bar } = this;\r\n\r\n    return (\r\n      <div\r\n        class={ ['el-scrollbar__bar', 'is-' + bar.key] }\r\n        onMousedown={ this.clickTrackHandler } >\r\n        <div\r\n          ref=\"thumb\"\r\n          class=\"el-scrollbar__thumb\"\r\n          onMousedown={ this.clickThumbHandler }\r\n          style={ renderThumbStyle({ size, move, bar }) }>\r\n        </div>\r\n      </div>\r\n    );\r\n  },\r\n\r\n  methods: {\r\n    clickThumbHandler(e) {\r\n      // prevent click event of right button\r\n      if (e.ctrlKey || e.button === 2) {\r\n        return;\r\n      }\r\n      this.startDrag(e);\r\n      this[this.bar.axis] = (e.currentTarget[this.bar.offset] - (e[this.bar.client] - e.currentTarget.getBoundingClientRect()[this.bar.direction]));\r\n    },\r\n\r\n    clickTrackHandler(e) {\r\n      const offset = Math.abs(e.target.getBoundingClientRect()[this.bar.direction] - e[this.bar.client]);\r\n      const thumbHalf = (this.$refs.thumb[this.bar.offset] / 2);\r\n      const thumbPositionPercentage = ((offset - thumbHalf) * 100 / this.$el[this.bar.offset]);\r\n\r\n      this.wrap[this.bar.scroll] = (thumbPositionPercentage * this.wrap[this.bar.scrollSize] / 100);\r\n    },\r\n\r\n    startDrag(e) {\r\n      e.stopImmediatePropagation();\r\n      this.cursorDown = true;\r\n\r\n      on(document, 'mousemove', this.mouseMoveDocumentHandler);\r\n      on(document, 'mouseup', this.mouseUpDocumentHandler);\r\n      document.onselectstart = () => false;\r\n    },\r\n\r\n    mouseMoveDocumentHandler(e) {\r\n      if (this.cursorDown === false) return;\r\n      const prevPage = this[this.bar.axis];\r\n\r\n      if (!prevPage) return;\r\n\r\n      const offset = ((this.$el.getBoundingClientRect()[this.bar.direction] - e[this.bar.client]) * -1);\r\n      const thumbClickPosition = (this.$refs.thumb[this.bar.offset] - prevPage);\r\n      const thumbPositionPercentage = ((offset - thumbClickPosition) * 100 / this.$el[this.bar.offset]);\r\n\r\n      this.wrap[this.bar.scroll] = (thumbPositionPercentage * this.wrap[this.bar.scrollSize] / 100);\r\n    },\r\n\r\n    mouseUpDocumentHandler(e) {\r\n      this.cursorDown = false;\r\n      this[this.bar.axis] = 0;\r\n      off(document, 'mousemove', this.mouseMoveDocumentHandler);\r\n      document.onselectstart = null;\r\n    }\r\n  },\r\n\r\n  destroyed() {\r\n    off(document, 'mouseup', this.mouseUpDocumentHandler);\r\n  }\r\n};\r\n","// reference https://github.com/noeldelgado/gemini-scrollbar/blob/master/index.js\r\n\r\nimport { addResizeListener, removeResizeListener } from '@/components/element/utils/resize-event';\r\nimport scrollbarWidth from '@/components/element/utils/scrollbar-width';\r\nimport { toObject } from '@/components/element/utils/util';\r\nimport Bar from './bar';\r\n\r\n/* istanbul ignore next */\r\nexport default {\r\n  name: 'ElScrollbar',\r\n\r\n  components: { Bar },\r\n\r\n  props: {\r\n    native: Boolean,\r\n    wrapStyle: {},\r\n    wrapClass: {},\r\n    viewClass: {},\r\n    viewStyle: {},\r\n    // noresize: Boolean, // 如果 container 尺寸不会发生变化，最好设置它可以优化性能\r\n    noresize: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    tag: {\r\n      type: String,\r\n      default: 'div'\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      sizeWidth: '0',\r\n      sizeHeight: '0',\r\n      moveX: 0,\r\n      moveY: 0\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    wrap() {\r\n      return this.$refs.wrap;\r\n    }\r\n  },\r\n\r\n  render(h) {\r\n    let gutter = scrollbarWidth();\r\n    let style = this.wrapStyle;\r\n\r\n    if (gutter) {\r\n      const gutterWith = `-${gutter}px`;\r\n      const gutterStyle = `margin-bottom: ${gutterWith}; margin-right: ${gutterWith};`;\r\n\r\n      if (Array.isArray(this.wrapStyle)) {\r\n        style = toObject(this.wrapStyle);\r\n        style.marginRight = style.marginBottom = gutterWith;\r\n      } else if (typeof this.wrapStyle === 'string') {\r\n        style += gutterStyle;\r\n      } else {\r\n        style = gutterStyle;\r\n      }\r\n    }\r\n    const view = h(this.tag, {\r\n      class: ['el-scrollbar__view', this.viewClass],\r\n      style: this.viewStyle,\r\n      ref: 'resize'\r\n    }, this.$slots.default);\r\n    const wrap = (\r\n      <div\r\n        ref=\"wrap\"\r\n        style={ style }\r\n        onScroll={ this.handleScroll }\r\n        class={ [this.wrapClass, 'el-scrollbar__wrap', gutter ? '' : 'el-scrollbar__wrap--hidden-default'] }>\r\n        { [view] }\r\n      </div>\r\n    );\r\n    let nodes;\r\n\r\n    if (!this.native) {\r\n      nodes = ([\r\n        wrap,\r\n        <Bar\r\n          move={ this.moveX }\r\n          size={ this.sizeWidth }></Bar>,\r\n        <Bar\r\n          vertical\r\n          move={ this.moveY }\r\n          size={ this.sizeHeight }></Bar>\r\n      ]);\r\n    } else {\r\n      nodes = ([\r\n        <div\r\n          ref=\"wrap\"\r\n          class={ [this.wrapClass, 'el-scrollbar__wrap'] }\r\n          style={ style }>\r\n          { [view] }\r\n        </div>\r\n      ]);\r\n    }\r\n    return h('div', { class: 'el-scrollbar' }, nodes);\r\n  },\r\n\r\n  methods: {\r\n    handleScroll() {\r\n      const wrap = this.wrap;\r\n\r\n      this.moveY = ((wrap.scrollTop * 100) / wrap.clientHeight);\r\n      this.moveX = ((wrap.scrollLeft * 100) / wrap.clientWidth);\r\n    },\r\n\r\n    update() {\r\n      let heightPercentage, widthPercentage;\r\n      const wrap = this.wrap;\r\n      if (!wrap) return;\r\n\r\n      heightPercentage = (wrap.clientHeight * 100 / wrap.scrollHeight);\r\n      widthPercentage = (wrap.clientWidth * 100 / wrap.scrollWidth);\r\n\r\n      this.sizeHeight = (heightPercentage < 100) ? (heightPercentage + '%') : '';\r\n      this.sizeWidth = (widthPercentage < 100) ? (widthPercentage + '%') : '';\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    if (this.native) return;\r\n    this.$nextTick(this.update);\r\n    !this.noresize && addResizeListener(this.$refs.resize, this.update);\r\n  },\r\n\r\n  beforeDestroy() {\r\n    if (this.native) return;\r\n    !this.noresize && removeResizeListener(this.$refs.resize, this.update);\r\n  }\r\n};\r\n","import Scrollbar from './src/main';\r\n\r\n/* istanbul ignore next */\r\nScrollbar.install = function(Vue) {\r\n  Vue.component(Scrollbar.name, Scrollbar);\r\n};\r\n\r\nexport default Scrollbar;\r\n","import Vue from 'vue';\r\n\r\nexport default function scrollIntoView(container, selected) {\r\n  if (Vue.prototype.$isServer) return;\r\n\r\n  if (!selected) {\r\n    container.scrollTop = 0;\r\n    return;\r\n  }\r\n\r\n  const offsetParents = [];\r\n  let pointer = selected.offsetParent;\r\n  while (pointer && container !== pointer && container.contains(pointer)) {\r\n    offsetParents.push(pointer);\r\n    pointer = pointer.offsetParent;\r\n  }\r\n  const top = selected.offsetTop + offsetParents.reduce((prev, curr) => (prev + curr.offsetTop), 0);\r\n  const bottom = top + selected.offsetHeight;\r\n  const viewRectTop = container.scrollTop;\r\n  const viewRectBottom = viewRectTop + container.clientHeight;\r\n\r\n  if (top < viewRectTop) {\r\n    container.scrollTop = top;\r\n  } else if (bottom > viewRectBottom) {\r\n    container.scrollTop = bottom - container.clientHeight;\r\n  }\r\n}\r\n","export default {\r\n  data() {\r\n    return {\r\n      hoverOption: -1\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    optionsAllDisabled() {\r\n      return this.options.filter(option => option.visible).every(option => option.disabled);\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    hoverIndex(val) {\r\n      if (typeof val === 'number' && val > -1) {\r\n        this.hoverOption = this.options[val] || {};\r\n      }\r\n      this.options.forEach(option => {\r\n        option.hover = this.hoverOption === option;\r\n      });\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    navigateOptions(direction) {\r\n      if (!this.visible) {\r\n        this.visible = true;\r\n        return;\r\n      }\r\n      if (this.options.length === 0 || this.filteredOptionsCount === 0) return;\r\n      if (!this.optionsAllDisabled) {\r\n        if (direction === 'next') {\r\n          this.hoverIndex++;\r\n          if (this.hoverIndex === this.options.length) {\r\n            this.hoverIndex = 0;\r\n          }\r\n        } else if (direction === 'prev') {\r\n          this.hoverIndex--;\r\n          if (this.hoverIndex < 0) {\r\n            this.hoverIndex = this.options.length - 1;\r\n          }\r\n        }\r\n        const option = this.options[this.hoverIndex];\r\n        if (option.disabled === true ||\r\n          option.groupDisabled === true ||\r\n          !option.visible) {\r\n          this.navigateOptions(direction);\r\n        }\r\n        this.$nextTick(() => this.scrollToOption(this.hoverOption));\r\n      }\r\n    }\r\n  }\r\n};\r\n","<template>\r\n  <div\r\n    class=\"el-select\"\r\n    :class=\"[selectSize ? 'el-select--' + selectSize : '']\"\r\n    @click.stop=\"toggleMenu\"\r\n    v-clickoutside=\"handleClose\">\r\n    <div\r\n      class=\"el-select__tags\"\r\n      v-if=\"multiple\"\r\n      ref=\"tags\"\r\n      :style=\"{ 'max-width': inputWidth - 32 + 'px', width: '100%' }\">\r\n      <span v-if=\"collapseTags && selected.length\">\r\n        <el-tag\r\n          :closable=\"!selectDisabled\"\r\n          :size=\"collapseTagSize\"\r\n          :hit=\"selected[0].hitState\"\r\n          type=\"info\"\r\n          @close=\"deleteTag($event, selected[0])\"\r\n          disable-transitions>\r\n          <span class=\"el-select__tags-text\">{{ selected[0].currentLabel }}</span>\r\n        </el-tag>\r\n        <el-tag\r\n          v-if=\"selected.length > 1\"\r\n          :closable=\"false\"\r\n          :size=\"collapseTagSize\"\r\n          type=\"info\"\r\n          disable-transitions>\r\n          <span class=\"el-select__tags-text\">+ {{ selected.length - 1 }}</span>\r\n        </el-tag>\r\n      </span>\r\n      <transition-group @after-leave=\"resetInputHeight\" v-if=\"!collapseTags\">\r\n        <el-tag\r\n          v-for=\"item in selected\"\r\n          :key=\"getValueKey(item)\"\r\n          :closable=\"!selectDisabled\"\r\n          :size=\"collapseTagSize\"\r\n          :hit=\"item.hitState\"\r\n          type=\"info\"\r\n          @close=\"deleteTag($event, item)\"\r\n          disable-transitions>\r\n          <span class=\"el-select__tags-text\">{{ item.currentLabel }}</span>\r\n        </el-tag>\r\n      </transition-group>\r\n\r\n      <input\r\n        type=\"text\"\r\n        class=\"el-select__input\"\r\n        :class=\"[selectSize ? `is-${ selectSize }` : '']\"\r\n        :disabled=\"selectDisabled\"\r\n        :autocomplete=\"autoComplete || autocomplete\"\r\n        @focus=\"handleFocus\"\r\n        @blur=\"softFocus = false\"\r\n        @keyup=\"managePlaceholder\"\r\n        @keydown=\"resetInputState\"\r\n        @keydown.down.prevent=\"navigateOptions('next')\"\r\n        @keydown.up.prevent=\"navigateOptions('prev')\"\r\n        @keydown.enter.prevent=\"selectOption\"\r\n        @keydown.esc.stop.prevent=\"visible = false\"\r\n        @keydown.delete=\"deletePrevTag\"\r\n        @keydown.tab=\"visible = false\"\r\n        @compositionstart=\"handleComposition\"\r\n        @compositionupdate=\"handleComposition\"\r\n        @compositionend=\"handleComposition\"\r\n        v-model=\"query\"\r\n        @input=\"debouncedQueryChange\"\r\n        v-if=\"filterable\"\r\n        :style=\"{ 'flex-grow': '1', width: inputLength / (inputWidth - 32) + '%', 'max-width': inputWidth - 42 + 'px' }\"\r\n        ref=\"input\">\r\n    </div>\r\n    <el-input\r\n      ref=\"reference\"\r\n      v-model=\"selectedLabel\"\r\n      type=\"text\"\r\n      :placeholder=\"currentPlaceholder\"\r\n      :name=\"name\"\r\n      :id=\"id\"\r\n      :autocomplete=\"autoComplete || autocomplete\"\r\n      :size=\"selectSize\"\r\n      :disabled=\"selectDisabled\"\r\n      :readonly=\"readonly\"\r\n      :validate-event=\"false\"\r\n      :class=\"{ 'is-focus': visible }\"\r\n      :tabindex=\"(multiple && filterable) ? '-1' : null\"\r\n      :hideBorder=\"hideBorder\"\r\n      :focusAnimEnabled=\"false\"\r\n      :inputStyle=\"inputStyle\"\r\n      @focus=\"handleFocus\"\r\n      @blur=\"handleBlur\"\r\n      @keyup.native=\"debouncedOnInputChange\"\r\n      @keydown.native.down.stop.prevent=\"navigateOptions('next')\"\r\n      @keydown.native.up.stop.prevent=\"navigateOptions('prev')\"\r\n      @keydown.native.enter.prevent=\"selectOption\"\r\n      @keydown.native.esc.stop.prevent=\"visible = false\"\r\n      @keydown.native.tab=\"visible = false\"\r\n      @paste.native=\"debouncedOnInputChange\"\r\n      @mouseenter.native=\"inputHovering = true\"\r\n      @mouseleave.native=\"inputHovering = false\">\r\n      <template slot=\"prefix\" v-if=\"$slots.prefix\">\r\n        <slot name=\"prefix\"></slot>\r\n      </template>\r\n      <template slot=\"suffix\">\r\n        <i v-show=\"!showClose\" :class=\"['el-select__caret', 'el-input__icon', iconClass]\"></i>\r\n        <i v-if=\"showClose\" class=\"el-select__caret el-input__icon el-icon-circle-close\" @click=\"handleClearClick\"></i>\r\n      </template>\r\n    </el-input>\r\n    <transition\r\n      name=\"el-zoom-in-top\"\r\n      @before-enter=\"handleMenuEnter\"\r\n      @after-leave=\"doDestroy\">\r\n      <el-select-menu\r\n        ref=\"popper\"\r\n        :append-to-body=\"popperAppendToBody\"\r\n        v-show=\"visible && emptyText !== false\">\r\n        <el-scrollbar\r\n          tag=\"ul\"\r\n          wrap-class=\"el-select-dropdown__wrap\"\r\n          view-class=\"el-select-dropdown__list\"\r\n          ref=\"scrollbar\"\r\n          :class=\"{ 'is-empty': !allowCreate && query && filteredOptionsCount === 0 }\"\r\n          v-show=\"options.length > 0 && !loading\">\r\n          <el-option\r\n            :value=\"query\"\r\n            created\r\n            v-if=\"showNewOption\">\r\n          </el-option>\r\n          <slot></slot>\r\n        </el-scrollbar>\r\n        <template v-if=\"emptyText && (!allowCreate || loading || (allowCreate && options.length === 0 ))\">\r\n          <slot name=\"empty\" v-if=\"$slots.empty\"></slot>\r\n          <p class=\"el-select-dropdown__empty\" v-else>\r\n            {{ emptyText }}\r\n          </p>\r\n        </template>\r\n      </el-select-menu>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/babel\">\r\n  import Emitter from '@/components/element/mixins/emitter';\r\n  import Focus from '@/components/element/mixins/focus';\r\n  import Locale from '@/components/element/mixins/locale';\r\n  import ElInput from '@/components/element/input';\r\n  import ElSelectMenu from './select-dropdown.vue';\r\n  import ElOption from './option.vue';\r\n  import ElTag from '@/components/element/tag';\r\n  import ElScrollbar from '@/components/element/scrollbar';\r\n  import debounce from 'throttle-debounce/debounce';\r\n  import Clickoutside from '@/components/element/utils/clickoutside';\r\n  import { addResizeListener, removeResizeListener } from '@/components/element/utils/resize-event';\r\n  import { t } from '@/components/element/locale';\r\n  import scrollIntoView from '@/components/element/utils/scroll-into-view';\r\n  import { getValueByPath, valueEquals, isIE, isEdge } from '@/components/element/utils/util';\r\n  import NavigationMixin from './navigation-mixin';\r\n  import { isKorean } from '@/components/element/utils/shared';\r\n\r\n  export default {\r\n    mixins: [Emitter, Locale, Focus('reference'), NavigationMixin],\r\n\r\n    name: 'ElSelect',\r\n\r\n    componentName: 'ElSelect',\r\n\r\n    inject: {\r\n      elForm: {\r\n        default: ''\r\n      },\r\n\r\n      elFormItem: {\r\n        default: ''\r\n      }\r\n    },\r\n\r\n    provide() {\r\n      return {\r\n        'select': this\r\n      };\r\n    },\r\n\r\n    computed: {\r\n      _elFormItemSize() {\r\n        return (this.elFormItem || {}).elFormItemSize;\r\n      },\r\n\r\n      readonly() {\r\n        return !this.filterable || this.multiple || (!isIE() && !isEdge() && !this.visible);\r\n      },\r\n\r\n      showClose() {\r\n        let hasValue = this.multiple\r\n          ? Array.isArray(this.value) && this.value.length > 0\r\n          : this.value !== undefined && this.value !== null && this.value !== '';\r\n        let criteria = this.clearable &&\r\n          !this.selectDisabled &&\r\n          this.inputHovering &&\r\n          hasValue;\r\n        return criteria;\r\n      },\r\n\r\n      iconClass() {\r\n        if (this.customIcon && this.customIcon.trim().length > 0) {\r\n          if (this.noIconRotate)\r\n            return this.customIcon;\r\n          return this.visible ? this.customIcon + ' is-reverse' : this.customIcon;\r\n        }\r\n        let preStr = \"el-icon-\";\r\n        let str = this.remote && this.filterable ? '' : (this.visible ? 'arrow-up is-reverse' : 'arrow-up');\r\n        return preStr + str;\r\n      },\r\n\r\n      debounce() {\r\n        return this.remote ? 300 : 0;\r\n      },\r\n\r\n      emptyText() {\r\n        if (this.loading) {\r\n          return this.loadingText || this.t('el.select.loading');\r\n        } else {\r\n          if (this.remote && this.query === '' && this.options.length === 0) return false;\r\n          if (this.filterable && this.query && this.options.length > 0 && this.filteredOptionsCount === 0) {\r\n            return this.noMatchText || this.t('el.select.noMatch');\r\n          }\r\n          if (this.options.length === 0) {\r\n            return this.noDataText || this.t('el.select.noData');\r\n          }\r\n        }\r\n        return null;\r\n      },\r\n\r\n      showNewOption() {\r\n        let hasExistingOption = this.options.filter(option => !option.created)\r\n          .some(option => option.currentLabel === this.query);\r\n        return this.filterable && this.allowCreate && this.query !== '' && !hasExistingOption;\r\n      },\r\n\r\n      selectSize() {\r\n        return this.size || this._elFormItemSize || (this.$ELEMENT || {}).size;\r\n      },\r\n\r\n      selectDisabled() {\r\n        return this.disabled || (this.elForm || {}).disabled;\r\n      },\r\n\r\n      collapseTagSize() {\r\n        return ['small', 'mini'].indexOf(this.selectSize) > -1\r\n          ? 'mini'\r\n          : 'small';\r\n      }\r\n    },\r\n\r\n    components: {\r\n      ElInput,\r\n      ElSelectMenu,\r\n      ElOption,\r\n      ElTag,\r\n      ElScrollbar\r\n    },\r\n\r\n    directives: { Clickoutside },\r\n\r\n    props: {\r\n      name: String,\r\n      id: String,\r\n      value: {\r\n        required: true\r\n      },\r\n      autocomplete: {\r\n        type: String,\r\n        default: 'off'\r\n      },\r\n      /** @Deprecated in next major version */\r\n      autoComplete: {\r\n        type: String,\r\n        validator(val) {\r\n          process.env.NODE_ENV !== 'production' &&\r\n            console.warn('[Element Warn][Select]\\'auto-complete\\' property will be deprecated in next major version. please use \\'autocomplete\\' instead.');\r\n          return true;\r\n        }\r\n      },\r\n      automaticDropdown: Boolean,\r\n      size: String,\r\n      disabled: Boolean,\r\n      clearable: Boolean,\r\n      filterable: Boolean,\r\n      noIconRotate: Boolean,\r\n      allowCreate: Boolean,\r\n      loading: Boolean,\r\n      popperClass: String,\r\n      remote: Boolean,\r\n      loadingText: String,\r\n      noMatchText: String,\r\n      noDataText: String,\r\n      remoteMethod: Function,\r\n      filterMethod: Function,\r\n      multiple: Boolean,\r\n      multipleLimit: {\r\n        type: Number,\r\n        default: 0\r\n      },\r\n      placeholder: {\r\n        type: String,\r\n        default() {\r\n          return t('el.select.placeholder');\r\n        }\r\n      },\r\n      inputStyle: {\r\n        type: String,\r\n        default: \"\"\r\n      },\r\n      defaultFirstOption: Boolean,\r\n      reserveKeyword: Boolean,\r\n      valueKey: {\r\n        type: String,\r\n        default: 'value'\r\n      },\r\n      collapseTags: Boolean,\r\n      popperAppendToBody: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      hideBorder: Boolean,\r\n      customIcon: {\r\n        type: String,\r\n        default: \"\"\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        options: [],\r\n        cachedOptions: [],\r\n        createdLabel: null,\r\n        createdSelected: false,\r\n        selected: this.multiple ? [] : {},\r\n        inputLength: 20,\r\n        inputWidth: 0,\r\n        initialInputHeight: 0,\r\n        cachedPlaceHolder: '',\r\n        optionsCount: 0,\r\n        filteredOptionsCount: 0,\r\n        visible: false,\r\n        softFocus: false,\r\n        selectedLabel: '',\r\n        hoverIndex: -1,\r\n        query: '',\r\n        previousQuery: null,\r\n        inputHovering: false,\r\n        currentPlaceholder: '',\r\n        menuVisibleOnFocus: false,\r\n        isOnComposition: false,\r\n        isSilentBlur: false\r\n      };\r\n    },\r\n\r\n    watch: {\r\n      selectDisabled() {\r\n        this.$nextTick(() => {\r\n          this.resetInputHeight();\r\n        });\r\n      },\r\n\r\n      placeholder(val) {\r\n        this.cachedPlaceHolder = this.currentPlaceholder = val;\r\n      },\r\n\r\n      value(val, oldVal) {\r\n        if (this.multiple) {\r\n          this.resetInputHeight();\r\n          if ((val && val.length > 0) || (this.$refs.input && this.query !== '')) {\r\n            this.currentPlaceholder = '';\r\n          } else {\r\n            this.currentPlaceholder = this.cachedPlaceHolder;\r\n          }\r\n          if (this.filterable && !this.reserveKeyword) {\r\n            this.query = '';\r\n            this.handleQueryChange(this.query);\r\n          }\r\n        }\r\n        this.setSelected();\r\n        if (this.filterable && !this.multiple) {\r\n          this.inputLength = 20;\r\n        }\r\n        if (!valueEquals(val, oldVal)) {\r\n          this.dispatch('ElFormItem', 'el.form.change', val);\r\n        }\r\n      },\r\n\r\n      visible(val) {\r\n        if (!val) {\r\n          this.broadcast('ElSelectDropdown', 'destroyPopper');\r\n          if (this.$refs.input) {\r\n            this.$refs.input.blur();\r\n          }\r\n          this.query = '';\r\n          this.previousQuery = null;\r\n          this.selectedLabel = '';\r\n          this.inputLength = 20;\r\n          this.menuVisibleOnFocus = false;\r\n          this.resetHoverIndex();\r\n          this.$nextTick(() => {\r\n            if (this.$refs.input &&\r\n              this.$refs.input.value === '' &&\r\n              this.selected.length === 0) {\r\n              this.currentPlaceholder = this.cachedPlaceHolder;\r\n            }\r\n          });\r\n          if (!this.multiple) {\r\n            if (this.selected) {\r\n              if (this.filterable && this.allowCreate &&\r\n                this.createdSelected && this.createdLabel) {\r\n                this.selectedLabel = this.createdLabel;\r\n              } else {\r\n                this.selectedLabel = this.selected.currentLabel;\r\n              }\r\n              if (this.filterable) this.query = this.selectedLabel;\r\n            }\r\n\r\n            if (this.filterable) {\r\n              this.currentPlaceholder = this.cachedPlaceHolder;\r\n            }\r\n          }\r\n        } else {\r\n          this.broadcast('ElSelectDropdown', 'updatePopper');\r\n          if (this.filterable) {\r\n            this.query = this.remote ? '' : this.selectedLabel;\r\n            this.handleQueryChange(this.query);\r\n            if (this.multiple) {\r\n              this.$refs.input.focus();\r\n            } else {\r\n              if (!this.remote) {\r\n                this.broadcast('ElOption', 'queryChange', '');\r\n                this.broadcast('ElOptionGroup', 'queryChange');\r\n              }\r\n\r\n              if (this.selectedLabel) {\r\n                this.currentPlaceholder = this.selectedLabel;\r\n                this.selectedLabel = '';\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.$emit('visible-change', val);\r\n      },\r\n\r\n      options() {\r\n        if (this.$isServer) return;\r\n        this.$nextTick(() => {\r\n          this.broadcast('ElSelectDropdown', 'updatePopper');\r\n        });\r\n        if (this.multiple) {\r\n          this.resetInputHeight();\r\n        }\r\n        let inputs = this.$el.querySelectorAll('input');\r\n        if ([].indexOf.call(inputs, document.activeElement) === -1) {\r\n          this.setSelected();\r\n        }\r\n        if (this.defaultFirstOption && (this.filterable || this.remote) && this.filteredOptionsCount) {\r\n          this.checkDefaultFirstOption();\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      handleComposition(event) {\r\n        const text = event.target.value;\r\n        if (event.type === 'compositionend') {\r\n          this.isOnComposition = false;\r\n          this.$nextTick(_ => this.handleQueryChange(text));\r\n        } else {\r\n          const lastCharacter = text[text.length - 1] || '';\r\n          this.isOnComposition = !isKorean(lastCharacter);\r\n        }\r\n      },\r\n      handleQueryChange(val) {\r\n        if (this.previousQuery === val || this.isOnComposition) return;\r\n        if (\r\n          this.previousQuery === null &&\r\n          (typeof this.filterMethod === 'function' || typeof this.remoteMethod === 'function')\r\n        ) {\r\n          this.previousQuery = val;\r\n          return;\r\n        }\r\n        this.previousQuery = val;\r\n        this.$nextTick(() => {\r\n          if (this.visible) this.broadcast('ElSelectDropdown', 'updatePopper');\r\n        });\r\n        this.hoverIndex = -1;\r\n        if (this.multiple && this.filterable) {\r\n          this.$nextTick(() => {\r\n            const length = this.$refs.input.value.length * 15 + 20;\r\n            this.inputLength = this.collapseTags ? Math.min(50, length) : length;\r\n            this.managePlaceholder();\r\n            this.resetInputHeight();\r\n          });\r\n        }\r\n        if (this.remote && typeof this.remoteMethod === 'function') {\r\n          this.hoverIndex = -1;\r\n          this.remoteMethod(val);\r\n        } else if (typeof this.filterMethod === 'function') {\r\n          this.filterMethod(val);\r\n          this.broadcast('ElOptionGroup', 'queryChange');\r\n        } else {\r\n          this.filteredOptionsCount = this.optionsCount;\r\n          this.broadcast('ElOption', 'queryChange', val);\r\n          this.broadcast('ElOptionGroup', 'queryChange');\r\n        }\r\n        if (this.defaultFirstOption && (this.filterable || this.remote) && this.filteredOptionsCount) {\r\n          this.checkDefaultFirstOption();\r\n        }\r\n      },\r\n\r\n      scrollToOption(option) {\r\n        const target = Array.isArray(option) && option[0] ? option[0].$el : option.$el;\r\n        if (this.$refs.popper && target) {\r\n          const menu = this.$refs.popper.$el.querySelector('.el-select-dropdown__wrap');\r\n          scrollIntoView(menu, target);\r\n        }\r\n        this.$refs.scrollbar && this.$refs.scrollbar.handleScroll();\r\n      },\r\n\r\n      handleMenuEnter() {\r\n        this.$nextTick(() => this.scrollToOption(this.selected));\r\n      },\r\n\r\n      emitChange(val) {\r\n        if (!valueEquals(this.value, val)) {\r\n          this.$emit('change', val);\r\n        }\r\n      },\r\n\r\n      getOption(value) {\r\n        let option;\r\n        const isObject = Object.prototype.toString.call(value).toLowerCase() === '[object object]';\r\n        const isNull = Object.prototype.toString.call(value).toLowerCase() === '[object null]';\r\n        const isUndefined = Object.prototype.toString.call(value).toLowerCase() === '[object undefined]';\r\n\r\n        for (let i = this.cachedOptions.length - 1; i >= 0; i--) {\r\n          const cachedOption = this.cachedOptions[i];\r\n          const isEqual = isObject\r\n            ? getValueByPath(cachedOption.value, this.valueKey) === getValueByPath(value, this.valueKey)\r\n            : cachedOption.value === value;\r\n          if (isEqual) {\r\n            option = cachedOption;\r\n            break;\r\n          }\r\n        }\r\n        if (option) return option;\r\n        const label = (!isObject && !isNull && !isUndefined)\r\n          ? value : '';\r\n        let newOption = {\r\n          value: value,\r\n          currentLabel: label\r\n        };\r\n        if (this.multiple) {\r\n          newOption.hitState = false;\r\n        }\r\n        return newOption;\r\n      },\r\n\r\n      setSelected() {\r\n        if (!this.multiple) {\r\n          let option = this.getOption(this.value);\r\n          if (option.created) {\r\n            this.createdLabel = option.currentLabel;\r\n            this.createdSelected = true;\r\n          } else {\r\n            this.createdSelected = false;\r\n          }\r\n          this.selectedLabel = option.currentLabel;\r\n          this.selected = option;\r\n          if (this.filterable) this.query = this.selectedLabel;\r\n          return;\r\n        }\r\n        let result = [];\r\n        if (Array.isArray(this.value)) {\r\n          this.value.forEach(value => {\r\n            result.push(this.getOption(value));\r\n          });\r\n        }\r\n        this.selected = result;\r\n        this.$nextTick(() => {\r\n          this.resetInputHeight();\r\n        });\r\n      },\r\n\r\n      handleFocus(event) {\r\n        if (!this.softFocus) {\r\n          if (this.automaticDropdown || this.filterable) {\r\n            this.visible = true;\r\n            if (this.filterable) {\r\n              this.menuVisibleOnFocus = true;\r\n            }\r\n          }\r\n          this.$emit('focus', event);\r\n        } else {\r\n          this.softFocus = false;\r\n        }\r\n      },\r\n\r\n      blur() {\r\n        this.visible = false;\r\n        this.$refs.reference.blur();\r\n      },\r\n\r\n      handleBlur(event) {\r\n        setTimeout(() => {\r\n          if (this.isSilentBlur) {\r\n            this.isSilentBlur = false;\r\n          } else {\r\n            this.$emit('blur', event);\r\n          }\r\n        }, 50);\r\n        this.softFocus = false;\r\n      },\r\n\r\n      handleClearClick(event) {\r\n        this.deleteSelected(event);\r\n      },\r\n\r\n      doDestroy() {\r\n        this.$refs.popper && this.$refs.popper.doDestroy();\r\n      },\r\n\r\n      handleClose() {\r\n        this.visible = false;\r\n      },\r\n\r\n      toggleLastOptionHitState(hit) {\r\n        if (!Array.isArray(this.selected)) return;\r\n        const option = this.selected[this.selected.length - 1];\r\n        if (!option) return;\r\n\r\n        if (hit === true || hit === false) {\r\n          option.hitState = hit;\r\n          return hit;\r\n        }\r\n\r\n        option.hitState = !option.hitState;\r\n        return option.hitState;\r\n      },\r\n\r\n      deletePrevTag(e) {\r\n        if (e.target.value.length <= 0 && !this.toggleLastOptionHitState()) {\r\n          const value = this.value.slice();\r\n          value.pop();\r\n          this.$emit('input', value);\r\n          this.emitChange(value);\r\n        }\r\n      },\r\n\r\n      managePlaceholder() {\r\n        if (this.currentPlaceholder !== '') {\r\n          this.currentPlaceholder = this.$refs.input.value ? '' : this.cachedPlaceHolder;\r\n        }\r\n      },\r\n\r\n      resetInputState(e) {\r\n        if (e.keyCode !== 8) this.toggleLastOptionHitState(false);\r\n        this.inputLength = this.$refs.input.value.length * 15 + 20;\r\n        this.resetInputHeight();\r\n      },\r\n\r\n      resetInputHeight() {\r\n        if (this.collapseTags && !this.filterable) return;\r\n        this.$nextTick(() => {\r\n          if (!this.$refs.reference) return;\r\n          let inputChildNodes = this.$refs.reference.$el.childNodes;\r\n          let input = [].filter.call(inputChildNodes, item => item.tagName === 'INPUT')[0];\r\n          const tags = this.$refs.tags;\r\n          const sizeInMap = this.initialInputHeight || 40;\r\n          input.style.height = this.selected.length === 0\r\n            ? sizeInMap + 'px'\r\n            : Math.max(\r\n              tags ? (tags.clientHeight + (tags.clientHeight > sizeInMap ? 6 : 0)) : 0,\r\n              sizeInMap\r\n            ) + 'px';\r\n          if (this.visible && this.emptyText !== false) {\r\n            this.broadcast('ElSelectDropdown', 'updatePopper');\r\n          }\r\n        });\r\n      },\r\n\r\n      resetHoverIndex() {\r\n        setTimeout(() => {\r\n          if (!this.multiple) {\r\n            this.hoverIndex = this.options.indexOf(this.selected);\r\n          } else {\r\n            if (this.selected.length > 0) {\r\n              this.hoverIndex = Math.min.apply(null, this.selected.map(item => this.options.indexOf(item)));\r\n            } else {\r\n              this.hoverIndex = -1;\r\n            }\r\n          }\r\n        }, 300);\r\n      },\r\n\r\n      handleOptionSelect(option, byClick) {\r\n        if (this.multiple) {\r\n          const value = (this.value || []).slice();\r\n          const optionIndex = this.getValueIndex(value, option.value);\r\n          if (optionIndex > -1) {\r\n            value.splice(optionIndex, 1);\r\n          } else if (this.multipleLimit <= 0 || value.length < this.multipleLimit) {\r\n            value.push(option.value);\r\n          }\r\n          this.$emit('input', value);\r\n          this.emitChange(value);\r\n          if (option.created) {\r\n            this.query = '';\r\n            this.handleQueryChange('');\r\n            this.inputLength = 20;\r\n          }\r\n          if (this.filterable) this.$refs.input.focus();\r\n        } else {\r\n          this.$emit('input', option.value);\r\n          this.emitChange(option.value);\r\n          this.visible = false;\r\n        }\r\n        this.isSilentBlur = byClick;\r\n        this.setSoftFocus();\r\n        if (this.visible) return;\r\n        this.$nextTick(() => {\r\n          this.scrollToOption(option);\r\n        });\r\n      },\r\n\r\n      setSoftFocus() {\r\n        this.softFocus = true;\r\n        const input = this.$refs.input || this.$refs.reference;\r\n        if (input) {\r\n          input.focus();\r\n        }\r\n      },\r\n\r\n      getValueIndex(arr = [], value) {\r\n        const isObject = Object.prototype.toString.call(value).toLowerCase() === '[object object]';\r\n        if (!isObject) {\r\n          return arr.indexOf(value);\r\n        } else {\r\n          const valueKey = this.valueKey;\r\n          let index = -1;\r\n          arr.some((item, i) => {\r\n            if (getValueByPath(item, valueKey) === getValueByPath(value, valueKey)) {\r\n              index = i;\r\n              return true;\r\n            }\r\n            return false;\r\n          });\r\n          return index;\r\n        }\r\n      },\r\n\r\n      toggleMenu() {\r\n        if (!this.selectDisabled) {\r\n          if (this.menuVisibleOnFocus) {\r\n            this.menuVisibleOnFocus = false;\r\n          } else {\r\n            this.visible = !this.visible;\r\n          }\r\n          if (this.visible) {\r\n            (this.$refs.input || this.$refs.reference).focus();\r\n          }\r\n        }\r\n      },\r\n\r\n      selectOption() {\r\n        // this.$refs.reference.hideUnderLine();\r\n        if (!this.visible) {\r\n          this.toggleMenu();\r\n        } else {\r\n          if (this.options[this.hoverIndex]) {\r\n            this.handleOptionSelect(this.options[this.hoverIndex]);\r\n          }\r\n        }\r\n      },\r\n\r\n      deleteSelected(event) {\r\n        event.stopPropagation();\r\n        const value = this.multiple ? [] : '';\r\n        this.$emit('input', value);\r\n        this.emitChange(value);\r\n        this.visible = false;\r\n        this.$emit('clear');\r\n      },\r\n\r\n      deleteTag(event, tag) {\r\n        let index = this.selected.indexOf(tag);\r\n        if (index > -1 && !this.selectDisabled) {\r\n          const value = this.value.slice();\r\n          value.splice(index, 1);\r\n          this.$emit('input', value);\r\n          this.emitChange(value);\r\n          this.$emit('remove-tag', tag.value);\r\n        }\r\n        event.stopPropagation();\r\n      },\r\n\r\n      onInputChange() {\r\n        if (this.filterable && this.query !== this.selectedLabel) {\r\n          this.query = this.selectedLabel;\r\n          this.handleQueryChange(this.query);\r\n        }\r\n      },\r\n\r\n      onOptionDestroy(index) {\r\n        if (index > -1) {\r\n          this.optionsCount--;\r\n          this.filteredOptionsCount--;\r\n          this.options.splice(index, 1);\r\n        }\r\n      },\r\n\r\n      resetInputWidth() {\r\n        this.inputWidth = this.$refs.reference.$el.getBoundingClientRect().width;\r\n      },\r\n\r\n      handleResize() {\r\n        this.resetInputWidth();\r\n        if (this.multiple) this.resetInputHeight();\r\n      },\r\n\r\n      checkDefaultFirstOption() {\r\n        this.hoverIndex = -1;\r\n        // highlight the created option\r\n        let hasCreated = false;\r\n        for (let i = this.options.length - 1; i >= 0; i--) {\r\n          if (this.options[i].created) {\r\n            hasCreated = true;\r\n            this.hoverIndex = i;\r\n            break;\r\n          }\r\n        }\r\n        if (hasCreated) return;\r\n        for (let i = 0; i !== this.options.length; ++i) {\r\n          const option = this.options[i];\r\n          if (this.query) {\r\n            // highlight first options that passes the filter\r\n            if (!option.disabled && !option.groupDisabled && option.visible) {\r\n              this.hoverIndex = i;\r\n              break;\r\n            }\r\n          } else {\r\n            // highlight currently selected option\r\n            if (option.itemSelected) {\r\n              this.hoverIndex = i;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n      getValueKey(item) {\r\n        if (Object.prototype.toString.call(item.value).toLowerCase() !== '[object object]') {\r\n          return item.value;\r\n        } else {\r\n          return getValueByPath(item.value, this.valueKey);\r\n        }\r\n      }\r\n    },\r\n\r\n    created() {\r\n      this.cachedPlaceHolder = this.currentPlaceholder = this.placeholder;\r\n      if (this.multiple && !Array.isArray(this.value)) {\r\n        this.$emit('input', []);\r\n      }\r\n      if (!this.multiple && Array.isArray(this.value)) {\r\n        this.$emit('input', '');\r\n      }\r\n\r\n      this.debouncedOnInputChange = debounce(this.debounce, () => {\r\n        this.onInputChange();\r\n      });\r\n\r\n      this.debouncedQueryChange = debounce(this.debounce, (e) => {\r\n        this.handleQueryChange(e.target.value);\r\n      });\r\n\r\n      this.$on('handleOptionClick', this.handleOptionSelect);\r\n      this.$on('setSelected', this.setSelected);\r\n    },\r\n\r\n    mounted() {\r\n      if (this.multiple && Array.isArray(this.value) && this.value.length > 0) {\r\n        this.currentPlaceholder = '';\r\n      }\r\n      addResizeListener(this.$el, this.handleResize);\r\n\r\n      const reference = this.$refs.reference;\r\n      if (reference && reference.$el) {\r\n        const sizeMap = {\r\n          medium: 36,\r\n          small: 32,\r\n          mini: 28\r\n        };\r\n        const input = reference.$el.querySelector('input');\r\n        this.initialInputHeight = input.getBoundingClientRect().height || sizeMap[this.selectSize];\r\n      }\r\n      if (this.remote && this.multiple) {\r\n        this.resetInputHeight();\r\n      }\r\n      this.$nextTick(() => {\r\n        if (reference && reference.$el) {\r\n          this.inputWidth = reference.$el.getBoundingClientRect().width;\r\n        }\r\n      });\r\n      this.setSelected();\r\n    },\r\n\r\n    beforeDestroy() {\r\n      if (this.$el && this.handleResize) removeResizeListener(this.$el, this.handleResize);\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=7f34adca&\"\nimport script from \"./select.vue?vue&type=script&lang=js&\"\nexport * from \"./select.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Select from './src/select';\r\n\r\n/* istanbul ignore next */\r\nSelect.install = function(Vue) {\r\n  Vue.component(Select.name, Select);\r\n};\r\n\r\nexport default Select;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"top-bar2\"}},[_vm._t(\"left\"),_vm._t(\"center\"),_vm._t(\"right\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"top-bar2\">\r\n    <slot name=\"left\"></slot>\r\n    <slot name=\"center\"></slot>\r\n    <slot name=\"right\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"TopBar\"\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #top-bar2 {\r\n    display: flex;\r\n    background-color: #f6f6f6;\r\n\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n\r\n    padding: 5px 10px;\r\n    /*box-shadow: 0 2px 2px rgba(100,100,100,.2);*/\r\n    box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.4);\r\n  }\r\n\r\n  #top-bar2>.btns {\r\n    display: flex;\r\n    flex-grow: 1;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TopBar.vue?vue&type=template&id=b57856d0&scoped=true&\"\nimport script from \"./TopBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TopBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TopBar.vue?vue&type=style&index=0&id=b57856d0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b57856d0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"img-button\",on:{\"click\":_vm.btnClick}},[_c('span',{staticClass:\"icon\"},[_vm._t(\"icon\")],2),_c('span',{staticClass:\"txt\"},[_vm._t(\"text\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"img-button\" @click=\"btnClick\">\r\n    <span class=\"icon\"> <slot name=\"icon\"></slot> </span>\r\n    <span class=\"txt\"> <slot name=\"text\"></slot> </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"ImgButton\",\r\n    methods: {\r\n      btnClick() {\r\n        // console.log('img button click')\r\n        this.$emit('btnClick');\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .img-button {\r\n    display: flex;\r\n    border-radius: 5px;\r\n    background-color: #2381F6;\r\n    text-align: center;\r\n    padding: 8px;\r\n    margin: 0px 3px;\r\n    color: white;\r\n    cursor: pointer;\r\n    /*font-family:Alibaba PuHuiTi;*/\r\n  }\r\n  .img-button>.icon {\r\n    font-size:12px;\r\n  }\r\n  .img-button>.txt {\r\n    font-size:15px;\r\n    margin-left: 5px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImgButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImgButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImgButton.vue?vue&type=template&id=4516ac28&scoped=true&\"\nimport script from \"./ImgButton.vue?vue&type=script&lang=js&\"\nexport * from \"./ImgButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImgButton.vue?vue&type=style&index=0&id=4516ac28&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4516ac28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pageTitle\"},[_c('span',{staticClass:\"iconHome\"},[_vm._t(\"icon\")],2),_c('span',{staticClass:\"pageTxt\"},[_vm._t(\"title\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"pageTitle\">\r\n    <span class=\"iconHome\"> <slot name=\"icon\"></slot> </span>\r\n    <span class=\"pageTxt\"> <slot name=\"title\"></slot> </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"PageTitle\"\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .pageTitle {\r\n    display: flex;\r\n    width: 290px;\r\n    justify-content: left;\r\n    align-items: center;\r\n    color: black;\r\n  }\r\n\r\n  .pageTitle>.iconHome {\r\n    font-size:12px;\r\n  }\r\n  .pageTitle>.pageTxt {\r\n    font-weight: bold;\r\n    font-size: 20px;\r\n    margin-left: 5px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageTitle.vue?vue&type=template&id=e6d45a3c&scoped=true&\"\nimport script from \"./PageTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./PageTitle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageTitle.vue?vue&type=style&index=0&id=e6d45a3c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e6d45a3c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"el-notification-fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],class:['el-notification', _vm.customClass, _vm.horizontalClass],style:(_vm.positionStyle),attrs:{\"role\":\"alert\"},on:{\"mouseenter\":function($event){return _vm.clearTimer()},\"mouseleave\":function($event){return _vm.startTimer()},\"click\":_vm.click}},[(_vm.type || _vm.iconClass)?_c('i',{staticClass:\"el-notification__icon\",class:[ _vm.typeClass, _vm.iconClass ]}):_vm._e(),_c('div',{staticClass:\"el-notification__group\",class:{ 'is-with-icon': _vm.typeClass || _vm.iconClass }},[_c('h2',{staticClass:\"el-notification__title\",domProps:{\"textContent\":_vm._s(_vm.title)}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.message),expression:\"message\"}],staticClass:\"el-notification__content\"},[_vm._t(\"default\",[(!_vm.dangerouslyUseHTMLString)?_c('p',[_vm._v(_vm._s(_vm.message))]):_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.message)}})])],2),(_vm.showClose)?_c('div',{staticClass:\"el-notification__closeBtn el-icon-circle-close\",on:{\"click\":function($event){$event.stopPropagation();return _vm.close($event)}}}):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"el-notification-fade\">\r\n    <div\r\n      :class=\"['el-notification', customClass, horizontalClass]\"\r\n      v-show=\"visible\"\r\n      :style=\"positionStyle\"\r\n      @mouseenter=\"clearTimer()\"\r\n      @mouseleave=\"startTimer()\"\r\n      @click=\"click\"\r\n      role=\"alert\"\r\n    >\r\n      <i\r\n        class=\"el-notification__icon\"\r\n        :class=\"[ typeClass, iconClass ]\"\r\n        v-if=\"type || iconClass\">\r\n      </i>\r\n      <div class=\"el-notification__group\" :class=\"{ 'is-with-icon': typeClass || iconClass }\">\r\n        <h2 class=\"el-notification__title\" v-text=\"title\"></h2>\r\n        <div class=\"el-notification__content\" v-show=\"message\">\r\n          <slot>\r\n            <p v-if=\"!dangerouslyUseHTMLString\">{{ message }}</p>\r\n            <p v-else v-html=\"message\"></p>\r\n          </slot>\r\n        </div>\r\n        <div\r\n          class=\"el-notification__closeBtn el-icon-circle-close\"\r\n          v-if=\"showClose\"\r\n          @click.stop=\"close\"></div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script type=\"text/babel\">\r\n  let typeMap = {\r\n    success: 'success',\r\n    info: 'info',\r\n    warning: 'warning',\r\n    error: 'error'\r\n  };\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        visible: false,\r\n        title: '',\r\n        message: '',\r\n        duration: 4500,\r\n        type: '',\r\n        showClose: true,\r\n        customClass: '',\r\n        iconClass: '',\r\n        onClose: null,\r\n        onClick: null,\r\n        closed: false,\r\n        verticalOffset: 0,\r\n        timer: null,\r\n        dangerouslyUseHTMLString: false,\r\n        position: 'top-right'\r\n      };\r\n    },\r\n\r\n    computed: {\r\n      typeClass() {\r\n        return this.type && typeMap[this.type] ? `el-icon-${ typeMap[this.type] }` : '';\r\n      },\r\n\r\n      horizontalClass() {\r\n        return this.position.indexOf('right') > -1 ? 'right' : 'left';\r\n      },\r\n\r\n      verticalProperty() {\r\n        return /^top-/.test(this.position) ? 'top' : 'bottom';\r\n      },\r\n\r\n      positionStyle() {\r\n        return {\r\n          [this.verticalProperty]: `${ this.verticalOffset }px`\r\n        };\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      closed(newVal) {\r\n        if (newVal) {\r\n          this.visible = false;\r\n          this.$el.addEventListener('transitionend', this.destroyElement);\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      destroyElement() {\r\n        this.$el.removeEventListener('transitionend', this.destroyElement);\r\n        this.$destroy(true);\r\n        this.$el.parentNode.removeChild(this.$el);\r\n      },\r\n\r\n      click() {\r\n        if (typeof this.onClick === 'function') {\r\n          this.onClick();\r\n        }\r\n      },\r\n\r\n      close() {\r\n        this.closed = true;\r\n        if (typeof this.onClose === 'function') {\r\n          this.onClose();\r\n        }\r\n      },\r\n\r\n      clearTimer() {\r\n        clearTimeout(this.timer);\r\n      },\r\n\r\n      startTimer() {\r\n        if (this.duration > 0) {\r\n          this.timer = setTimeout(() => {\r\n            if (!this.closed) {\r\n              this.close();\r\n            }\r\n          }, this.duration);\r\n        }\r\n      },\r\n      keydown(e) {\r\n        if (e.keyCode === 46 || e.keyCode === 8) {\r\n          this.clearTimer(); // detele 取消倒计时\r\n        } else if (e.keyCode === 27) { // esc关闭消息\r\n          if (!this.closed) {\r\n            this.close();\r\n          }\r\n        } else {\r\n          this.startTimer(); // 恢复倒计时\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      if (this.duration > 0) {\r\n        this.timer = setTimeout(() => {\r\n          if (!this.closed) {\r\n            this.close();\r\n          }\r\n        }, this.duration);\r\n      }\r\n      document.addEventListener('keydown', this.keydown);\r\n    },\r\n    beforeDestroy() {\r\n      document.removeEventListener('keydown', this.keydown);\r\n    }\r\n  };\r\n</script>\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=1612f7d5&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { hasOwn } from './util';\r\n\r\nexport function isVNode(node) {\r\n  return node !== null && typeof node === 'object' && hasOwn(node, 'componentOptions');\r\n};\r\n","import Vue from 'vue';\r\nimport Main from './main.vue';\r\nimport merge from '@/components/element/utils/merge';\r\nimport { PopupManager } from '@/components/element/utils/popup';\r\nimport { isVNode } from '@/components/element/utils/vdom';\r\nconst NotificationConstructor = Vue.extend(Main);\r\n\r\nlet instance;\r\nlet instances = [];\r\nlet seed = 1;\r\n\r\nconst Notification = function(options) {\r\n  if (Vue.prototype.$isServer) return;\r\n  options = merge({}, options);\r\n  const userOnClose = options.onClose;\r\n  const id = 'notification_' + seed++;\r\n  const position = options.position || 'top-right';\r\n\r\n  options.onClose = function() {\r\n    Notification.close(id, userOnClose);\r\n  };\r\n\r\n  instance = new NotificationConstructor({\r\n    data: options\r\n  });\r\n\r\n  if (isVNode(options.message)) {\r\n    instance.$slots.default = [options.message];\r\n    options.message = 'REPLACED_BY_VNODE';\r\n  }\r\n  instance.id = id;\r\n  instance.$mount();\r\n  document.body.appendChild(instance.$el);\r\n  instance.visible = true;\r\n  instance.dom = instance.$el;\r\n  instance.dom.style.zIndex = PopupManager.nextZIndex();\r\n\r\n  let verticalOffset = options.offset || 0;\r\n  instances.filter(item => item.position === position).forEach(item => {\r\n    verticalOffset += item.$el.offsetHeight + 16;\r\n  });\r\n  verticalOffset += 16;\r\n  instance.verticalOffset = verticalOffset;\r\n  instances.push(instance);\r\n  return instance;\r\n};\r\n\r\n['success', 'warning', 'info', 'error'].forEach(type => {\r\n  Notification[type] = options => {\r\n    if (typeof options === 'string' || isVNode(options)) {\r\n      options = {\r\n        message: options\r\n      };\r\n    }\r\n    options.type = type;\r\n    return Notification(options);\r\n  };\r\n});\r\n\r\nNotification.close = function(id, userOnClose) {\r\n  let index = -1;\r\n  const len = instances.length;\r\n  const instance = instances.filter((instance, i) => {\r\n    if (instance.id === id) {\r\n      index = i;\r\n      return true;\r\n    }\r\n    return false;\r\n  })[0];\r\n  if (!instance) return;\r\n\r\n  if (typeof userOnClose === 'function') {\r\n    userOnClose(instance);\r\n  }\r\n  instances.splice(index, 1);\r\n\r\n  if (len <= 1) return;\r\n  const position = instance.position;\r\n  const removedHeight = instance.dom.offsetHeight;\r\n  for (let i = index; i < len - 1 ; i++) {\r\n    if (instances[i].position === position) {\r\n      instances[i].dom.style[instance.verticalProperty] =\r\n        parseInt(instances[i].dom.style[instance.verticalProperty], 10) - removedHeight - 16 + 'px';\r\n    }\r\n  }\r\n};\r\n\r\nNotification.closeAll = function() {\r\n  for (let i = instances.length - 1; i >= 0; i--) {\r\n    instances[i].close();\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import Notification from './src/main.js';\r\nexport default Notification;\r\n","import pako from 'pako'\r\n\r\n//https://www.cnblogs.com/chanwahfung/p/11391234.html\r\nfunction handleCodePoints(array) {\r\n  var CHUNK_SIZE = 0x8000; // arbitrary number here, not too small, not too big\r\n  var index = 0;\r\n  var length = array.length;\r\n  var result = '';\r\n  var slice;\r\n  var arr = [];\r\n  for (var i = 0, _i = array.length; i < _i; i++) {\r\n        arr[i] = array[i];\r\n     }\r\n   while (index < length) {\r\n         slice = arr.slice(index, Math.min(index + CHUNK_SIZE, length)); // `Math.min` is not really necessary here I think\r\n         result += String.fromCharCode.apply(null, slice);\r\n         index += CHUNK_SIZE;\r\n     }\r\n   return result;\r\n}\r\n\r\n// 解压\r\nexport function unzip(key, fromRemote) {\r\n  if (key.charAt(0) === '{') {\r\n    return key; //地图数据并未被压缩，直接返回原始数据\r\n  }\r\n  // let charArr = key.split(''), pre0, pre1, pre2;\r\n  // let charData = [];\r\n  // for (let i = 0; i < charArr.length;)\r\n\r\n  // 将二进制字符串转换为字符数组\r\n  let charData = key.split('').map(function (x) {\r\n    return x.charCodeAt(0);\r\n  });\r\n  // console.log('压缩后的文件大小:', charData.join(\",\"))\r\n\r\n  // 将数字数组转换成字节数组\r\n  var binData = new Uint8Array(charData);\r\n\r\n  // 解压\r\n  var data = pako.inflate(binData);\r\n\r\n  // 将GunZip ByTAREAR转换回ASCII字符串\r\n  // key = String.fromCharCode.apply(null, );\r\n  key = handleCodePoints(new Uint16Array(data));\r\n\r\n  //unescape(str)  --->解压后解码，防止中文变乱码\r\n  return decodeURI(key);\r\n}\r\n\r\n// 压缩\r\nexport function zip(str) {\r\n  //escape(str)  --->压缩前编码，防止中文变乱码\r\n  var binaryString = pako.deflate(encodeURI(str), {to: 'string'});\r\n  return binaryString;\r\n\r\n}\r\n","<template>\r\n  <top-bar>\r\n    <page-title slot=\"left\">\r\n<!--      <span slot=\"icon\" class=\"iconfont iconfanhui hand\"></span>-->\r\n      <span slot=\"title\">室内地图编辑器</span>\r\n    </page-title>\r\n    <div slot=\"center\" style=\"display: flex; margin-right: auto; align-items: center\">\r\n      <el-dropdown @command=\"onSearchByDropdownClose\">\r\n        <div class=\"search-pre-box\">\r\n          <i class=\"iconfont icongengduo2\"></i>\r\n        </div>\r\n        <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item :command=\"0\" :selected=\"searchBySelectIndex==0\">{{searchByLst[0]}}</el-dropdown-item>\r\n          <el-dropdown-item :command=\"1\" :selected=\"searchBySelectIndex==1\">{{searchByLst[1]}}</el-dropdown-item>\r\n          <el-dropdown-item :command=\"2\" :selected=\"searchBySelectIndex==2\">{{searchByLst[2]}}</el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </el-dropdown>\r\n\r\n      <el-select v-model=\"searchTxt\" @change=\"onSearchItemClick\" size=\"small\" :placeholder=\"searchPlaceholder\" filterable noIconRotate\r\n                 input-style=\"border-radius: 0 5px 5px 0\" remote :remote-method=\"filterFromEditor\"\r\n                 customIcon=\"iconfont iconsousuo searchIcon\">\r\n        <el-option\r\n          v-for=\"item in searchOptions\"\r\n          :key=\"item.id\"\r\n          :label=\"item.name\"\r\n          :value=\"item.id\">\r\n          <span style=\"float: left\">{{ item.name }}</span>\r\n          <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.type }}</span>\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n    <div slot=\"right\" style=\"display: flex\">\r\n      <div class=\"btnGroup0\">\r\n        <i class=\"iconfont iconchexiao1 bareIcon\" :class=\"{'enabled': undoEnabled}\" @click=\"performUndo\"></i>\r\n        <div style=\"width: 10px\"></div>\r\n        <i class=\"iconfont iconhuanyuan bareIcon\" :class=\"{'enabled': redoEnabled}\" @click=\"performRedo\"></i>\r\n      </div>\r\n      <div class=\"btnGroup1\">\r\n        <img-button @btnClick=\"onClickSave\">\r\n          <span slot=\"icon\" class=\"iconfont iconbaocun\"></span>\r\n          <span slot=\"text\">保存</span>\r\n        </img-button>\r\n\r\n        <img-button @btnClick=\"onClickLoad\">\r\n          <span slot=\"icon\" class=\"iconfont iconfanhui\"></span>\r\n          <span slot=\"text\">载入</span>\r\n        </img-button>\r\n        <input type=\"file\" id=\"jsonInput\" style=\"display:none;\" @input=\"selectMapJson\" accept=\"application/json\">\r\n      </div>\r\n      <div class=\"btnGroup2\">\r\n        <img-button @btnClick=\"publishMap\">\r\n          <span slot=\"icon\" class=\"iconfont iconfabu\"></span>\r\n          <span slot=\"text\">发布</span>\r\n        </img-button>\r\n\r\n        <img-button @btnClick=\"onClickPreview\">\r\n          <span slot=\"icon\" class=\"iconfont iconyulan\"></span>\r\n          <span slot=\"text\">预览</span>\r\n        </img-button>\r\n\r\n        <img-button @btnClick=\"onClickPreview(true)\">\r\n          <span slot=\"icon\" class=\"iconfont iconyulan\"></span>\r\n          <span slot=\"text\">pc预览</span>\r\n        </img-button>\r\n\r\n        <img-button @btnClick=\"showDownloadPrompt\">\r\n          <span slot=\"icon\" class=\"iconfont iconxiazai\"></span>\r\n          <span slot=\"text\">下载</span>\r\n        </img-button>\r\n\r\n<!--        <img-button @btnClick=\"showDeveloping\">-->\r\n<!--          <span slot=\"icon\" class=\"iconfont icongengduo\"></span>-->\r\n<!--          <span slot=\"text\">更多</span>-->\r\n<!--        </img-button>-->\r\n      </div>\r\n\r\n      <div class=\"username\">\r\n        {{userName}}\r\n      </div>\r\n    </div>\r\n  </top-bar>\r\n</template>\r\n\r\n<script>\r\n  import ElInput from \"@/components/element/input\"\r\n  import ElDropdown from \"@/components/element/dropdown\"\r\n  import ElDropdownMenu from \"@/components/element/dropdown/src/dropdown-menu\"\r\n  import ElDropdownItem from \"@/components/element/dropdown/src/dropdown-item\"\r\n  import ElSelect from '@/components/element/select'\r\n  import ElOption from '@/components/element/select/src/option'\r\n  import TopBar from \"../common/TopBar\";\r\n  import ImgButton from \"../common/ImgButton\";\r\n  import PageTitle from \"../common/PageTitle\";\r\n  import MainScene from \"../../3d/js/MainScene\";\r\n  import Serializer from \"../../3d/js/util/Serialization\";\r\n  import Notification from \"../element/notification\";\r\n  import FileSaver from 'file-saver';\r\n  import History from \"../../3d/js/undo/History\";\r\n  import Config from \"../../3d/js/configurable/Config\";\r\n  import Common from \"../../3d/js/util/Common\";\r\n  import {zip, unzip} from \"../../3d/js/lib_external/CompressTool\";\r\n\r\n  export default {\r\n    name: \"MainTopBar\",\r\n    data() {\r\n      return {\r\n        searchTxt: \"\",\r\n        searchOptions: [],\r\n        searchPlaceholder: \"搜索: 元素名称\",\r\n        searchBySelectIndex: 0,\r\n        searchByLst: [\"元素名称\", \"元素ID\", \"类型ID\"],\r\n        undoEnabled: false,\r\n        redoEnabled: false\r\n      }\r\n    },\r\n    mounted() {\r\n      History.addEventListener(\"stack change\", (event) => {\r\n        this.undoEnabled = event.undoLen > 0;\r\n        this.redoEnabled = event.redoLen > 0;\r\n      });\r\n      if (Config.remote.token != null) {\r\n        this.loadFromRemote();\r\n      }\r\n    },\r\n    methods: {\r\n      onSearchItemClick(uuid) {\r\n        MainScene.setSelectByUuid(uuid);\r\n      },\r\n      filterFromEditor(query) {\r\n        if (query.trim().length > 0)\r\n          this.searchOptions = MainScene.search(query.trim())\r\n      },\r\n      onSearchByDropdownClose(command) {\r\n        this.searchBySelectIndex = command;\r\n        this.searchPlaceholder = \"搜索: \" + this.searchByLst[command];\r\n      },\r\n      onClickSave() {\r\n        let str = Serializer.saveToLoal();\r\n        // Notification.success({message:'保存成功', position:'bottom-right'});\r\n        if (Config.remote.token != null) {\r\n          // this.saveToRemote(zip(str) );\r\n          this.saveToRemote(str);\r\n        }\r\n      },\r\n      saveToRemote(savingStr) {\r\n        let fileName = \"东客站负二层.json\";\r\n        let formData = new FormData();\r\n        let file = new File([savingStr], fileName, {\r\n          type: \"text/plain;charset=utf-8\"\r\n        });\r\n        formData.append(\"file\", file); //上传一个files对象\r\n        formData.append(\"headerFilename\", \"东客站\");\r\n        formData.append(\"mapId\", Config.remote.mapId); //需要上传的多个参数\r\n        formData.append(\"saveType\", \"1\"); //需要上传的多个参数\r\n        formData.append(\"longitude\", \"116.397128\"); //需要上传的多个参数\r\n        formData.append(\"latitude\", \"39.916527\"); //需要上传的多个参数\r\n\r\n        this.axios.post('/merchant/merchantMap/save', formData).then((response) => {\r\n          console.log(response.data);\r\n          if (response.data.code == 0) {\r\n            Notification.success({message:'保存到服务器成功', position:'bottom-right'});\r\n          } else {\r\n            Notification.info({message:response.data.message, position:'bottom-right'});\r\n          }\r\n        }).catch(error => {\r\n          console.log(error);\r\n        });\r\n      },\r\n      loadFromRemote() {\r\n        let _this = this;\r\n        this.axios({\r\n          url: '/merchant/merchantMap/download',\r\n          method: 'post',\r\n          responseType:'blob',\r\n          data: {\r\n            mapId: Config.remote.mapId,\r\n            version: Config.remote.version,\r\n          }\r\n        }).then((response) => {\r\n          // console.log(response.data);\r\n          if (response.data) {\r\n            let mapContent = response.data; //unzip(response.data.tdata, true);\r\n            _this.parseRemoteMap(mapContent);\r\n          }\r\n        }).catch(error => {\r\n          console.log(error);\r\n        });\r\n      },\r\n      parseRemoteMap(mapContent) {\r\n        const resultJson = mapContent.slice(0, 1024);\r\n        const reader = new FileReader();\r\n        reader.readAsText(resultJson);\r\n        reader.onload = function (event) {\r\n          const content = Common.clearNull(reader.result);\r\n          const headerObj = JSON.parse(content);\r\n          // console.log(\"parseRemoteMap, headerObj: \", headerObj);\r\n          for (let i = 0; i < headerObj.file.length; i++) {\r\n            const mapPartObj = headerObj.file[i];\r\n            const start = mapPartObj.start - 1;\r\n            const end = mapPartObj.end;\r\n            // console.log(\"parseRemoteMap, part: \" + i, mapPartObj);\r\n            if (i > 0) {\r\n              continue;\r\n            }\r\n            const mapPartStr = mapContent.slice(start, end);\r\n            const readerTmp = new FileReader();\r\n            readerTmp.readAsText(mapPartStr);\r\n            readerTmp.onload = function(event) {\r\n              Serializer.deserialize(readerTmp.result);\r\n            }\r\n          }\r\n        }\r\n      },\r\n      onClickLoad() {\r\n        // Serializer.loadFromLocal(false);\r\n        // Notification.success({message:'加载成功', position:'bottom-right'});\r\n        this.jsonInput.click();\r\n      },\r\n      onClickPreview(forPc) {\r\n        Serializer.saveToLoal(true);\r\n        // this.$router.replace('/preview');\r\n        let routeUrl = this.$router.resolve({\r\n          path: forPc ? \"/preview4pc\" : \"/preview\",\r\n          query: { fromEditor: true }\r\n        });\r\n        window.open(routeUrl.href, '_blank');\r\n      },\r\n      publishMap() {\r\n        let jsonObj = {mapId: Config.remote.mapId, info: \"地图申请发布功能的测试\"};\r\n        let headerObj =  {\r\n          headers: {\r\n            'Content-Type': \"application/json\"\r\n          }\r\n        };\r\n        this.axios.post('/merchant/merchantMapRelease/add', jsonObj, headerObj).then((response) => {\r\n          console.log(response.data);\r\n          if (response.data.code == 0) {\r\n            Notification.info({message:'发布地图成功', position:'bottom-right'});\r\n          }\r\n        }).catch(error => {\r\n          console.log(error);\r\n        });\r\n      },\r\n      showDeveloping() {\r\n        Notification.info({message:'功能尚未开放', position:'bottom-right'});\r\n      },\r\n      showDownloadPrompt() {\r\n        let name = prompt(\"请输入文件名称\", \"map demo\");\r\n        if (name && name.trim()) {\r\n          // console.log(name);\r\n          let content = Serializer.serialize();\r\n          let zipped = content; //zip(content);\r\n          let blob = new Blob([zipped ], {type: \"text/plain;charset=utf-8\"});\r\n          FileSaver.saveAs(blob, name + \".json\");\r\n        }\r\n      },\r\n      selectMapJson() {\r\n        let file = this.jsonInput.files;\r\n        console.log('selectMapJson, ', file);\r\n        if (!file || !file.length) {\r\n          return;\r\n        }\r\n\r\n        let reader = new FileReader();\r\n        reader.onload = function (evt) {\r\n          // console.log(evt.target.result);\r\n          let unzipped = unzip(evt.target.result);\r\n          Serializer.deserialize(unzipped);\r\n        }\r\n        let fileObj = file[0];\r\n        reader.readAsText(fileObj);\r\n      },\r\n      performUndo() {\r\n        // console.log(\"perform undo\");\r\n        if (this.undoEnabled) {\r\n          History.undoAction();\r\n        }\r\n      },\r\n      performRedo() {\r\n        // console.log(\"perform redo\");\r\n        if (this.redoEnabled) {\r\n          History.redoAction();\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      jsonInput() {\r\n        return document.getElementById('jsonInput');\r\n      },\r\n      userName() {\r\n        if (this.$route.query.username != null)\r\n          return this.$route.query.username;\r\n        return \"用户名\";\r\n      }\r\n    },\r\n    components: {\r\n      TopBar, ImgButton, PageTitle, ElInput, ElDropdown, ElDropdownItem, ElDropdownMenu,ElSelect,ElOption\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.hand {\r\n  cursor: pointer;\r\n}\r\n  .searchIcon {\r\n    font-size: 14px;\r\n    color: #55aaff;\r\n    line-height: 34px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .username {\r\n    color: #2381F6;\r\n    max-width: 140px;\r\n    white-space: nowrap;\r\n    text-overflow:ellipsis;\r\n    overflow:hidden;\r\n\r\n    font-size: 14px;\r\n    line-height: 33px;\r\n    padding: 0 10px;\r\n    border-left: solid 1px #ccc;\r\n  }\r\n\r\n  .btnGroup2 {\r\n    padding: 0 10px;\r\n    display: flex;\r\n    border-left: solid 1px #ccc;\r\n  }\r\n\r\n.btnGroup1 {\r\n  padding: 0 10px;\r\n  display: flex;\r\n  border-left: solid 1px #ccc;\r\n}\r\n.btnGroup0 {\r\n  padding: 0 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n  .bareIcon {\r\n    color: #999;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n  }\r\n  .enabled {\r\n    color: black;\r\n  }\r\n  .search-pre-box {\r\n    width: 32px;\r\n    height: 32px;\r\n    border-radius: 5px 0 0 5px;\r\n    color: white;\r\n    background-color: #2381F6;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n","/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko\r\n * @version 2.0.5\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\r\n\r\n\r\n\"use strict\";\r\n\r\nlet jsc;\r\nlet jsColor = {\r\n\tjsc() {\r\n\t\treturn jsc;\r\n\t},\r\n\tinit() {\r\n\t\tif (!window.jscolor) { window.jscolor = (function () {\r\n\r\n\r\n\t\t\tjsc = {\r\n\t\t\t\tregister : function () {\r\n\t\t\t\t\tjsc.attachDOMReadyEvent(jsc.init);\r\n\t\t\t\t\tjsc.attachEvent(document, 'mousedown', jsc.onDocumentMouseDown);\r\n\t\t\t\t\tjsc.attachEvent(document, 'touchstart', jsc.onDocumentTouchStart);\r\n\t\t\t\t\tjsc.attachEvent(window, 'resize', jsc.onWindowResize);\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tinit : function () {\r\n\t\t\t\t\tif (jsc.jscolor.lookupClass) {\r\n\t\t\t\t\t\tjsc.jscolor.installByClassName(jsc.jscolor.lookupClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\ttryInstallOnElements : function (elms, className) {\r\n\t\t\t\t\tvar matchClass = new RegExp('(^|\\\\s)(' + className + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\r\n\r\n\t\t\t\t\tfor (var i = 0; i < elms.length; i += 1) {\r\n\t\t\t\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color') {\r\n\t\t\t\t\t\t\tif (jsc.isColorAttrSupported) {\r\n\t\t\t\t\t\t\t\t// skip inputs of type 'color' if supported by the browser\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar m;\r\n\t\t\t\t\t\tif (!elms[i].jscolor && elms[i].className && (m = elms[i].className.match(matchClass))) {\r\n\t\t\t\t\t\t\tvar targetElm = elms[i];\r\n\t\t\t\t\t\t\tvar optsStr = null;\r\n\r\n\t\t\t\t\t\t\tvar dataOptions = jsc.getDataAttr(targetElm, 'jscolor');\r\n\t\t\t\t\t\t\tif (dataOptions !== null) {\r\n\t\t\t\t\t\t\t\toptsStr = dataOptions;\r\n\t\t\t\t\t\t\t} else if (m[4]) {\r\n\t\t\t\t\t\t\t\toptsStr = m[4];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar opts = {};\r\n\t\t\t\t\t\t\tif (optsStr) {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\topts = (new Function ('return (' + optsStr + ')'))();\r\n\t\t\t\t\t\t\t\t} catch(eParseError) {\r\n\t\t\t\t\t\t\t\t\tjsc.warn('Error parsing jscolor options: ' + eParseError + ':\\n' + optsStr);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttargetElm.jscolor = new jsc.jscolor(targetElm, opts);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tisColorAttrSupported : (function () {\r\n\t\t\t\t\tvar elm = document.createElement('input');\r\n\t\t\t\t\tif (elm.setAttribute) {\r\n\t\t\t\t\t\telm.setAttribute('type', 'color');\r\n\t\t\t\t\t\tif (elm.type.toLowerCase() == 'color') {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t})(),\r\n\r\n\r\n\t\t\t\tisCanvasSupported : (function () {\r\n\t\t\t\t\tvar elm = document.createElement('canvas');\r\n\t\t\t\t\treturn !!(elm.getContext && elm.getContext('2d'));\r\n\t\t\t\t})(),\r\n\r\n\r\n\t\t\t\tfetchElement : function (mixed) {\r\n\t\t\t\t\treturn typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tisElementType : function (elm, type) {\r\n\t\t\t\t\treturn elm.nodeName.toLowerCase() === type.toLowerCase();\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetDataAttr : function (el, name) {\r\n\t\t\t\t\tvar attrName = 'data-' + name;\r\n\t\t\t\t\tvar attrValue = el.getAttribute(attrName);\r\n\t\t\t\t\tif (attrValue !== null) {\r\n\t\t\t\t\t\treturn attrValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tattachEvent : function (el, evnt, func) {\r\n\t\t\t\t\tif (el.addEventListener) {\r\n\t\t\t\t\t\tel.addEventListener(evnt, func, false);\r\n\t\t\t\t\t} else if (el.attachEvent) {\r\n\t\t\t\t\t\tel.attachEvent('on' + evnt, func);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tdetachEvent : function (el, evnt, func) {\r\n\t\t\t\t\tif (el.removeEventListener) {\r\n\t\t\t\t\t\tel.removeEventListener(evnt, func, false);\r\n\t\t\t\t\t} else if (el.detachEvent) {\r\n\t\t\t\t\t\tel.detachEvent('on' + evnt, func);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t_attachedGroupEvents : {},\r\n\r\n\r\n\t\t\t\tattachGroupEvent : function (groupName, el, evnt, func) {\r\n\t\t\t\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\t\t\t\tjsc._attachedGroupEvents[groupName] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\r\n\t\t\t\t\tjsc.attachEvent(el, evnt, func);\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tdetachGroupEvents : function (groupName) {\r\n\t\t\t\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\t\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\r\n\t\t\t\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\r\n\t\t\t\t\t\t\tjsc.detachEvent(evt[0], evt[1], evt[2]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete jsc._attachedGroupEvents[groupName];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tattachDOMReadyEvent : function (func) {\r\n\t\t\t\t\tvar fired = false;\r\n\t\t\t\t\tvar fireOnce = function () {\r\n\t\t\t\t\t\tif (!fired) {\r\n\t\t\t\t\t\t\tfired = true;\r\n\t\t\t\t\t\t\tfunc();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (document.readyState === 'complete') {\r\n\t\t\t\t\t\tsetTimeout(fireOnce, 1); // async\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (document.addEventListener) {\r\n\t\t\t\t\t\tdocument.addEventListener('DOMContentLoaded', fireOnce, false);\r\n\r\n\t\t\t\t\t\t// Fallback\r\n\t\t\t\t\t\twindow.addEventListener('load', fireOnce, false);\r\n\r\n\t\t\t\t\t} else if (document.attachEvent) {\r\n\t\t\t\t\t\t// IE\r\n\t\t\t\t\t\tdocument.attachEvent('onreadystatechange', function foo() {\r\n\t\t\t\t\t\t\tif (document.readyState === 'complete') {\r\n\t\t\t\t\t\t\t\t// document.detachEvent('onreadystatechange', arguments.callee);\r\n\t\t\t\t\t\t\t\tdocument.detachEvent('onreadystatechange', foo);\r\n\t\t\t\t\t\t\t\tfireOnce();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t// Fallback\r\n\t\t\t\t\t\twindow.attachEvent('onload', fireOnce);\r\n\r\n\t\t\t\t\t\t// IE7/8\r\n\t\t\t\t\t\tif (document.documentElement.doScroll && window == window.top) {\r\n\t\t\t\t\t\t\tvar tryScroll = function () {\r\n\t\t\t\t\t\t\t\tif (!document.body) { return; }\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tdocument.documentElement.doScroll('left');\r\n\t\t\t\t\t\t\t\t\tfireOnce();\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(tryScroll, 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttryScroll();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\twarn : function (msg) {\r\n\t\t\t\t\tif (window.console && window.console.warn) {\r\n\t\t\t\t\t\twindow.console.warn(msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tpreventDefault : function (e) {\r\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tcaptureTarget : function (target) {\r\n\t\t\t\t\t// IE\r\n\t\t\t\t\tif (target.setCapture) {\r\n\t\t\t\t\t\tjsc._capturedTarget = target;\r\n\t\t\t\t\t\tjsc._capturedTarget.setCapture();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\treleaseTarget : function () {\r\n\t\t\t\t\t// IE\r\n\t\t\t\t\tif (jsc._capturedTarget) {\r\n\t\t\t\t\t\tjsc._capturedTarget.releaseCapture();\r\n\t\t\t\t\t\tjsc._capturedTarget = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tfireEvent : function (el, evnt) {\r\n\t\t\t\t\tif (!el) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (document.createEvent) {\r\n\t\t\t\t\t\tvar ev = document.createEvent('HTMLEvents');\r\n\t\t\t\t\t\tev.initEvent(evnt, true, true);\r\n\t\t\t\t\t\tel.dispatchEvent(ev);\r\n\t\t\t\t\t} else if (document.createEventObject) {\r\n\t\t\t\t\t\tvar ev = document.createEventObject();\r\n\t\t\t\t\t\tel.fireEvent('on' + evnt, ev);\r\n\t\t\t\t\t} else if (el['on' + evnt]) { // alternatively use the traditional event model\r\n\t\t\t\t\t\tel['on' + evnt]();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tclassNameToList : function (className) {\r\n\t\t\t\t\treturn className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// The className parameter (str) can only contain a single class name\r\n\t\t\t\thasClass : function (elm, className) {\r\n\t\t\t\t\tif (!className) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\t\t\t\tsetClass : function (elm, className) {\r\n\t\t\t\t\tvar classList = jsc.classNameToList(className);\r\n\t\t\t\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\t\t\t\tif (!jsc.hasClass(elm, classList[i])) {\r\n\t\t\t\t\t\t\telm.className += (elm.className ? ' ' : '') + classList[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\t\t\t\tunsetClass : function (elm, className) {\r\n\t\t\t\t\tvar classList = jsc.classNameToList(className);\r\n\t\t\t\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\t\t\t\tvar repl = new RegExp(\r\n\t\t\t\t\t\t\t\t'^\\\\s*' + classList[i] + '\\\\s*|' +\r\n\t\t\t\t\t\t\t\t'\\\\s*' + classList[i] + '\\\\s*$|' +\r\n\t\t\t\t\t\t\t\t'\\\\s+' + classList[i] + '(\\\\s+)',\r\n\t\t\t\t\t\t\t\t'g'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\telm.className = elm.className.replace(repl, '$1');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetStyle : function (elm) {\r\n\t\t\t\t\treturn window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tsetStyle : (function () {\r\n\t\t\t\t\tvar helper = document.createElement('div');\r\n\t\t\t\t\tvar getSupportedProp = function (names) {\r\n\t\t\t\t\t\tfor (var i = 0; i < names.length; i += 1) {\r\n\t\t\t\t\t\t\tif (names[i] in helper.style) {\r\n\t\t\t\t\t\t\t\treturn names[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar props = {\r\n\t\t\t\t\t\tborderRadius: getSupportedProp(['borderRadius', 'MozBorderRadius', 'webkitBorderRadius']),\r\n\t\t\t\t\t\tboxShadow: getSupportedProp(['boxShadow', 'MozBoxShadow', 'webkitBoxShadow'])\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn function (elm, prop, value) {\r\n\t\t\t\t\t\tswitch (prop.toLowerCase()) {\r\n\t\t\t\t\t\t\tcase 'opacity':\r\n\t\t\t\t\t\t\t\tvar alphaOpacity = Math.round(parseFloat(value) * 100);\r\n\t\t\t\t\t\t\t\telm.style.opacity = value;\r\n\t\t\t\t\t\t\t\telm.style.filter = 'alpha(opacity=' + alphaOpacity + ')';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\telm.style[props[prop]] = value;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t})(),\r\n\r\n\r\n\t\t\t\tsetBorderRadius : function (elm, value) {\r\n\t\t\t\t\tjsc.setStyle(elm, 'borderRadius', value || '0');\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tsetBoxShadow : function (elm, value) {\r\n\t\t\t\t\tjsc.setStyle(elm, 'boxShadow', value || 'none');\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetElementPos : function (e, relativeToViewport) {\r\n\t\t\t\t\tvar x=0, y=0;\r\n\t\t\t\t\tvar rect = e.getBoundingClientRect();\r\n\t\t\t\t\tx = rect.left;\r\n\t\t\t\t\ty = rect.top;\r\n\t\t\t\t\tif (!relativeToViewport) {\r\n\t\t\t\t\t\tvar viewPos = jsc.getViewPos();\r\n\t\t\t\t\t\tx += viewPos[0];\r\n\t\t\t\t\t\ty += viewPos[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [x, y];\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetElementSize : function (e) {\r\n\t\t\t\t\treturn [e.offsetWidth, e.offsetHeight];\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// get pointer's X/Y coordinates relative to viewport\r\n\t\t\t\tgetAbsPointerPos : function (e) {\r\n\t\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\t\tvar x = 0, y = 0;\r\n\t\t\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t\t\t\t// touch devices\r\n\t\t\t\t\t\tx = e.changedTouches[0].clientX;\r\n\t\t\t\t\t\ty = e.changedTouches[0].clientY;\r\n\t\t\t\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\t\t\t\tx = e.clientX;\r\n\t\t\t\t\t\ty = e.clientY;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn { x: x, y: y };\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// get pointer's X/Y coordinates relative to target element\r\n\t\t\t\tgetRelPointerPos : function (e) {\r\n\t\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tvar targetRect = target.getBoundingClientRect();\r\n\r\n\t\t\t\t\tvar x = 0, y = 0;\r\n\r\n\t\t\t\t\tvar clientX = 0, clientY = 0;\r\n\t\t\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t\t\t\t// touch devices\r\n\t\t\t\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\t\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t\t\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\t\t\t\tclientX = e.clientX;\r\n\t\t\t\t\t\tclientY = e.clientY;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tx = clientX - targetRect.left;\r\n\t\t\t\t\ty = clientY - targetRect.top;\r\n\t\t\t\t\treturn { x: x, y: y };\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetViewPos : function () {\r\n\t\t\t\t\tvar doc = document.documentElement;\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n\t\t\t\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\t\t\t\t\t];\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetViewSize : function () {\r\n\t\t\t\t\tvar doc = document.documentElement;\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\t(window.innerWidth || doc.clientWidth),\r\n\t\t\t\t\t\t(window.innerHeight || doc.clientHeight),\r\n\t\t\t\t\t];\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tredrawPosition : function () {\r\n\r\n\t\t\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\t\t\tvar thisObj = jsc.picker.owner;\r\n\r\n\t\t\t\t\t\tvar tp, vp;\r\n\r\n\t\t\t\t\t\tif (thisObj.fixed) {\r\n\t\t\t\t\t\t\t// Fixed elements are positioned relative to viewport,\r\n\t\t\t\t\t\t\t// therefore we can ignore the scroll offset\r\n\t\t\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\r\n\t\t\t\t\t\t\tvp = [0, 0]; // view pos\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\r\n\t\t\t\t\t\t\tvp = jsc.getViewPos(); // view pos\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\r\n\t\t\t\t\t\tvar vs = jsc.getViewSize(); // view size\r\n\t\t\t\t\t\tvar ps = jsc.getPickerOuterDims(thisObj); // picker size\r\n\t\t\t\t\t\tvar a, b, c;\r\n\t\t\t\t\t\tswitch (thisObj.position.toLowerCase()) {\r\n\t\t\t\t\t\t\tcase 'left': a=1; b=0; c=-1; break;\r\n\t\t\t\t\t\t\tcase 'right':a=1; b=0; c=1; break;\r\n\t\t\t\t\t\t\tcase 'top':  a=0; b=1; c=-1; break;\r\n\t\t\t\t\t\t\tdefault:     a=0; b=1; c=1; break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar l = (ts[b]+ps[b])/2;\r\n\r\n\t\t\t\t\t\t// compute picker position\r\n\t\t\t\t\t\tif (!thisObj.smartPosition) {\r\n\t\t\t\t\t\t\tvar pp = [\r\n\t\t\t\t\t\t\t\ttp[a],\r\n\t\t\t\t\t\t\t\ttp[b]+ts[b]-l+l*c\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar pp = [\r\n\t\t\t\t\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\r\n\t\t\t\t\t\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\r\n\t\t\t\t\t\t\t\t\t\ttp[a],\r\n\t\t\t\t\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\r\n\t\t\t\t\t\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\r\n\t\t\t\t\t\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar x = pp[a];\r\n\t\t\t\t\t\tvar y = pp[b];\r\n\t\t\t\t\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\r\n\t\t\t\t\t\tvar contractShadow =\r\n\t\t\t\t\t\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\r\n\t\t\t\t\t\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\r\n\r\n\t\t\t\t\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t_drawPosition : function (thisObj, x, y, positionValue, contractShadow) {\r\n\t\t\t\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\r\n\r\n\t\t\t\t\tjsc.picker.wrap.style.position = positionValue;\r\n\t\t\t\t\tjsc.picker.wrap.style.left = x + 'px';\r\n\t\t\t\t\tjsc.picker.wrap.style.top = y + 'px';\r\n\r\n\t\t\t\t\tjsc.setBoxShadow(\r\n\t\t\t\t\t\t\tjsc.picker.boxS,\r\n\t\t\t\t\t\t\tthisObj.shadow ?\r\n\t\t\t\t\t\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\r\n\t\t\t\t\t\t\t\t\tnull);\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetPickerDims : function (thisObj) {\r\n\t\t\t\t\tvar displaySlider = !!jsc.getSliderComponent(thisObj);\r\n\t\t\t\t\tvar extraSldWidth = 2 * thisObj.insetWidth + jsc.getPadToSliderPadding(thisObj) + thisObj.sliderSize;\r\n\t\t\t\t\tvar dims = [\r\n\t\t\t\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.width +\r\n\t\t\t\t\t\t(displaySlider ? extraSldWidth : 0),\r\n\t\t\t\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.height +\r\n\t\t\t\t\t\t(thisObj.closable ? 2 * thisObj.insetWidth + thisObj.padding + thisObj.buttonHeight : 0)\r\n\t\t\t\t\t];\r\n\t\t\t\t\tif (thisObj.alphaEnabled) {\r\n\t\t\t\t\t\tdims[0] += extraSldWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn dims;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetPickerOuterDims : function (thisObj) {\r\n\t\t\t\t\tvar dims = jsc.getPickerDims(thisObj);\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tdims[0] + 2 * thisObj.borderWidth,\r\n\t\t\t\t\t\tdims[1] + 2 * thisObj.borderWidth\r\n\t\t\t\t\t];\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetPadToSliderPadding : function (thisObj) {\r\n\t\t\t\t\treturn Math.max(thisObj.padding, 1.5 * (2 * thisObj.pointerBorderWidth + thisObj.pointerThickness));\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetPadYComponent : function (thisObj) {\r\n\t\t\t\t\tswitch (thisObj.mode.charAt(1).toLowerCase()) {\r\n\t\t\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 's';\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tgetSliderComponent : function (thisObj) {\r\n\t\t\t\t\tif (thisObj.mode.length > 2) {\r\n\t\t\t\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase()) {\r\n\t\t\t\t\t\t\tcase 's': return 's'; break;\r\n\t\t\t\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tonDocumentMouseDown : function (e) {\r\n\t\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\t\t\t\tif (target._jscLinkedInstance) {\r\n\t\t\t\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (target._jscControlName) {\r\n\t\t\t\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'mouse');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Mouse is outside the picker controls -> hide the color picker!\r\n\t\t\t\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tonDocumentTouchStart : function (e) {\r\n\t\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\t\t\t\tif (target._jscLinkedInstance) {\r\n\t\t\t\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (target._jscControlName) {\r\n\t\t\t\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'touch');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tonWindowResize : function (e) {\r\n\t\t\t\t\tjsc.redrawPosition();\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tonParentScroll : function (e) {\r\n\t\t\t\t\t// hide the picker when one of the parent elements is scrolled\r\n\t\t\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t_pointerMoveEvent : {\r\n\t\t\t\t\tmouse: 'mousemove',\r\n\t\t\t\t\ttouch: 'touchmove'\r\n\t\t\t\t},\r\n\t\t\t\t_pointerEndEvent : {\r\n\t\t\t\t\tmouse: 'mouseup',\r\n\t\t\t\t\ttouch: 'touchend'\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t_pointerOrigin : null,\r\n\t\t\t\t_capturedTarget : null,\r\n\r\n\r\n\t\t\t\tonControlPointerStart : function (e, target, controlName, pointerType) {\r\n\t\t\t\t\tvar thisObj = target._jscInstance;\r\n\r\n\t\t\t\t\tjsc.preventDefault(e);\r\n\t\t\t\t\tjsc.captureTarget(target);\r\n\r\n\t\t\t\t\tvar registerDragEvents = function (doc, offset) {\r\n\t\t\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\r\n\t\t\t\t\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\r\n\t\t\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\r\n\t\t\t\t\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tregisterDragEvents(document, [0, 0]);\r\n\r\n\t\t\t\t\tif (window.parent && window.frameElement) {\r\n\t\t\t\t\t\tvar rect = window.frameElement.getBoundingClientRect();\r\n\t\t\t\t\t\tvar ofs = [-rect.left, -rect.top];\r\n\t\t\t\t\t\tregisterDragEvents(window.parent.window.document, ofs);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar abs = jsc.getAbsPointerPos(e);\r\n\t\t\t\t\tvar rel = jsc.getRelPointerPos(e);\r\n\t\t\t\t\tjsc._pointerOrigin = {\r\n\t\t\t\t\t\tx: abs.x - rel.x,\r\n\t\t\t\t\t\ty: abs.y - rel.y\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tswitch (controlName) {\r\n\t\t\t\t\t\tcase 'pad':\r\n\t\t\t\t\t\t\t// if the slider is at the bottom, move it up\r\n\t\t\t\t\t\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\t\t\t\t\t\t\tcase 's': if (thisObj.hsv[1] === 0) { thisObj.fromHSV(null, 100, null, null, jsc.pad); }; break;\r\n\t\t\t\t\t\t\t\tcase 'v': if (thisObj.hsv[2] === 0) { thisObj.fromHSV(null, null, 100, null, jsc.pad); }; break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tjsc.setPad(thisObj, e, 0, 0);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'sld':\r\n\t\t\t\t\t\t\tjsc.setSld(thisObj, e, 0);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'sldAlpha':\r\n\t\t\t\t\t\t\tjsc.setSldAlpha(thisObj, e, 0);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tonDocumentPointerMove : function (e, target, controlName, pointerType, offset) {\r\n\t\t\t\t\treturn function (e) {\r\n\t\t\t\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\t\t\t\tswitch (controlName) {\r\n\t\t\t\t\t\t\tcase 'pad':\r\n\t\t\t\t\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\t\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\r\n\t\t\t\t\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'sld':\r\n\t\t\t\t\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\t\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\r\n\t\t\t\t\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'sldAlpha':\r\n\t\t\t\t\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\t\t\t\t\tjsc.setSldAlpha(thisObj, e, offset[1]);\r\n\t\t\t\t\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tonDocumentPointerEnd : function (e, target, controlName, pointerType) {\r\n\t\t\t\t\treturn function (e) {\r\n\t\t\t\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\t\t\t\tjsc.detachGroupEvents('drag');\r\n\t\t\t\t\t\tjsc.releaseTarget();\r\n\t\t\t\t\t\t// Always dispatch changes after detaching outstanding mouse handlers,\r\n\t\t\t\t\t\t// in case some user interaction will occur in user's onchange callback\r\n\t\t\t\t\t\t// that would intrude with current mouse events\r\n\t\t\t\t\t\tjsc.dispatchChange(thisObj);\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tdispatchChange : function (thisObj) {\r\n\t\t\t\t\tif (thisObj.valueElement) {\r\n\t\t\t\t\t\tif (jsc.isElementType(thisObj.valueElement, 'input')) {\r\n\t\t\t\t\t\t\tjsc.fireEvent(thisObj.valueElement, 'change');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tdispatchFineChange : function (thisObj) {\r\n\t\t\t\t\tvar callback;\r\n\t\t\t\t\tif (typeof thisObj.onFineChange === 'string') {\r\n\t\t\t\t\t\tcallback = new Function (thisObj.onFineChange);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback = thisObj.onFineChange || thisObj.valueElement.onFineChange;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (callback != null) {\r\n\t\t\t\t\t\tcallback.call(thisObj, thisObj.toString(), thisObj.valueElement);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tsetPad : function (thisObj, e, ofsX, ofsY) {\r\n\t\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\t\t\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.insetWidth;\r\n\t\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\t\t\t\tvar xVal = x * (360 / (thisObj.width - 1));\r\n\t\t\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\t\t\t\tswitch (jsc.getPadYComponent(thisObj)) {\r\n\t\t\t\t\t\tcase 's': thisObj.fromHSV(xVal, yVal, null, null, jsc.pad); break;\r\n\t\t\t\t\t\tcase 'v': thisObj.fromHSV(xVal, null, yVal, null, jsc.pad); break;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tsetSld : function (thisObj, e, ofsY) {\r\n\t\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\t\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\t\t\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\t\t\t\t\tcase 's': thisObj.fromHSV(null, yVal, null, null, jsc.sld); break;\r\n\t\t\t\t\t\tcase 'v': thisObj.fromHSV(null, null, yVal, null, jsc.sld); break;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tsetSldAlpha : function (thisObj, e, ofsY) {\r\n\t\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\t\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\t\t\t\t\tif (thisObj.alphaEnabled) {\r\n\t\t\t\t\t\tthisObj.fromHSV(null, null, null, yVal/100, jsc.alpha)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t_vmlNS : 'jsc_vml_',\r\n\t\t\t\t_vmlCSS : 'jsc_vml_css_',\r\n\t\t\t\t_vmlReady : false,\r\n\r\n\r\n\t\t\t\tinitVML : function () {\r\n\t\t\t\t\tif (!jsc._vmlReady) {\r\n\t\t\t\t\t\t// init VML namespace\r\n\t\t\t\t\t\tvar doc = document;\r\n\t\t\t\t\t\tif (!doc.namespaces[jsc._vmlNS]) {\r\n\t\t\t\t\t\t\tdoc.namespaces.add(jsc._vmlNS, 'urn:schemas-microsoft-com:vml');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!doc.styleSheets[jsc._vmlCSS]) {\r\n\t\t\t\t\t\t\tvar tags = ['shape', 'shapetype', 'group', 'background', 'path', 'formulas', 'handles', 'fill', 'stroke', 'shadow', 'textbox', 'textpath', 'imagedata', 'line', 'polyline', 'curve', 'rect', 'roundrect', 'oval', 'arc', 'image'];\r\n\t\t\t\t\t\t\tvar ss = doc.createStyleSheet();\r\n\t\t\t\t\t\t\tss.owningElement.id = jsc._vmlCSS;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < tags.length; i += 1) {\r\n\t\t\t\t\t\t\t\tss.addRule(jsc._vmlNS + '\\\\:' + tags[i], 'behavior:url(#default#VML);');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tjsc._vmlReady = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tcreatePalette : function () {\r\n\r\n\t\t\t\t\tvar paletteObj = {\r\n\t\t\t\t\t\telm: null,\r\n\t\t\t\t\t\tdraw: null\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\t\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\r\n\t\t\t\t\t\t\thGrad.addColorStop(0 / 6, '#F00');\r\n\t\t\t\t\t\t\thGrad.addColorStop(1 / 6, '#FF0');\r\n\t\t\t\t\t\t\thGrad.addColorStop(2 / 6, '#0F0');\r\n\t\t\t\t\t\t\thGrad.addColorStop(3 / 6, '#0FF');\r\n\t\t\t\t\t\t\thGrad.addColorStop(4 / 6, '#00F');\r\n\t\t\t\t\t\t\thGrad.addColorStop(5 / 6, '#F0F');\r\n\t\t\t\t\t\t\thGrad.addColorStop(6 / 6, '#F00');\r\n\r\n\t\t\t\t\t\t\tctx.fillStyle = hGrad;\r\n\t\t\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\t\t\t\t\tcase 's':\r\n\t\t\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\r\n\t\t\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'v':\r\n\t\t\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\t\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tctx.fillStyle = vGrad;\r\n\t\t\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tpaletteObj.elm = canvas;\r\n\t\t\t\t\t\tpaletteObj.draw = drawFunc;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\t\t\t\tjsc.initVML();\r\n\r\n\t\t\t\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\t\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\t\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\t\t\t\tvar hGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\t\t\t\thGrad.type = 'gradient';\r\n\t\t\t\t\t\thGrad.method = 'linear';\r\n\t\t\t\t\t\thGrad.angle = '90';\r\n\t\t\t\t\t\thGrad.colors = '16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0'\r\n\r\n\t\t\t\t\t\tvar hRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\t\t\t\thRect.style.position = 'absolute';\r\n\t\t\t\t\t\thRect.style.left = -1 + 'px';\r\n\t\t\t\t\t\thRect.style.top = -1 + 'px';\r\n\t\t\t\t\t\thRect.stroked = false;\r\n\t\t\t\t\t\thRect.appendChild(hGrad);\r\n\t\t\t\t\t\tvmlContainer.appendChild(hRect);\r\n\r\n\t\t\t\t\t\tvar vGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\t\t\t\tvGrad.type = 'gradient';\r\n\t\t\t\t\t\tvGrad.method = 'linear';\r\n\t\t\t\t\t\tvGrad.angle = '180';\r\n\t\t\t\t\t\tvGrad.opacity = '0';\r\n\r\n\t\t\t\t\t\tvar vRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\t\t\t\tvRect.style.position = 'absolute';\r\n\t\t\t\t\t\tvRect.style.left = -1 + 'px';\r\n\t\t\t\t\t\tvRect.style.top = -1 + 'px';\r\n\t\t\t\t\t\tvRect.stroked = false;\r\n\t\t\t\t\t\tvRect.appendChild(vGrad);\r\n\t\t\t\t\t\tvmlContainer.appendChild(vRect);\r\n\r\n\t\t\t\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\t\t\t\thRect.style.width =\r\n\t\t\t\t\t\t\t\t\tvRect.style.width =\r\n\t\t\t\t\t\t\t\t\t\t\t(width + 1) + 'px';\r\n\t\t\t\t\t\t\thRect.style.height =\r\n\t\t\t\t\t\t\t\t\tvRect.style.height =\r\n\t\t\t\t\t\t\t\t\t\t\t(height + 1) + 'px';\r\n\r\n\t\t\t\t\t\t\t// Colors must be specified during every redraw, otherwise IE won't display\r\n\t\t\t\t\t\t\t// a full gradient during a subsequential redraw\r\n\t\t\t\t\t\t\thGrad.color = '#F00';\r\n\t\t\t\t\t\t\thGrad.color2 = '#F00';\r\n\r\n\t\t\t\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\t\t\t\t\tcase 's':\r\n\t\t\t\t\t\t\t\t\tvGrad.color = vGrad.color2 = '#FFF';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'v':\r\n\t\t\t\t\t\t\t\t\tvGrad.color = vGrad.color2 = '#000';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tpaletteObj.elm = vmlContainer;\r\n\t\t\t\t\t\tpaletteObj.draw = drawFunc;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn paletteObj;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tcreateSliderGradient : function () {\r\n\r\n\t\t\t\t\tvar sliderObj = {\r\n\t\t\t\t\t\telm: null,\r\n\t\t\t\t\t\tdraw: null\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\t\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\t\t\t\tgrad.addColorStop(0, color1);\r\n\t\t\t\t\t\t\tgrad.addColorStop(1, color2);\r\n\r\n\t\t\t\t\t\t\tctx.fillStyle = grad;\r\n\t\t\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tsliderObj.elm = canvas;\r\n\t\t\t\t\t\tsliderObj.draw = drawFunc;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\t\t\t\tjsc.initVML();\r\n\r\n\t\t\t\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\t\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\t\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\t\t\t\tvar grad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\t\t\t\tgrad.type = 'gradient';\r\n\t\t\t\t\t\tgrad.method = 'linear';\r\n\t\t\t\t\t\tgrad.angle = '180';\r\n\r\n\t\t\t\t\t\tvar rect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\t\t\t\trect.style.position = 'absolute';\r\n\t\t\t\t\t\trect.style.left = -1 + 'px';\r\n\t\t\t\t\t\trect.style.top = -1 + 'px';\r\n\t\t\t\t\t\trect.stroked = false;\r\n\t\t\t\t\t\trect.appendChild(grad);\r\n\t\t\t\t\t\tvmlContainer.appendChild(rect);\r\n\r\n\t\t\t\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\t\t\t\trect.style.width = (width + 1) + 'px';\r\n\t\t\t\t\t\t\trect.style.height = (height + 1) + 'px';\r\n\r\n\t\t\t\t\t\t\tgrad.color = color1;\r\n\t\t\t\t\t\t\tgrad.color2 = color2;\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tsliderObj.elm = vmlContainer;\r\n\t\t\t\t\t\tsliderObj.draw = drawFunc;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn sliderObj;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcreateSliderAlphaGradient : function () {\r\n\t\t\t\t\tvar sliderObj = {\r\n\t\t\t\t\t\telm: null,\r\n\t\t\t\t\t\tdraw: null\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t\t\t\t// Canvas implementation for modern browsers\r\n\t\t\t\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\t\t\tvar drawFunc = function (width, height, rgbArr) {\r\n\t\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\t\t\t\tgrad.addColorStop(0, 'rgba(' + ~~rgbArr[0] + ',' + ~~rgbArr[1] + ',' + ~~rgbArr[2] + ',' + 1 + ')');\r\n\t\t\t\t\t\t\tgrad.addColorStop(1, 'rgba(' + ~~rgbArr[0] + ',' + ~~rgbArr[1] + ',' + ~~rgbArr[2] + ',' + 0 + ')');\r\n\r\n\t\t\t\t\t\t\tctx.fillStyle = grad;\r\n\t\t\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tsliderObj.elm = canvas;\r\n\t\t\t\t\t\tsliderObj.draw = drawFunc;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn sliderObj;\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tleaveValue : 1<<0,\t//style only\r\n\t\t\t\tleaveStyle : 1<<1,\t//value only\r\n\t\t\t\tpad : 1<<2,\r\n\t\t\t\tsld : 1<<3,\r\n\t\t\t\talpha : 1<<4,\r\n\r\n\r\n\t\t\t\tBoxShadow : (function () {\r\n\t\t\t\t\tvar BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\r\n\t\t\t\t\t\tthis.hShadow = hShadow;\r\n\t\t\t\t\t\tthis.vShadow = vShadow;\r\n\t\t\t\t\t\tthis.blur = blur;\r\n\t\t\t\t\t\tthis.spread = spread;\r\n\t\t\t\t\t\tthis.color = color;\r\n\t\t\t\t\t\tthis.inset = !!inset;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tBoxShadow.prototype.toString = function () {\r\n\t\t\t\t\t\tvar vals = [\r\n\t\t\t\t\t\t\tMath.round(this.hShadow) + 'px',\r\n\t\t\t\t\t\t\tMath.round(this.vShadow) + 'px',\r\n\t\t\t\t\t\t\tMath.round(this.blur) + 'px',\r\n\t\t\t\t\t\t\tMath.round(this.spread) + 'px',\r\n\t\t\t\t\t\t\tthis.color\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tif (this.inset) {\r\n\t\t\t\t\t\t\tvals.push('inset');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn vals.join(' ');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn BoxShadow;\r\n\t\t\t\t})(),\r\n\r\n\r\n\t\t\t\t//\r\n\t\t\t\t// Usage:\r\n\t\t\t\t// var myColor = new jscolor(<targetElement> [, <options>])\r\n\t\t\t\t//\r\n\r\n\t\t\t\tjscolor : function (targetElement, options) {\r\n\r\n\t\t\t\t\t// General options\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.value = null; // initial HEX color. To change it later, use methods fromString(), fromHSV() and fromRGB()\r\n\t\t\t\t\tthis.valueElement = targetElement; // element that will be used to display and input the color code\r\n\t\t\t\t\tthis.styleElement = targetElement; // element that will preview the picked color using CSS backgroundColor\r\n\t\t\t\t\tthis.required = true; // whether the associated text <input> can be left empty\r\n\t\t\t\t\tthis.refine = true; // whether to refine the entered color code (e.g. uppercase it and remove whitespace)\r\n\t\t\t\t\tthis.hash = false; // whether to prefix the HEX color code with # symbol\r\n\t\t\t\t\tthis.uppercase = true; // whether to show the color code in upper case\r\n\t\t\t\t\tthis.onFineChange = null; // called instantly every time the color changes (value can be either a function or a string with javascript code)\r\n\t\t\t\t\tthis.activeClass = 'jscolor-active'; // class to be set to the target element when a picker window is open on it\r\n\t\t\t\t\tthis.overwriteImportant = false; // whether to overwrite colors of styleElement using !important\r\n\t\t\t\t\tthis.minS = 0; // min allowed saturation (0 - 100)\r\n\t\t\t\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\r\n\t\t\t\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\r\n\t\t\t\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\r\n\r\n\t\t\t\t\t// Accessing the picked color\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.hsv = [0, 0, 100]; // read-only  [0-360, 0-100, 0-100]\r\n\t\t\t\t\tthis.rgb = [255, 255, 255, 1]; // read-only  [0-255, 0-255, 0-255, 0-1]\r\n\r\n\t\t\t\t\t// Color Picker options\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.width = 181; // width of color palette (in px)\r\n\t\t\t\t\tthis.height = 101; // height of color palette (in px)\r\n\t\t\t\t\tthis.showOnClick = true; // whether to display the color picker when user clicks on its target element\r\n\t\t\t\t\tthis.mode = 'HSV'; // HSV | HVS | HS | HV - layout of the color picker controls\r\n\t\t\t\t\tthis.alphaEnabled = false;\r\n\t\t\t\t\tthis.displaySupportAlpha = true;\t//for example, canvas support alpha for 'fillStyle, strokeStyle' properties\r\n\t\t\t\t\tthis.position = 'bottom'; // left | right | top | bottom - position relative to the target element\r\n\t\t\t\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\r\n\t\t\t\t\tthis.sliderSize = 16; // px\r\n\t\t\t\t\tthis.crossSize = 8; // px\r\n\t\t\t\t\tthis.closable = false; // whether to display the Close button\r\n\t\t\t\t\tthis.closeText = 'Close';\r\n\t\t\t\t\tthis.buttonColor = '#000000'; // CSS color\r\n\t\t\t\t\tthis.buttonHeight = 18; // px\r\n\t\t\t\t\tthis.padding = 12; // px\r\n\t\t\t\t\tthis.backgroundColor = '#FFFFFF'; // CSS color\r\n\t\t\t\t\tthis.borderWidth = 1; // px\r\n\t\t\t\t\tthis.borderColor = '#BBBBBB'; // CSS color\r\n\t\t\t\t\tthis.borderRadius = 8; // px\r\n\t\t\t\t\tthis.insetWidth = 1; // px\r\n\t\t\t\t\tthis.insetColor = '#BBBBBB'; // CSS color\r\n\t\t\t\t\tthis.shadow = true; // whether to display shadow\r\n\t\t\t\t\tthis.shadowBlur = 15; // px\r\n\t\t\t\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\r\n\t\t\t\t\tthis.pointerColor = '#4C4C4C'; // px\r\n\t\t\t\t\tthis.pointerBorderColor = '#FFFFFF'; // px\r\n\t\t\t\t\tthis.pointerBorderWidth = 1; // px\r\n\t\t\t\t\tthis.pointerThickness = 2; // px\r\n\t\t\t\t\tthis.zIndex = 1000;\r\n\t\t\t\t\tthis.container = null; // where to append the color picker (BODY element by default)\r\n\r\n\r\n\t\t\t\t\tfor (var opt in options) {\r\n\t\t\t\t\t\tif (options.hasOwnProperty(opt)) {\r\n\t\t\t\t\t\t\tthis[opt] = options[opt];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tthis.hide = function () {\r\n\t\t\t\t\t\tif (isPickerOwner()) {\r\n\t\t\t\t\t\t\tdetachPicker();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.show = function () {\r\n\t\t\t\t\t\tdrawPicker();\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.redraw = function () {\r\n\t\t\t\t\t\tif (isPickerOwner()) {\r\n\t\t\t\t\t\t\tdrawPicker();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.importColor = function () {\r\n\t\t\t\t\t\tif (!this.valueElement) {\r\n\t\t\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\t\t\t\tif (!this.refine) {\r\n\t\t\t\t\t\t\t\t\tif (!this.fromString(this.valueElement.value, jsc.leaveValue)) {\r\n\t\t\t\t\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (!this.required && /^\\s*$/.test(this.valueElement.value)) {\r\n\t\t\t\t\t\t\t\t\tthis.valueElement.value = '';\r\n\t\t\t\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\r\n\t\t\t\t\t\t\t\t} else if (this.fromString(this.valueElement.value)) {\r\n\t\t\t\t\t\t\t\t\t// managed to import color successfully from the value -> OK, don't do anything\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// not an input element -> doesn't have any value\r\n\t\t\t\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.exportColor = function (flags) {\r\n\t\t\t\t\t\tif (!(flags & jsc.leaveValue) && this.valueElement) {\r\n\t\t\t\t\t\t\tvar value = this.toString();\r\n\t\t\t\t\t\t\tif (this.uppercase) { value = value.toUpperCase(); }\r\n\t\t\t\t\t\t\tif (this.hash) { value = '#' + value; }\r\n\r\n\t\t\t\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\t\t\t\tthis.valueElement.value = value;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.valueElement.innerHTML = value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!(flags & jsc.leaveStyle)) {\r\n\t\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\t\tvar bgColor = '#' + this.toString().substring(0,6);\r\n\t\t\t\t\t\t\t\tif (this.displaySupportAlpha && this.alphaEnabled) {\r\n\t\t\t\t\t\t\t\t\tbgColor = '#' + this.toString(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar fgColor = this.isLight() ? '#000' : '#FFF';\r\n\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = 'none';\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = bgColor;\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.color = fgColor;\r\n\r\n\t\t\t\t\t\t\t\tif (this.overwriteImportant) {\r\n\t\t\t\t\t\t\t\t\tthis.styleElement.setAttribute('style',\r\n\t\t\t\t\t\t\t\t\t\t\t'background: ' + bgColor + ' !important; ' +\r\n\t\t\t\t\t\t\t\t\t\t\t'color: ' + fgColor + ' !important;'\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((flags & jsc.pad) && isPickerOwner()) {\r\n\t\t\t\t\t\t\tredrawPad();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((flags & jsc.sld) && isPickerOwner()) {\r\n\t\t\t\t\t\t\tredrawSld();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((flags & jsc.alpha) && isPickerOwner()) {\r\n\t\t\t\t\t\t\tredrawSldAlpha();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t// h: 0-360\r\n\t\t\t\t\t// s: 0-100\r\n\t\t\t\t\t// v: 0-100\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.fromHSV = function (h, s, v, a, flags) { // null = don't change\r\n\t\t\t\t\t\tif (h !== null) {\r\n\t\t\t\t\t\t\tif (isNaN(h)) { return false; }\r\n\t\t\t\t\t\t\th = Math.max(0, Math.min(360, h));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (s !== null) {\r\n\t\t\t\t\t\t\tif (isNaN(s)) { return false; }\r\n\t\t\t\t\t\t\ts = Math.max(0, Math.min(100, this.maxS, s), this.minS);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (v !== null) {\r\n\t\t\t\t\t\t\tif (isNaN(v)) { return false; }\r\n\t\t\t\t\t\t\tv = Math.max(0, Math.min(100, this.maxV, v), this.minV);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar newRgb = HSV_RGB(\r\n\t\t\t\t\t\t\t\th===null ? this.hsv[0] : (this.hsv[0]=h),\r\n\t\t\t\t\t\t\t\ts===null ? this.hsv[1] : (this.hsv[1]=s),\r\n\t\t\t\t\t\t\t\tv===null ? this.hsv[2] : (this.hsv[2]=v)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.rgb[0] = newRgb[0], this.rgb[1] = newRgb[1], this.rgb[2] = newRgb[2];\r\n\t\t\t\t\t\tif (a) {\r\n\t\t\t\t\t\t\tvar alpha = Math.max(0, Math.min(1, a));\r\n\t\t\t\t\t\t\tthis.rgb[3] = alpha;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.exportColor(flags);\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t// r: 0-255\r\n\t\t\t\t\t// g: 0-255\r\n\t\t\t\t\t// b: 0-255\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.fromRGB = function (r, g, b, flags) { // null = don't change\r\n\t\t\t\t\t\tif (r !== null) {\r\n\t\t\t\t\t\t\tif (isNaN(r)) { return false; }\r\n\t\t\t\t\t\t\tr = Math.max(0, Math.min(255, r));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (g !== null) {\r\n\t\t\t\t\t\t\tif (isNaN(g)) { return false; }\r\n\t\t\t\t\t\t\tg = Math.max(0, Math.min(255, g));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (b !== null) {\r\n\t\t\t\t\t\t\tif (isNaN(b)) { return false; }\r\n\t\t\t\t\t\t\tb = Math.max(0, Math.min(255, b));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar hsv = RGB_HSV(\r\n\t\t\t\t\t\t\t\tr===null ? this.rgb[0] : r,\r\n\t\t\t\t\t\t\t\tg===null ? this.rgb[1] : g,\r\n\t\t\t\t\t\t\t\tb===null ? this.rgb[2] : b\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (hsv[0] !== null) {\r\n\t\t\t\t\t\t\tthis.hsv[0] = Math.max(0, Math.min(360, hsv[0]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (hsv[2] !== 0) {\r\n\t\t\t\t\t\t\tthis.hsv[1] = hsv[1]===null ? null : Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.hsv[2] = hsv[2]===null ? null : Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\r\n\r\n\t\t\t\t\t\t// update RGB according to final HSV, as some values might be trimmed\r\n\t\t\t\t\t\tvar rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\r\n\t\t\t\t\t\tthis.rgb[0] = rgb[0];\r\n\t\t\t\t\t\tthis.rgb[1] = rgb[1];\r\n\t\t\t\t\t\tthis.rgb[2] = rgb[2];\r\n\r\n\t\t\t\t\t\tthis.exportColor(flags);\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.fromString = function (inputStr, flags) {\r\n\t\t\t\t\t\tvar str = inputStr, alphaPart;\r\n\t\t\t\t\t\tif (inputStr.length > 6 && inputStr.indexOf(\"rgb\") < 0) {\r\n\t\t\t\t\t\t\tstr = inputStr.substring(0, 6);\r\n\t\t\t\t\t\t\talphaPart = inputStr.substr(6);\r\n\t\t\t\t\t\t\talphaPart = alphaPart.substr(alphaPart.lastIndexOf(\" \") + 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (alphaPart && alphaPart.match(/^\\d+(\\.\\d+)?$/)) {\r\n\t\t\t\t\t\t\tthis.rgb[3] = parseFloat(alphaPart);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar m;\r\n\t\t\t\t\t\tif (m = str.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i)) {\r\n\t\t\t\t\t\t\t// HEX notation\r\n\t\t\t\t\t\t\t//\r\n\r\n\t\t\t\t\t\t\tif (m[1].length === 6) {\r\n\t\t\t\t\t\t\t\t// 6-char notation\r\n\t\t\t\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\t\t\t\t\tparseInt(m[1].substr(0,2),16),\r\n\t\t\t\t\t\t\t\t\t\tparseInt(m[1].substr(2,2),16),\r\n\t\t\t\t\t\t\t\t\t\tparseInt(m[1].substr(4,2),16),\r\n\t\t\t\t\t\t\t\t\t\tflags\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 3-char notation\r\n\t\t\t\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0),16),\r\n\t\t\t\t\t\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1),16),\r\n\t\t\t\t\t\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2),16),\r\n\t\t\t\t\t\t\t\t\t\tflags\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t} else if (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\r\n\t\t\t\t\t\t\tvar params = m[1].split(',');\r\n\t\t\t\t\t\t\tvar re = /^\\s*(\\d*)(\\.\\d+)?\\s*$/;\r\n\t\t\t\t\t\t\tvar mR, mG, mB;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tparams.length >= 3 &&\r\n\t\t\t\t\t\t\t\t\t(mR = params[0].match(re)) &&\r\n\t\t\t\t\t\t\t\t\t(mG = params[1].match(re)) &&\r\n\t\t\t\t\t\t\t\t\t(mB = params[2].match(re))\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tvar r = parseFloat((mR[1] || '0') + (mR[2] || ''));\r\n\t\t\t\t\t\t\t\tvar g = parseFloat((mG[1] || '0') + (mG[2] || ''));\r\n\t\t\t\t\t\t\t\tvar b = parseFloat((mB[1] || '0') + (mB[2] || ''));\r\n\t\t\t\t\t\t\t\tthis.fromRGB(r, g, b, flags);\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.toString = function (noDecimal) {\r\n\t\t\t\t\t\tvar ret = (0x100 | Math.round(this.rgb[0])).toString(16).substr(1) +\r\n\t\t\t\t\t\t\t\t(0x100 | Math.round(this.rgb[1])).toString(16).substr(1) +\r\n\t\t\t\t\t\t\t\t(0x100 | Math.round(this.rgb[2])).toString(16).substr(1);\r\n\t\t\t\t\t\tif (this.alphaEnabled) {\r\n\t\t\t\t\t\t\t// var alpha256 = this.rgb[3] * 255;\r\n\t\t\t\t\t\t\t// ret += (0x100 | Math.round(alpha256)).toString(16).substr(1);\r\n\t\t\t\t\t\t\tif (noDecimal) {\r\n\t\t\t\t\t\t\t\tvar alpha256 = this.rgb[3] * 255;\r\n\t\t\t\t\t\t\t\tret += (0x100 | Math.round(alpha256)).toString(16).substr(1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tret += \" \" + this.rgb[3].toFixed(2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.toHEXString = function () {\r\n\t\t\t\t\t\treturn '#' + this.toString().toUpperCase();\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.toRGBString = function () {\r\n\t\t\t\t\t\treturn ('rgb(' +\r\n\t\t\t\t\t\t\t\tMath.round(this.rgb[0]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(this.rgb[1]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(this.rgb[2]) + ')'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis.isLight = function () {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t0.213 * this.rgb[0] +\r\n\t\t\t\t\t\t\t\t0.715 * this.rgb[1] +\r\n\t\t\t\t\t\t\t\t0.072 * this.rgb[2] >\r\n\t\t\t\t\t\t\t\t255 / 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\tthis._processParentElementsInDOM = function () {\r\n\t\t\t\t\t\tif (this._linkedElementsProcessed) { return; }\r\n\t\t\t\t\t\tthis._linkedElementsProcessed = true;\r\n\r\n\t\t\t\t\t\tvar elm = this.targetElement;\r\n\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\t// If the target element or one of its parent nodes has fixed position,\r\n\t\t\t\t\t\t\t// then use fixed positioning instead\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t\t\t\t\t// that's why we need to check if the returned style object is non-empty\r\n\t\t\t\t\t\t\tvar currStyle = jsc.getStyle(elm);\r\n\t\t\t\t\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\t\t\t\t\tthis.fixed = true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\r\n\t\t\t\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\r\n\t\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\r\n\t\t\t\t\t\t\t\t// that's why we loop through all parent nodes\r\n\t\t\t\t\t\t\t\tif (!elm._jscEventsAttached) {\r\n\t\t\t\t\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n\t\t\t\t\t\t\t\t\telm._jscEventsAttached = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} while ((elm = elm.parentNode) && !jsc.isElementType(elm, 'body'));\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t// r: 0-255\r\n\t\t\t\t\t// g: 0-255\r\n\t\t\t\t\t// b: 0-255\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// returns: [ 0-360, 0-100, 0-100 ]\r\n\t\t\t\t\t//\r\n\t\t\t\t\tfunction RGB_HSV (r, g, b) {\r\n\t\t\t\t\t\tr /= 255;\r\n\t\t\t\t\t\tg /= 255;\r\n\t\t\t\t\t\tb /= 255;\r\n\t\t\t\t\t\tvar n = Math.min(Math.min(r,g),b);\r\n\t\t\t\t\t\tvar v = Math.max(Math.max(r,g),b);\r\n\t\t\t\t\t\tvar m = v - n;\r\n\t\t\t\t\t\tif (m === 0) { return [ null, 0, 100 * v ]; }\r\n\t\t\t\t\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\r\n\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\t60 * (h===6?0:h),\r\n\t\t\t\t\t\t\t100 * (m/v),\r\n\t\t\t\t\t\t\t100 * v\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t// h: 0-360\r\n\t\t\t\t\t// s: 0-100\r\n\t\t\t\t\t// v: 0-100\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// returns: [ 0-255, 0-255, 0-255 ]\r\n\t\t\t\t\t//\r\n\t\t\t\t\tfunction HSV_RGB (h, s, v) {\r\n\t\t\t\t\t\tvar u = 255 * (v / 100);\r\n\r\n\t\t\t\t\t\tif (h === null) {\r\n\t\t\t\t\t\t\treturn [ u, u, u ];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\th /= 60;\r\n\t\t\t\t\t\ts /= 100;\r\n\r\n\t\t\t\t\t\tvar i = Math.floor(h);\r\n\t\t\t\t\t\tvar f = i%2 ? h-i : 1-(h-i);\r\n\t\t\t\t\t\tvar m = u * (1 - s);\r\n\t\t\t\t\t\tvar n = u * (1 - s * f);\r\n\t\t\t\t\t\tswitch (i) {\r\n\t\t\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\t\tcase 0: return [u,n,m];\r\n\t\t\t\t\t\t\tcase 1: return [n,u,m];\r\n\t\t\t\t\t\t\tcase 2: return [m,u,n];\r\n\t\t\t\t\t\t\tcase 3: return [m,n,u];\r\n\t\t\t\t\t\t\tcase 4: return [n,m,u];\r\n\t\t\t\t\t\t\tcase 5: return [u,m,n];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfunction detachPicker () {\r\n\t\t\t\t\t\tjsc.unsetClass(THIS.targetElement, THIS.activeClass);\r\n\t\t\t\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\r\n\t\t\t\t\t\tdelete jsc.picker.owner;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfunction drawPicker () {\r\n\r\n\t\t\t\t\t\t// At this point, when drawing the picker, we know what the parent elements are\r\n\t\t\t\t\t\t// and we can do all related DOM operations, such as registering events on them\r\n\t\t\t\t\t\t// or checking their positioning\r\n\t\t\t\t\t\tTHIS._processParentElementsInDOM();\r\n\r\n\t\t\t\t\t\tif (!jsc.picker) {\r\n\t\t\t\t\t\t\tjsc.picker = {\r\n\t\t\t\t\t\t\t\towner: null,\r\n\t\t\t\t\t\t\t\twrap : document.createElement('div'),\r\n\t\t\t\t\t\t\t\tbox : document.createElement('div'),\r\n\t\t\t\t\t\t\t\tboxS : document.createElement('div'), // shadow area\r\n\t\t\t\t\t\t\t\tboxB : document.createElement('div'), // border\r\n\t\t\t\t\t\t\t\tpad : document.createElement('div'),\r\n\t\t\t\t\t\t\t\tpadB : document.createElement('div'), // border\r\n\t\t\t\t\t\t\t\tpadM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\t\t\t\tpadPal : jsc.createPalette(),\r\n\t\t\t\t\t\t\t\tcross : document.createElement('div'),\r\n\t\t\t\t\t\t\t\tcrossBY : document.createElement('div'), // border Y\r\n\t\t\t\t\t\t\t\tcrossBX : document.createElement('div'), // border X\r\n\t\t\t\t\t\t\t\tcrossLY : document.createElement('div'), // line Y\r\n\t\t\t\t\t\t\t\tcrossLX : document.createElement('div'), // line X\r\n\r\n\t\t\t\t\t\t\t\tsld : document.createElement('div'),\r\n\t\t\t\t\t\t\t\tsldB : document.createElement('div'), // border\r\n\t\t\t\t\t\t\t\tsldM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\t\t\t\tsldGrad : jsc.createSliderGradient(),\r\n\t\t\t\t\t\t\t\tsldPtrS : document.createElement('div'), // slider pointer spacer\r\n\t\t\t\t\t\t\t\tsldPtrIB : document.createElement('div'), // slider pointer inner border\r\n\t\t\t\t\t\t\t\tsldPtrMB : document.createElement('div'), // slider pointer middle border\r\n\t\t\t\t\t\t\t\tsldPtrOB : document.createElement('div'), // slider pointer outer border\r\n\r\n\t\t\t\t\t\t\t\tsldAlpha : document.createElement('div'),\r\n\t\t\t\t\t\t\t\tsldAlphaB : document.createElement('div'), // border\r\n\t\t\t\t\t\t\t\tsldAlphaM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\t\t\t\tsldAlphaGrad : jsc.createSliderAlphaGradient(),\r\n\t\t\t\t\t\t\t\tsldAlphaPtrS : document.createElement('div'), //alpha slider pointer spacer\r\n\t\t\t\t\t\t\t\tsldAlphaPtrIB : document.createElement('div'), //alpha slider pointer inner border\r\n\t\t\t\t\t\t\t\tsldAlphaPtrMB : document.createElement('div'), //alpha slider pointer middle border\r\n\t\t\t\t\t\t\t\tsldAlphaPtrOB : document.createElement('div'), //alpha slider pointer outer border\r\n\r\n\t\t\t\t\t\t\t\tbtn : document.createElement('div'),\r\n\t\t\t\t\t\t\t\tbtnT : document.createElement('span') // text\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padPal.elm);\r\n\t\t\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\r\n\t\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\r\n\t\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\r\n\t\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\r\n\t\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\r\n\t\t\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\r\n\t\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\r\n\t\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\r\n\t\t\t\t\t\t\tjsc.picker.padB.id = \"padB\", jsc.picker.padM.id = \"padM\";\r\n\r\n\t\t\t\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\r\n\t\t\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\r\n\t\t\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\r\n\t\t\t\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\r\n\t\t\t\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\r\n\t\t\t\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\r\n\t\t\t\t\t\t\tjsc.picker.sld.id = \"sld\", jsc.picker.sldB.id=\"sldB\", jsc.picker.sldPtrOB.id=\"sldPtrOB\", jsc.picker.sldPtrMB.id=\"sldPtrMB\", jsc.picker.sldPtrIB.id=\"sldPtrIB\";\r\n\t\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\r\n\t\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\r\n\t\t\t\t\t\t\tjsc.picker.box.id = \"box\", jsc.picker.sldM.id = \"sldM\";\r\n\r\n\t\t\t\t\t\t\tjsc.picker.sldAlpha.appendChild(jsc.picker.sldAlphaGrad.elm);\r\n\t\t\t\t\t\t\tjsc.picker.sldAlphaB.appendChild(jsc.picker.sldAlpha);\r\n\t\t\t\t\t\t\tjsc.picker.sldAlphaB.appendChild(jsc.picker.sldAlphaPtrOB);\r\n\t\t\t\t\t\t\tjsc.picker.sldAlphaPtrOB.appendChild(jsc.picker.sldAlphaPtrMB);\r\n\t\t\t\t\t\t\tjsc.picker.sldAlphaPtrMB.appendChild(jsc.picker.sldAlphaPtrIB);\r\n\t\t\t\t\t\t\tjsc.picker.sldAlphaPtrIB.appendChild(jsc.picker.sldAlphaPtrS);\r\n\t\t\t\t\t\t\tjsc.picker.sldAlpha.id = \"sldAlpha\", jsc.picker.sldAlphaB.id=\"sldAlphaB\", jsc.picker.sldAlphaPtrOB.id=\"sldAlphaPtrOB\",\r\n\t\t\t\t\t\t\t\t\tjsc.picker.sldAlphaPtrMB.id=\"sldAlphaPtrMB\", jsc.picker.sldAlphaPtrIB.id=\"sldAlphaPtrIB\";\r\n\t\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldAlphaB);\r\n\t\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldAlphaM);\r\n\t\t\t\t\t\t\tjsc.picker.box.id = \"box\", jsc.picker.sldAlphaM.id = \"sldAlphaM\";\r\n\r\n\t\t\t\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\r\n\t\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\r\n\r\n\t\t\t\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\r\n\t\t\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\r\n\t\t\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\r\n\t\t\t\t\t\t\tjsc.picker.boxB.id = \"boxB\", jsc.picker.wrap.id = \"wrap\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar p = jsc.picker;\r\n\r\n\t\t\t\t\t\tvar displaySlider = !!jsc.getSliderComponent(THIS);\r\n\t\t\t\t\t\tvar dims = jsc.getPickerDims(THIS);\r\n\t\t\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\t\t\t\tvar padToSliderPadding = jsc.getPadToSliderPadding(THIS);\r\n\t\t\t\t\t\tvar borderRadius = Math.min(\r\n\t\t\t\t\t\t\t\tTHIS.borderRadius,\r\n\t\t\t\t\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\r\n\t\t\t\t\t\tvar padCursor = 'crosshair';\r\n\r\n\t\t\t\t\t\t// wrap\r\n\t\t\t\t\t\tp.wrap.style.clear = 'both';\r\n\t\t\t\t\t\tp.wrap.style.width = (dims[0] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\t\t\t\tp.wrap.style.height = (dims[1] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\t\t\t\tp.wrap.style.zIndex = THIS.zIndex;\r\n\r\n\t\t\t\t\t\t// picker\r\n\t\t\t\t\t\tp.box.style.width = dims[0] + 'px';\r\n\t\t\t\t\t\tp.box.style.height = dims[1] + 'px';\r\n\r\n\t\t\t\t\t\tp.boxS.style.position = 'absolute';\r\n\t\t\t\t\t\tp.boxS.style.left = '0';\r\n\t\t\t\t\t\tp.boxS.style.top = '0';\r\n\t\t\t\t\t\tp.boxS.style.width = '100%';\r\n\t\t\t\t\t\tp.boxS.style.height = '100%';\r\n\t\t\t\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\r\n\r\n\t\t\t\t\t\t// picker border\r\n\t\t\t\t\t\tp.boxB.style.position = 'relative';\r\n\t\t\t\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\r\n\t\t\t\t\t\tp.boxB.style.borderColor = THIS.borderColor;\r\n\t\t\t\t\t\tp.boxB.style.background = THIS.backgroundColor;\r\n\t\t\t\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\r\n\r\n\t\t\t\t\t\t// IE hack:\r\n\t\t\t\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\r\n\t\t\t\t\t\t// e.g. on Canvas or on elements with border\r\n\t\t\t\t\t\tp.padM.style.background =\r\n\t\t\t\t\t\t\t\tp.sldM.style.background =\r\n\t\t\t\t\t\t\t\t\t\t'#FFF';\r\n\t\t\t\t\t\tjsc.setStyle(p.padM, 'opacity', '0');\r\n\t\t\t\t\t\tjsc.setStyle(p.sldM, 'opacity', '0');\r\n\r\n\t\t\t\t\t\t// pad\r\n\t\t\t\t\t\tp.pad.style.position = 'relative';\r\n\t\t\t\t\t\tp.pad.style.width = THIS.width + 'px';\r\n\t\t\t\t\t\tp.pad.style.height = THIS.height + 'px';\r\n\r\n\t\t\t\t\t\t// pad palettes (HSV and HVS)\r\n\t\t\t\t\t\tp.padPal.draw(THIS.width, THIS.height, jsc.getPadYComponent(THIS));\r\n\r\n\t\t\t\t\t\t// pad border\r\n\t\t\t\t\t\tp.padB.style.position = 'absolute';\r\n\t\t\t\t\t\tp.padB.style.left = THIS.padding + 'px';\r\n\t\t\t\t\t\tp.padB.style.top = THIS.padding + 'px';\r\n\t\t\t\t\t\tp.padB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\t\t\t\tp.padB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t\t\t\t// pad mouse area\r\n\t\t\t\t\t\tp.padM._jscInstance = THIS;\r\n\t\t\t\t\t\tp.padM._jscControlName = 'pad';\r\n\t\t\t\t\t\tp.padM.style.position = 'absolute';\r\n\t\t\t\t\t\tp.padM.style.left = '0';\r\n\t\t\t\t\t\tp.padM.style.top = '0';\r\n\t\t\t\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.insetWidth + THIS.width + padToSliderPadding / 2) + 'px';\r\n\t\t\t\t\t\tp.padM.style.height = dims[1] + 'px';\r\n\t\t\t\t\t\tp.padM.style.cursor = padCursor;\r\n\r\n\t\t\t\t\t\t// pad cross\r\n\t\t\t\t\t\tp.cross.style.position = 'absolute';\r\n\t\t\t\t\t\tp.cross.style.left =\r\n\t\t\t\t\t\t\t\tp.cross.style.top =\r\n\t\t\t\t\t\t\t\t\t\t'0';\r\n\t\t\t\t\t\tp.cross.style.width =\r\n\t\t\t\t\t\t\t\tp.cross.style.height =\r\n\t\t\t\t\t\t\t\t\t\tcrossOuterSize + 'px';\r\n\r\n\t\t\t\t\t\t// pad cross border Y and X\r\n\t\t\t\t\t\tp.crossBY.style.position =\r\n\t\t\t\t\t\t\t\tp.crossBX.style.position =\r\n\t\t\t\t\t\t\t\t\t\t'absolute';\r\n\t\t\t\t\t\tp.crossBY.style.background =\r\n\t\t\t\t\t\t\t\tp.crossBX.style.background =\r\n\t\t\t\t\t\t\t\t\t\tTHIS.pointerBorderColor;\r\n\t\t\t\t\t\tp.crossBY.style.width =\r\n\t\t\t\t\t\t\t\tp.crossBX.style.height =\r\n\t\t\t\t\t\t\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\t\t\t\tp.crossBY.style.height =\r\n\t\t\t\t\t\t\t\tp.crossBX.style.width =\r\n\t\t\t\t\t\t\t\t\t\tcrossOuterSize + 'px';\r\n\t\t\t\t\t\tp.crossBY.style.left =\r\n\t\t\t\t\t\t\t\tp.crossBX.style.top =\r\n\t\t\t\t\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\r\n\t\t\t\t\t\tp.crossBY.style.top =\r\n\t\t\t\t\t\t\t\tp.crossBX.style.left =\r\n\t\t\t\t\t\t\t\t\t\t'0';\r\n\r\n\t\t\t\t\t\t// pad cross line Y and X\r\n\t\t\t\t\t\tp.crossLY.style.position =\r\n\t\t\t\t\t\t\t\tp.crossLX.style.position =\r\n\t\t\t\t\t\t\t\t\t\t'absolute';\r\n\t\t\t\t\t\tp.crossLY.style.background =\r\n\t\t\t\t\t\t\t\tp.crossLX.style.background =\r\n\t\t\t\t\t\t\t\t\t\tTHIS.pointerColor;\r\n\t\t\t\t\t\tp.crossLY.style.height =\r\n\t\t\t\t\t\t\t\tp.crossLX.style.width =\r\n\t\t\t\t\t\t\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\r\n\t\t\t\t\t\tp.crossLY.style.width =\r\n\t\t\t\t\t\t\t\tp.crossLX.style.height =\r\n\t\t\t\t\t\t\t\t\t\tTHIS.pointerThickness + 'px';\r\n\t\t\t\t\t\tp.crossLY.style.left =\r\n\t\t\t\t\t\t\t\tp.crossLX.style.top =\r\n\t\t\t\t\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\r\n\t\t\t\t\t\tp.crossLY.style.top =\r\n\t\t\t\t\t\t\t\tp.crossLX.style.left =\r\n\t\t\t\t\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px';\r\n\r\n\t\t\t\t\t\t// slider\r\n\t\t\t\t\t\tp.sld.style.overflow = 'hidden';\r\n\t\t\t\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\t\tp.sld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t\t\t\t// slider gradient\r\n\t\t\t\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\r\n\r\n\t\t\t\t\t\t// slider border\r\n\t\t\t\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\t\t\t\tp.sldB.style.position = 'absolute';\r\n\t\t\t\t\t\t// p.sldB.style.right = THIS.padding + 'px';\r\n\t\t\t\t\t\tvar sldB_Left = THIS.width + THIS.padding*2 + THIS.insetWidth*2;\r\n\t\t\t\t\t\tp.sldB.style.left = sldB_Left + \"px\";\r\n\t\t\t\t\t\tp.sldB.style.top = THIS.padding + 'px';\r\n\t\t\t\t\t\tp.sldB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\t\t\t\tp.sldB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t\t\t\t// slider mouse area\r\n\t\t\t\t\t\tp.sldM._jscInstance = THIS;\r\n\t\t\t\t\t\tp.sldM._jscControlName = 'sld';\r\n\t\t\t\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\t\t\t\tp.sldM.style.position = 'absolute';\r\n\t\t\t\t\t\tp.sldM.style.left = p.padM.style.width;\r\n\t\t\t\t\t\tp.sldM.style.top = '0';\r\n\t\t\t\t\t\tp.sldM.style.width = (THIS.sliderSize + padToSliderPadding / 2 + THIS.padding + 2 * THIS.insetWidth) + 'px';\r\n\t\t\t\t\t\tp.sldM.style.height = dims[1] + 'px';\r\n\t\t\t\t\t\tp.sldM.style.cursor = 'default';\r\n\r\n\t\t\t\t\t\t// slider pointer inner and outer border\r\n\t\t\t\t\t\tp.sldPtrIB.style.border =\r\n\t\t\t\t\t\t\t\tp.sldPtrOB.style.border =\r\n\t\t\t\t\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t\t\t\t// slider pointer outer border\r\n\t\t\t\t\t\tp.sldPtrOB.style.position = 'absolute';\r\n\t\t\t\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\t\t\t\tp.sldPtrOB.style.top = '0';\r\n\r\n\t\t\t\t\t\t// slider pointer middle border\r\n\t\t\t\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t\t\t\t// slider pointer spacer\r\n\t\t\t\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\t\tp.sldPtrS.style.height = sliderPtrSpace + 'px';\r\n\r\n\t\t\t\t\t\t// slider alpha\r\n\t\t\t\t\t\tp.sldAlpha.style.overflow = 'hidden';\r\n\t\t\t\t\t\tp.sldAlpha.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\t\tp.sldAlpha.style.height = THIS.height + 'px';\r\n\r\n\t\t\t\t\t\t// slider gradient\r\n\t\t\t\t\t\tp.sldAlphaGrad.draw(THIS.sliderSize, THIS.height, [0,0,0]);\r\n\r\n\t\t\t\t\t\t// slider border\r\n\t\t\t\t\t\tp.sldAlphaB.style.display = THIS.alphaEnabled ? 'block' : 'none';\r\n\t\t\t\t\t\tp.sldAlphaB.style.position = 'absolute';\r\n\t\t\t\t\t\tp.sldAlphaB.style.right = THIS.padding + 'px';\r\n\t\t\t\t\t\tp.sldAlphaB.style.top = THIS.padding + 'px';\r\n\t\t\t\t\t\tp.sldAlphaB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\t\t\t\tp.sldAlphaB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t\t\t\t// slider mouse area\r\n\t\t\t\t\t\tp.sldAlphaM._jscInstance = THIS;\r\n\t\t\t\t\t\tp.sldAlphaM._jscControlName = 'sldAlpha';\r\n\t\t\t\t\t\tp.sldAlphaM.style.display = THIS.alphaEnabled ? 'block' : 'none';\r\n\t\t\t\t\t\tp.sldAlphaM.style.position = 'absolute';\r\n\t\t\t\t\t\tp.sldAlphaM.style.right = '0';\r\n\t\t\t\t\t\tp.sldAlphaM.style.top = '0';\r\n\t\t\t\t\t\tp.sldAlphaM.style.width = (THIS.sliderSize + padToSliderPadding / 2 + THIS.padding + 2 * THIS.insetWidth) + 'px';\r\n\t\t\t\t\t\tp.sldAlphaM.style.height = dims[1] + 'px';\r\n\t\t\t\t\t\tp.sldAlphaM.style.cursor = 'default';\r\n\r\n\t\t\t\t\t\t// slider pointer inner and outer border\r\n\t\t\t\t\t\tp.sldAlphaPtrIB.style.border =\r\n\t\t\t\t\t\t\t\tp.sldAlphaPtrOB.style.border =\r\n\t\t\t\t\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t\t\t\t// slider pointer outer border\r\n\t\t\t\t\t\tp.sldAlphaPtrOB.style.position = 'absolute';\r\n\t\t\t\t\t\tp.sldAlphaPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\t\t\t\tp.sldAlphaPtrOB.style.top = '0';\r\n\r\n\t\t\t\t\t\t// slider pointer middle border\r\n\t\t\t\t\t\tp.sldAlphaPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t\t\t\t// slider pointer spacer\r\n\t\t\t\t\t\tp.sldAlphaPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\t\tp.sldAlphaPtrS.style.height = sliderPtrSpace + 'px';\r\n\r\n\t\t\t\t\t\t// the Close button\r\n\t\t\t\t\t\tfunction setBtnBorder () {\r\n\t\t\t\t\t\t\tvar insetColors = THIS.insetColor.split(/\\s+/);\r\n\t\t\t\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\r\n\t\t\t\t\t\t\tp.btn.style.borderColor = outsetColor;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tp.btn.style.display = THIS.closable ? 'block' : 'none';\r\n\t\t\t\t\t\tp.btn.style.position = 'absolute';\r\n\t\t\t\t\t\tp.btn.style.left = THIS.padding + 'px';\r\n\t\t\t\t\t\tp.btn.style.bottom = THIS.padding + 'px';\r\n\t\t\t\t\t\tp.btn.style.padding = '0 15px';\r\n\t\t\t\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\r\n\t\t\t\t\t\tp.btn.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\t\t\t\tsetBtnBorder();\r\n\t\t\t\t\t\tp.btn.style.color = THIS.buttonColor;\r\n\t\t\t\t\t\tp.btn.style.font = '12px sans-serif';\r\n\t\t\t\t\t\tp.btn.style.textAlign = 'center';\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tp.btn.style.cursor = 'pointer';\r\n\t\t\t\t\t\t} catch(eOldIE) {\r\n\t\t\t\t\t\t\tp.btn.style.cursor = 'hand';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tp.btn.onmousedown = function () {\r\n\t\t\t\t\t\t\tTHIS.hide();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\r\n\t\t\t\t\t\tp.btnT.innerHTML = '';\r\n\t\t\t\t\t\tp.btnT.appendChild(document.createTextNode(THIS.closeText));\r\n\r\n\t\t\t\t\t\t// place pointers\r\n\t\t\t\t\t\tredrawPad();\r\n\t\t\t\t\t\tredrawSld();\r\n\t\t\t\t\t\tredrawSldAlpha();\r\n\r\n\t\t\t\t\t\t// If we are changing the owner without first closing the picker,\r\n\t\t\t\t\t\t// make sure to first deal with the old owner\r\n\t\t\t\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS) {\r\n\t\t\t\t\t\t\tjsc.unsetClass(jsc.picker.owner.targetElement, THIS.activeClass);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Set the new picker owner\r\n\t\t\t\t\t\tjsc.picker.owner = THIS;\r\n\r\n\t\t\t\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\r\n\t\t\t\t\t\t// after setting the owner\r\n\t\t\t\t\t\tif (jsc.isElementType(container, 'body')) {\r\n\t\t\t\t\t\t\tjsc.redrawPosition();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (p.wrap.parentNode != container) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(p.wrap);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tjsc.setClass(THIS.targetElement, THIS.activeClass);\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfunction redrawPad () {\r\n\t\t\t\t\t\t// redraw the pad pointer\r\n\t\t\t\t\t\tswitch (jsc.getPadYComponent(THIS)) {\r\n\t\t\t\t\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\t\t\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar x = Math.round((THIS.hsv[0] / 360) * (THIS.width - 1));\r\n\t\t\t\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\t\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\r\n\t\t\t\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\r\n\t\t\t\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\r\n\r\n\t\t\t\t\t\t// redraw the slider\r\n\t\t\t\t\t\tswitch (jsc.getSliderComponent(THIS)) {\r\n\t\t\t\t\t\t\tcase 's':\r\n\t\t\t\t\t\t\t\tvar rgb1 = HSV_RGB(THIS.hsv[0], 100, THIS.hsv[2]);\r\n\t\t\t\t\t\t\t\tvar rgb2 = HSV_RGB(THIS.hsv[0], 0, THIS.hsv[2]);\r\n\t\t\t\t\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb1[0]) + ',' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb1[1]) + ',' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb1[2]) + ')';\r\n\t\t\t\t\t\t\t\tvar color2 = 'rgb(' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb2[0]) + ',' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb2[1]) + ',' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb2[2]) + ')';\r\n\t\t\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\t\t\t\t\tjsc.picker.sldAlphaGrad.draw(THIS.sliderSize, THIS.height, rgb1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'v':\r\n\t\t\t\t\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 100);\r\n\t\t\t\t\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb[0]) + ',' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb[1]) + ',' +\r\n\t\t\t\t\t\t\t\t\t\tMath.round(rgb[2]) + ')';\r\n\t\t\t\t\t\t\t\tvar color2 = '#000';\r\n\t\t\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\t\t\t\t\tjsc.picker.sldAlphaGrad.draw(THIS.sliderSize, THIS.height, rgb);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfunction redrawSld () {\r\n\t\t\t\t\t\tvar sldComponent = jsc.getSliderComponent(THIS);\r\n\t\t\t\t\t\tif (sldComponent) {\r\n\t\t\t\t\t\t\t// redraw the slider pointer\r\n\t\t\t\t\t\t\tswitch (sldComponent) {\r\n\t\t\t\t\t\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\t\t\t\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\t\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(sliderPtrSpace / 2)) + 'px';\r\n\t\t\t\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], THIS.hsv[2]);\r\n\t\t\t\t\t\t\tjsc.picker.sldAlphaGrad.draw(THIS.sliderSize, THIS.height, rgb);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction redrawSldAlpha() {\r\n\t\t\t\t\t\tif (THIS.alphaEnabled) {\r\n\t\t\t\t\t\t\tvar y = Math.round((1 - THIS.rgb[3]) * (THIS.height - 1));\r\n\t\t\t\t\t\t\tjsc.picker.sldAlphaPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(sliderPtrSpace / 2)) + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfunction isPickerOwner () {\r\n\t\t\t\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfunction blurValue () {\r\n\t\t\t\t\t\tTHIS.importColor();\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t// Find the target element\r\n\t\t\t\t\tif (typeof targetElement === 'string') {\r\n\t\t\t\t\t\tvar id = targetElement;\r\n\t\t\t\t\t\tvar elm = document.getElementById(id);\r\n\t\t\t\t\t\tif (elm) {\r\n\t\t\t\t\t\t\tthis.targetElement = elm;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjsc.warn('Could not find target element with ID \\'' + id + '\\'');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (targetElement) {\r\n\t\t\t\t\t\tthis.targetElement = targetElement;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjsc.warn('Invalid target element: \\'' + targetElement + '\\'');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.targetElement._jscLinkedInstance) {\r\n\t\t\t\t\t\tjsc.warn('Cannot link jscolor twice to the same element. Skipping.');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.targetElement._jscLinkedInstance = this;\r\n\r\n\t\t\t\t\t// Find the value element\r\n\t\t\t\t\tthis.valueElement = jsc.fetchElement(this.valueElement);\r\n\t\t\t\t\t// Find the style element\r\n\t\t\t\t\tthis.styleElement = jsc.fetchElement(this.styleElement);\r\n\r\n\t\t\t\t\tvar THIS = this;\r\n\t\t\t\t\tvar container =\r\n\t\t\t\t\t\t\tthis.container ?\r\n\t\t\t\t\t\t\t\t\tjsc.fetchElement(this.container) :\r\n\t\t\t\t\t\t\t\t\tdocument.getElementsByTagName('body')[0];\r\n\t\t\t\t\tvar sliderPtrSpace = 3; // px\r\n\r\n\t\t\t\t\t// For BUTTON elements it's important to stop them from sending the form when clicked\r\n\t\t\t\t\t// (e.g. in Safari)\r\n\t\t\t\t\tif (jsc.isElementType(this.targetElement, 'button')) {\r\n\t\t\t\t\t\tif (this.targetElement.onclick) {\r\n\t\t\t\t\t\t\tvar origCallback = this.targetElement.onclick;\r\n\t\t\t\t\t\t\tthis.targetElement.onclick = function (evt) {\r\n\t\t\t\t\t\t\t\torigCallback.call(this, evt);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.targetElement.onclick = function () { return false; };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*\r\n          var elm = this.targetElement;\r\n          do {\r\n            // If the target element or one of its offsetParents has fixed position,\r\n            // then use fixed positioning instead\r\n            //\r\n            // Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n            // that's why we need to check if the returned style object is non-empty\r\n            var currStyle = jsc.getStyle(elm);\r\n            if (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n              this.fixed = true;\r\n            }\r\n\r\n            if (elm !== this.targetElement) {\r\n              // attach onParentScroll so that we can recompute the picker position\r\n              // when one of the offsetParents is scrolled\r\n              if (!elm._jscEventsAttached) {\r\n                jsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n                elm._jscEventsAttached = true;\r\n              }\r\n            }\r\n          } while ((elm = elm.offsetParent) && !jsc.isElementType(elm, 'body'));\r\n          */\r\n\r\n\t\t\t\t\t// valueElement\r\n\t\t\t\t\tif (this.valueElement) {\r\n\t\t\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\t\t\tvar updateField = function () {\r\n\t\t\t\t\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.leaveValue | jsc.pad | jsc.sld | jsc.alpha);\r\n\t\t\t\t\t\t\t\tjsc.dispatchFineChange(THIS);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tjsc.attachEvent(this.valueElement, 'keyup', updateField);\r\n\t\t\t\t\t\t\tjsc.attachEvent(this.valueElement, 'input', updateField);\r\n\t\t\t\t\t\t\tjsc.attachEvent(this.valueElement, 'blur', blurValue);\r\n\t\t\t\t\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// styleElement\r\n\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\tthis.styleElement._jscOrigStyle = {\r\n\t\t\t\t\t\t\tbackgroundImage : this.styleElement.style.backgroundImage,\r\n\t\t\t\t\t\t\tbackgroundColor : this.styleElement.style.backgroundColor,\r\n\t\t\t\t\t\t\tcolor : this.styleElement.style.color\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.value) {\r\n\t\t\t\t\t\t// Try to set the color from the .value option and if unsuccessful,\r\n\t\t\t\t\t\t// export the current color\r\n\t\t\t\t\t\tthis.fromString(this.value) || this.exportColor();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.importColor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\r\n//================================\r\n// Public properties and methods\r\n//================================\r\n\r\n\r\n// By default, search for all elements with class=\"jscolor\" and install a color picker on them.\r\n//\r\n// You can change what class name will be looked for by setting the property jscolor.lookupClass\r\n// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\r\n//\r\n\t\t\tjsc.jscolor.lookupClass = 'jscolor';\r\n\r\n\r\n\t\t\tjsc.jscolor.installByClassName = function (className) {\r\n\t\t\t\tvar inputElms = document.getElementsByTagName('input');\r\n\t\t\t\tvar buttonElms = document.getElementsByTagName('button');\r\n\r\n\t\t\t\tjsc.tryInstallOnElements(inputElms, className);\r\n\t\t\t\tjsc.tryInstallOnElements(buttonElms, className);\r\n\t\t\t};\r\n\r\n\r\n\t\t\tjsc.register();\r\n\r\n\r\n\t\t\treturn jsc.jscolor;\r\n\r\n\r\n\t\t})(); }\r\n\t}\r\n};\r\nexport default jsColor;\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTopBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTopBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTopBar.vue?vue&type=template&id=74840708&scoped=true&\"\nimport script from \"./MainTopBar.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTopBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainTopBar.vue?vue&type=style&index=0&id=74840708&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74840708\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tabView\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tabView\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"TabView\"\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .tabView {\r\n    width: 300px;\r\n    min-height: 100px;\r\n    max-height: calc(100% - 100px);\r\n    position: absolute;\r\n    top: 44px;\r\n    left: 0;\r\n    /*border: 2px solid #72bb93;*/\r\n    box-shadow: 2px 2px 8px 0px rgba(0, 0, 0, 0.4);\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabView.vue?vue&type=template&id=32ff9422&scoped=true&\"\nimport script from \"./TabView.vue?vue&type=script&lang=js&\"\nexport * from \"./TabView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TabView.vue?vue&type=style&index=0&id=32ff9422&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32ff9422\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tabbar\"},[_c('tab-bar-item',{attrs:{\"slot\":\"label\",\"index\":\"0\",\"cur\":_vm.currentIndex},on:{\"tabClick\":_vm.onTabclick},slot:\"label\"},[_c('span',{staticClass:\"iconfont iconzujian\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"txt\"},slot:\"txt\"},[_vm._v(\"绘制\")])]),_c('tab-bar-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$store.state.editingFor3d),expression:\"!$store.state.editingFor3d\"}],attrs:{\"slot\":\"label\",\"index\":\"1\",\"cur\":_vm.currentIndex},on:{\"tabClick\":_vm.onTabclick},slot:\"label\"},[_c('span',{staticClass:\"iconfont iconlujing\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"txt\"},slot:\"txt\"},[_vm._v(\"路径\")])]),_c('tab-bar-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.editingFor3d),expression:\"$store.state.editingFor3d\"}],attrs:{\"slot\":\"label\",\"index\":\"1\",\"cur\":_vm.currentIndex},on:{\"tabClick\":_vm.onTabclick},slot:\"label\"},[_c('span',{staticClass:\"iconfont iconlujing\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"txt\"},slot:\"txt\"},[_vm._v(\"光效\")])]),_c('tab-bar-item',{attrs:{\"slot\":\"label\",\"index\":\"2\",\"cur\":_vm.currentIndex},on:{\"tabClick\":_vm.onTabclick},slot:\"label\"},[_c('span',{staticClass:\"iconfont icontuceng\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"txt\"},slot:\"txt\"},[_vm._v(\"图层\")])]),_c('tab-bar-item',{attrs:{\"slot\":\"label\",\"index\":\"3\",\"cur\":_vm.currentIndex},on:{\"tabClick\":_vm.onTabclick},slot:\"label\"},[_c('span',{staticClass:\"iconfont iconshezhi\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('span',{attrs:{\"slot\":\"txt\"},slot:\"txt\"},[_vm._v(\"设置\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tab-bar\"}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"tab-bar\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"TabBar\"\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #tab-bar {\r\n    display: flex;\r\n    background-color: #f6f6f6;\r\n    /*height: 66px;*/\r\n\r\n    box-shadow: 0 1px 1px rgba(100,100,100,.2);\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabBar.vue?vue&type=template&id=06b571e6&scoped=true&\"\nimport script from \"./TabBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TabBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TabBar.vue?vue&type=style&index=0&id=06b571e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06b571e6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tabBarItem\",on:{\"click\":_vm.itemClick}},[_c('div',{staticClass:\"icon\"},[_vm._t(\"icon\")],2),_c('div',{staticClass:\"txt\",style:(_vm.activeStyle)},[_vm._t(\"txt\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tabBarItem\" @click=\"itemClick\">\r\n    <div class=\"icon\"><slot name=\"icon\" ></slot></div>\r\n    <div :style=\"activeStyle\" class=\"txt\"><slot name=\"txt\" ></slot></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"TabBarItem\",\r\n    props: {\r\n      index: String,\r\n      cur: String,\r\n      activeColor: {\r\n        type: String,\r\n        default: 'red'\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        // isActive: true\r\n      }\r\n    },\r\n    computed: {\r\n      isActive() {\r\n        return this.index == this.cur;\r\n      },\r\n      activeStyle() {\r\n        return this.isActive ? {'border-bottom': 'solid 2px red'} : {}\r\n      }\r\n    },\r\n    methods: {\r\n      itemClick() {\r\n        this.$emit('tabClick', this.index);\r\n        // this.$router.replace(this.path)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .tabBarItem {\r\n    flex: 1;\r\n    height: 49px;\r\n    font-size: 14px;\r\n    padding: 5px 0;\r\n    cursor: pointer;\r\n  }\r\n  .tabBarItem>div {\r\n    text-align: center;\r\n    color: white;\r\n  }\r\n  .tabBarItem>.icon {\r\n    margin-bottom: 3px;\r\n  }\r\n  .tabBarItem>.txt {\r\n    padding-bottom: 5px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabBarItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabBarItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabBarItem.vue?vue&type=template&id=006f9056&scoped=true&\"\nimport script from \"./TabBarItem.vue?vue&type=script&lang=js&\"\nexport * from \"./TabBarItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TabBarItem.vue?vue&type=style&index=0&id=006f9056&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"006f9056\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"tabbar\">\r\n    <tab-bar-item slot=\"label\" index=\"0\" :cur=\"currentIndex\" @tabClick=\"onTabclick\">\r\n      <span class=\"iconfont iconzujian\" slot=\"icon\"></span>\r\n      <span slot=\"txt\">绘制</span>\r\n    </tab-bar-item>\r\n\r\n    <tab-bar-item slot=\"label\" index=\"1\" :cur=\"currentIndex\" @tabClick=\"onTabclick\" v-show=\"!$store.state.editingFor3d\">\r\n      <span class=\"iconfont iconlujing\" slot=\"icon\"></span>\r\n      <span slot=\"txt\">路径</span>\r\n    </tab-bar-item>\r\n\r\n    <tab-bar-item slot=\"label\" index=\"1\" :cur=\"currentIndex\" @tabClick=\"onTabclick\" v-show=\"$store.state.editingFor3d\">\r\n      <span class=\"iconfont iconlujing\" slot=\"icon\"></span>\r\n      <span slot=\"txt\">光效</span>\r\n    </tab-bar-item>\r\n\r\n    <tab-bar-item slot=\"label\" index=\"2\" :cur=\"currentIndex\" @tabClick=\"onTabclick\">\r\n      <span class=\"iconfont icontuceng\" slot=\"icon\"></span>\r\n      <span slot=\"txt\">图层</span>\r\n    </tab-bar-item>\r\n\r\n    <tab-bar-item slot=\"label\" index=\"3\" :cur=\"currentIndex\" @tabClick=\"onTabclick\">\r\n      <span class=\"iconfont iconshezhi\" slot=\"icon\"></span>\r\n      <span slot=\"txt\">设置</span>\r\n    </tab-bar-item>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TabBar from \"../common/tabBar/TabBar\";\r\n  import TabBarItem from \"../common/tabBar/TabBarItem\";\r\n\r\n  export default {\r\n    name: \"MainTabBar\",\r\n    data() {\r\n      return {\r\n        currentIndex: '0'\r\n      }\r\n    },\r\n    methods: {\r\n      onTabclick(ind) {\r\n        this.$emit('tabClick', {pre: ~~this.currentIndex, cur: ~~ind});\r\n        this.currentIndex = ind;\r\n      }\r\n    },\r\n    components: {\r\n      TabBar, TabBarItem\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .tabbar {\r\n    display: flex;\r\n    background-color: var(--color-tint);\r\n    /*height: 66px;*/\r\n\r\n    box-shadow: 0 -1px 1px rgba(100,100,100,.2);\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTabBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTabBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTabBar.vue?vue&type=template&id=38e3a795&scoped=true&\"\nimport script from \"./MainTabBar.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTabBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainTabBar.vue?vue&type=style&index=0&id=38e3a795&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38e3a795\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tabContentBoxes\"},[_c('collapse',{staticClass:\"tabContent\",attrs:{\"role\":\"buildings\"},on:{\"change\":_vm.collapseChange},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},[_c('collapse-item',{attrs:{\"title\":\"选择元素\",\"name\":\"select\",\"is-last\":_vm.$store.state.editingFor3d}},[_c('box-selected-graphics')],1),_c('collapse-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.showGraphicAdd && !_vm.$store.state.editingFor3d),expression:\"$store.state.showGraphicAdd && !$store.state.editingFor3d\"}],attrs:{\"title\":\"绘制元素\",\"name\":\"create\",\"is-last\":true}},[_c('box-draw-graphic')],1)],1),_c('collapse',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$store.state.editingFor3d),expression:\"!$store.state.editingFor3d\"}],staticClass:\"tabContent hide\",attrs:{\"role\":\"paths\"},model:{value:(_vm.activeNames2),callback:function ($$v) {_vm.activeNames2=$$v},expression:\"activeNames2\"}},[_c('collapse-item',{attrs:{\"title\":\"选择路径\",\"name\":\"select\"}},[_c('box-selected-paths')],1),_c('collapse-item',{attrs:{\"title\":\"绘制路径\",\"name\":\"create\",\"is-last\":true}},[_c('box-draw-path')],1)],1),_c('collapse',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.editingFor3d),expression:\"$store.state.editingFor3d\"}],staticClass:\"tabContent hide\",attrs:{\"role\":\"paths\"},model:{value:(_vm.activeLights),callback:function ($$v) {_vm.activeLights=$$v},expression:\"activeLights\"}},[_c('collapse-item',{attrs:{\"title\":\"材质\",\"name\":\"materials\"}},[_c('box-materials')],1),_c('collapse-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.lightsEditable),expression:\"$store.state.lightsEditable\"}],attrs:{\"title\":\"光源\",\"name\":\"lights\"}},[_c('box-lights')],1)],1),_c('div',{staticClass:\"tabContent hide\",attrs:{\"role\":\"layers\"}},[_c('box-layers')],1),_c('collapse',{staticClass:\"tabContent hide\",attrs:{\"role\":\"settings\"},model:{value:(_vm.activeSettings),callback:function ($$v) {_vm.activeSettings=$$v},expression:\"activeSettings\"}},[_c('collapse-item',{attrs:{\"title\":\"地图设置\",\"name\":\"mapEditorSetting\"}},[_c('box-settings')],1),_c('collapse-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$store.state.editingFor3d),expression:\"!$store.state.editingFor3d\"}],attrs:{\"title\":\"背景层分割\",\"name\":\"refLayerDivide\"}},[_c('box-ref-layer-divide')],1),_c('collapse-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$store.state.editingFor3d),expression:\"!$store.state.editingFor3d\"}],attrs:{\"title\":\"地理位置设定\",\"name\":\"geographyBind\"}},[_c('box-coord-bind',{ref:\"boxCoordBind\"})],1),_c('collapse-item',{attrs:{\"title\":\"杂项\",\"name\":\"misc\",\"is-last\":true}},[_c('box-misc')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"el_collapse\",attrs:{\"role\":\"tablist\",\"aria-multiselectable\":\"true\"}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"el_collapse\" role=\"tablist\" aria-multiselectable=\"true\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: 'ElCollapse',\r\n\r\n    componentName: 'ElCollapse',\r\n\r\n    props: {\r\n      accordion: Boolean,\r\n      value: {\r\n        type: [Array, String, Number],\r\n        default() {\r\n          return [];\r\n        }\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        activeNames: [].concat(this.value)\r\n      };\r\n    },\r\n\r\n    provide() {\r\n      return {\r\n        collapse: this\r\n      };\r\n    },\r\n\r\n    watch: {\r\n      value(value) {\r\n        this.activeNames = [].concat(value);\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      setActiveNames(activeNames) {\r\n        activeNames = [].concat(activeNames);\r\n        let value = this.accordion ? activeNames[0] : activeNames;\r\n        this.activeNames = activeNames;\r\n        this.$emit('input', value);\r\n        this.$emit('change', value);\r\n      },\r\n      handleItemClick(item) {\r\n        if (this.accordion) {\r\n          this.setActiveNames(\r\n            (this.activeNames[0] || this.activeNames[0] === 0) &&\r\n            this.activeNames[0] === item.name\r\n              ? '' : item.name\r\n          );\r\n        } else {\r\n          let activeNames = this.activeNames.slice(0);\r\n          let index = activeNames.indexOf(item.name);\r\n\r\n          if (index > -1) {\r\n            activeNames.splice(index, 1);\r\n          } else {\r\n            activeNames.push(item.name);\r\n          }\r\n          this.setActiveNames(activeNames);\r\n        }\r\n      }\r\n    },\r\n\r\n    created() {\r\n      this.$on('item-click', this.handleItemClick);\r\n    }\r\n  };\r\n</script>\r\n<style scoped>\r\n  .el_collapse {\r\n    /*border-top: 1px solid #EBEEF5;*/\r\n    /*border-bottom: 1px solid #EBEEF5;*/\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./collapse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./collapse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./collapse.vue?vue&type=template&id=78017b3e&scoped=true&\"\nimport script from \"./collapse.vue?vue&type=script&lang=js&\"\nexport * from \"./collapse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collapse.vue?vue&type=style&index=0&id=78017b3e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78017b3e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"el-collapse-item\",class:{'is-active': _vm.isActive, 'is-disabled': _vm.disabled }},[_c('div',{attrs:{\"role\":\"tab\",\"aria-expanded\":_vm.isActive,\"aria-controls\":(\"el-collapse-content-\" + _vm.id),\"aria-describedby\":(\"el-collapse-content-\" + _vm.id)}},[_c('div',{staticClass:\"el-collapse-item__header2\",class:{\n        'focusing': _vm.focusing,\n        'is-active': _vm.isActive,\n        'borderBottom': !_vm.isLast\n      },staticStyle:{\"padding-left\":\"23px\",\"font-size\":\"14px\"},attrs:{\"role\":\"button\",\"id\":(\"el-collapse-head-\" + _vm.id),\"tabindex\":_vm.disabled ? undefined : 0},on:{\"click\":_vm.handleHeaderClick,\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.stopPropagation();return _vm.handleEnterClick($event)},\"focus\":_vm.handleFocus,\"blur\":function($event){_vm.focusing = false}}},[_vm._t(\"title\",[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"el-collapse-item__arrow2\",class:{'is-active': _vm.isActive}})],2)]),_c('el-collapse-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isActive),expression:\"isActive\"}],staticClass:\"el-collapse-item__wrap2\",attrs:{\"role\":\"tabpanel\",\"aria-hidden\":!_vm.isActive,\"aria-labelledby\":(\"el-collapse-head-\" + _vm.id),\"id\":(\"el-collapse-content-\" + _vm.id)}},[_c('div',{staticClass:\"el-collapse-item__content2\"},[_vm._t(\"default\")],2)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { addClass, removeClass } from '../utils/dom';\r\n\r\nlet Transition = function () {\r\n  return {\r\n    beforeEnter(el) {\r\n      addClass(el, 'collapse-transition');\r\n      if (!el.dataset) el.dataset = {};\r\n\r\n      el.dataset.oldPaddingTop = el.style.paddingTop;\r\n      el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n\r\n      el.style.height = '0';\r\n      el.style.paddingTop = 0;\r\n      el.style.paddingBottom = 0;\r\n    },\r\n\r\n    enter(el) {\r\n      el.dataset.oldOverflow = el.style.overflow;\r\n      if (el.scrollHeight !== 0) {\r\n        el.style.height = el.scrollHeight + 'px';\r\n        el.style.paddingTop = el.dataset.oldPaddingTop;\r\n        el.style.paddingBottom = el.dataset.oldPaddingBottom;\r\n      } else {\r\n        el.style.height = '';\r\n        el.style.paddingTop = el.dataset.oldPaddingTop;\r\n        el.style.paddingBottom = el.dataset.oldPaddingBottom;\r\n      }\r\n\r\n      el.style.overflow = 'hidden';\r\n    },\r\n\r\n    afterEnter(el) {\r\n      // for safari: remove class then reset height is necessary\r\n      el.style.height = '';\r\n      el.style.overflow = el.dataset.oldOverflow;\r\n    },\r\n\r\n    beforeLeave(el) {\r\n      if (!el.dataset) el.dataset = {};\r\n      el.dataset.oldPaddingTop = el.style.paddingTop;\r\n      el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n      el.dataset.oldOverflow = el.style.overflow;\r\n\r\n      el.style.height = el.scrollHeight + 'px';\r\n      el.style.overflow = 'hidden';\r\n    },\r\n\r\n    leave(el) {\r\n      if (el.scrollHeight !== 0) {\r\n        // for safari: add class after set height, or it will jump to zero height suddenly, weired\r\n        addClass(el, 'collapse-transition');\r\n        el.style.height = 0;\r\n        el.style.paddingTop = 0;\r\n        el.style.paddingBottom = 0;\r\n      }\r\n    },\r\n\r\n    afterLeave(el) {\r\n      removeClass(el, 'collapse-transition');\r\n      el.style.height = '';\r\n      el.style.overflow = el.dataset.oldOverflow;\r\n      el.style.paddingTop = el.dataset.oldPaddingTop;\r\n      el.style.paddingBottom = el.dataset.oldPaddingBottom;\r\n    }\r\n  }\r\n\r\n};\r\n\r\nexport default {\r\n  name: 'ElCollapseTransition',\r\n  functional: true,\r\n  render(h, { children }) {\r\n    const data = {\r\n      on: new Transition()\r\n    };\r\n\r\n    return h('transition', data, children);\r\n  }\r\n};\r\n","<template>\r\n  <div class=\"el-collapse-item\"\r\n    :class=\"{'is-active': isActive, 'is-disabled': disabled }\">\r\n    <div\r\n      role=\"tab\"\r\n      :aria-expanded=\"isActive\"\r\n      :aria-controls=\"`el-collapse-content-${id}`\"\r\n      :aria-describedby =\"`el-collapse-content-${id}`\"\r\n    >\r\n      <div\r\n        class=\"el-collapse-item__header2\"\r\n        @click=\"handleHeaderClick\"\r\n        role=\"button\"\r\n        style=\"padding-left: 23px; font-size: 14px\"\r\n        :id=\"`el-collapse-head-${id}`\"\r\n        :tabindex=\"disabled ? undefined : 0\"\r\n        @keyup.space.enter.stop=\"handleEnterClick\"\r\n        :class=\"{\r\n          'focusing': focusing,\r\n          'is-active': isActive,\r\n          'borderBottom': !isLast\r\n        }\"\r\n        @focus=\"handleFocus\"\r\n        @blur=\"focusing = false\"\r\n      >\r\n        <slot name=\"title\">{{title}}</slot>\r\n        <div\r\n          class=\"el-collapse-item__arrow2\"\r\n          :class=\"{'is-active': isActive}\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <el-collapse-transition>\r\n      <div\r\n        class=\"el-collapse-item__wrap2\"\r\n        v-show=\"isActive\"\r\n        role=\"tabpanel\"\r\n        :aria-hidden=\"!isActive\"\r\n        :aria-labelledby=\"`el-collapse-head-${id}`\"\r\n        :id=\"`el-collapse-content-${id}`\"\r\n      >\r\n        <div class=\"el-collapse-item__content2\">\r\n          <slot></slot>\r\n        </div>\r\n      </div>\r\n    </el-collapse-transition>\r\n  </div>\r\n</template>\r\n<script>\r\n  import ElCollapseTransition from '../transitions/collapse-transition';\r\n  // import ElCollapseTransition from 'element-ui/lib/transitions/collapse-transition';\r\n  import Emitter from '../mixins/emitter';\r\n  import { generateId } from '../utils/util';\r\n\r\n  export default {\r\n    name: 'ElCollapseItem',\r\n\r\n    componentName: 'ElCollapseItem',\r\n\r\n    mixins: [Emitter],\r\n\r\n    components: { ElCollapseTransition },\r\n\r\n    data() {\r\n      return {\r\n        contentWrapStyle: {\r\n          height: 'auto',\r\n          display: 'block'\r\n        },\r\n        contentHeight: 0,\r\n        focusing: false,\r\n        isClick: false,\r\n        id: generateId()\r\n      };\r\n    },\r\n\r\n    inject: ['collapse'],\r\n\r\n    props: {\r\n      title: String,\r\n      name: {\r\n        type: [String, Number],\r\n        default() {\r\n          return this._uid;\r\n        }\r\n      },\r\n      isLast: Boolean,\r\n      disabled: Boolean\r\n    },\r\n\r\n    computed: {\r\n      isActive() {\r\n        return this.collapse.activeNames.indexOf(this.name) > -1;\r\n      },\r\n      getContentDom() {\r\n        return document.getElementById('el-collapse-content-' + this.id);\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      handleFocus() {\r\n        setTimeout(() => {\r\n          if (!this.isClick) {\r\n            this.focusing = true;\r\n          } else {\r\n            this.isClick = false;\r\n          }\r\n        }, 50);\r\n      },\r\n      handleHeaderClick() {\r\n        if (this.disabled) return;\r\n        this.dispatch('ElCollapse', 'item-click', this);\r\n        this.focusing = false;\r\n        this.isClick = true;\r\n      },\r\n      handleEnterClick() {\r\n        this.dispatch('ElCollapse', 'item-click', this);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style scoped>\r\n  .el-collapse-item__header2 {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 32px;\r\n    line-height: 32px;\r\n    background-color: #999;\r\n    color: white;\r\n    cursor: pointer;\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n    transition: border-bottom-color .3s;\r\n    outline: 0;\r\n    padding-left: 10px;\r\n  }\r\n  .borderBottom {\r\n    border-bottom: 1px solid #ddd;\r\n  }\r\n\r\n  ·is-active {\r\n    border-bottom-color: transparent;\r\n  }\r\n\r\n  .el-collapse-item__arrow2.is-active {\r\n    transform: rotate(90deg);\r\n  }\r\n\r\n .el-collapse-item__arrow2 {\r\n   margin: 0 8px 0 auto;\r\n   /*width: 40px;*/\r\n   /*height: 40px;*/\r\n   transition: .3s;\r\n\r\n   border-left:solid 8px white;\r\n   border-top:solid 6px rgba(0,0,0,0);\r\n   border-bottom:solid 6px rgba(0,0,0,0);\r\n }\r\n\r\n  .el-collapse-item__wrap2 {\r\n    will-change: height;\r\n    background-color: #FFF;\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n    /*border-bottom: 1px solid #ddd;*/\r\n    transition: height 0.3s ease-in-out;\r\n  }\r\n\r\n  .el-collapse-item__content2 {\r\n    padding-bottom: 10px;\r\n    font-size: 13px;\r\n    color: #303133;\r\n    background-color: #fff;\r\n    line-height: 1.769230769230769;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./collapse-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./collapse-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./collapse-item.vue?vue&type=template&id=77c4d461&scoped=true&\"\nimport script from \"./collapse-item.vue?vue&type=script&lang=js&\"\nexport * from \"./collapse-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collapse-item.vue?vue&type=style&index=0&id=77c4d461&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77c4d461\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"0 10px\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectCount == 0),expression:\"selectCount == 0\"}],staticClass:\"itemProperty\",attrs:{\"id\":\"placeHolderDiv\"}},[_c('p',{staticStyle:{\"text-indent\":\"3em\"}},[_vm._v(\"请在地图上选择要编辑的元素\")]),_c('p',{staticStyle:{\"text-indent\":\"3em\"}},[_vm._v(\"(按住shift键可以选择多个元素)\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectCount == 1),expression:\"selectCount == 1\"}],attrs:{\"id\":\"propertiesSingleDiv\"}},[_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"所在图层\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.onChangeItemsLayer},model:{value:(_vm.layerVal),callback:function ($$v) {_vm.layerVal=$$v},expression:\"layerVal\"}},_vm._l((_vm.layerOptions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"元素名称\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入元素名称\",\"autosize\":{ minRows: 1, maxRows: 2},\"clearable\":\"\"},on:{\"input\":_vm.onInputMeshesName,\"change\":_vm.onInputMeshesNameEnd},model:{value:(_vm.inputName),callback:function ($$v) {_vm.inputName=$$v},expression:\"inputName\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"元素高度\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{attrs:{\"type\":\"text\",\"id\":\"eleHeight\",\"numberOnly\":true},on:{\"input\":_vm.onInputMeshesHeight,\"change\":_vm.onInputMeshesHeightEnd},model:{value:(_vm.inputHeight),callback:function ($$v) {_vm.inputHeight=$$v},expression:\"inputHeight\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"标注高度\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{attrs:{\"type\":\"text\",\"id\":\"eleTxtHeight\",\"numberOnly\":true},on:{\"input\":_vm.onInputTxtHeight,\"change\":_vm.onInputTxtHeightEnd},model:{value:(_vm.inputTxtHeight),callback:function ($$v) {_vm.inputTxtHeight=$$v},expression:\"inputTxtHeight\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"填充样式\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"eleFillColor\",attrs:{\"colorAlphaEnabled\":true},on:{\"colorChange\":function($event){return _vm.updateMeshesColor($event, false)},\"colorChangeEnd\":_vm.updateMeshesColorEnd},model:{value:(_vm.inputFillColor),callback:function ($$v) {_vm.inputFillColor=$$v},expression:\"inputFillColor\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"线框样式\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"eleLineColor\",attrs:{\"colorEnabled\":true},on:{\"colorChange\":function($event){return _vm.updateMeshesColor($event, true)},\"colorChangeEnd\":_vm.updateOutlinesColorEnd},model:{value:(_vm.inputLineColor),callback:function ($$v) {_vm.inputLineColor=$$v},expression:\"inputLineColor\"}})],1)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectCount > 1),expression:\"selectCount > 1\"}],attrs:{\"id\":\"propertiesMultiDiv\"}},[_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"所在图层\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.onChangeItemsLayer},model:{value:(_vm.layerVal),callback:function ($$v) {_vm.layerVal=$$v},expression:\"layerVal\"}},_vm._l((_vm.layerOptions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"元素名称\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入元素名称\",\"autosize\":{ minRows: 1, maxRows: 2},\"clearable\":\"\"},on:{\"input\":_vm.onInputMeshesName,\"change\":_vm.onInputMeshesNameEnd},model:{value:(_vm.inputName),callback:function ($$v) {_vm.inputName=$$v},expression:\"inputName\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"元素高度\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{attrs:{\"id\":\"elesHeight\",\"numberOnly\":true},on:{\"input\":_vm.onInputMeshesHeight,\"change\":_vm.onInputMeshesHeightEnd},model:{value:(_vm.inputHeight),callback:function ($$v) {_vm.inputHeight=$$v},expression:\"inputHeight\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"标注高度\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"elesTxtHeight\",attrs:{\"numberOnly\":true},on:{\"input\":_vm.onInputTxtHeight,\"change\":_vm.onInputTxtHeightEnd},model:{value:(_vm.inputTxtHeight),callback:function ($$v) {_vm.inputTxtHeight=$$v},expression:\"inputTxtHeight\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"填充样式\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"elesFillColor\",attrs:{\"colorAlphaEnabled\":true},on:{\"colorChange\":function($event){return _vm.updateMeshesColor($event, false)},\"colorChangeEnd\":_vm.updateMeshesColorEnd},model:{value:(_vm.inputFillColor),callback:function ($$v) {_vm.inputFillColor=$$v},expression:\"inputFillColor\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"线框样式\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"elesLineColor\",attrs:{\"colorEnabled\":true},on:{\"colorChange\":function($event){return _vm.updateMeshesColor($event, true)},\"colorChangeEnd\":_vm.updateOutlinesColorEnd},model:{value:(_vm.inputLineColor),callback:function ($$v) {_vm.inputLineColor=$$v},expression:\"inputLineColor\"}})],1)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectCount == -1),expression:\"selectCount == -1\"}],attrs:{\"id\":\"propertiesRef\"}},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"图片位置\")]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"x: \")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"refPosX\",attrs:{\"clearable\":\"\"},on:{\"input\":_vm.updateRefPos},model:{value:(_vm.refPosX),callback:function ($$v) {_vm.refPosX=$$v},expression:\"refPosX\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"y: \")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"refPosY\",attrs:{\"clearable\":\"\"},on:{\"input\":_vm.updateRefPos},model:{value:(_vm.refPosY),callback:function ($$v) {_vm.refPosY=$$v},expression:\"refPosY\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"z: \")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"refPosZ\",attrs:{\"clearable\":\"\"},on:{\"input\":_vm.updateRefPos},model:{value:(_vm.refPosZ),callback:function ($$v) {_vm.refPosZ=$$v},expression:\"refPosZ\"}})],1)]),_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"图片缩放\")]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"缩放 x: \")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"refScaleX\",attrs:{\"clearable\":\"\"},on:{\"input\":_vm.updateRefScale,\"clear\":_vm.clearRefScaleX},model:{value:(_vm.refScaleX),callback:function ($$v) {_vm.refScaleX=$$v},expression:\"refScaleX\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"缩放 y: \")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"refScaleY\",attrs:{\"clearable\":\"\"},on:{\"input\":_vm.updateRefScale,\"clear\":_vm.clearRefScaleY},model:{value:(_vm.refScaleY),callback:function ($$v) {_vm.refScaleY=$$v},expression:\"refScaleY\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"旋转图片: \")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"refRotateZ\",attrs:{\"clearable\":\"\"},on:{\"input\":_vm.updateRefRotation},model:{value:(_vm.refRotateZ),callback:function ($$v) {_vm.refRotateZ=$$v},expression:\"refRotateZ\"}})],1),_c('span',[_vm._v(\"°\")])]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"透明度: \")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"refAlpha\",attrs:{\"clearable\":\"\"},on:{\"input\":_vm.updateRefAlpha,\"clear\":_vm.clearRefAlpha},model:{value:(_vm.refAlpha),callback:function ($$v) {_vm.refAlpha=$$v},expression:\"refAlpha\"}})],1)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectCount == -2),expression:\"selectCount == -2\"}],attrs:{\"id\":\"propertiesMarkers\"}},[_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"所在图层\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.onChangeMarkersLayer},model:{value:(_vm.layerVal),callback:function ($$v) {_vm.layerVal=$$v},expression:\"layerVal\"}},_vm._l((_vm.layerOptions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"标注内容\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入标注内容\",\"autosize\":{ minRows: 1, maxRows: 2},\"clearable\":\"\"},on:{\"input\":_vm.onInputMarkersName},model:{value:(_vm.inputName),callback:function ($$v) {_vm.inputName=$$v},expression:\"inputName\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"标注高度\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"elesTxtHeight\",attrs:{\"numberOnly\":true},on:{\"input\":_vm.onInputMarkersHeight},model:{value:(_vm.inputTxtHeight),callback:function ($$v) {_vm.inputTxtHeight=$$v},expression:\"inputTxtHeight\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"文本颜色\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"markerTxtColor\",attrs:{\"colorEnabled\":true},on:{\"colorChange\":function($event){return _vm.updateMarkersColor($event, false)}},model:{value:(_vm.textColor),callback:function ($$v) {_vm.textColor=$$v},expression:\"textColor\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"轮廓颜色\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"markerOutlineColor\",attrs:{\"colorEnabled\":true},on:{\"colorChange\":function($event){return _vm.updateMarkersColor($event, true)}},model:{value:(_vm.textOutlineColor),callback:function ($$v) {_vm.textOutlineColor=$$v},expression:\"textOutlineColor\"}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"padding: 0 10px\">\r\n    <div id=\"placeHolderDiv\" class=\"itemProperty\" v-show=\"selectCount == 0\">\r\n      <p style=\"text-indent: 3em;\">请在地图上选择要编辑的元素</p>\r\n      <p style=\"text-indent: 3em;\">(按住shift键可以选择多个元素)</p>\r\n    </div>\r\n    <div id=\"propertiesSingleDiv\" v-show=\"selectCount == 1\">\r\n<!--      <div class=\"itemProperty\">-->\r\n<!--        <div class=\"itemPropertyLabel\" >元素ID</div>-->\r\n<!--        <div class=\"inputWidth\">-->\r\n<!--          <el-input type=\"text\" id=\"eleId\" v-model=\"inputId\" :readonly=\"true\"/>-->\r\n<!--        </div>-->\r\n<!--      </div>-->\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >所在图层</div>\r\n        <el-select v-model=\"layerVal\" placeholder=\"请选择\" @change=\"onChangeItemsLayer\">\r\n          <el-option\r\n                  v-for=\"item in layerOptions\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >元素名称</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input type=\"textarea\" placeholder=\"请输入元素名称\" v-model=\"inputName\"\r\n                    :autosize=\"{ minRows: 1, maxRows: 2}\" @input=\"onInputMeshesName\"\r\n                    @change=\"onInputMeshesNameEnd\"\r\n                    clearable/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >元素高度</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input type=\"text\" id=\"eleHeight\"  v-model=\"inputHeight\" @input=\"onInputMeshesHeight\"\r\n                    @change=\"onInputMeshesHeightEnd\" :numberOnly=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >标注高度</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input type=\"text\" id=\"eleTxtHeight\"  v-model=\"inputTxtHeight\" @input=\"onInputTxtHeight\"\r\n                    @change=\"onInputTxtHeightEnd\" :numberOnly=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >填充样式</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"eleFillColor\" v-model=\"inputFillColor\" @colorChange=\"updateMeshesColor($event, false)\"\r\n                    @colorChangeEnd=\"updateMeshesColorEnd\"\r\n                    :colorAlphaEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >线框样式</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"eleLineColor\" v-model=\"inputLineColor\" @colorChange=\"updateMeshesColor($event, true)\"\r\n                    @colorChangeEnd=\"updateOutlinesColorEnd\"\r\n                    :colorEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div id=\"propertiesMultiDiv\" v-show=\"selectCount > 1\">\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >所在图层</div>\r\n        <el-select v-model=\"layerVal\" placeholder=\"请选择\" @change=\"onChangeItemsLayer\">\r\n          <el-option\r\n                  v-for=\"item in layerOptions\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >元素名称</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input type=\"text\" placeholder=\"请输入元素名称\" v-model=\"inputName\"\r\n                    :autosize=\"{ minRows: 1, maxRows: 2}\" @input=\"onInputMeshesName\" @change=\"onInputMeshesNameEnd\"\r\n                    clearable/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >元素高度</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input id=\"elesHeight\"  v-model=\"inputHeight\" @input=\"onInputMeshesHeight\" @change=\"onInputMeshesHeightEnd\"\r\n                    :numberOnly=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >标注高度</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"elesTxtHeight\"  v-model=\"inputTxtHeight\" @input=\"onInputTxtHeight\" @change=\"onInputTxtHeightEnd\"\r\n                    :numberOnly=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >填充样式</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"elesFillColor\" v-model=\"inputFillColor\" @colorChange=\"updateMeshesColor($event, false)\"\r\n                    @colorChangeEnd=\"updateMeshesColorEnd\"\r\n                    :colorAlphaEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >线框样式</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"elesLineColor\" v-model=\"inputLineColor\" @colorChange=\"updateMeshesColor($event, true)\"\r\n                    @colorChangeEnd=\"updateOutlinesColorEnd\"\r\n                    :colorEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div id=\"propertiesRef\" v-show=\"selectCount == -1\">\r\n      <div class=\"itemPropertyLabel\" >图片位置</div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >x: </div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"refPosX\" v-model=\"refPosX\" @input=\"updateRefPos\" clearable/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >y: </div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"refPosY\" v-model=\"refPosY\" @input=\"updateRefPos\" clearable/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >z: </div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"refPosZ\" v-model=\"refPosZ\" @input=\"updateRefPos\" clearable/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemPropertyLabel\" >图片缩放</div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >缩放 x: </div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"refScaleX\" v-model=\"refScaleX\" @input=\"updateRefScale\" @clear=\"clearRefScaleX\" clearable/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >缩放 y: </div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"refScaleY\" v-model=\"refScaleY\" @input=\"updateRefScale\" @clear=\"clearRefScaleY\" clearable/>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >旋转图片: </div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"refRotateZ\" v-model=\"refRotateZ\" @input=\"updateRefRotation\" clearable/>\r\n        </div>\r\n        <span>°</span>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >透明度: </div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"refAlpha\" v-model=\"refAlpha\" @input=\"updateRefAlpha\" @clear=\"clearRefAlpha\" clearable/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div id=\"propertiesMarkers\" v-show=\"selectCount == -2\">\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >所在图层</div>\r\n        <el-select v-model=\"layerVal\" placeholder=\"请选择\" @change=\"onChangeMarkersLayer\">\r\n          <el-option\r\n            v-for=\"item in layerOptions\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >标注内容</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input type=\"text\" placeholder=\"请输入标注内容\" v-model=\"inputName\"\r\n                    :autosize=\"{ minRows: 1, maxRows: 2}\" @input=\"onInputMarkersName\"\r\n                    clearable/>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >标注高度</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"elesTxtHeight\"  v-model=\"inputTxtHeight\" @input=\"onInputMarkersHeight\"\r\n                    :numberOnly=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >文本颜色</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"markerTxtColor\" v-model=\"textColor\" @colorChange=\"updateMarkersColor($event, false)\"\r\n                    :colorEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"itemProperty\">\r\n        <div class=\"itemPropertyLabel\" >轮廓颜色</div>\r\n        <div class=\"inputWidth\">\r\n          <el-input ref=\"markerOutlineColor\" v-model=\"textOutlineColor\" @colorChange=\"updateMarkersColor($event, true)\"\r\n                    :colorEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ElInput from '@/components/element/input';\r\n  import ElSelect from '@/components/element/select';\r\n  import ElOption from '@/components/element/select/src/option';\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import History from \"../../../3d/js/undo/History\";\r\n  import Layers from \"../../../3d/js/Layers\";\r\n  import checkNumber from \"../../element/input/src/checkNumber\";\r\n  import Common from \"../../../3d/js/util/Common\";\r\n  import Config from \"../../../3d/js/configurable/Config\";\r\n  import option from \"../../element/select/src/option\";\r\n\r\n  let obj = {\r\n    name: \"BoxSelectedGraphic\",\r\n    data() {\r\n      return {\r\n        inputId: '',\r\n        inputName: '',\r\n        inputHeight: '',\r\n        inputTxtHeight: '',\r\n        inputFillColor: 'FFCC00 0.5',\r\n        inputLineColor: 'FFCC00',\r\n        textColor: 'FFCC00',\r\n        textOutlineColor: 'FFCC00',\r\n        selectCount: 0,\r\n        //---- ref\r\n        refPosX: 0,\r\n        refPosY: 0,\r\n        refPosZ: 0,\r\n        refScaleX: 1,\r\n        refScaleY: 1,\r\n        refRotateZ: 0,\r\n        refAlpha: 1,\r\n        numInvalidInfo: \"请输入正确的数字\",\r\n        //---- layer\r\n        layerOptions: [],\r\n        layerVal: null,\r\n        //---- undo\r\n        undoObj: {},\r\n        dirtyName: false\r\n      }\r\n    },\r\n    mounted() {\r\n      let scene = MainScene.scene();\r\n      let _this = this;\r\n      scene.addEventListener('selectedCountChange', () => {\r\n        if (_this.dirtyName) {\r\n          _this.onInputMeshesNameEnd();\r\n        }\r\n        let meshLst = MainScene.polgyonTool().getSelectedMeshes();\r\n        _this.selectCount = meshLst.length;\r\n        if (meshLst.length == 0) {\r\n          return;\r\n        }\r\n        let mesh = meshLst[0];\r\n        _this.inputId = mesh.uuid;\r\n        _this.inputName = mesh.holder.getName();\r\n        if (meshLst.length > 1) {\r\n          _this.inputName = \"{xxx}\";\r\n        }\r\n        _this.inputHeight = mesh.holder.getHeight();\r\n        _this.inputTxtHeight = mesh.holder.getTextHeight();\r\n        _this.inputFillColor = mesh.material.color.getHexString().toUpperCase() + ' ' + mesh.material.opacity;\r\n        _this.inputLineColor = mesh.holder.getOutlines()[0].material.color.getHexString().toUpperCase();\r\n        _this.undoObj.preTextHeight = _this.inputTxtHeight;\r\n        _this.undoObj.preHeight = _this.inputHeight;\r\n        if (_this.layerOptions.length == 0) {\r\n          _this.layerOptions = Layers.getSelectableLayers().map(it => Common.convertLayerObj(it));\r\n        }\r\n        let layerGroup = Layers.getObjLayer(mesh);\r\n        if (layerGroup.layerId != undefined)\r\n          _this.layerVal = layerGroup.layerId;\r\n        // console.log(\"selectedCountChange: \", this.inputFillColor);\r\n\r\n        if (meshLst.length == 1) {\r\n          _this.$refs.eleFillColor.updateColor(_this.inputFillColor);\r\n          _this.$refs.eleLineColor.updateColor(_this.inputLineColor);\r\n        } else {\r\n          _this.$refs.elesFillColor.updateColor(_this.inputFillColor);\r\n          _this.$refs.elesLineColor.updateColor(_this.inputLineColor);\r\n        }\r\n        _this.setUndoObj(meshLst);\r\n      } );\r\n      scene.addEventListener('refItemSelect', (evt) => {\r\n        _this.selectCount = -1;\r\n        // console.log('refItemSelect, ', evt.item);\r\n        let mesh = evt.item;\r\n        if (!mesh) {\r\n          _this.selectCount = 0;\r\n        } else {\r\n          _this.selectCount = -1;\r\n          _this.refPosX = mesh.position.x;\r\n          _this.refPosY = mesh.position.y;\r\n          _this.refPosZ = mesh.position.z;\r\n          _this.refScaleX = mesh.scale.x;\r\n          _this.refScaleY = mesh.scale.y;\r\n          _this.refRotateZ = mesh.rotation.z * 180 / Math.PI;\r\n          _this.refAlpha = mesh.material.opacity;\r\n        }\r\n      });\r\n      scene.addEventListener('markers select change', () => {\r\n        let markers = MainScene.markerTool().selectedMarkers();\r\n        if (markers.length == 0) {\r\n          return;\r\n        }\r\n        _this.selectCount = -2;\r\n        let marker = markers[0];\r\n        _this.inputName = marker.holder.text();\r\n        _this.inputTxtHeight = marker.holder.getTextHeight();\r\n        let layerGroup = Layers.getObjLayer(marker);\r\n        if (layerGroup.layerId != undefined)\r\n          _this.layerVal = layerGroup.layerId;\r\n\r\n        let option = marker.holder.getOption();\r\n        _this.textColor = option.textColor.toUpperCase().substr(1);\r\n        _this.textOutlineColor = option.outlineColor.toUpperCase().substr(1);\r\n        _this.$refs.markerTxtColor.updateColor(_this.textColor);\r\n        _this.$refs.markerOutlineColor.updateColor(_this.textOutlineColor);\r\n      });\r\n\r\n      scene.addEventListener('layers changed', () => {\r\n        _this.layerOptions = Layers.getSelectableLayers().map(it => Common.convertLayerObj(it));\r\n      });\r\n    },\r\n    methods: {\r\n      onInputMarkersName(val) {\r\n        MainScene.markerTool().unifyMarkersName(val);\r\n      },\r\n      onInputMeshesName(val) {\r\n        this.dirtyName = true;\r\n        MainScene.polgyonTool().updateNameByRule(val);\r\n      },\r\n      onInputMeshesNameEnd() {\r\n        this.dirtyName = false;\r\n        let undo = this.undoObj;\r\n        let undoContext = {meshes: undo.meshes, texts: undo.names,\r\n          unifyText: this.inputName, preText: undo.preText};\r\n        History.addAction(\"unify models names\", undoContext);\r\n\r\n        if (undo.meshes.length > 1)\r\n          undo.preText = this.inputName;\r\n      },\r\n      onInputMeshesHeightEnd(val) {\r\n        if ( !checkNumber(val) ) {\r\n          return;\r\n        }\r\n        let heightVal = parseFloat(val);\r\n        let undo = this.undoObj;\r\n        if (heightVal == undo.preHeight)\r\n          return;\r\n        let undoContext = {meshes: undo.meshes, heights: undo.heights,\r\n          unifyHeight: heightVal, preHeight: undo.preHeight};\r\n        History.addAction(\"unify models height\", undoContext);\r\n\r\n        undo.preHeight = heightVal;\r\n      },\r\n      onInputTxtHeightEnd(val) {\r\n        if ( !checkNumber(val) ) {\r\n          return;\r\n        }\r\n        let heightVal = parseFloat(val);\r\n        let undo = this.undoObj;\r\n        if (heightVal == undo.preTextHeight)\r\n          return;\r\n        let undoContext = {meshes: undo.meshes, textHeights: undo.textHeights,\r\n          unifyTextHeight: heightVal, preTextHeight: undo.preTextHeight};\r\n        History.addAction(\"unify models text height\", undoContext);\r\n\r\n        undo.preTextHeight = heightVal;\r\n      },\r\n      onInputMeshesHeight(val) {\r\n        let heightVal = parseFloat(val);\r\n        let meshLst = MainScene.polgyonTool().getSelectedMeshes();\r\n        if (isNaN(heightVal) || (meshLst.length == 0 && heightVal <= 0) ) {\r\n          return;\r\n        }\r\n        let txtHeight = heightVal + Config.ui.txtHeightExtra;\r\n        this.inputTxtHeight = txtHeight.toFixed(2);\r\n        meshLst.forEach(mesh => {\r\n          mesh.holder.setHeight(heightVal);\r\n          mesh.holder.setTextHeight(txtHeight);\r\n        });\r\n      },\r\n      onInputTxtHeight(val) {\r\n        let heightVal = parseFloat(val);\r\n        let meshLst = MainScene.polgyonTool().getSelectedMeshes();\r\n        if (isNaN(heightVal) || (meshLst.length == 0 && heightVal <= 0)) {\r\n          return;\r\n        }\r\n        meshLst.forEach(mesh => mesh.holder.setTextHeight(heightVal));\r\n      },\r\n      onInputMarkersHeight(val) {\r\n        let heightVal = parseFloat(val);\r\n        let markers = MainScene.markerTool().selectedMarkers();\r\n        if (isNaN(heightVal) || (markers.length == 0 && heightVal <= 0)) {\r\n          return;\r\n        }\r\n        markers.forEach(marker => marker.holder.setTextHeight(heightVal));\r\n      },\r\n      updateMarkersColor(jscolor, updateOutline) {\r\n        let markers = MainScene.markerTool().selectedMarkers();\r\n        let arr = jscolor.toString().split(' ');\r\n        // let color = parseInt('0x' + arr[0]), opacity = arr[1];\r\n        markers.forEach(marker => {\r\n          let holder = marker.holder;\r\n          let option = holder.getOption();\r\n          if (updateOutline) {\r\n            option.outlineColor = '#' + arr[0];\r\n          } else {\r\n            option.textColor = '#' + arr[0];\r\n          }\r\n          holder.updateText(holder.text(), option);\r\n        });\r\n      },\r\n      updateMeshesColor(jscolor, updateOutline) {\r\n        // console.log(\"updateMeshesColor\", jscolor, updateOutline);\r\n        let meshLst = MainScene.polgyonTool().getSelectedMeshes();\r\n        let arr = jscolor.toString().split(' ');\r\n        let color = parseInt('0x' + arr[0]), opacity = arr[1];\r\n        // console.log(\"updateMeshesColor\", meshLst.length);\r\n        meshLst.forEach(mesh => {\r\n          if (updateOutline) {\r\n            let outlines = mesh.holder.getOutlines();\r\n            if (outlines) {\r\n              outlines.forEach(outline => outline.material.color.setHex(color) );\r\n            }\r\n          } else {\r\n            mesh.material.color.setHex(color);\r\n            mesh.material.opacity = opacity;\r\n            mesh.userData.bacOpacity = opacity;\r\n          }\r\n        });\r\n      },\r\n      setUndoObj(meshLst) {\r\n        let undo = this.undoObj;\r\n        undo.meshes = meshLst.slice();\r\n        undo.opacities = [], undo.colors = [], undo.lineColors = [], undo.names = [], undo.heights = [], undo.textHeights = [];\r\n        undo.preColor = null, undo.preOpacity = null, undo.preLineColor = null;\r\n        meshLst.forEach(mesh => {\r\n          undo.opacities.push(mesh.material.opacity);\r\n          undo.colors.push(mesh.material.color.clone() );\r\n          undo.lineColors.push(mesh.holder.getOutlines()[0].material.color.getHex() );\r\n          undo.names.push(mesh.holder.getName() );\r\n          undo.heights.push(mesh.holder.getHeight() );\r\n          undo.textHeights.push(mesh.holder.getTextHeight() );\r\n        });\r\n      },\r\n      updateMeshesColorEnd(jscolor) {\r\n        // console.log(\"updateMeshesColorEnd: \" + jscolor);\r\n        let arr = jscolor.toString().split(' ');\r\n        let color = parseInt('0x' + arr[0]), opacity = arr[1];\r\n        let undo = this.undoObj;\r\n        let undoContext = {meshes: undo.meshes, colors: undo.colors, opacities: undo.opacities,\r\n          unifyColor: color, unifyOpacity: opacity, preColor: undo.preColor, preOpacity: undo.preOpacity};\r\n        History.addAction(\"unify model fillcolors\", undoContext);\r\n\r\n        undo.preColor = color, undo.preOpacity = opacity;\r\n      },\r\n      updateOutlinesColorEnd(jscolor) {\r\n        let color = parseInt('0x' + jscolor);\r\n        let undo = this.undoObj;\r\n        let undoContext = {meshes: undo.meshes, lineColors: undo.lineColors,\r\n          unifyColor: color, preColor: undo.preLineColor};\r\n        History.addAction(\"unify model linecolors\", undoContext);\r\n\r\n        undo.preLineColor = color;\r\n      },\r\n      updateRefPos(val) {\r\n        let refMesh = MainScene.polgyonTool().getSelectedRef();\r\n        if (!refMesh) {\r\n          return;\r\n        }\r\n        refMesh.position.x = parseFloat(this.refPosX) || 0;\r\n        refMesh.position.y = parseFloat(this.refPosY) || 0;\r\n        refMesh.position.z = parseFloat(this.refPosZ) || 0;\r\n      },\r\n      updateRefScale(val) {\r\n        let refMesh = MainScene.polgyonTool().getSelectedRef();\r\n        if (!refMesh) {\r\n          return;\r\n        }\r\n        refMesh.scale.x = parseFloat(this.refScaleX);\r\n        refMesh.scale.y = parseFloat(this.refScaleY);\r\n      },\r\n      clearRefScaleX() {\r\n        let refMesh = MainScene.polgyonTool().getSelectedRef();\r\n        refMesh.scale.x = 1;\r\n        this.refScaleX = 1;\r\n      },\r\n      clearRefScaleY() {\r\n        let refMesh = MainScene.polgyonTool().getSelectedRef();\r\n        refMesh.scale.y = 1;\r\n        this.refScaleY = 1;\r\n      },\r\n      updateRefRotation(val) {\r\n        let refMesh = MainScene.polgyonTool().getSelectedRef();\r\n        if (!refMesh) {\r\n          return;\r\n        }\r\n        refMesh.rotation.z = (parseFloat(this.refRotateZ) || 0) /180 * Math.PI;\r\n      },\r\n      updateRefAlpha(val) {\r\n        let refMesh = MainScene.polgyonTool().getSelectedRef();\r\n        if (!refMesh) {\r\n          return;\r\n        }\r\n        refMesh.material.opacity = parseFloat(this.refAlpha);\r\n      },\r\n      clearRefAlpha() {\r\n        let refMesh = MainScene.polgyonTool().getSelectedRef();\r\n        refMesh.material.opacity = 1;\r\n        this.refAlpha = 1;\r\n      },\r\n      onChangeItemsLayer() {\r\n        let meshLst = MainScene.polgyonTool().getSelectedMeshes();\r\n        Layers.changeItemsLayer(meshLst, this.layerVal);\r\n      },\r\n      onChangeMarkersLayer() {\r\n        let markers = MainScene.markerTool().selectedMarkers();\r\n        Layers.changeMarkersLayer(markers, this.layerVal);\r\n      },\r\n    },\r\n    components: {\r\n      ElInput, ElSelect, ElOption\r\n    }\r\n  };\r\n  export default obj;\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxSelectedGraphics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxSelectedGraphics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxSelectedGraphics.vue?vue&type=template&id=81819406&scoped=true&\"\nimport script from \"./BoxSelectedGraphics.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxSelectedGraphics.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"81819406\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab\"},[_c('div',[_c('span',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"形状\")]),_c('square-buttons-group',{on:{\"change\":_vm.onClickAddPolygon},model:{value:(_vm.activeShape),callback:function ($$v) {_vm.activeShape=$$v},expression:\"activeShape\"}},[_c('square-button',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[0]),expression:\"tips[0]\",modifiers:{\"dark\":true}}],attrs:{\"icon-class\":\"iconjuxing\",\"value\":\"0\"}}),_c('square-button',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[1]),expression:\"tips[1]\",modifiers:{\"dark\":true}}],attrs:{\"icon-class\":\"iconyuanxing\",\"value\":\"1\"}}),_c('square-button',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[2]),expression:\"tips[2]\",modifiers:{\"dark\":true}}],attrs:{\"icon-class\":\"iconduobianxing\",\"value\":\"2\"}})],1)],1),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"元素高度\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{attrs:{\"numberOnly\":true},on:{\"input\":function($event){return _vm.onInputDefaultHeight($event)}},model:{value:(_vm.defaultHeight),callback:function ($$v) {_vm.defaultHeight=$$v},expression:\"defaultHeight\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"填充样式\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"fill\",attrs:{\"colorAlphaEnabled\":true},on:{\"colorChange\":_vm.updateDefaultFillColor},model:{value:(_vm.defaultFillColor),callback:function ($$v) {_vm.defaultFillColor=$$v},expression:\"defaultFillColor\"}})],1)]),_c('div',{staticClass:\"itemProperty\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"线框样式\")]),_c('div',{staticClass:\"inputWidth\"},[_c('el-input',{ref:\"line\",attrs:{\"colorEnabled\":true},on:{\"colorChange\":_vm.updateDefaultLineColor},model:{value:(_vm.defaultLineColor),callback:function ($$v) {_vm.defaultLineColor=$$v},expression:\"defaultLineColor\"}})],1)]),_c('div',[_c('input',{attrs:{\"type\":\"button\",\"value\":\"随机热力图\"},on:{\"click\":function($event){return _vm.onclickRandHeatmap()}}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"清除热力图\"},on:{\"click\":function($event){return _vm.onclickClearHeatmap()}}})]),_c('div',[_c('input',{attrs:{\"type\":\"button\",\"value\":\"选中元素应用热力图\"},on:{\"click\":function($event){return _vm.applyHeatmapToSelected()}}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"清除元素热力图\"},on:{\"click\":function($event){return _vm.unapplyHeatmapToSelected()}}})]),_c('div',[_c('input',{attrs:{\"type\":\"button\",\"value\":_vm.editHeatmapBtnText},on:{\"click\":function($event){return _vm.toggleHeatmapEdit()}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.heatmapStr),expression:\"heatmapStr\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.heatmapStr)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.heatmapStr=$event.target.value}}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"load\"},on:{\"click\":function($event){return _vm.loadHeatmap()}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"buttonsGroup\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"buttonsGroup\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"SquareButtonsGroup\",\r\n    componentName: \"SquareButtonsGroup\",\r\n    props: {\r\n      multi: Boolean,\r\n      value: {\r\n        type: [String, Number, Array],\r\n        default() {\r\n          return [];\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        activeNames: [].concat(this.value)\r\n      };\r\n    },\r\n    provide() {\r\n      return {\r\n        group: this\r\n      };\r\n    },\r\n    created() {\r\n      this.$on('itemClick', this.handleItemClick);\r\n    },\r\n    watch: {\r\n      value(value) {\r\n        this.activeNames = [].concat(value);\r\n      }\r\n    },\r\n    methods: {\r\n      setActiveNames(activeNames) {\r\n        activeNames = [].concat(activeNames);\r\n        let value = !this.multi ? activeNames[0] : activeNames;\r\n        this.activeNames = activeNames;\r\n        this.$emit('input', value);\r\n        this.$emit('change', value);\r\n      },\r\n\r\n      handleItemClick(item) {\r\n        // console.log(\"button group, handle click: \" + item.value);\r\n        if (!this.multi) {\r\n          this.setActiveNames(\r\n              item.value\r\n          );\r\n        } else {\r\n          let activeNames = this.activeNames.slice(0);\r\n          let index = activeNames.indexOf(item.value);\r\n\r\n          if (index > -1) {\r\n            activeNames.splice(index, 1);\r\n          } else {\r\n            activeNames.push(item.value);\r\n          }\r\n          this.setActiveNames(activeNames);\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .buttonsGroup {\r\n    display: inline-block;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SquareButtonsGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SquareButtonsGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SquareButtonsGroup.vue?vue&type=template&id=2d8dab4c&scoped=true&\"\nimport script from \"./SquareButtonsGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./SquareButtonsGroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SquareButtonsGroup.vue?vue&type=style&index=0&id=2d8dab4c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d8dab4c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"squareBtn iconfont\",class:[{'is-active': _vm.isActive}, _vm.iconClass],on:{\"click\":_vm.handleClick}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"squareBtn iconfont\"  :class=\"[{'is-active': isActive}, iconClass]\" @click=\"handleClick\">\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Emitter from '@/components/element/mixins/emitter'\r\n\r\n  export default {\r\n    name: \"SquareButton\",\r\n    mixins: [Emitter],\r\n\r\n    inject: ['group'],\r\n    props: {\r\n      iconClass: {\r\n        type: String,\r\n        default: 'iconjuxing'\r\n      },\r\n      value: {\r\n        type: [String, Number],\r\n        default() {\r\n          return this.iconClass;\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      isActive() {\r\n        // console.log(this.value)\r\n        return this.group.activeNames.indexOf(this.value) > -1;\r\n      }\r\n    },\r\n    methods: {\r\n      handleClick() {\r\n        this.$emit('itemClick', this);\r\n        this.dispatch('SquareButtonsGroup', 'itemClick', this);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .squareBtn {\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n    margin-right: 6px;\r\n    padding: 5px;\r\n    text-align: center;\r\n    font-size: 15px;\r\n    width: 36px;\r\n    height: 36px;\r\n    border: solid 1px silver;\r\n    color: black;\r\n    cursor: pointer;\r\n  }\r\n  .squareBtn:hover {\r\n    background-color: #999;\r\n    color: white;\r\n  }\r\n  .is-active {\r\n    background-color: var(--color-tint);\r\n    color: white;\r\n  }\r\n  .is-active:hover {\r\n    background-color: #2842dd;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SquareButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SquareButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SquareButton.vue?vue&type=template&id=07b07470&scoped=true&\"\nimport script from \"./SquareButton.vue?vue&type=script&lang=js&\"\nexport * from \"./SquareButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SquareButton.vue?vue&type=style&index=0&id=07b07470&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07b07470\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n<div class=\"boxInTab\">\r\n  <div>\r\n    <span class=\"itemPropertyLabel\">形状</span>\r\n    <square-buttons-group v-model=\"activeShape\" @change=\"onClickAddPolygon\">\r\n      <square-button icon-class=\"iconjuxing\" value=\"0\" v-tip.dark=\"tips[0]\"></square-button>\r\n      <square-button icon-class=\"iconyuanxing\" value=\"1\" v-tip.dark=\"tips[1]\"></square-button>\r\n      <square-button icon-class=\"iconduobianxing\" value=\"2\" v-tip.dark=\"tips[2]\"></square-button>\r\n\r\n    </square-buttons-group>\r\n  </div>\r\n\r\n  <div class=\"itemProperty\">\r\n    <div class=\"itemPropertyLabel\" >元素高度</div>\r\n    <div class=\"inputWidth\">\r\n      <el-input v-model=\"defaultHeight\" @input=\"onInputDefaultHeight($event)\" :numberOnly=\"true\"/>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"itemProperty\">\r\n    <div class=\"itemPropertyLabel\" >填充样式</div>\r\n    <div class=\"inputWidth\">\r\n      <el-input v-model=\"defaultFillColor\" @colorChange=\"updateDefaultFillColor\"\r\n                :colorAlphaEnabled=\"true\" ref=\"fill\"/>\r\n    </div>\r\n  </div>\r\n  <div class=\"itemProperty\">\r\n    <div class=\"itemPropertyLabel\" >线框样式</div>\r\n    <div class=\"inputWidth\">\r\n      <el-input v-model=\"defaultLineColor\" @colorChange=\"updateDefaultLineColor\"\r\n                :colorEnabled=\"true\" ref=\"line\"/>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <input type=\"button\" value=\"随机热力图\" @click=\"onclickRandHeatmap()\">\r\n    <input type=\"button\" value=\"清除热力图\" @click=\"onclickClearHeatmap()\">\r\n  </div>\r\n  <div>\r\n    <input type=\"button\" value=\"选中元素应用热力图\" @click=\"applyHeatmapToSelected()\">\r\n    <input type=\"button\" value=\"清除元素热力图\" @click=\"unapplyHeatmapToSelected()\">\r\n  </div>\r\n  <div>\r\n    <input type=\"button\" :value=\"editHeatmapBtnText\" @click=\"toggleHeatmapEdit()\">\r\n    <input type=\"text\" v-model=\"heatmapStr\">\r\n    <input type=\"button\" value=\"load\" @click=\"loadHeatmap()\">\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n  import SquareButtonsGroup from \"@/components/common/SquareButtonsGroup\";\r\n  import SquareButton from \"@/components/common/SquareButton\";\r\n  import ElInput from '@/components/element/input';\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import Layers from \"../../../3d/js/Layers\";\r\n  import * as M from \"../../../store/mutations-types\";\r\n\r\n  export default {\r\n    name: \"BoxDrawGraphic\",\r\n    mounted() {\r\n      // let defaultFillColor = document.getElementById('defaultFillColor');\r\n      // let defaultLineColor = document.getElementById('defaultLineColor');\r\n      // defaultFillColor.onFineChange = this.updateDefaultLineColor;\r\n      // defaultLineColor.onFineChange = this.updateDefaultLineColor;\r\n      this.defaultHeight = Layers.getDefaultHeight();\r\n      this.defaultFillColor = Layers.getDefaultFillColor();\r\n      this.defaultLineColor = Layers.getDefaultLineColor();\r\n      Layers.floorLayer.addEventListener(\"default color change\", () => {\r\n        this.defaultFillColor = Layers.getDefaultFillColor();\r\n        this.defaultLineColor = Layers.getDefaultLineColor();\r\n        this.defaultHeight = Layers.getDefaultHeight();\r\n        this.$refs.fill.updateColor(this.defaultFillColor);\r\n        this.$refs.line.updateColor(this.defaultLineColor);\r\n      });\r\n    },\r\n    data() {\r\n      return {\r\n        activeShape: '',\r\n        defaultHeight: 0.1,\r\n        defaultFillColor: '1bbeff 0.5',\r\n        defaultLineColor: 'ffcc00',\r\n        tips: [\"绘制矩形\", \"绘制圆形\", \"绘制多边形\"],\r\n        editingHeatmap: false,\r\n        heatmapStr: \"\",\r\n      }\r\n    },\r\n    computed: {\r\n      editHeatmapBtnText() {\r\n        return this.editingHeatmap ? \"取消编辑热力图\" : \"开始编辑热力图\"\r\n      }\r\n    },\r\n    methods: {\r\n      onClickAddPolygon() {\r\n        // console.log(\"this.activeShape: \" + this.activeShape);\r\n        if (this.activeShape == 0) {\r\n          MainScene.polgyonTool().startAddRectangle();\r\n        } else if (this.activeShape == 1) {\r\n          MainScene.polgyonTool().startAddCircle();\r\n        } else if (this.activeShape == 2) {\r\n          MainScene.polgyonTool().startAddPolygon();\r\n        }\r\n        let mousedown = (event) => {\r\n          // console.log(\"event.button : \" + event.button);\r\n          if (event.button === 2) {\r\n            MainScene.getDom().removeEventListener('mousedown', mousedown);\r\n            this.activeShape = '';\r\n          }\r\n        }\r\n        MainScene.getDom().addEventListener('mousedown', mousedown);\r\n      },\r\n      onInputDefaultHeight(val) {\r\n        let valNum = parseFloat(val);\r\n        if (isNaN(valNum))\r\n          return;\r\n        Layers.setDefaultHeight(valNum );\r\n      },\r\n      updateDefaultLineColor(jscolor) {\r\n        let lineColor = parseInt('0x' + jscolor);\r\n        Layers.setDefaultLineColor(lineColor);\r\n      },\r\n      updateDefaultFillColor(jscolor) {\r\n        let arr = jscolor.split(' ');\r\n        let fillColor = parseInt('0x' + arr[0]);\r\n        let fillOpacity = parseFloat(arr[1]);\r\n        Layers.setDefaultFillColor(fillColor, fillOpacity);\r\n      },\r\n      onclickRandHeatmap() {\r\n        MainScene.showRandomHeatmap();\r\n      },\r\n      onclickClearHeatmap() {\r\n        MainScene.clearHeatmap();\r\n      },\r\n      applyHeatmapToSelected() {\r\n        MainScene.applyHeatmapToSelected();\r\n      },\r\n      unapplyHeatmapToSelected() {\r\n        MainScene.unapplyHeatmapToSelected();\r\n      },\r\n      toggleHeatmapEdit() {\r\n        this.editingHeatmap = !this.editingHeatmap;\r\n        if (this.editingHeatmap) {\r\n          this.heatmapStr = \"\"\r\n          MainScene.polgyonTool().startEditHeatmap();\r\n        } else {\r\n          this.heatmapStr = JSON.stringify(MainScene.polgyonTool().getHeatMapEditObj() );\r\n          MainScene.polgyonTool().endEditHeatmap();\r\n        }\r\n      },\r\n      loadHeatmap() {\r\n        MainScene.polgyonTool().loadFloorHeatMap(JSON.parse(this.heatmapStr));\r\n      },\r\n    },\r\n    components: {\r\n      SquareButton, SquareButtonsGroup, ElInput\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxDrawGraphic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxDrawGraphic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxDrawGraphic.vue?vue&type=template&id=0d0af1d6&scoped=true&\"\nimport script from \"./BoxDrawGraphic.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxDrawGraphic.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d0af1d6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab\"},[_c('span',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"路线\")]),_c('square-buttons-group',{on:{\"change\":_vm.onClickAddPath},model:{value:(_vm.activePath),callback:function ($$v) {_vm.activePath=$$v},expression:\"activePath\"}},[_c('square-button',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[0]),expression:\"tips[0]\",modifiers:{\"dark\":true}}],attrs:{\"icon-class\":\"iconxianduan3\",\"value\":\"0\"}}),_c('square-button',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[1]),expression:\"tips[1]\",modifiers:{\"dark\":true}}],attrs:{\"icon-class\":\"iconxianduan2\",\"value\":\"1\"}}),_c('square-button',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[2]),expression:\"tips[2]\",modifiers:{\"dark\":true}}],attrs:{\"icon-class\":\"iconxianduan1\",\"value\":\"2\"}})],1),_c('div',[_c('input',{attrs:{\"type\":\"button\",\"value\":\"寻路测试\"},on:{\"click\":function($event){return _vm.onclickPathFinding()}}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"轨迹测试\"},on:{\"click\":function($event){return _vm.onclickPathTracking()}}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"webglDiv\",staticStyle:{\"position\":\"relative\"},attrs:{\"id\":\"WebGL-output\"}}),_c('div',{staticClass:\"contextmenu\",attrs:{\"id\":\"contextSingle\"}},[_c('ul',[_c('li',{on:{\"click\":function($event){return _vm.toggleEditPoints()}}},[_c('span',{staticClass:\"iconfont icontianjiajiedian\"}),_c('span',[_vm._v(_vm._s(_vm.editTxt))])]),_c('li',{on:{\"click\":function($event){return _vm.toggleScaleItem()}}},[_c('span',{staticClass:\"iconfont iconlashen\"}),_c('span',[_vm._v(_vm._s(_vm.scaleTxt))])]),_c('li',{on:{\"click\":function($event){return _vm.toggleRotateItem()}}},[_c('span',{staticClass:\"iconfont iconxuanzhuan\"}),_c('span',[_vm._v(_vm._s(_vm.rotateTxt))])]),_c('li',{on:{\"click\":function($event){return _vm.sliceItem()}}},[_c('span',{staticClass:\"iconfont iconmuban\"}),_c('span',[_vm._v(\"拆分元素\")])]),_c('li',{on:{\"click\":function($event){return _vm.copyItem()}}},[_c('span',{staticClass:\"iconfont iconfuzhi\"}),_c('span',[_vm._v(\"复制\")])]),_c('li',{on:{\"click\":function($event){return _vm.deleteItem()}}},[_c('span',{staticClass:\"iconfont iconshanchu1\"}),_c('span',[_vm._v(\"删除\")])]),_c('li',{on:{\"click\":function($event){return _vm.topItems()}}},[_c('span',{staticClass:\"iconfont iconlashen\"}),_c('span',[_vm._v(\"置顶\")])]),_c('li',{on:{\"click\":function($event){return _vm.bottomItems()}}},[_c('span',{staticClass:\"iconfont iconlashen\"}),_c('span',[_vm._v(\"置底\")])])])]),_c('div',{staticClass:\"contextmenu\",attrs:{\"id\":\"contextMulti\"}},[_c('ul',[_c('li',{on:{\"click\":function($event){return _vm.copyItem()}}},[_c('span',{staticClass:\"iconfont iconfuzhi\"}),_c('span',[_vm._v(\"复制\")])]),_c('li',{on:{\"click\":function($event){return _vm.deleteItem()}}},[_c('span',{staticClass:\"iconfont iconshanchu1\"}),_c('span',[_vm._v(\"删除\")])]),_c('li',{on:{\"click\":function($event){return _vm.mergeItems()}}},[_c('span',{staticClass:\"iconfont iconhebing\"}),_c('span',[_vm._v(\"合并元素\")])]),_c('li',{on:{\"click\":function($event){return _vm.itemAsubB()}}},[_c('span',{staticClass:\"iconfont iconhebing\"}),_c('span',[_vm._v(\"元素A-B\")])]),_c('li',{on:{\"click\":function($event){return _vm.itemAintersectB()}}},[_c('span',{staticClass:\"iconfont iconhebing\"}),_c('span',[_vm._v(\"元素A∩B\")])]),_c('li',{on:{\"click\":function($event){return _vm.sliceItem()}}},[_c('span',{staticClass:\"iconfont iconmuban\"}),_c('span',[_vm._v(\"拆分元素\")])]),_c('li',{on:{\"click\":function($event){return _vm.topItems()}}},[_c('span',{staticClass:\"iconfont iconlashen\"}),_c('span',[_vm._v(\"置顶\")])]),_c('li',{on:{\"click\":function($event){return _vm.bottomItems()}}},[_c('span',{staticClass:\"iconfont iconlashen\"}),_c('span',[_vm._v(\"置底\")])])])]),_c('div',{staticClass:\"contextmenu\",attrs:{\"id\":\"contextPathItem\"}},[_c('ul',[_c('li',{on:{\"click\":function($event){return _vm.editPathPoints()}}},[_c('span',[_vm._v(\"编辑路径\")])]),_c('li',{on:{\"click\":function($event){return _vm.removeSelectedPaths()}}},[_c('span',[_vm._v(\"删除路段\")])])])]),_c('div',{staticClass:\"contextmenu\",attrs:{\"id\":\"contextRef\"}},[_c('ul',[_c('li',{on:{\"click\":function($event){return _vm.toggleScaleItem()}}},[_c('span',{staticClass:\"iconfont iconlashen\"}),_c('span',[_vm._v(_vm._s(_vm.scaleTxt))])]),_c('li',{on:{\"click\":function($event){return _vm.toggleRotateItem()}}},[_c('span',{staticClass:\"iconfont iconxuanzhuan\"}),_c('span',[_vm._v(_vm._s(_vm.rotateTxt))])])])]),_vm._m(0),_c('div',{ref:\"tipMeasuring\",staticClass:\"tip-measuring\",staticStyle:{\"display\":\"none\"}})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"creatingDiv\",attrs:{\"id\":\"createMeshDiv\"}},[_c('input',{attrs:{\"type\":\"number\"}}),_c('input',{attrs:{\"type\":\"number\"}})])}]\n\nexport { render, staticRenderFns }","import {Vector3} from 'three'\r\nimport Config from \"../configurable/Config\"\r\nimport Main from \"../MainScene\"\r\nimport History from \"../undo/History\";\r\n\r\nlet Shortcuts = function () {\r\n  if (Config.ui.isPublished()) return;\r\n  let smallStep = Config.code.moveSlightlyStep;\r\n  let bigStep = Config.code.moveStep;\r\n  let moveVector = new Vector3();\r\n  let canvasSelected = false;\r\n  document.addEventListener('mousedown', function (event) {\r\n    canvasSelected = event.target === Main.getDom();\r\n    if (!canvasSelected && Main.isEditingIn3D() )\r\n      Main.cameraControl().enabled = false;\r\n  });\r\n\r\n  window.addEventListener('keydown', function(event) {\r\n    if (!canvasSelected) {\r\n      return;\r\n    }\r\n    let step = event.shiftKey ? bigStep : smallStep;\r\n    switch ( event.key.toLowerCase() ) {\r\n      case 'backspace':\r\n        // event.preventDefault(); // prevent browser back\r\n        // fall-through\r\n      case 'delete':\r\n        Main.polgyonTool().removeSelectedMesh();\r\n        Main.pathTool().removeSelectedPaths();\r\n        Main.lightTool().deleteSelectedLight();\r\n        Main.markerTool().removeSelected();\r\n        break;\r\n      case 'arrowup':\r\n      case 'w':\r\n        if (event.altKey) {\r\n          Main.cameraControl().moveCamera(0, -1);\r\n        } else {\r\n          moveVector.set(0, step, 0);\r\n        }\r\n\r\n        break;\r\n      case 'arrowdown':\r\n      case 's':\r\n        if (event.altKey) {\r\n          Main.cameraControl().moveCamera(0, 1);\r\n        } else {\r\n          moveVector.set(0, -step, 0);\r\n        }\r\n        break;\r\n      case 'arrowleft':\r\n      case 'a':\r\n        if (event.altKey) {\r\n          Main.cameraControl().moveCamera(1, 0);\r\n        } else {\r\n          moveVector.set( -step, 0,0);\r\n        }\r\n        break;\r\n      case 'arrowright':\r\n      case 'd':\r\n        if (event.altKey) {\r\n          Main.cameraControl().moveCamera(-1, 0);\r\n        } else {\r\n          moveVector.set( step, 0,0);\r\n        }\r\n        break;\r\n      case 'r':\r\n        Main.polgyonTool().rotateSingleMesh();\r\n        break;\r\n      case 'z':\r\n        if (event.ctrlKey) {\r\n          if (event.shiftKey) {\r\n            History.redoAction();\r\n          } else {\r\n            History.undoAction();\r\n          }\r\n        }\r\n        break;\r\n      case 'f4':\r\n        if (event.shiftKey) {\r\n          let removeAll = confirm(\"不可撤销的清除所有图层（图形，路径，背景图）, 并且清除编辑历史？\");\r\n          if (removeAll) {\r\n            Main.removeAll();\r\n            History.removeAll();\r\n          }\r\n        }\r\n        break;\r\n    }\r\n    if (moveVector.lengthSq() > 0) {\r\n      Main.polgyonTool().moveSelectedMesh(moveVector);\r\n      moveVector.set(0,0,0);\r\n    }\r\n  });\r\n} ();\r\n\r\nexport default Shortcuts;\r\n","<template>\r\n  <div>\r\n    <div id=\"WebGL-output\" ref=\"webglDiv\" style=\"position: relative\">\r\n    </div>\r\n    <div class=\"contextmenu\" id=\"contextSingle\">\r\n      <ul>\r\n        <li @click=\"toggleEditPoints()\"><span class=\"iconfont icontianjiajiedian\"/><span>{{editTxt}}</span></li>\r\n        <li @click=\"toggleScaleItem()\"><span class=\"iconfont iconlashen\"/><span>{{scaleTxt}}</span> </li>\r\n        <li @click=\"toggleRotateItem()\"><span class=\"iconfont iconxuanzhuan\"/><span>{{rotateTxt}}</span></li>\r\n        <li @click=\"sliceItem()\"><span class=\"iconfont iconmuban\"/><span>拆分元素</span></li>\r\n        <li @click=\"copyItem()\"><span class=\"iconfont iconfuzhi\"/><span>复制</span></li>\r\n        <li @click=\"deleteItem()\"><span class=\"iconfont iconshanchu1\"/><span>删除</span></li>\r\n        <li @click=\"topItems()\"><span class=\"iconfont iconlashen\"/><span>置顶</span></li>\r\n        <li @click=\"bottomItems()\"><span class=\"iconfont iconlashen\"/><span>置底</span></li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"contextmenu\" id=\"contextMulti\">\r\n      <ul>\r\n        <li @click=\"copyItem()\"><span class=\"iconfont iconfuzhi\"/><span>复制</span></li>\r\n        <li @click=\"deleteItem()\"><span class=\"iconfont iconshanchu1\"/><span>删除</span></li>\r\n        <li @click=\"mergeItems()\"><span class=\"iconfont iconhebing\"/><span>合并元素</span></li>\r\n        <li @click=\"itemAsubB()\"><span class=\"iconfont iconhebing\"/><span>元素A-B</span></li>\r\n        <li @click=\"itemAintersectB()\"><span class=\"iconfont iconhebing\"/><span>元素A∩B</span></li>\r\n        <li @click=\"sliceItem()\"><span class=\"iconfont iconmuban\"/><span>拆分元素</span></li>\r\n        <li @click=\"topItems()\"><span class=\"iconfont iconlashen\"/><span>置顶</span></li>\r\n        <li @click=\"bottomItems()\"><span class=\"iconfont iconlashen\"/><span>置底</span></li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"contextmenu\" id=\"contextPathItem\">\r\n      <ul>\r\n        <li @click=\"editPathPoints()\"><span>编辑路径</span></li>\r\n        <li @click=\"removeSelectedPaths()\"><span>删除路段</span></li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"contextmenu\" id=\"contextRef\">\r\n      <ul>\r\n        <li @click=\"toggleScaleItem()\"><span class=\"iconfont iconlashen\"/><span>{{scaleTxt}}</span> </li>\r\n        <li @click=\"toggleRotateItem()\"><span class=\"iconfont iconxuanzhuan\"/><span>{{rotateTxt}}</span></li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"creatingDiv\" id=\"createMeshDiv\">\r\n      <input type=\"number\">\r\n      <input type=\"number\">\r\n    </div>\r\n    <div class=\"tip-measuring\" style=\"display: none\" ref=\"tipMeasuring\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Main from './js/MainScene';\r\n  import Layers from \"./js/Layers\";\r\n  import Config from \"./js/configurable/Config\";\r\n  import Serializer from \"./js/util/Serialization\";\r\n  import Notification from \"../components/element/notification\";\r\n  import Shortcuts from \"../3d/js/tool/Shortcuts\";\r\n  import {getCSSValue} from \"../external_lib/util\";\r\n\r\n  export default {\r\n    name: \"Main3d\",\r\n    data() {\r\n      this.tipDoms = [];\r\n      return {\r\n        scaleTxt: '拉伸元素',\r\n        rotateTxt: '旋转元素',\r\n        editTxt: '编辑节点'\r\n      };\r\n    },\r\n    mounted() {\r\n      Main.init(document.getElementById('createMeshDiv'));\r\n      if (Config.code.loadSavingFromStart) {\r\n        Serializer.loadFromLocal(false);\r\n      }\r\n      Main.scene().addEventListener(\"slice error\", () => {\r\n        Notification.info({message:\"目前还不支持切割线与切割线相交的复杂切割\", position:'top-right'});\r\n      });\r\n      Main.scene().addEventListener(\"invalid num input\", () => {\r\n        Notification.info({message:\"请为正在创建的图形输入一个数字\", position:'top-right'});\r\n      });\r\n      let _this = this;\r\n      document.addEventListener('contextmenu', onContextMenu);\r\n      function onContextMenu(env){\r\n        _this.scaleTxt = Main.polgyonTool().isStatusScalingMesh() ? '停止拉伸' : '拉伸元素';\r\n        _this.rotateTxt = Main.polgyonTool().isStatusRotatingMesh() ? '停止旋转' : '旋转元素';\r\n        _this.editTxt = Main.polgyonTool().isStatusEditingPoints() ? '停止编辑' : '编辑节点';\r\n\r\n        let context;\r\n        let e = env || window.event;\r\n        let pathItems = Main.pathTool().getSelectedPathItems();\r\n        if (pathItems.length > 0 && Layers.navPathTabSelected()) {\r\n          context = document.getElementById(\"contextPathItem\");\r\n        } else if (Main.polgyonTool().getSelectedRef() != null) {\r\n          context = document.getElementById(\"contextRef\");\r\n        } else {\r\n          let len = Main.polgyonTool().getSelectedMeshes().length;\r\n          if (len == 0 || !Main.contextMenuEnabled()) {\r\n            return false;\r\n          }\r\n\r\n          if (len == 1) {\r\n            context = document.getElementById(\"contextSingle\");\r\n          } else {\r\n            context = document.getElementById(\"contextMulti\");\r\n          }\r\n        }\r\n        context.style.display = \"block\";\r\n\r\n        let x = e.clientX;\r\n        let y = e.clientY;\r\n\r\n        let w = window.innerWidth;\r\n        let h = window.innerHeight;\r\n\r\n        context.style.left = Math.min(w-202,x)+\"px\";\r\n        context.style.top = Math.min(h-330,y)+\"px\";\r\n        document.addEventListener('click', onContextMenuClick);\r\n        // 关闭系统默认菜单\r\n        return false;\r\n      }\r\n\r\n      //   当鼠标点击后关闭右键菜单\r\n      function onContextMenuClick(event){\r\n        // let contextmenu = event.target.parentElement.parentElement.parentElement;\r\n        let contextMulti = document.getElementById(\"contextMulti\");\r\n        contextMulti.style.display = 'none';\r\n        let contextSingle = document.getElementById(\"contextSingle\");\r\n        contextSingle.style.display = 'none';\r\n        let contextPathItem = document.getElementById(\"contextPathItem\");\r\n        contextPathItem.style.display = 'none';\r\n        let contextRef = document.getElementById(\"contextRef\");\r\n        contextRef.style.display = 'none';\r\n\r\n        document.removeEventListener('click', onContextMenuClick);\r\n      }\r\n\r\n      Main.scene().addEventListener(\"update tip\", (event) => {\r\n        let div = _this.$refs.tipMeasuring;\r\n        div.style.display = 'block';\r\n        div.mapCoord = event.mapCoord;\r\n        if (event.isArea) {\r\n          div.innerHTML = event.area + \"m<sup>2</sup>\"\r\n        } else {\r\n          div.innerText = event.meters + \"m\";\r\n        }\r\n        _this.updateTipPosition(div);\r\n      });\r\n      Main.scene().addEventListener(\"cancel add tips\", () => {\r\n        _this.$refs.tipMeasuring.style.display = 'none';\r\n      });\r\n      Main.scene().addEventListener(\"add tip\", (event) => {\r\n        _this.$refs.tipMeasuring.style.display = 'none';\r\n        let tipDiv = document.createElement('div');\r\n        tipDiv.classList.add('tip-measuring');\r\n        tipDiv.classList.add('tip-measured');\r\n        if (event.isArea) {\r\n          tipDiv.innerHTML = event.area + \"m<sup>2</sup>\";  //event.areaMeters\r\n        } else {\r\n          tipDiv.innerText = event.meters + \"m\";\r\n        }\r\n        _this.$refs.webglDiv.appendChild(tipDiv);\r\n        _this.tipDoms.push(tipDiv);\r\n        tipDiv.mapCoord = event.mapCoord;\r\n        _this.updateTipPosition(tipDiv);\r\n      });\r\n      Main.scene().addEventListener(\"remove all tips\", (event) => {\r\n        _this.$refs.tipMeasuring.style.display = 'none';\r\n        _this.tipDoms.forEach(dom => dom.parentNode.removeChild(dom));\r\n        _this.tipDoms = [];\r\n      });\r\n      Main.cameraControl().addEventListener('change', () => {\r\n        _this.tipDoms.forEach(dom => _this.updateTipPosition(dom));\r\n      });\r\n    },\r\n    methods: {\r\n      toggleEditPoints() {\r\n        Main.polgyonTool().toggleStatusOfEditingPoints();\r\n      },\r\n      toggleRotateItem() {\r\n        Main.polgyonTool().toggleStatusRotatingMesh();\r\n      },\r\n      toggleScaleItem() {\r\n        Main.polgyonTool().toggleStatusScalingMesh();\r\n      },\r\n      deleteItem() {\r\n        Main.polgyonTool().removeSelectedMesh();\r\n      },\r\n      copyItem() {\r\n        Main.polgyonTool().startCopyingMesh();\r\n      },\r\n      sliceItem() {\r\n        Main.polgyonTool().startSlicingMesh();\r\n      },\r\n      mergeItems() {\r\n        Main.polgyonTool().mergeMeshes();\r\n      },\r\n      itemAsubB() {\r\n        // Main.polgyonTool().meshAsubB()\r\n        Main.polgyonTool().meshAsubItems()\r\n      },\r\n      itemAintersectB() {\r\n        Main.polgyonTool().meshAintersectB()\r\n      },\r\n      editPathPoints() {\r\n        Main.pathTool().startEditingPoint();\r\n      },\r\n      removeSelectedPaths() {\r\n        Main.pathTool().removeSelectedPaths();\r\n      },\r\n      topItems() {\r\n        Main.polgyonTool().selectedMeshesReorder(true);\r\n      },\r\n      bottomItems() {\r\n        Main.polgyonTool().selectedMeshesReorder(false);\r\n      },\r\n      updateTipPosition(tipDiv) {\r\n        let screenCoord = Main.transToScreenCoord(tipDiv.mapCoord.clone());\r\n        let padding = 5;\r\n        let w0 = parseInt(getCSSValue(tipDiv, 'width') );\r\n        let h0 = parseInt(getCSSValue(tipDiv, 'height') );\r\n        let w = w0 + padding*2, h = h0 + 5;\r\n        tipDiv.style.top = screenCoord.y - h + \"px\";\r\n        tipDiv.style.left = screenCoord.x - w0/2 + \"px\";\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.creatingDiv {\r\n  position: fixed;\r\n  /*background-color: #eedab5;*/\r\n  /*border: 1px solid #eee;*/\r\n\r\n  /*width: 120px;*/\r\n  z-index: 2;\r\n  top: 220px;\r\n  left: 310px;\r\n  display: none;\r\n}\r\n.creatingDiv input {\r\n  width: 54px;\r\n}\r\n\r\n.contextmenu {\r\n  width: 130px;\r\n  /*border: 1px solid #999;*/\r\n  /*box-shadow: 3px 3px 3px #ccc;*/\r\n  background-color: rgba(238,238,238,1);\r\n  box-shadow:0px 0px 25px 2px rgba(0, 0, 0, 0.3);\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 10px;\r\n  display: none;\r\n  z-index: 99;\r\n}\r\n.contextmenu li {\r\n  height: 40px;\r\n  line-height: 40px;\r\n  padding-left: 10px;\r\n  cursor: pointer;\r\n  border-bottom: solid 1px rgba(204,204,204,1);\r\n}\r\n.contextmenu li>span:nth-child(2) {\r\n  display: inline-block;\r\n  padding: 0 10px;\r\n}\r\n.contextmenu li:hover {\r\n  background-color: #ccc;\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n\r\n.itemSliceTx {\r\n  padding-left: 25px;\r\n}\r\n.selectBox {\r\n  border: 1px solid #55aaff;\r\n  background-color: rgba(75, 160, 255, 0.3);\r\n  position: fixed;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=182495ac&scoped=true&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&id=182495ac&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"182495ac\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"boxInTab\">\r\n    <span class=\"itemPropertyLabel\">路线</span>\r\n    <square-buttons-group v-model=\"activePath\" @change=\"onClickAddPath\">\r\n      <square-button icon-class=\"iconxianduan3\" value=\"0\" v-tip.dark=\"tips[0]\"></square-button>\r\n      <square-button icon-class=\"iconxianduan2\" value=\"1\" v-tip.dark=\"tips[1]\"></square-button>\r\n      <square-button icon-class=\"iconxianduan1\" value=\"2\" v-tip.dark=\"tips[2]\"></square-button>\r\n\r\n    </square-buttons-group>\r\n<!--    <label><input name=\"pathType\" type=\"radio\" value=\"\" @click=\"onClickAddPath($event, 0)\">主路 </label>-->\r\n<!--    <label><input name=\"pathType\" type=\"radio\" value=\"\" @click=\"onClickAddPath($event, 1)\">次路 </label>-->\r\n<!--    <label><input name=\"pathType\" type=\"radio\" value=\"\" @click=\"onClickAddPath($event, 2)\">小路 </label>-->\r\n    <div>\r\n      <input type=\"button\" value=\"寻路测试\" @click=\"onclickPathFinding()\">\r\n      <input type=\"button\" value=\"轨迹测试\" @click=\"onclickPathTracking()\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import SquareButtonsGroup from \"@/components/common/SquareButtonsGroup\";\r\n  import SquareButton from \"@/components/common/SquareButton\";\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import Main from \"../../../3d/Main\";\r\n\r\n  export default {\r\n    name: \"BoxDrawPath\",\r\n    data() {\r\n      return {\r\n        activePath: '',\r\n        tips: [\"主路\", \"次路\", \"小路\"]\r\n      }\r\n    },\r\n    methods: {\r\n      onClickAddPath() {\r\n        MainScene.pathTool().startAddPath(~~this.activePath);\r\n        let mousedown = (event) => {\r\n          // console.log(\"event.button : \" + event.button);\r\n          if (event.button === 2) {\r\n            MainScene.getDom().removeEventListener('mousedown', mousedown);\r\n            this.activePath = '';\r\n          }\r\n        }\r\n        MainScene.getDom().addEventListener('mousedown', mousedown);\r\n      },\r\n      onclickPathFinding() {\r\n        MainScene.pathTool().startPathFinding();\r\n      },\r\n      onclickPathTracking() {\r\n        MainScene.showRandomTrack();\r\n      }\r\n    },\r\n    components: {\r\n      SquareButtonsGroup, SquareButton\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxDrawPath.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxDrawPath.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxDrawPath.vue?vue&type=template&id=6bf14f76&scoped=true&\"\nimport script from \"./BoxDrawPath.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxDrawPath.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bf14f76\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedCount == 0),expression:\"selectedCount == 0\"}],staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"placeHolderPath\"}},[_c('p',{staticStyle:{\"text-indent\":\"3em\"}},[_vm._v(\"请在地图上选择路径和节点\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedCount > 0),expression:\"selectedCount > 0\"}],attrs:{\"id\":\"propertiesNavPath\"}},[_c('div',[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"通行方向\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.onChangePathDirection},model:{value:(_vm.dirValue),callback:function ($$v) {_vm.dirValue=$$v},expression:\"dirValue\"}},_vm._l((_vm.dirOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',{staticStyle:{\"padding-top\":\"6px\"}},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"道路权重\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.onChangePathType},model:{value:(_vm.pathValue),callback:function ($$v) {_vm.pathValue=$$v},expression:\"pathValue\"}},_vm._l((_vm.pathOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"boxInTab\">\r\n    <div id=\"placeHolderPath\" style=\"display: none\" v-show=\"selectedCount == 0\">\r\n      <p style=\"text-indent: 3em;\">请在地图上选择路径和节点</p>\r\n    </div>\r\n    <div id=\"propertiesNavPath\" v-show=\"selectedCount > 0\">\r\n      <div>\r\n        <div class=\"itemPropertyLabel\" >通行方向</div>\r\n        <el-select v-model=\"dirValue\" placeholder=\"请选择\" @change=\"onChangePathDirection\">\r\n          <el-option\r\n                  v-for=\"item in dirOptions\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n      <div style=\"padding-top: 6px\">\r\n        <div class=\"itemPropertyLabel\" >道路权重</div>\r\n        <el-select v-model=\"pathValue\" placeholder=\"请选择\" @change=\"onChangePathType\">\r\n          <el-option\r\n                  v-for=\"item in pathOptions\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ElSelect from '@/components/element/select';\r\n  import ElOption from '@/components/element/select/src/option';\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import Layers from \"../../../3d/js/Layers\";\r\n  import History from \"../../../3d/js/undo/History\";\r\n\r\n  export default {\r\n    name: \"BoxSelectedPaths\",\r\n    data() {\r\n      return {\r\n        pathOptions: [{\r\n          value: 0,\r\n          label: '主要道路'\r\n        }, {\r\n          value: 1,\r\n          label: '次要路段'\r\n        }, {\r\n          value: 2,\r\n          label: '小路'\r\n        }],\r\n        pathValue: 0,\r\n\r\n        dirOptions: [{\r\n          value: 0,\r\n          label: '双向通行'\r\n        }, {\r\n          value: 1,\r\n          label: '正向通行'\r\n        }, {\r\n          value: 2,\r\n          label: '反向通行'\r\n        }, {\r\n          value: 3,\r\n          label: '不通行'\r\n        }],\r\n        dirValue: 0,\r\n        selectedCount: 0,\r\n\r\n        undoObj: {}\r\n      }\r\n    },\r\n    mounted() {\r\n      Layers.navPathLayer.addEventListener('selectedPathChange', () => {\r\n        let itemPaths = MainScene.pathTool().getSelectedPathItems();\r\n        this.selectedCount = itemPaths.length;\r\n        // console.log(\"selectedPathChange, \", itemPaths);\r\n        if (this.selectedCount < 1) {\r\n          return;\r\n        }\r\n        let pathItem = itemPaths[0];\r\n        this.pathValue = pathItem.getPathType();\r\n        this.dirValue = pathItem.getPathDirection();\r\n        this.setUndoObj(itemPaths);\r\n      } );\r\n    },\r\n    methods: {\r\n      setUndoObj(itemPaths) {\r\n        let undo = this.undoObj;\r\n        undo.preDirection = null, undo.preType = null;\r\n        undo.pathHolders = itemPaths.slice();\r\n        undo.pathTypes = [], undo.pathDirections = [];\r\n        itemPaths.forEach(holder => {\r\n          undo.pathTypes.push(holder.getPathType() );\r\n          undo.pathDirections.push(holder.getPathDirection() );\r\n        });\r\n      },\r\n      onChangePathDirection(val) {\r\n        // console.log('change path direction', val);\r\n        MainScene.pathTool().changeSelectedPathsDirections(val);\r\n        let undo = this.undoObj;\r\n        let undoContext = {pathHolders: undo.pathHolders, pathDirections: undo.pathDirections,\r\n          unifyDirection: val, preDirection: undo.preDirection};\r\n        History.addAction(\"unify paths direction\", undoContext);\r\n\r\n        undo.preDirection = val;\r\n      },\r\n      onChangePathType(val) {\r\n        // console.log('change path type', val);\r\n        MainScene.pathTool().changeSelectedPathsTypes(val);\r\n\r\n        let undo = this.undoObj;\r\n        let undoContext = {pathHolders: undo.pathHolders, pathTypes: undo.pathTypes,\r\n          unifyType: val, preType: undo.preType};\r\n        History.addAction(\"unify paths type\", undoContext);\r\n\r\n        undo.preType = val;\r\n      }\r\n    },\r\n    components: {\r\n      ElSelect, ElOption\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxSelectedPaths.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxSelectedPaths.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxSelectedPaths.vue?vue&type=template&id=4a99d0bf&scoped=true&\"\nimport script from \"./BoxSelectedPaths.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxSelectedPaths.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a99d0bf\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxLayers\"},[_c('button',{staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":_vm.onclickAddLayer}},[_vm._v(\"新增图层\")]),_c('ul',{ref:\"layerContainer\"},_vm._l((_vm.layers),function(item,index){return _c('layer-item',{key:item.id,attrs:{\"item\":item},on:{\"removeLayer\":_vm.onRemoveLayer}})}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"layerItem\",attrs:{\"id\":_vm.item.id}},[_c('div',{staticClass:\"left common flex1\"},[_c('p',{staticClass:\"layer-title\",attrs:{\"contenteditable\":_vm.item.nameEditable},on:{\"mousedown\":_vm.mousedown4LayerName,\"keydown\":_vm.keydown4LayerName,\"blur\":_vm.blur4LayerName}},[_vm._v(_vm._s(_vm.item.name))])]),_c('div',{staticClass:\"btn-hover\"},[_c('div',{staticClass:\"iconfont p10\",class:{'iconsuo21': !_vm.item.locked, 'iconsuo1': _vm.item.locked,},attrs:{\"id\":\"lockMarkers\"},on:{\"click\":function($event){return _vm.lockChange($event)}}}),_c('div',{staticClass:\"iconfont iconchakan2 p10\",class:{'iconchakan2': _vm.item.hidden, 'iconchakan': !_vm.item.hidden,},attrs:{\"id\":\"eyeMarkers\"},on:{\"click\":function($event){return _vm.hideChange($event)}}}),_c('div',{staticStyle:{\"width\":\"18px\",\"display\":\"inline-block\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.item.removable),expression:\"item.removable\"}],staticClass:\"iconfont iconshanchu1\",on:{\"click\":_vm.onclickRemove}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <li class=\"layerItem\" :id=\"item.id\">\r\n    <div class=\"left common flex1\"><p :contenteditable=\"item.nameEditable\" class=\"layer-title\"\r\n      @mousedown=\"mousedown4LayerName\" @keydown=\"keydown4LayerName\" @blur=\"blur4LayerName\">{{item.name}}</p></div>\r\n    <div class=\"btn-hover\">\r\n      <div class=\"iconfont p10\" :class=\"{'iconsuo21': !item.locked, 'iconsuo1': item.locked,}\"\r\n           @click=\"lockChange($event)\" id=\"lockMarkers\"></div>\r\n      <div class=\"iconfont iconchakan2 p10\" :class=\"{'iconchakan2': item.hidden, 'iconchakan': !item.hidden,}\"\r\n           @click=\"hideChange($event)\" id=\"eyeMarkers\"></div>\r\n      <div style=\"width: 18px; display: inline-block\">\r\n        <div class=\"iconfont iconshanchu1\" v-show=\"item.removable\" @click=\"onclickRemove\"></div>\r\n      </div>\r\n    </div>\r\n\r\n  </li>\r\n</template>\r\n\r\n<script>\r\n  import Layers from \"../../../3d/js/Layers\";\r\n  import * as M from \"../../../store/mutations-types\";\r\n\r\n  export default {\r\n    name: \"LayerItem\",\r\n    props: {\r\n      item: Object\r\n    },\r\n    data() {\r\n      return {\r\n        changingName: false\r\n      }\r\n    },\r\n    methods: {\r\n      lockChange() {\r\n        Layers.toggleLock(this.item);\r\n        Layers.floorLayer.dispatchEvent({type: 'default color change', item: null} );\r\n        this.$store.commit(M.Show_GraphicAdd, Layers.getLayer() != null);//不允许在参考层，新增元素\r\n      },\r\n      hideChange() {\r\n        Layers.toggleHide(this.item);\r\n        Layers.floorLayer.dispatchEvent({type: 'default color change', item: null} );\r\n        this.$store.commit(M.Show_GraphicAdd, Layers.getLayer() != null);//不允许在参考层，新增元素\r\n      },\r\n      onclickRemove() {\r\n        this.$emit(\"removeLayer\", {item: this.item} );\r\n      },\r\n      mousedown4LayerName(event) {\r\n        if (event.target.contentEditable == \"false\")\r\n          return;\r\n        let selection = window.getSelection();\r\n        if (this.changingName) {\r\n          let existRange = selection.getRangeAt(0);\r\n          if (!existRange.collapsed) {\r\n            selection.removeAllRanges();\r\n          }\r\n          // console.log(\"existRange:\", existRange);\r\n          return;\r\n        }\r\n        let range = document.createRange();\r\n        range.selectNodeContents(event.target);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n        this.changingName = true;\r\n      },\r\n      keydown4LayerName(event) {\r\n        if (event.keyCode === 13) {\r\n          //禁止输入回车，避免换行 打乱布局\r\n          event.preventDefault();\r\n        }\r\n        this.changingName = true;\r\n      },\r\n      blur4LayerName(event) {\r\n        window.getSelection().removeAllRanges();\r\n        this.changingName = false;\r\n        this.item.name = event.target.innerText;\r\n        Layers.renameLayer(this.item.id, this.item.name);\r\n        // console.log(\"layer name: \" + this.item.name);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .layerItem {\r\n    list-style: none;\r\n    border-bottom: solid 1px #ddd;\r\n    border-top: solid 1px #ddd;\r\n    line-height: 2.2;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    color: #000;\r\n    padding: 0 10px;\r\n  }\r\n  flex1 {\r\n    flex: 1\r\n  }\r\n  .layer-title {\r\n    min-width: 20px;\r\n    max-width: 180px;\r\n    text-overflow: clip;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n  }\r\n  .common {\r\n    display: inline-block;\r\n  }\r\n  .btn-hover {\r\n    cursor: pointer;\r\n  }\r\n  .btn-hover>div {\r\n    display: inline-block;\r\n  }\r\n  .p10 {\r\n    padding-right: 10px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LayerItem.vue?vue&type=template&id=a142b9b4&scoped=true&\"\nimport script from \"./LayerItem.vue?vue&type=script&lang=js&\"\nexport * from \"./LayerItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LayerItem.vue?vue&type=style&index=0&id=a142b9b4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a142b9b4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"boxLayers\">\r\n    <button style=\"margin-left: 10px\" @click=\"onclickAddLayer\">新增图层</button>\r\n    <ul ref=\"layerContainer\">\r\n      <layer-item v-for=\"(item, index) in layers\" :item=\"item\" :key=\"item.id\" @removeLayer=\"onRemoveLayer\"/>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import LayerItem from \"./LayerItem\";\r\n  import Layers from \"../../../3d/js/Layers\";\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import Common from \"../../../3d/js/util/Common\";\r\n\r\n  export default {\r\n    name: \"BoxLayers\",\r\n    mounted() {\r\n      this.initLayerItems();\r\n      // console.log('initLayerItems() in mounted BoxLayer.vue')\r\n      MainScene.scene().addEventListener('reset ui', () => {\r\n        this.initLayerItems();\r\n      });\r\n      MainScene.scene().addEventListener('add ref layer', () => {\r\n        let hasRefLayer = this.layers.filter(it => it.id == \"refer\").length > 0;\r\n        if (!hasRefLayer) {\r\n          let layerObj = Layers.getLayerById(\"refer\");\r\n          this.layers.push( Common.convertLayerObj(layerObj) );\r\n        }\r\n      });\r\n\r\n      // let insertIndicator = document.createElement('div');\r\n      // insertIndicator.style.width = '300px';\r\n      // insertIndicator.style.height = '1px';\r\n      // insertIndicator.style.background = 'red';\r\n\r\n      //获取鼠标位置\r\n      function getMousePos(e){\r\n        return {\r\n          x : e.pageX || e.clientX + document.body.scrollLeft,\r\n          y : e.pageY || e.clientY + document.body.scrollTop\r\n        }\r\n      }\r\n      //获取元素位置\r\n      function getElementPos(el){\r\n        let parentObj;\r\n        if (el.offsetParent) {\r\n          parentObj = getElementPos(el.offsetParent)\r\n        }\r\n        return {\r\n          x : el.offsetParent ? el.offsetLeft + parentObj['x'] : el.offsetLeft,\r\n          y : el.offsetParent ? el.offsetTop + parentObj['y'] : el.offsetTop\r\n        }\r\n      }\r\n      //获取元素尺寸\r\n      function getElementSize(el){\r\n        return {\r\n          width : el.offsetWidth,\r\n          height : el.offsetHeight\r\n        }\r\n      }\r\n\r\n      let list = this.$refs.layerContainer.getElementsByTagName('li');\r\n      let outer_wrap = this.$refs.layerContainer;\r\n      let insertBeforeName = null, insertBeforeId = null;\r\n      let insertIndicator;\r\n      let _this = this;\r\n      outer_wrap.onmousedown = function(event){\r\n        //获取列表顺序\r\n        event = event || window.event;\r\n        let draggingItem = event.target || event.srcElement;\r\n        let index = 0;\r\n        for(let i = 0; i < list.length; i++){\r\n          list[i]['pos'] = getElementPos(list[i]);\r\n          list[i]['size'] = getElementSize(list[i]);\r\n          if (draggingItem === list[i]) {\r\n            index = i;\r\n          }\r\n        }\r\n        draggingItem.classList.add(\"dragging-item\");\r\n        insertIndicator = draggingItem;\r\n        // outer_wrap.removeChild(draggingItem);\r\n\r\n        if(draggingItem.tagName.toLowerCase() == 'li') {\r\n          insertIndicator.style.opacity = '0.0';\r\n          let p = getMousePos(event);\r\n          let el = draggingItem.cloneNode(true);\r\n          el.style.position = 'absolute';\r\n          el.style.left = draggingItem.pos.x + 'px';\r\n          el.style.top = draggingItem.pos.y + 'px';\r\n          el.style.width = draggingItem.size.width + 'px';\r\n          el.style.height = draggingItem.size.height + 'px';\r\n          el.style.border = '1px solid #d4d4d4';\r\n          el.style.background = '#4e76ee';\r\n          el.style.opacity = '1.0';\r\n          document.body.appendChild(el);\r\n\r\n          document.onmousemove = function(event) {\r\n            event = event || window.event;\r\n            let current = getMousePos(event);\r\n            el.style.left = draggingItem.pos.x + current.x - p.x + 'px';\r\n            el.style.top = draggingItem.pos.y + current.y - p.y+ 'px';\r\n            // document.body.style.cursor = 'move';\r\n\r\n            //判断插入点\r\n            for(let i = 0; i < list.length; i++){\r\n              if (draggingItem == list[i])\r\n                continue;\r\n              if (current.x > list[i].pos.x && current.x < list[i].pos.x + list[i].size.width) {\r\n                if (current.y > list[i].pos.y && current.y < list[i].pos.y + list[i].size.height/2) {\r\n                  outer_wrap.insertBefore(insertIndicator, list[i]);\r\n                  if (list[i].id != draggingItem.id)\r\n                    insertBeforeName = list[i].innerText, insertBeforeId = list[i].id;\r\n                  // console.log(\"insertBefore: \" + insertBeforeName);\r\n                  _this.dragging = true;\r\n                } else if (current.y > list[i].pos.y + list[i].size.height/2 && current.y < list[i].pos.y + list[i].size.height) {\r\n                  outer_wrap.insertBefore(insertIndicator, list[i].nextSibling);\r\n                  if (list[i].nextSibling == null)\r\n                    insertBeforeName = null, insertBeforeId = null;\r\n                  else {\r\n                    if (list[i].nextSibling.id != draggingItem.id)\r\n                      insertBeforeName = list[i].nextSibling.innerText, insertBeforeId = list[i].nextSibling.id;\r\n                  }\r\n                  // console.log(\"insertBefore sibling: \" + insertBeforeName);\r\n                  _this.dragging = true;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          //移除事件\r\n          document.onmouseup = function(event){\r\n            draggingItem.classList.remove(\"dragging-item\");\r\n            document.onmousemove = null;\r\n            if (_this.dragging) {\r\n              // outer_wrap.replaceChild(draggingItem, insertIndicator);\r\n              _this.dragging = false;\r\n              // console.log(\"insertBefore end: \" + insertBeforeName);\r\n              _this.reorderDragged(draggingItem.id, insertBeforeId);\r\n            }\r\n            if (insertIndicator)\r\n              insertIndicator.style.opacity = '1.0';\r\n            document.body.removeChild(el);\r\n            el = null;\r\n            // document.body.style.cursor = 'normal';\r\n            document.onmouseup = null;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        layers: [],\r\n        dragging: false\r\n      }\r\n    },\r\n    methods: {\r\n      onclickAddLayer() {\r\n        // console.log(\"新增一个图层\");\r\n        let layerObj = Layers.addLayer();\r\n        this.layers.splice(1, 0, Common.convertLayerObj(layerObj) );\r\n      },\r\n      initLayerItems() {\r\n        this.layers = [];\r\n        let objLst = Layers.getSelectableLayers();\r\n        objLst = objLst.sort((a, b) => b.group.renderOrder - a.group.renderOrder);\r\n        for (let i = 0; i < objLst.length; i++) {\r\n          let obj = Common.convertLayerObj(objLst[i]);\r\n          if (obj) {\r\n            this.layers.push(obj);\r\n          }\r\n        }\r\n      },\r\n      onRemoveLayer(event) {\r\n        let layerItem = event.item;\r\n        let index = this.layers.indexOf(layerItem);\r\n        this.layers.splice(index, 1);\r\n        Layers.removeLayer(layerItem);\r\n      },\r\n      reorderDragged(draggingId, insertBeforeId) {\r\n        if (draggingId == insertBeforeId)\r\n          return;\r\n        let ind = -1;\r\n        for (let i = 0; i < this.layers.length; i++) {\r\n          let id = this.layers[i].id;\r\n          if (id == draggingId) {\r\n            ind = i;\r\n            break;\r\n          }\r\n        }\r\n        let movingItem = this.layers.splice(ind, 1) [0];\r\n        if (insertBeforeId == null) {\r\n          this.layers.push(movingItem);\r\n        } else {\r\n          for (let i = 0; i < this.layers.length; i++) {\r\n            let id = this.layers[i].id;\r\n            if (id == insertBeforeId) {\r\n              ind = i;\r\n              break;\r\n            }\r\n          }\r\n          this.layers.splice(ind, 0, movingItem);\r\n        }\r\n        Layers.reorderLayers(this.layers);\r\n      }\r\n    },\r\n    components: {\r\n      LayerItem\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.boxLayers {\r\n  background-color: white;\r\n  padding-top: 10px;\r\n}\r\n  .dragging-item {\r\n    background-color: #4b8bff;\r\n    color: white;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxLayers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxLayers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxLayers.vue?vue&type=template&id=eea3cdac&scoped=true&\"\nimport script from \"./BoxLayers.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxLayers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoxLayers.vue?vue&type=style&index=0&id=eea3cdac&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eea3cdac\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab2\"},[_c('div',{staticClass:\"settingItem\"},[_c('div',[_vm._v(\"显示模型名称\")]),_c('switch-item',{attrs:{\"active-color\":\"#409eff\",\"inactive-color\":\"#ff4949\"},on:{\"change\":_vm.toggleModelsNames},model:{value:(_vm.valueShowNames),callback:function ($$v) {_vm.valueShowNames=$$v},expression:\"valueShowNames\"}})],1),_c('div',{staticClass:\"settingItem\"},[_c('div',[_vm._v(\"显示网格\")]),_c('switch-item',{attrs:{\"active-color\":\"#409eff\",\"inactive-color\":\"#ff4949\"},on:{\"change\":_vm.toggleGrid},model:{value:(_vm.valueShowGrid),callback:function ($$v) {_vm.valueShowGrid=$$v},expression:\"valueShowGrid\"}})],1),_c('div',{staticClass:\"settingItem\"},[_c('div',[_vm._v(\"节点吸附\")]),_c('switch-item',{attrs:{\"active-color\":\"#409eff\",\"inactive-color\":\"#ff4949\"},on:{\"change\":_vm.toggleAdhere},model:{value:(_vm.valueDrawAdhere),callback:function ($$v) {_vm.valueDrawAdhere=$$v},expression:\"valueDrawAdhere\"}})],1),_c('div',{staticClass:\"settingItem\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"背景色\")]),_c('div',{staticClass:\"inputWidth\",staticStyle:{\"width\":\"200px\"}},[_c('el-input',{ref:\"backColor\",attrs:{\"colorAlphaEnabled\":true},on:{\"colorChange\":_vm.updateBackgroundColor},model:{value:(_vm.sceneBackColor),callback:function ($$v) {_vm.sceneBackColor=$$v},expression:\"sceneBackColor\"}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"el-switch\",class:{ 'is-disabled': _vm.switchDisabled, 'is-checked': _vm.checked },attrs:{\"role\":\"switch\",\"aria-checked\":_vm.checked,\"aria-disabled\":_vm.switchDisabled},on:{\"click\":function($event){$event.preventDefault();return _vm.switchValue($event)}}},[_c('input',{ref:\"input\",staticClass:\"el-switch__input\",attrs:{\"type\":\"checkbox\",\"id\":_vm.id,\"name\":_vm.name,\"true-value\":_vm.activeValue,\"false-value\":_vm.inactiveValue,\"disabled\":_vm.switchDisabled},on:{\"change\":_vm.handleChange,\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.switchValue($event)}}}),(_vm.inactiveIconClass || _vm.inactiveText)?_c('span',{class:['el-switch__label', 'el-switch__label--left', !_vm.checked ? 'is-active' : '']},[(_vm.inactiveIconClass)?_c('i',{class:[_vm.inactiveIconClass]}):_vm._e(),(!_vm.inactiveIconClass && _vm.inactiveText)?_c('span',{attrs:{\"aria-hidden\":_vm.checked}},[_vm._v(_vm._s(_vm.inactiveText))]):_vm._e()]):_vm._e(),_c('span',{ref:\"core\",staticClass:\"el-switch__core\",style:({ 'width': _vm.coreWidth + 'px' })}),(_vm.activeIconClass || _vm.activeText)?_c('span',{class:['el-switch__label', 'el-switch__label--right', _vm.checked ? 'is-active' : '']},[(_vm.activeIconClass)?_c('i',{class:[_vm.activeIconClass]}):_vm._e(),(!_vm.activeIconClass && _vm.activeText)?_c('span',{attrs:{\"aria-hidden\":!_vm.checked}},[_vm._v(_vm._s(_vm.activeText))]):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"el-switch\"\r\n    :class=\"{ 'is-disabled': switchDisabled, 'is-checked': checked }\"\r\n    role=\"switch\"\r\n    :aria-checked=\"checked\"\r\n    :aria-disabled=\"switchDisabled\"\r\n    @click.prevent=\"switchValue\"\r\n  >\r\n    <input\r\n      class=\"el-switch__input\"\r\n      type=\"checkbox\"\r\n      @change=\"handleChange\"\r\n      ref=\"input\"\r\n      :id=\"id\"\r\n      :name=\"name\"\r\n      :true-value=\"activeValue\"\r\n      :false-value=\"inactiveValue\"\r\n      :disabled=\"switchDisabled\"\r\n      @keydown.enter=\"switchValue\"\r\n    >\r\n    <span\r\n      :class=\"['el-switch__label', 'el-switch__label--left', !checked ? 'is-active' : '']\"\r\n      v-if=\"inactiveIconClass || inactiveText\">\r\n      <i :class=\"[inactiveIconClass]\" v-if=\"inactiveIconClass\"></i>\r\n      <span v-if=\"!inactiveIconClass && inactiveText\" :aria-hidden=\"checked\">{{ inactiveText }}</span>\r\n    </span>\r\n    <span class=\"el-switch__core\" ref=\"core\" :style=\"{ 'width': coreWidth + 'px' }\">\r\n    </span>\r\n    <span\r\n      :class=\"['el-switch__label', 'el-switch__label--right', checked ? 'is-active' : '']\"\r\n      v-if=\"activeIconClass || activeText\">\r\n      <i :class=\"[activeIconClass]\" v-if=\"activeIconClass\"></i>\r\n      <span v-if=\"!activeIconClass && activeText\" :aria-hidden=\"!checked\">{{ activeText }}</span>\r\n    </span>\r\n  </div>\r\n</template>\r\n<script>\r\n  import emitter from '@/components/element/mixins/emitter';\r\n  import Focus from '@/components/element/mixins/focus';\r\n  import Migrating from '@/components/element/mixins/migrating';\r\n\r\n  export default {\r\n    name: 'ElSwitch',\r\n    mixins: [Focus('input'), Migrating, emitter],\r\n    inject: {\r\n      elForm: {\r\n        default: ''\r\n      }\r\n    },\r\n    props: {\r\n      value: {\r\n        type: [Boolean, String, Number],\r\n        default: false\r\n      },\r\n      disabled: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      width: {\r\n        type: Number,\r\n        default: 40\r\n      },\r\n      activeIconClass: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      inactiveIconClass: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      activeText: String,\r\n      inactiveText: String,\r\n      activeColor: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      inactiveColor: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      activeValue: {\r\n        type: [Boolean, String, Number],\r\n        default: true\r\n      },\r\n      inactiveValue: {\r\n        type: [Boolean, String, Number],\r\n        default: false\r\n      },\r\n      name: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      validateEvent: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      id: String\r\n    },\r\n    data() {\r\n      return {\r\n        coreWidth: this.width\r\n      };\r\n    },\r\n    created() {\r\n      if (!~[this.activeValue, this.inactiveValue].indexOf(this.value)) {\r\n        this.$emit('input', this.inactiveValue);\r\n      }\r\n    },\r\n    computed: {\r\n      checked() {\r\n        return this.value === this.activeValue;\r\n      },\r\n      switchDisabled() {\r\n        return this.disabled || (this.elForm || {}).disabled;\r\n      }\r\n    },\r\n    watch: {\r\n      checked() {\r\n        this.$refs.input.checked = this.checked;\r\n        if (this.activeColor || this.inactiveColor) {\r\n          this.setBackgroundColor();\r\n        }\r\n        if (this.validateEvent) {\r\n          this.dispatch('ElFormItem', 'el.form.change', [this.value]);\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      handleChange(event) {\r\n        const val = this.checked ? this.inactiveValue : this.activeValue;\r\n        this.$emit('input', val);\r\n        this.$emit('change', val);\r\n        this.$nextTick(() => {\r\n          // set input's checked property\r\n          // in case parent refuses to change component's value\r\n          this.$refs.input.checked = this.checked;\r\n        });\r\n      },\r\n      setBackgroundColor() {\r\n        let newColor = this.checked ? this.activeColor : this.inactiveColor;\r\n        this.$refs.core.style.borderColor = newColor;\r\n        this.$refs.core.style.backgroundColor = newColor;\r\n      },\r\n      switchValue() {\r\n        !this.switchDisabled && this.handleChange();\r\n      },\r\n      getMigratingConfig() {\r\n        return {\r\n          props: {\r\n            'on-color': 'on-color is renamed to active-color.',\r\n            'off-color': 'off-color is renamed to inactive-color.',\r\n            'on-text': 'on-text is renamed to active-text.',\r\n            'off-text': 'off-text is renamed to inactive-text.',\r\n            'on-value': 'on-value is renamed to active-value.',\r\n            'off-value': 'off-value is renamed to inactive-value.',\r\n            'on-icon-class': 'on-icon-class is renamed to active-icon-class.',\r\n            'off-icon-class': 'off-icon-class is renamed to inactive-icon-class.'\r\n          }\r\n        };\r\n      }\r\n    },\r\n    mounted() {\r\n      /* istanbul ignore if */\r\n      this.coreWidth = this.width || 40;\r\n      if (this.activeColor || this.inactiveColor) {\r\n        this.setBackgroundColor();\r\n      }\r\n      this.$refs.input.checked = this.checked;\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./component.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./component.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./component.vue?vue&type=template&id=207c30f6&\"\nimport script from \"./component.vue?vue&type=script&lang=js&\"\nexport * from \"./component.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"boxInTab2\">\r\n    <div class=\"settingItem\">\r\n      <div>显示模型名称</div>\r\n      <switch-item active-color=\"#409eff\" inactive-color=\"#ff4949\" v-model=\"valueShowNames\" @change=\"toggleModelsNames\"/>\r\n    </div>\r\n    <div class=\"settingItem\">\r\n      <div>显示网格</div>\r\n      <switch-item active-color=\"#409eff\" inactive-color=\"#ff4949\" v-model=\"valueShowGrid\" @change=\"toggleGrid\"/>\r\n    </div>\r\n    <div class=\"settingItem\">\r\n      <div>节点吸附</div>\r\n      <switch-item active-color=\"#409eff\" inactive-color=\"#ff4949\" v-model=\"valueDrawAdhere\" @change=\"toggleAdhere\"/>\r\n    </div>\r\n<!--    <div class=\"settingItem\">-->\r\n<!--      <input type=\"button\" value=\"相机复位\" @click=\"resetCamera()\" id=\"camReset\">-->\r\n<!--    </div>-->\r\n    <div class=\"settingItem\">\r\n      <div class=\"itemPropertyLabel\" >背景色</div>\r\n      <div class=\"inputWidth\" style=\"width: 200px\">\r\n        <el-input v-model=\"sceneBackColor\" @colorChange=\"updateBackgroundColor\"\r\n                  ref=\"backColor\" :colorAlphaEnabled=\"true\"/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ElInput from '@/components/element/input';\r\n  import SwitchItem from '@/components/element/switch/component'\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import Config from \"../../../3d/js/configurable/Config\";\r\n  import {Ref_Flag} from \"../../../store/mutations-types\";\r\n  import Layers from \"../../../3d/js/Layers\";\r\n\r\n  export default {\r\n    name: \"BoxSettings\",\r\n    mounted() {\r\n      MainScene.scene().addEventListener('reset ui', () => {\r\n        this.valueShowNames = Config.ui.modelTextVisible;\r\n        this.valueShowGrid = !Layers.layers.background.hidden;\r\n        this.valueDrawAdhere = Config.ui.enableEditPointAdhere;\r\n        this.$store.commit(Ref_Flag, false);\r\n      });\r\n      this.sceneBackColor = MainScene.getClearColor();\r\n      this.$refs.backColor.updateColor(this.sceneBackColor);\r\n    },\r\n    data() {\r\n      return {\r\n        valueShowNames: true,\r\n        valueShowGrid: true,\r\n        valueDrawAdhere: true,\r\n        sceneBackColor: \"ffffff 1\"\r\n      }\r\n    },\r\n    methods: {\r\n      toggleModelsNames(val) {\r\n        Config.ui.modelTextVisible = val;\r\n        MainScene.toggleModelsNames();\r\n      },\r\n      toggleGrid() {\r\n        Layers.toggleHide(Layers.layers.background);\r\n      },\r\n      toggleAdhere(val) {\r\n        Config.ui.enableEditPointAdhere = val;\r\n      },\r\n      resetCamera() {\r\n        MainScene.resetCamera();\r\n      },\r\n      updateBackgroundColor(jscolor) {\r\n        let arr = jscolor.split(' ');\r\n        let color = parseInt('0x' + arr[0]);\r\n        let opacity = parseFloat(arr[1]);\r\n        MainScene.setClearColor(color, opacity);\r\n      }\r\n    },\r\n    components: {\r\n      SwitchItem, ElInput\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .settingItem {\r\n    padding: 5px 0 0 0;\r\n    display: flex;\r\n    font-size: 14px;\r\n    color: #333;\r\n    justify-content: space-between;\r\n  }\r\n  .boxInTab2 {\r\n    padding: 0 10px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxSettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxSettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxSettings.vue?vue&type=template&id=e11cd3fe&scoped=true&\"\nimport script from \"./BoxSettings.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxSettings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoxSettings.vue?vue&type=style&index=0&id=e11cd3fe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e11cd3fe\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab2\"},[_c('div',{staticClass:\"posCoordDiv\"},[_c('div',{staticClass:\"posCoordRow\"},[_c('el-input',{staticClass:\"posCoord\",attrs:{\"placeholder\":\"位置1坐标 x\",\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputPosition(0)}},model:{value:(_vm.pos1x),callback:function ($$v) {_vm.pos1x=$$v},expression:\"pos1x\"}}),_c('el-input',{staticClass:\"posCoord itemRight\",attrs:{\"placeholder\":\"位置1坐标 y\",\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputPosition(0)}},model:{value:(_vm.pos1y),callback:function ($$v) {_vm.pos1y=$$v},expression:\"pos1y\"}})],1),_c('div',{staticClass:\"posCoordRow\"},[_c('el-input',{staticClass:\"posCoord\",attrs:{\"placeholder\":_vm.tipP1x,\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputMercatorPosition(0)}},model:{value:(_vm.pos1MecatorX),callback:function ($$v) {_vm.pos1MecatorX=$$v},expression:\"pos1MecatorX\"}}),_c('el-input',{staticClass:\"posCoord itemRight\",attrs:{\"placeholder\":_vm.tipP1y,\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputMercatorPosition(0)}},model:{value:(_vm.pos1MecatorY),callback:function ($$v) {_vm.pos1MecatorY=$$v},expression:\"pos1MecatorY\"}})],1)]),_c('div',{staticClass:\"posCoordDiv\"},[_c('div',{staticClass:\"posCoordRow\"},[_c('el-input',{staticClass:\"posCoord\",attrs:{\"placeholder\":\"位置2坐标 x\",\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputPosition(1)}},model:{value:(_vm.pos2x),callback:function ($$v) {_vm.pos2x=$$v},expression:\"pos2x\"}}),_c('el-input',{staticClass:\"posCoord itemRight\",attrs:{\"placeholder\":\"位置2坐标 y\",\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputPosition(1)}},model:{value:(_vm.pos2y),callback:function ($$v) {_vm.pos2y=$$v},expression:\"pos2y\"}})],1),_c('div',{staticClass:\"posCoordRow\"},[_c('el-input',{staticClass:\"posCoord\",attrs:{\"placeholder\":_vm.tipP2x,\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputMercatorPosition(1)}},model:{value:(_vm.pos2MecatorX),callback:function ($$v) {_vm.pos2MecatorX=$$v},expression:\"pos2MecatorX\"}}),_c('el-input',{staticClass:\"posCoord itemRight\",attrs:{\"placeholder\":_vm.tipP2y,\"clearable\":\"\"},on:{\"input\":function($event){return _vm.onInputMercatorPosition(1)}},model:{value:(_vm.pos2MecatorY),callback:function ($$v) {_vm.pos2MecatorY=$$v},expression:\"pos2MecatorY\"}})],1)]),_c('div',{staticStyle:{\"border-bottom\":\"solid 1px #888\"}},[_c('label',[_c('input',{attrs:{\"type\":\"checkbox\"},on:{\"click\":function($event){return _vm.toggleMouseInfo()}}}),_vm._v(\"显示当前鼠标\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showMouseCoord),expression:\"showMouseCoord\"}],staticClass:\"posCoordDiv\"},[_c('div',{staticClass:\"posCoordRow\"},[_c('el-input',{staticClass:\"posCoord\",attrs:{\"placeholder\":\"鼠标坐标 x\",\"readonly\":\"\"},model:{value:(_vm.pos_x),callback:function ($$v) {_vm.pos_x=$$v},expression:\"pos_x\"}}),_c('el-input',{staticClass:\"posCoord itemRight\",attrs:{\"placeholder\":\"鼠标坐标 y\",\"readonly\":\"\"},model:{value:(_vm.pos_y),callback:function ($$v) {_vm.pos_y=$$v},expression:\"pos_y\"}})],1),_c('div',{staticClass:\"posCoordRow\"},[_c('el-input',{staticClass:\"posCoord\",attrs:{\"placeholder\":_vm.tipP_x,\"readonly\":\"\"},model:{value:(_vm.posMecatorX),callback:function ($$v) {_vm.posMecatorX=$$v},expression:\"posMecatorX\"}}),_c('el-input',{staticClass:\"posCoord itemRight\",attrs:{\"placeholder\":_vm.tipP_y,\"readonly\":\"\"},model:{value:(_vm.posMecatorY),callback:function ($$v) {_vm.posMecatorY=$$v},expression:\"posMecatorY\"}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"boxInTab2\">\r\n    <div class=\"posCoordDiv\">\r\n      <div class=\"posCoordRow\">\r\n        <el-input placeholder=\"位置1坐标 x\" class=\"posCoord\" v-model=\"pos1x\" @input=\"onInputPosition(0)\" clearable/>\r\n        <el-input placeholder=\"位置1坐标 y\" class=\"posCoord itemRight\" v-model=\"pos1y\" @input=\"onInputPosition(0)\" clearable/>\r\n      </div>\r\n      <div class=\"posCoordRow\">\r\n        <el-input :placeholder=\"tipP1x\" class=\"posCoord\" v-model=\"pos1MecatorX\" @input=\"onInputMercatorPosition(0)\" clearable/>\r\n        <el-input :placeholder=\"tipP1y\" class=\"posCoord itemRight\" v-model=\"pos1MecatorY\" @input=\"onInputMercatorPosition(0)\" clearable/>\r\n      </div>\r\n    </div>\r\n    <div class=\"posCoordDiv\">\r\n      <div class=\"posCoordRow\">\r\n        <el-input placeholder=\"位置2坐标 x\" class=\"posCoord\" v-model=\"pos2x\" @input=\"onInputPosition(1)\" clearable/>\r\n        <el-input placeholder=\"位置2坐标 y\" class=\"posCoord itemRight\" v-model=\"pos2y\" @input=\"onInputPosition(1)\" clearable/>\r\n      </div>\r\n      <div class=\"posCoordRow\">\r\n        <el-input :placeholder=\"tipP2x\" class=\"posCoord\" v-model=\"pos2MecatorX\" @input=\"onInputMercatorPosition(1)\" clearable/>\r\n        <el-input :placeholder=\"tipP2y\" class=\"posCoord itemRight\" v-model=\"pos2MecatorY\" @input=\"onInputMercatorPosition(1)\" clearable/>\r\n      </div>\r\n    </div>\r\n    <div style=\"border-bottom: solid 1px #888\">\r\n      <label><input type=\"checkbox\" @click=\"toggleMouseInfo()\">显示当前鼠标</label>\r\n    </div>\r\n\r\n    <div class=\"posCoordDiv\" v-show=\"showMouseCoord\">\r\n      <div class=\"posCoordRow\">\r\n        <el-input placeholder=\"鼠标坐标 x\" class=\"posCoord\" v-model=\"pos_x\"  readonly/>\r\n        <el-input placeholder=\"鼠标坐标 y\" class=\"posCoord itemRight\" v-model=\"pos_y\" readonly/>\r\n      </div>\r\n      <div class=\"posCoordRow\">\r\n        <el-input :placeholder=\"tipP_x\" class=\"posCoord\" v-model=\"posMecatorX\" readonly/>\r\n        <el-input :placeholder=\"tipP_y\" class=\"posCoord itemRight\" v-model=\"posMecatorY\" readonly/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ElInput from '@/components/element/input';\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import Config from \"../../../3d/js/configurable/Config\";\r\n\r\n  export default {\r\n    name: \"BoxCoordBind\",\r\n    components: {\r\n      ElInput\r\n    },\r\n    mounted() {\r\n      if (Config.code.lngLatBind) {\r\n        this.tipP1x = \"位置1 经度\";\r\n        this.tipP1y = \"位置1 纬度\";\r\n        this.tipP2x = \"位置2 经度\";\r\n        this.tipP2y = \"位置2 纬度\";\r\n      }\r\n      MainScene.scene().addEventListener('coord change', onCoordChange);\r\n      let _this = this;\r\n      function onCoordChange(event) {\r\n        if (event.index == 0) {\r\n          _this.pos1x = event.x;\r\n          _this.pos1y = event.y;\r\n        } else if (event.index == 1) {\r\n          _this.pos2x = event.x;\r\n          _this.pos2y = event.y;\r\n        }\r\n      }\r\n      MainScene.scene().addEventListener('mouse move', this.updateUI);\r\n    },\r\n    data() {\r\n      return {\r\n        pos1x: \"0\",\r\n        pos1y: \"3\",\r\n        pos1MecatorX: '',\r\n        pos1MecatorY: '',\r\n        pos2x: \"3\",\r\n        pos2y: \"0\",\r\n        pos2MecatorX: '',\r\n        pos2MecatorY: '',\r\n\r\n        pos_x: \"0\",\r\n        pos_y: \"0\",\r\n        posMecatorX: '',\r\n        posMecatorY: '',\r\n\r\n        tipP1x: '位置1墨卡托 x',\r\n        tipP1y: '位置1墨卡托 y',\r\n        tipP2x: '位置2墨卡托 x',\r\n        tipP2y: '位置2墨卡托 y',\r\n        tipP_x: '鼠标 墨卡托坐标 x',\r\n        tipP_y: '鼠标 墨卡托坐标 y',\r\n        showMouseCoord: false,\r\n      }\r\n    },\r\n    methods: {\r\n      updateUI(event) {\r\n        let coordTool = MainScene.coordTool();\r\n        let pos1 = coordTool.getCoord(0), pos2 = coordTool.getCoord(1);\r\n        let posMecator1 = coordTool.getCoordBinds(0), posMecator2 = coordTool.getCoordBinds(1);\r\n        this.pos1x = pos1.x, this.pos1y = pos1.y;\r\n        this.pos2x = pos2.x, this.pos2y = pos2.y;\r\n        this.pos1MecatorX = posMecator1.x, this.pos1MecatorY = posMecator1.y;\r\n        this.pos2MecatorX = posMecator2.x, this.pos2MecatorY = posMecator2.y;\r\n\r\n        this.pos_x = event.x, this.pos_y = event.y;\r\n        this.posMecatorX = event.mx, this.posMecatorY = event.my;\r\n      },\r\n      getCoordXY(index) {\r\n        let arr2 = [[this.pos1x, this.pos1y], [this.pos2x, this.pos2y]];\r\n        return arr2[index];\r\n      },\r\n      getMecatorXY(index) {\r\n        let arr2 = [[this.pos1MecatorX, this.pos1MecatorY], [this.pos2MecatorX, this.pos2MecatorY]];\r\n        return arr2[index];\r\n      },\r\n      onInputPosition(index) {\r\n        let coord = this.getCoordXY(index);\r\n        MainScene.coordTool().setCoord(index, parseFloat(coord[0]) || 0,\r\n            parseFloat(coord[1]) || 0)\r\n      },\r\n      onInputMercatorPosition(index) {\r\n        let coord = this.getMecatorXY(index);\r\n        MainScene.coordTool().setCoordBinds(index, parseFloat(coord[0]) || 0,\r\n            parseFloat(coord[1]) || 0)\r\n      },\r\n      toggleMouseInfo() {\r\n        this.showMouseCoord = !this.showMouseCoord;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .boxInTab2 {\r\n    padding: 5px;\r\n    background-color: white;\r\n  }\r\n  .posCoord {\r\n    flex: 1;\r\n  }\r\n\r\n  .posCoordDiv {\r\n    border-radius: 5px;\r\n    border: solid 1px #888;\r\n    margin-top: 5px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .posCoordRow {\r\n    margin: 5px;\r\n  }\r\n  .itemRight {\r\n    /*margin-left: 5px;*/\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxCoordBind.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxCoordBind.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxCoordBind.vue?vue&type=template&id=0b828cfc&scoped=true&\"\nimport script from \"./BoxCoordBind.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxCoordBind.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoxCoordBind.vue?vue&type=style&index=0&id=0b828cfc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b828cfc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab\"},[_c('simple-grid',{ref:\"grid\"}),_c('div',{staticClass:\"btns\"},[_c('div',{staticClass:\"btn-item\"},[_c('form',{attrs:{\"name\":\"form1\"}},[_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"name\":\"picpath\",\"accept\":\"image/*\"},on:{\"change\":_vm.selectImage}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"设置背景层图片\"},on:{\"click\":_vm.imgBtnClicked}})])]),_c('div',[_c('input',{attrs:{\"type\":\"button\",\"value\":\"合并背景层\"},on:{\"click\":function($event){return _vm.onclickMerge()}}})])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',{staticClass:\"simple-grid\",attrs:{\"border\":\"0\",\"cellspacing\":\"1\",\"cellpadding\":\"1\"}},_vm._l((_vm.itemsRow),function(colArr){return _c('tr',_vm._l((colArr),function(item){return _c('td',{staticClass:\"grid-cell\",class:{active: item.val === _vm.currentIndex},on:{\"mousedown\":function($event){return _vm.selectGrid(item.val)}}},[_vm._v(_vm._s(item.label))])}),0)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <table class=\"simple-grid\" border=\"0\" cellspacing=\"1\" cellpadding=\"1\">\r\n    <tr v-for=\"colArr in itemsRow\">\r\n      <td v-for=\"item in colArr\" class=\"grid-cell\"\r\n          :class=\"{active: item.val === currentIndex}\"\r\n          @mousedown=\"selectGrid(item.val)\">{{item.label}}</td>\r\n    </tr>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\n  import MainScene from \"@/3d/js/MainScene\";\r\n\r\n  export default {\r\n    name: \"SimpleGrid\",\r\n    data() {\r\n      return {\r\n        itemsRow: [],\r\n        currentIndex: -1\r\n      }\r\n    },\r\n    mounted() {\r\n      let _this = this;\r\n      MainScene.scene().addEventListener(\"divide ref selected\", (event) => {\r\n        _this.currentIndex = event.value;\r\n      });\r\n    },\r\n    methods: {\r\n      selectGrid(index) {\r\n        let result = MainScene.moveCameraToDivideIndex(index);\r\n        if (result) {\r\n          this.currentIndex = index;\r\n        }\r\n      },\r\n      setRowCol(str) {\r\n        this.itemsRow =[];\r\n        let arr = str.split(\"x\");\r\n        let row = ~~arr[0], col = ~~arr[1];\r\n        if (row < 2 && col < 2) {\r\n          return;\r\n        }\r\n        for (let i = 0; i < row; i++) {\r\n          let colArr = [];\r\n          for (let j = 0; j < col; j++) {\r\n            let dIndex = (row - i - 1) * row + j;\r\n            let num = dIndex + 1;\r\n            let obj = {label: num, val: dIndex};\r\n            colArr.push(obj);\r\n          }\r\n          this.itemsRow.push(colArr);\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .active {\r\n    background-color: #55aaff;\r\n    color: white;\r\n  }\r\n  .grid-cell {\r\n    border-right: #999 1px solid;\r\n    border-top: #999 1px solid;\r\n  }\r\n.simple-grid {\r\n  table-layout: fixed;\r\n  border: #443 3px solid;\r\n  width: 280px;\r\n  background-color:#fff;\r\n  vertical-align: middle;\r\n  border-collapse: collapse;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleGrid.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleGrid.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SimpleGrid.vue?vue&type=template&id=dc071400&scoped=true&\"\nimport script from \"./SimpleGrid.vue?vue&type=script&lang=js&\"\nexport * from \"./SimpleGrid.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SimpleGrid.vue?vue&type=style&index=0&id=dc071400&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dc071400\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"boxInTab\">\r\n    <simple-grid ref=\"grid\"/>\r\n    <div class=\"btns\">\r\n      <div class=\"btn-item\">\r\n        <form name=\"form1\">\r\n          <input type=\"file\" name=\"picpath\" style=\"display:none;\" @change=\"selectImage\" accept=\"image/*\">\r\n          <input type=\"button\" value=\"设置背景层图片\" @click=\"imgBtnClicked\">\r\n        </form>\r\n      </div>\r\n\r\n      <div><input type=\"button\" value=\"合并背景层\" @click=\"onclickMerge()\"></div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import SimpleGrid from \"../gadget/SimpleGrid\";\r\n  import MainScene from \"@/3d/js/MainScene\";\r\n  import {Ref_Flag} from \"../../../store/mutations-types\";\r\n  import Notification from \"../../element/notification\";\r\n\r\n  export default {\r\n    name: \"BoxRefLayerDivide\",\r\n    mounted() {\r\n      MainScene.scene().addEventListener(\"divide ref layer\", (event) => {\r\n        this.$refs.grid.setRowCol(event.value);\r\n      });\r\n    },\r\n    components: {\r\n      SimpleGrid\r\n    },\r\n    methods: {\r\n      imgBtnClicked() {\r\n        document.form1.picpath.click()\r\n      },\r\n      selectImage() {\r\n        let file = document.form1.picpath.files;\r\n        // console.log('selectImage, ', file);\r\n        if (!file || !file.length) {\r\n          return;\r\n        }\r\n        let _this = this;\r\n        let reader = new FileReader();\r\n        reader.onload = function (evt) {\r\n          // refLayerItem.style.display = 'block';\r\n          // navPathRefDiv.style.display = 'block';\r\n          // refPathAlpha.value = Singleton.getRefOpacityPath();\r\n          let image = document.createElement('img');\r\n          image.src = evt.target.result;\r\n          image.onload = function () {\r\n            MainScene.setReferImg(image, isJPEG);\r\n            _this.$store.commit(Ref_Flag, true);\r\n          };\r\n        }\r\n        let fileObj = file[0];\r\n        let isJPEG = fileObj.name.search( /\\.jpe?g($|\\?)/i ) > 0 || fileObj.type.search( /^image\\/jpeg/ ) === 0;\r\n        reader.readAsDataURL(fileObj);\r\n\r\n      },\r\n      onclickMerge() {\r\n        try {\r\n          MainScene.startMergeAnimation();\r\n        } catch (err) {\r\n          Notification.error({message:err, position:'top-left'});\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.btns {\r\n  display: flex;\r\n}\r\n  .btn-item {\r\n    margin-right: 10px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxRefLayerDivide.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxRefLayerDivide.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxRefLayerDivide.vue?vue&type=template&id=4ede240a&scoped=true&\"\nimport script from \"./BoxRefLayerDivide.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxRefLayerDivide.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoxRefLayerDivide.vue?vue&type=style&index=0&id=4ede240a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ede240a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab\"},[_c('div',{staticClass:\"settingItem\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"快捷改名\")]),_c('div',{staticClass:\"inputWidth\",staticStyle:{\"width\":\"200px\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"当前序号\",\"clearable\":\"\"},on:{\"input\":_vm.onInputFastNum},model:{value:(_vm.fastNameRule),callback:function ($$v) {_vm.fastNameRule=$$v},expression:\"fastNameRule\"}})],1)]),_c('div',{staticClass:\"settingItem\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"3d展示\")]),_c('switch-item',{attrs:{\"active-color\":\"#409eff\",\"inactive-color\":\"#ff4949\"},on:{\"change\":_vm.toggle3dEditing},model:{value:(_vm.editing3d),callback:function ($$v) {_vm.editing3d=$$v},expression:\"editing3d\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\r\n\r\nconst EventBus = new Vue()\r\nexport default EventBus\r\n","<template>\r\n  <div class=\"boxInTab\">\r\n    <div class=\"settingItem\">\r\n      <div class=\"itemPropertyLabel\" >快捷改名</div>\r\n      <div class=\"inputWidth\" style=\"width: 200px\">\r\n        <el-input type=\"text\" v-model=\"fastNameRule\"\r\n                  @input=\"onInputFastNum\" placeholder=\"当前序号\" clearable/>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"settingItem\">\r\n      <div class=\"itemPropertyLabel\">3d展示</div>\r\n      <switch-item active-color=\"#409eff\" inactive-color=\"#ff4949\" v-model=\"editing3d\" @change=\"toggle3dEditing\"/>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import ElInput from '@/components/element/input';\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import SwitchItem from '@/components/element/switch/component';\r\n  import {Editing_For_3d} from \"../../../store/mutations-types\";\r\n  import EventBus from \"../../../store/EventBus\";\r\n\r\n  export default {\r\n    name: \"BoxMisc\",\r\n    components: {\r\n      ElInput, SwitchItem\r\n    },\r\n    mounted() {\r\n      MainScene.scene().addEventListener(\"fast name changed\", (event) => {\r\n        this.fastNameRule = event.value;\r\n      });\r\n      // this.$refs.backColor.updateColor(this.sceneBackColor);\r\n    },\r\n    data() {\r\n      return {\r\n        fastNameRule: \"\",\r\n        editing3d: false\r\n      }\r\n    },\r\n    methods: {\r\n      onInputFastNum() {\r\n        if (this.fastNameRule.trim().length == 0) {\r\n          MainScene.polgyonTool().disableFastNaming();\r\n        } else {\r\n          MainScene.polgyonTool().enableFastNaming(this.fastNameRule);\r\n        }\r\n      },\r\n      toggle3dEditing() {\r\n        MainScene.toggle3dEditing(this.editing3d);\r\n        this.$store.commit(Editing_For_3d, this.editing3d);\r\n        EventBus.$emit(\"editing for 3d\", this.editing3d);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .settingItem {\r\n    padding: 5px 0 0 0;\r\n    display: flex;\r\n    font-size: 14px;\r\n    color: #333;\r\n    justify-content: space-between;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxMisc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxMisc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxMisc.vue?vue&type=template&id=0a8e96a9&scoped=true&\"\nimport script from \"./BoxMisc.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxMisc.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoxMisc.vue?vue&type=style&index=0&id=0a8e96a9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a8e96a9\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab\"},[_c('div',[_c('input',{attrs:{\"type\":\"button\",\"value\":\"新增光源\"},on:{\"click\":_vm.onclickAddLight}})]),_c('ul',{staticClass:\"light-list\",class:{show: _vm.showAddLightMenu}},[_c('li',{staticClass:\"light-item bottom-line\",on:{\"click\":_vm.addPointLight}},[_vm._v(\"点光源\")]),_c('li',{staticClass:\"light-item bottom-line\",on:{\"click\":_vm.addSpotLight}},[_vm._v(\"聚光灯\")]),_c('li',{staticClass:\"light-item bottom-line\",on:{\"click\":_vm.addDirectionLight}},[_vm._v(\"方向光\")]),_c('li',{staticClass:\"light-item\",on:{\"click\":_vm.addHemiSphereLight}},[_vm._v(\"半球光\")])]),_c('light-items',{ref:\"lightList\",attrs:{\"lights\":_vm.lights}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lightSelected),expression:\"lightSelected\"}],ref:\"lightProperties\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"选中光源\")]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"光源类型\")]),_vm._v(\" \"+_vm._s(_vm.lightTypeDesc)+\" \")]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"位置\")]),_c('simple-number-input',{staticClass:\"w50\",on:{\"change\":function($event){return _vm.updateLightPosition($event, 0)}},model:{value:(_vm.lightPosX),callback:function ($$v) {_vm.lightPosX=$$v},expression:\"lightPosX\"}}),_c('simple-number-input',{staticClass:\"w50\",on:{\"change\":function($event){return _vm.updateLightPosition($event, 1)}},model:{value:(_vm.lightPosY),callback:function ($$v) {_vm.lightPosY=$$v},expression:\"lightPosY\"}}),_c('simple-number-input',{staticClass:\"w50\",on:{\"change\":function($event){return _vm.updateLightPosition($event, 2)}},model:{value:(_vm.lightPosZ),callback:function ($$v) {_vm.lightPosZ=$$v},expression:\"lightPosZ\"}})],1),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"光强\")]),_c('simple-number-input',{staticClass:\"w130\",on:{\"change\":function($event){return _vm.updateLightIntensity($event)}},model:{value:(_vm.lightIntensity),callback:function ($$v) {_vm.lightIntensity=$$v},expression:\"lightIntensity\"}})],1),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(_vm._s(_vm.lightColorDesc))]),_c('div',{staticClass:\"inputWidth\",staticStyle:{\"width\":\"130px\"}},[_c('el-input',{ref:\"eleLightColor\",attrs:{\"colorEnabled\":true},on:{\"colorChange\":_vm.updateLightColor},model:{value:(_vm.lightColor),callback:function ($$v) {_vm.lightColor=$$v},expression:\"lightColor\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasGroundColor),expression:\"hasGroundColor\"}],staticClass:\"item-row\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"地面色\")]),_c('div',{staticClass:\"inputWidth\",staticStyle:{\"width\":\"130px\"}},[_c('el-input',{ref:\"eleLightGroundColor\",attrs:{\"colorEnabled\":true},on:{\"colorChange\":_vm.updateLightGroundColor},model:{value:(_vm.lightGroundColor),callback:function ($$v) {_vm.lightGroundColor=$$v},expression:\"lightGroundColor\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasLightDistance),expression:\"hasLightDistance\"}],staticClass:\"item-row\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"光距\")]),_c('simple-number-input',{staticClass:\"w130\",on:{\"change\":_vm.updateLightDistance},model:{value:(_vm.lightDistance),callback:function ($$v) {_vm.lightDistance=$$v},expression:\"lightDistance\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasLightAngle),expression:\"hasLightAngle\"}],staticClass:\"item-row\"},[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"光锥角度\")]),_c('simple-number-input',{staticClass:\"w130\",on:{\"change\":_vm.updateLightAngle},model:{value:(_vm.lightAngle),callback:function ($$v) {_vm.lightAngle=$$v},expression:\"lightAngle\"}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{ref:\"numberInput\",staticClass:\"num\",on:{\"input\":_vm.emitChange}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <input class=\"num\" ref=\"numberInput\" @input=\"emitChange\">\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"SimpleNumberInput\",\r\n    props: {\r\n      value: [String, Number],\r\n    },\r\n    data() {\r\n      return {\r\n        min: - Infinity,\r\n        max: Infinity,\r\n        precision: 3,\r\n        unit: \"\",\r\n        step: 1,\r\n        distance: 0,\r\n        onMouseDownValue: 0,\r\n        pointer: [0, 0],\r\n        prevPointer: [0, 0],\r\n        event: {target: null}\r\n      }\r\n    },\r\n    mounted() {\r\n      let dom = this.$refs.numberInput;\r\n      this.event.target = dom;\r\n      dom.value = this.value;\r\n      dom.addEventListener( 'mousedown', (event) => {\r\n        event.preventDefault();\r\n        this.distance = 0;\r\n\r\n        this.onMouseDownValue = parseFloat(this.$refs.numberInput.value);\r\n\r\n        this.prevPointer = [ event.clientX, event.clientY ];\r\n\r\n        document.addEventListener( 'mousemove', this.onMouseMove, false );\r\n        document.addEventListener( 'mouseup', this.onMouseUp, false );\r\n      }, false );\r\n    },\r\n    watch: {\r\n      value(val) {\r\n        this.setNativeInputValue();\r\n      }\r\n    },\r\n    methods: {\r\n      setNativeInputValue() {\r\n        this.$refs.numberInput.value = this.value;\r\n      },\r\n      setValue( value ) {\r\n\r\n        if ( value !== undefined ) {\r\n\r\n          value = parseFloat( value );\r\n\r\n          if ( value < this.min ) value = this.min;\r\n          if ( value > this.max ) value = this.max;\r\n\r\n          this.$refs.numberInput.value = value.toFixed( this.precision );\r\n\r\n          if ( this.unit !== '' ) this.$refs.numberInput.value += ' ' + this.unit;\r\n        }\r\n      },\r\n      emitChange() {\r\n        this.$emit(\"change\", this.event);\r\n      },\r\n      onMouseMove( event ) {\r\n        let currentValue = this.$refs.numberInput.value;\r\n\r\n        this.pointer = [ event.clientX, event.clientY ];\r\n\r\n        this.distance += ( this.pointer[ 0 ] - this.prevPointer[ 0 ] ) - ( this.pointer[ 1 ] - this.prevPointer[ 1 ] );\r\n\r\n        let value = this.onMouseDownValue + ( this.distance / ( event.shiftKey ? 5 : 50 ) ) * this.step;\r\n        value = Math.min( this.max, Math.max( this.min, value ) );\r\n\r\n        if ( currentValue !== value ) {\r\n          this.setValue( value );\r\n          this.$emit(\"change\", this.event);\r\n        }\r\n\r\n        this.prevPointer = [ event.clientX, event.clientY ];\r\n\r\n      },\r\n\r\n      onMouseUp() {\r\n\r\n        document.removeEventListener( 'mousemove', this.onMouseMove, false );\r\n        document.removeEventListener( 'mouseup', this.onMouseUp, false );\r\n\r\n        if ( Math.abs( this.distance ) < 2 ) {\r\n\r\n          this.$refs.numberInput.focus();\r\n          this.$refs.numberInput.select();\r\n\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .num {\r\n    font-size: 12px;\r\n    border: 0px;\r\n    padding: 2px;\r\n    cursor: col-resize;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleNumberInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleNumberInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SimpleNumberInput.vue?vue&type=template&id=781815a2&scoped=true&\"\nimport script from \"./SimpleNumberInput.vue?vue&type=script&lang=js&\"\nexport * from \"./SimpleNumberInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SimpleNumberInput.vue?vue&type=style&index=0&id=781815a2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"781815a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{ref:\"colorInput\",staticClass:\"color-simple jscolor\",class:{'jscolor {alphaEnabled: true}': _vm.colorAlphaEnabled}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <input class=\"color-simple jscolor\" :class=\"{'jscolor {alphaEnabled: true}': colorAlphaEnabled}\"\r\n         ref=\"colorInput\">\r\n</template>\r\n\r\n<script>\r\n  import jsColor from \"../../../external_lib/jscolor\";\r\n\r\n  export default {\r\n    name: \"SimpleColorInput\",\r\n    data() {\r\n      return {\r\n        event: {target: null}\r\n      }\r\n    },\r\n    props: {\r\n      colorAlphaEnabled: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n\r\n    mounted() {\r\n      let el = this.$refs.colorInput;\r\n      this.event.target = el;\r\n      if (!this.$refs.colorInput._jscLinkedInstance)\r\n        jsColor.jsc().jscolor(el, {});\r\n      el.onFineChange = (jscolor) => {\r\n        this.$emit('colorChange', this.event);\r\n      };\r\n      el.addEventListener('change', () => {\r\n        this.$emit('colorChangeEnd', this.event);\r\n      });\r\n      if (this.colorEnabled || this.colorAlphaEnabled) {\r\n        // if (!this.$refs.colorInput._jscLinkedInstance)\r\n\r\n          // jsColor.jsc().tryInstallOnElements([this.$refs.colorInput], \"color-simple\")\r\n\r\n          // this.$refs.colorInput._jscLinkedInstance = new jscolor(this.$refs.colorInput, {});\r\n      }\r\n    },\r\n    methods: {\r\n      updateColor(color) {\r\n        if (this.colorEnabled || this.colorAlphaEnabled) {\r\n          this.$refs.colorInput.value = color;\r\n          // console.log('input value changed! ' + this.$refs.input.value);\r\n          this.$refs.colorInput._jscLinkedInstance.importColor();\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.color-simple {\r\n  border: none;\r\n  outline: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleColorInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleColorInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SimpleColorInput.vue?vue&type=template&id=058d4338&scoped=true&\"\nimport script from \"./SimpleColorInput.vue?vue&type=script&lang=js&\"\nexport * from \"./SimpleColorInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SimpleColorInput.vue?vue&type=style&index=0&id=058d4338&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"058d4338\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"light-items-list\",class:{show: this.show}},_vm._l((_vm.lights),function(item,index){return _c('li',{staticClass:\"light-item\",class:{active: index === _vm.currentIndex},on:{\"click\":function($event){return _vm.selectLight(index)}}},[_c('div',{staticClass:\"flex1\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"iconfont pad-right btn-hover\",class:{'iconchakan2': !item.visible, 'iconchakan': item.visible},on:{\"click\":function($event){return _vm.toggleItemVisible(index)}}}),_c('div',{staticClass:\"iconfont iconshanchu1 btn-hover\",on:{\"click\":function($event){return _vm.removeItem(index)}}})])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ul class=\"light-items-list\" :class=\"{show: this.show}\">\r\n    <li v-for=\"(item, index) in lights\"\r\n        class=\"light-item\"\r\n        :class=\"{active: index === currentIndex}\"\r\n        @click=\"selectLight(index)\">\r\n      <div class=\"flex1\">{{item.name}}</div>\r\n      <div class=\"iconfont pad-right btn-hover\" :class=\"{'iconchakan2': !item.visible, 'iconchakan': item.visible}\"\r\n           @click=\"toggleItemVisible(index)\"></div>\r\n      <div class=\"iconfont iconshanchu1 btn-hover\" @click=\"removeItem(index)\"></div>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\n  import MainScene from \"../../../3d/js/MainScene\";\r\n\r\n  export default {\r\n    name: \"LightItems\",\r\n    props: {\r\n      lights: {\r\n        type: Array,\r\n        default() {\r\n          return []; //array of object (must not be THREE.Light type, but similar)\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        currentLight: null,\r\n        currentIndex: -1\r\n      }\r\n    },\r\n    computed: {\r\n      show() {\r\n        return this.lights.length > 0;\r\n      }\r\n    },\r\n    methods: {\r\n      selectLightBy(uuid, fromEvent) {\r\n        let index = this.currentIndex;\r\n        for (let i = 0; i < this.lights.length; i++) {\r\n          let obj = this.lights[i];\r\n          if (obj.id == uuid) {\r\n            index = i;\r\n            break;\r\n          }\r\n        }\r\n        if (this.currentIndex !== index) {\r\n          this.currentLight = this.lights[index];\r\n          if (!fromEvent)\r\n            MainScene.lightTool().selectLightBy(uuid);\r\n          this.currentIndex = index;\r\n        }\r\n        return this.lights[index];\r\n      },\r\n      selectLight(index) {\r\n        if (index >= this.lights.length)\r\n          return;\r\n        let uuid = this.lights[index].id;\r\n        this.selectLightBy(uuid);\r\n      },\r\n      toggleItemVisible(index) {\r\n        let curLight = this.lights[index];\r\n        curLight.visible = !curLight.visible;\r\n        MainScene.lightTool().toggleLightVisible(curLight.id);\r\n      },\r\n      removeItem(index) {\r\n        MainScene.lightTool().deleteLightBy(this.lights[index].id);\r\n      },\r\n      refreshSelection() {\r\n        if (!this.currentLight || !MainScene.lightTool().selectedLight() ||\r\n            this.lights.indexOf(this.currentLight) < 0 ||\r\n          this.currentLight.id !== MainScene.lightTool().selectedLight().uuid ) {\r\n          this.currentIndex = -1;\r\n          this.currentLight = null\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .light-items-list {\r\n    display: block;\r\n    max-height: 200px;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n    visibility: hidden;\r\n  }\r\n  .show {\r\n    visibility: visible;\r\n  }\r\n  .light-item {\r\n    list-style: none;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background-color: white;\r\n    color: black;\r\n    padding: 0 10px;\r\n    border-bottom: solid 1px #eee;\r\n  }\r\n  .light-item:hover {\r\n    background-color: grey;\r\n    color: white;\r\n  }\r\n  .active {\r\n    background-color: white;\r\n    color: #4b8bff;\r\n  }\r\n  .flex1 {\r\n    flex: 1;\r\n  }\r\n  .btn-hover {\r\n    cursor: pointer;\r\n  }\r\n  .pad-right{\r\n    padding-right: 10px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightItems.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightItems.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LightItems.vue?vue&type=template&id=57ac25c6&scoped=true&\"\nimport script from \"./LightItems.vue?vue&type=script&lang=js&\"\nexport * from \"./LightItems.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LightItems.vue?vue&type=style&index=0&id=57ac25c6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57ac25c6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"boxInTab\">\r\n    <div><input type=\"button\" value=\"新增光源\" @click=\"onclickAddLight\"></div>\r\n\r\n    <ul class=\"light-list\" :class=\"{show: showAddLightMenu}\">\r\n      <li class=\"light-item bottom-line\" @click=\"addPointLight\">点光源</li>\r\n      <li class=\"light-item bottom-line\" @click=\"addSpotLight\">聚光灯</li>\r\n      <li class=\"light-item bottom-line\" @click=\"addDirectionLight\">方向光</li>\r\n      <li class=\"light-item\" @click=\"addHemiSphereLight\">半球光</li>\r\n    </ul>\r\n\r\n    <light-items :lights=\"lights\" ref=\"lightList\"/>\r\n    <div ref=\"lightProperties\" v-show=\"lightSelected\">\r\n      <div class=\"label\">选中光源</div>\r\n      <div class=\"item-row\">\r\n        <div class=\"itemPropertyLabel\" >光源类型</div> {{lightTypeDesc}}\r\n      </div>\r\n      <div class=\"item-row\">\r\n        <div class=\"itemPropertyLabel\" >位置</div>\r\n        <simple-number-input class=\"w50\" v-model=\"lightPosX\" @change=\"updateLightPosition($event, 0)\"/>\r\n        <simple-number-input class=\"w50\" v-model=\"lightPosY\" @change=\"updateLightPosition($event, 1)\"/>\r\n        <simple-number-input class=\"w50\" v-model=\"lightPosZ\" @change=\"updateLightPosition($event, 2)\"/>\r\n      </div>\r\n      <div class=\"item-row\">\r\n        <div class=\"itemPropertyLabel\" >光强</div>\r\n        <simple-number-input class=\"w130\" v-model=\"lightIntensity\" @change=\"updateLightIntensity($event)\"/>\r\n      </div>\r\n      <div class=\"item-row\">\r\n        <div class=\"itemPropertyLabel\" >{{lightColorDesc}}</div>\r\n        <div class=\"inputWidth\" style=\"width: 130px\">\r\n          <el-input ref=\"eleLightColor\" v-model=\"lightColor\" @colorChange=\"updateLightColor\"\r\n                    :colorEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"item-row\" v-show=\"hasGroundColor\">\r\n        <div class=\"itemPropertyLabel\" >地面色</div>\r\n        <div class=\"inputWidth\" style=\"width: 130px\">\r\n          <el-input ref=\"eleLightGroundColor\" v-model=\"lightGroundColor\" @colorChange=\"updateLightGroundColor\"\r\n                    :colorEnabled=\"true\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"item-row\" v-show=\"hasLightDistance\">\r\n        <div class=\"itemPropertyLabel\" >光距</div>\r\n        <simple-number-input class=\"w130\" v-model=\"lightDistance\" @change=\"updateLightDistance\"/>\r\n      </div>\r\n      <div class=\"item-row\" v-show=\"hasLightAngle\">\r\n        <div class=\"itemPropertyLabel\" >光锥角度</div>\r\n        <simple-number-input class=\"w130\" v-model=\"lightAngle\" @change=\"updateLightAngle\"/>\r\n      </div>\r\n      <!--    <div class=\"item-row\">-->\r\n      <!--      <div class=\"itemPropertyLabel\" >可见</div>-->\r\n      <!--      <switch-item active-color=\"#409eff\" inactive-color=\"#ff4949\" v-model=\"valueVisible\" @change=\"toggleVisible\"/>-->\r\n      <!--    </div>-->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as Const from \"../../../3d/js/consts/Constants\";\r\n  import MainScene from \"../../../3d/js/MainScene\";\r\n  import SwitchItem from '@/components/element/switch/component';\r\n  import ElInput from '@/components/element/input';\r\n  import SimpleNumberInput from \"../gadget/SimpleNumberInput\";\r\n  import SimpleColorInput from \"../gadget/SimpleColorInput\";\r\n  import LightItems from \"../gadget/LightItems\";\r\n  import {convertLightObject} from \"../../../3d/js/util/StaticMethods\";\r\n\r\n  export default {\r\n    name: \"BoxLights\",\r\n    components: {LightItems, SimpleColorInput, SimpleNumberInput, SwitchItem, ElInput},\r\n    mounted() {\r\n      this.lights = MainScene.lightTool().allLights().map(it => convertLightObject(it));\r\n      let _this = this;\r\n      MainScene.scene().addEventListener(\"light removed\", (event) => {\r\n        if (_this.curLight && _this.curLight.id == event.id)\r\n          _this.curLight = null;\r\n        let index = _this.findLightById(event.id);\r\n        if (index > -1)\r\n          _this.lights.splice(index, 1);\r\n      });\r\n      MainScene.scene().addEventListener(\"light moved\", (event) => {\r\n        // _this.curLight = convertLightObject(event.light);\r\n        _this.curLight = _this.$refs.lightList.selectLightBy(event.light.uuid, true);\r\n        _this.curLight.position.copy(event.light.position);\r\n        let pos = _this.curLight.position;\r\n        _this.lightPosX = pos.x.toFixed(2);\r\n        _this.lightPosY = pos.y.toFixed(2);\r\n        _this.lightPosZ = pos.z.toFixed(2);\r\n      });\r\n\r\n      MainScene.scene().addEventListener(\"light selected\", (event) => {\r\n        if (!event.light) {\r\n          _this.$refs.lightList.refreshSelection();\r\n          _this.curLight = null;\r\n          return;\r\n        }\r\n        let ind = _this.findLightById(event.light.uuid);\r\n        if (ind < 0) {\r\n          let lightNew = convertLightObject(event.light);\r\n          _this.lights.push(lightNew);\r\n        }\r\n        _this.curLight = _this.$refs.lightList.selectLightBy(event.light.uuid, true);\r\n\r\n        if (_this.hasGroundColor) {\r\n          _this.lightColorDesc = \"天空色\";\r\n        } else {\r\n          _this.lightColorDesc = \"光色\";\r\n        }\r\n        let light = _this.curLight, pos = _this.curLight.position;\r\n        _this.lightColor = light.color.getHexString();\r\n        _this.$refs.eleLightColor.updateColor(_this.lightColor);\r\n        if (light.groundColor != undefined) {\r\n          _this.lightGroundColor = light.groundColor.getHexString();\r\n          _this.$refs.eleLightGroundColor.updateColor(_this.lightGroundColor);\r\n        }\r\n        _this.lightPosX = pos.x.toFixed(2);\r\n        _this.lightPosY = pos.y.toFixed(2);\r\n        _this.lightPosZ = pos.z.toFixed(2);\r\n        _this.lightIntensity = light.intensity.toFixed(2);\r\n        if (light.distance != undefined)\r\n          _this.lightDistance = light.distance.toFixed(2);\r\n        if (light.angle != undefined)\r\n          _this.lightAngle = light.angle.toFixed(3);\r\n      });\r\n    },\r\n    data() {\r\n      return {\r\n        lightColorDesc: \"光色\",\r\n        showAddLightMenu: false,\r\n        valueVisible: true,\r\n        curLight: null,\r\n        lights: [],\r\n\r\n        lightColor: \"ffffff\",\r\n        lightGroundColor: \"000000\",\r\n        lightPosX: \"0\",\r\n        lightPosY: \"0\",\r\n        lightPosZ: \"0\",\r\n        lightIntensity: \"1.00\",\r\n        lightDistance: \"0\",\r\n        lightAngle: \"0.374\"\r\n      };\r\n    },\r\n    computed: {\r\n      lightTypeDesc() {\r\n        return this.curLight ? this.curLight.name : \"\";\r\n      },\r\n      lightSelected() {\r\n        return this.curLight != null;\r\n      },\r\n      hasGroundColor() {\r\n        return this.curLight && this.curLight.type == Const.lightTypeHemiSphere;\r\n      },\r\n      hasLightAngle() {\r\n        return this.curLight && this.curLight.type == Const.lightTypeSpot;\r\n      },\r\n      hasLightDistance() {\r\n        return this.curLight && (this.curLight.type == Const.lightTypeSpot ||\r\n            this.curLight.type == Const.lightTypePoint);\r\n      }\r\n    },\r\n    methods: {\r\n      findLightById(id) {\r\n        for (let i = 0; i < this.lights.length; i++) {\r\n          if (this.lights[i].id == id) {\r\n            return i;\r\n          }\r\n        }\r\n        return -1;\r\n      },\r\n      onclickAddLight() {\r\n        this.showAddLightMenu = !this.showAddLightMenu;\r\n      },\r\n      addPointLight() {\r\n        let light = MainScene.lightTool().addLight(Const.lightTypePoint);\r\n        this.showAddLightMenu = false;\r\n      },\r\n      addSpotLight() {\r\n        let light = MainScene.lightTool().addLight(Const.lightTypeSpot);\r\n        this.showAddLightMenu = false;\r\n      },\r\n      addDirectionLight() {\r\n        let light = MainScene.lightTool().addLight(Const.lightTypeDirection);\r\n        this.showAddLightMenu = false;\r\n      },\r\n      addHemiSphereLight() {\r\n        let light = MainScene.lightTool().addLight(Const.lightTypeHemiSphere);\r\n        this.showAddLightMenu = false;\r\n      },\r\n      updateLightColor(jsColorStr) {\r\n        let colorNum = parseInt(\"0x\" + jsColorStr);\r\n        this.curLight.color.setHex(colorNum);\r\n        MainScene.lightTool().updateLight(this.curLight.id, {color: this.curLight.color});\r\n      },\r\n      updateLightGroundColor(jsColorStr) {\r\n        let colorNum = parseInt(\"0x\" + jsColorStr);\r\n        this.curLight.groundColor.setHex(colorNum);\r\n        MainScene.lightTool().updateLight(this.curLight.id, {groundColor: this.curLight.groundColor});\r\n      },\r\n      updateLightPosition(event, field) {\r\n        // console.log(\"this.lightPosX: \" + this.lightPosX + \", \", event.target.value);\r\n        if (field == 0) {\r\n          this.curLight.position.x = parseFloat(event.target.value);\r\n        } else if (field == 1) {\r\n          this.curLight.position.y = parseFloat(event.target.value);\r\n        } else {\r\n          this.curLight.position.z = parseFloat(event.target.value);\r\n        }\r\n        MainScene.lightTool().updateLight(this.curLight.id, {position: this.curLight.position});\r\n      },\r\n      updateLightIntensity(event) {\r\n        // this.curLight.intensity = parseFloat(this.lightIntensity);\r\n        this.curLight.intensity = parseFloat(event.target.value);\r\n        MainScene.lightTool().updateLight(this.curLight.id, {intensity: this.curLight.intensity});\r\n      },\r\n      updateLightDistance(event) {\r\n        this.curLight.distance = parseFloat(event.target.value);\r\n        MainScene.lightTool().updateLight(this.curLight.id, {distance: this.curLight.distance});\r\n      },\r\n      updateLightAngle(event) {\r\n        this.curLight.angle = parseFloat(event.target.value);\r\n        MainScene.lightTool().updateLight(this.curLight.id, {angle: this.curLight.angle});\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .light-list {\r\n    position: absolute;\r\n    z-index: 99;\r\n    left: 66px;\r\n    top: 180px;\r\n    border: solid 1px #999;\r\n    box-shadow:3px 3px 11px 0px rgba(0, 0, 0, 0.3);\r\n    transform: scaleY(0);\r\n    transform-origin: top;\r\n    transition: 0.3s;\r\n  }\r\n  .show {\r\n    transform: scaleY(1);\r\n  }\r\n  .light-item {\r\n    list-style: none;\r\n    font-size: 15px;\r\n    color: black;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    background-color: white;\r\n    line-height: 1.2;\r\n  }\r\n  .bottom-line {\r\n    border-bottom: solid 1px #999;\r\n  }\r\n  .light-item:hover {\r\n  color: white;\r\n  background-color: #999;\r\n}\r\n.label {\r\n  font-size: 15px;\r\n  font-weight: bold;\r\n}\r\n.item-row {\r\n}\r\n  .w50 {\r\n    width: 50px;\r\n  }\r\n  .w130 {\r\n    width: 130px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxLights.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxLights.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxLights.vue?vue&type=template&id=fbccf048&scoped=true&\"\nimport script from \"./BoxLights.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxLights.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoxLights.vue?vue&type=style&index=0&id=fbccf048&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fbccf048\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"boxInTab\"},[_c('div',[_c('div',{staticClass:\"itemPropertyLabel\"},[_vm._v(\"全局材质\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.onChangeMaterial},model:{value:(_vm.matValue),callback:function ($$v) {_vm.matValue=$$v},expression:\"matValue\"}},_vm._l((_vm.matOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"boxInTab\">\r\n    <div>\r\n      <div class=\"itemPropertyLabel\">全局材质</div>\r\n      <el-select v-model=\"matValue\" placeholder=\"请选择\" @change=\"onChangeMaterial\">\r\n        <el-option\r\n                v-for=\"item in matOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ElSelect from '@/components/element/select';\r\n  import ElOption from '@/components/element/select/src/option';\r\n  import MainScene from \"../../../3d/js/MainScene\";\r\n  import {Lights_Editable} from \"../../../store/mutations-types\";\r\n  import EventBus from \"../../../store/EventBus\";\r\n\r\n  export default {\r\n    name: \"BoxMaterials\",\r\n    mounted() {\r\n      EventBus.$on('editing for 3d', (val) => {\r\n        if (!val) {\r\n          this.matValue = 3;\r\n        }\r\n      })\r\n    },\r\n    data() {\r\n      return {\r\n        matOptions: [{\r\n          value: 0,\r\n          type: 'MeshBasicMaterial',\r\n          label: \"基本材质\"\r\n        }, {\r\n          value: 1,\r\n          type: 'LineBasicMaterial',\r\n          label: \"线段材质\"\r\n        }, {\r\n          value: 2,\r\n          type: 'MeshNormalMaterial',\r\n          label: \"法向材质\"\r\n        }, {\r\n          value: 3,\r\n          type: 'MeshLambertMaterial',\r\n          label: \"漫反射材质\"\r\n        }, {\r\n          value: 4,\r\n          type: 'MeshPhongMaterial',\r\n          label: \"高光材质\"\r\n        }],\r\n        matValue:3\r\n      }\r\n    },\r\n    methods: {\r\n      onChangeMaterial() {\r\n        let opt = this.matOptions[this.matValue];\r\n        MainScene.changeGlobalMaterial(opt.type);\r\n        if (this.matValue < 3) {\r\n          MainScene.lightTool().visible(false);\r\n          this.$store.commit(Lights_Editable, false);\r\n        } else {\r\n          MainScene.lightTool().visible(true);\r\n          this.$store.commit(Lights_Editable, true);\r\n        }\r\n      }\r\n    },\r\n    components: {\r\n      ElSelect, ElOption\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxMaterials.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxMaterials.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoxMaterials.vue?vue&type=template&id=d398db1c&scoped=true&\"\nimport script from \"./BoxMaterials.vue?vue&type=script&lang=js&\"\nexport * from \"./BoxMaterials.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d398db1c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"tabContentBoxes\">\r\n    <collapse v-model=\"activeNames\" class=\"tabContent\" role=\"buildings\" @change=\"collapseChange\">\r\n      <collapse-item title=\"选择元素\" name=\"select\" :is-last = \"$store.state.editingFor3d\">\r\n        <box-selected-graphics/>\r\n      </collapse-item>\r\n      <collapse-item title=\"绘制元素\" name=\"create\" v-show=\"$store.state.showGraphicAdd && !$store.state.editingFor3d\"\r\n                     :is-last=\"true\">\r\n        <box-draw-graphic/>\r\n      </collapse-item>\r\n    </collapse>\r\n\r\n    <collapse v-model=\"activeNames2\" class=\"tabContent hide\" role=\"paths\" v-show=\"!$store.state.editingFor3d\">\r\n      <collapse-item title=\"选择路径\" name=\"select\">\r\n        <box-selected-paths/>\r\n      </collapse-item>\r\n      <collapse-item title=\"绘制路径\" name=\"create\" :is-last=\"true\">\r\n        <box-draw-path/>\r\n      </collapse-item>\r\n    </collapse>\r\n\r\n    <collapse v-model=\"activeLights\" class=\"tabContent hide\" role=\"paths\" v-show=\"$store.state.editingFor3d\">\r\n      <collapse-item title=\"材质\" name=\"materials\">\r\n        <box-materials/>\r\n      </collapse-item>\r\n      <collapse-item title=\"光源\" name=\"lights\" v-show=\"$store.state.lightsEditable\">\r\n        <box-lights/>\r\n      </collapse-item>\r\n    </collapse>\r\n\r\n    <div class=\"tabContent hide\" role=\"layers\">\r\n      <box-layers/>\r\n    </div>\r\n    <collapse v-model=\"activeSettings\" class=\"tabContent hide\" role=\"settings\">\r\n      <collapse-item title=\"地图设置\" name=\"mapEditorSetting\">\r\n        <box-settings/>\r\n      </collapse-item>\r\n      <collapse-item title=\"背景层分割\" name=\"refLayerDivide\" v-show=\"!$store.state.editingFor3d\">\r\n        <box-ref-layer-divide/>\r\n      </collapse-item>\r\n      <collapse-item title=\"地理位置设定\" name=\"geographyBind\" v-show=\"!$store.state.editingFor3d\">\r\n        <box-coord-bind ref=\"boxCoordBind\"/>\r\n      </collapse-item>\r\n      <collapse-item title=\"杂项\" name=\"misc\" :is-last=\"true\">\r\n        <box-misc/>\r\n      </collapse-item>\r\n    </collapse>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // import {Collapse, CollapseItem} from 'element-ui';\r\n  import Collapse from '../element/collapse/collapse';\r\n  import CollapseItem from '../element/collapse/collapse-item';\r\n  import BoxSelectedGraphics from \"./tabdraw/BoxSelectedGraphics\";\r\n  import BoxDrawGraphic from \"./tabdraw/BoxDrawGraphic\";\r\n  import BoxDrawPath from \"./tabpath/BoxDrawPath\";\r\n  import BoxSelectedPaths from \"./tabpath/BoxSelectedPaths\";\r\n  import BoxLayers from \"./tablayer/BoxLayers\";\r\n  import BoxSettings from \"./tabsettings/BoxSettings\";\r\n  import BoxCoordBind from \"./tabsettings/BoxCoordBind\";\r\n  import BoxRefLayerDivide from \"./tabsettings/BoxRefLayerDivide\";\r\n  import BoxMisc from \"./tabsettings/BoxMisc\";\r\n  import MainScene from '@/3d/js/MainScene';\r\n  import Main from \"../../3d/Main\";\r\n  import BoxLights from \"./tablights/BoxLights\";\r\n  import BoxMaterials from \"./tablights/BoxMaterials\";\r\n\r\n  export default {\r\n    name: \"MainTabBox\",\r\n    data() {\r\n      return {\r\n        activeNames: ['select', 'create'],\r\n        activeNames2: ['select', 'create'],\r\n        activeSettings: ['mapEditorSetting'],\r\n        activeLights: ['materials'],\r\n      };\r\n    },\r\n    computed: {\r\n      tabs() {//$store.state.editingFor3d\r\n        let tabNodeLst = document.querySelectorAll('.tabContent');\r\n        let arr = [];\r\n        tabNodeLst.forEach(it => arr.push(it));\r\n        if (this.$store.state.editingFor3d) {\r\n          arr.splice(1, 1);\r\n        } else {\r\n          arr.splice(2, 1);\r\n        }\r\n        return arr;\r\n      }\r\n    },\r\n    methods: {\r\n      setTabs(obj) {\r\n        // let tabs = document.querySelectorAll('.tabContent');\r\n        // console.log(this.tabs);\r\n        let oldIndex = obj.pre, newIndex = obj.cur;\r\n        this.tabs[oldIndex].style.display = 'none';\r\n        this.tabs[newIndex].style.display = 'block';\r\n        if (oldIndex == 1) {\r\n          MainScene.onNavPathTabUnselected();\r\n        } else if (oldIndex == 3) {\r\n          MainScene.onSettingsTabUnelected();\r\n        }\r\n\r\n        if (newIndex == 1) {\r\n          MainScene.onNavPathTabSelected();\r\n        } else if (newIndex == 3) {\r\n          MainScene.onSettingsTabSelected();\r\n          // this.$refs.boxCoordBind.updateUI();\r\n        }\r\n      },\r\n      collapseChange() {\r\n        // console.log(\"collapseChange: \" + this.activeNames);\r\n      }\r\n    },\r\n    components: {\r\n      BoxMaterials,\r\n      BoxLights,\r\n      Collapse, CollapseItem, BoxSelectedGraphics, BoxDrawGraphic, BoxDrawPath, BoxSelectedPaths,\r\n      BoxLayers, BoxSettings, BoxCoordBind, BoxRefLayerDivide, BoxMisc\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .tabContentBoxes {\r\n\r\n  }\r\n  .tabContent {\r\n    padding:0;\r\n    overflow-y: auto;\r\n    max-height: calc(100vh - 139px);\r\n  }\r\n  .hide {\r\n    display: none;\r\n  }\r\n\r\n  .tabContent::-webkit-scrollbar {\r\n    width: 6px;\r\n    height: 6px;\r\n    background-color: #fff;\r\n  }\r\n  .tabContent::-webkit-scrollbar-thumb {\r\n    background-color: #93b9e3;\r\n  }\r\n  .tabContent::-webkit-scrollbar-track {\r\n    background-color: #d9d9d9;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTabBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTabBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTabBox.vue?vue&type=template&id=ae3cc558&scoped=true&\"\nimport script from \"./MainTabBox.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTabBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainTabBox.vue?vue&type=style&index=0&id=ae3cc558&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ae3cc558\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"guideBox\",class:{'guideBoxHide': _vm.isHide}},[_c('div',{staticClass:\"guideBtn\",on:{\"click\":function($event){_vm.isHide = !_vm.isHide}}},[(!_vm.isHide)?_c('img',{attrs:{\"src\":require(\"../../../assets/img/tooltip/guide_show.png\")}}):_c('img',{attrs:{\"src\":require(\"../../../assets/img/tooltip/guide_unshow.png\")}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipIndex == 0),expression:\"tipIndex == 0\"}],staticClass:\"contentBox\",attrs:{\"role\":\"drawTip\"}},[_vm._v(\" 1、鼠标右键移动地图，滚轮缩放\"),_c('br'),_vm._v(\" 2、按住Shift，快速选中多个元素\"),_c('br'),_vm._v(\" 3、按住Ctrl，拖动鼠标左键，可进行框选\"),_c('br'),_vm._v(\" 4、Shift + Alt + 鼠标左键拖拽，可旋转视角\"),_c('br'),_vm._v(\" 5、Alt + 方向键/ W / S / A / D，可移动视角\"),_c('br'),_vm._v(\" 6、编辑元素节点时，点击元素边，可新增节点\"),_c('br'),_vm._v(\" 7、编辑元素节点时，按住alt点击节点，可删除选中节点\"),_c('br')]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipIndex == 1),expression:\"tipIndex == 1\"}],staticClass:\"contentBox\",attrs:{\"role\":\"pathTip\"}},[_vm._v(\" 1、按住Shift，单击鼠标左键可进行多选\"),_c('br'),_vm._v(\" 2、按住Ctrl，拖动鼠标左键，可进行框选\"),_c('br'),_vm._v(\" 3、选中路径，左侧可设置通行方向和权重\"),_c('br'),_vm._v(\" 4、选中路径后，右键可打开菜单 \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipIndex == 2),expression:\"tipIndex == 2\"}],staticClass:\"contentBox\",attrs:{\"role\":\"pathTip\"}},[_vm._v(\" 1、点击锁图标，可解锁/锁定图层\"),_c('br'),_vm._v(\" 2、点击眼睛图标，可隐藏/显示图层\"),_c('br'),_vm._v(\" 3、点击顶部'预览'按钮，可以预览图形的3d效果\"),_c('br'),_vm._v(\" 4、点击顶部'保存'按钮，可以保存当前图形数据，下次打开网页时，自动加载\"),_c('br'),_vm._v(\" 5、点击顶部'下载'按钮，可以将当前图形数据存为文本，并下载到本地\"),_c('br'),_vm._v(\" 6、点击顶部'加载'按钮，可以从本地文本中载入图形 \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipIndex == 3),expression:\"tipIndex == 3\"}],staticClass:\"contentBox\",attrs:{\"role\":\"settingsTip\"}},[_vm._v(\" 1、点击指北针快速恢复视角\"),_c('br'),_vm._v(\" 2、点击右上角的位置图标快速回到初始位置\"),_c('br'),_vm._v(\" 3、选中多个元素 + backspace / delete，删除所选元素\"),_c('br'),_vm._v(\" 4、选中多个元素 + 方向键/ W / S / A / D，分别上下左右移动所选元素较小距离\"),_c('br'),_vm._v(\" 5、选中多个元素 + Shift + 方向键/ W / S / A / D，分别上下左右移动所选元素较大距离\"),_c('br'),_vm._v(\" 6、选中单个元素 + R，逆时针旋转元素90度\"),_c('br'),_vm._v(\" 7、ctrl + z 是撤销操作的热键, ctrl + shift + z是恢复被撤销操作的热键\"),_c('br'),_vm._v(\" 8、Shift + F4, 不可撤销地清除所有图层（图形，路径，背景图）, 并且清除编辑历史 \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"guideBox\" :class=\"{'guideBoxHide': isHide}\">\r\n    <div class=\"guideBtn\" @click=\"isHide = !isHide\">\r\n      <img src=\"../../../assets/img/tooltip/guide_show.png\" v-if=\"!isHide\">\r\n      <img src=\"../../../assets/img/tooltip/guide_unshow.png\" v-else>\r\n    </div>\r\n    <div class=\"contentBox\" role=\"drawTip\" v-show=\"tipIndex == 0\">\r\n      1、鼠标右键移动地图，滚轮缩放<br>\r\n      2、按住Shift，快速选中多个元素<br>\r\n      3、按住Ctrl，拖动鼠标左键，可进行框选<br>\r\n      4、Shift + Alt + 鼠标左键拖拽，可旋转视角<br>\r\n      5、Alt + 方向键/ W / S / A / D，可移动视角<br>\r\n      6、编辑元素节点时，点击元素边，可新增节点<br>\r\n      7、编辑元素节点时，按住alt点击节点，可删除选中节点<br>\r\n    </div>\r\n    <div class=\"contentBox\" role=\"pathTip\" v-show=\"tipIndex == 1\">\r\n      1、按住Shift，单击鼠标左键可进行多选<br>\r\n      2、按住Ctrl，拖动鼠标左键，可进行框选<br>\r\n      3、选中路径，左侧可设置通行方向和权重<br>\r\n      4、选中路径后，右键可打开菜单\r\n    </div>\r\n    <div class=\"contentBox\" role=\"pathTip\" v-show=\"tipIndex == 2\">\r\n      1、点击锁图标，可解锁/锁定图层<br>\r\n      2、点击眼睛图标，可隐藏/显示图层<br>\r\n      3、点击顶部'预览'按钮，可以预览图形的3d效果<br>\r\n      4、点击顶部'保存'按钮，可以保存当前图形数据，下次打开网页时，自动加载<br>\r\n      5、点击顶部'下载'按钮，可以将当前图形数据存为文本，并下载到本地<br>\r\n      6、点击顶部'加载'按钮，可以从本地文本中载入图形\r\n    </div>\r\n    <div class=\"contentBox\" role=\"settingsTip\" v-show=\"tipIndex == 3\">\r\n      1、点击指北针快速恢复视角<br>\r\n      2、点击右上角的位置图标快速回到初始位置<br>\r\n      3、选中多个元素 + backspace / delete，删除所选元素<br>\r\n      4、选中多个元素 + 方向键/ W / S / A / D，分别上下左右移动所选元素较小距离<br>\r\n      5、选中多个元素 + Shift + 方向键/ W / S / A / D，分别上下左右移动所选元素较大距离<br>\r\n      6、选中单个元素 + R，逆时针旋转元素90度<br>\r\n      7、ctrl + z 是撤销操作的热键, ctrl + shift + z是恢复被撤销操作的热键<br>\r\n      8、Shift + F4, 不可撤销地清除所有图层（图形，路径，背景图）, 并且清除编辑历史\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"GuideBox\",\r\n    data() {\r\n      return {\r\n        isHide: false,\r\n        tipIndex: 0\r\n      }\r\n    },\r\n    methods: {\r\n      setTipIndex(index) {\r\n        this.tipIndex = index;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .guideBox {\r\n    width: 235px;\r\n    min-height: 100px;\r\n    position: fixed;\r\n    top: 160px;\r\n    right: 0;\r\n    border-radius: 5px;\r\n    background-color: white;\r\n    /*border: 2px solid #72bb93;*/\r\n    box-shadow: rgba(0, 0, 0, 0.118) 0px 0px 6px;\r\n    transition: 0.5s;\r\n  }\r\n  .guideBoxHide {\r\n    right: -235px;\r\n  }\r\n  .guideBtn {\r\n    display: inline-block;\r\n    position: absolute;\r\n    top: 24px;\r\n    left: -24px;\r\n    cursor: pointer\r\n  }\r\n  .contentBox {\r\n    padding: 20px 10px 20px 20px;\r\n    font-size: 14px;\r\n    color: rgb(143, 143, 143);\r\n    /*white-space: pre-line;*/\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuideBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuideBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GuideBox.vue?vue&type=template&id=47085c1a&scoped=true&\"\nimport script from \"./GuideBox.vue?vue&type=script&lang=js&\"\nexport * from \"./GuideBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GuideBox.vue?vue&type=style&index=0&id=47085c1a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47085c1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"compassBox\"}},[_c('img',{staticStyle:{\"width\":\"40px\"},attrs:{\"src\":require(\"../../../assets/img/gadget/compass3.svg\")},on:{\"click\":_vm.resetRotation}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"compassBox\">\r\n    <img src=\"../../../assets/img/gadget/compass3.svg\" @click=\"resetRotation\" style=\"width: 40px; \">\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import MainScene from '@/3d/js/MainScene';\r\n\r\n  export default {\r\n    name: \"CompassItem\",\r\n    mounted() {\r\n      let _this = this;\r\n      let scene = MainScene.scene();\r\n      scene.addEventListener('zRotate', rotateCompass);\r\n\r\n      function rotateCompass(event) {\r\n        // console.log('rotateCompass')\r\n        _this.compassDom.style.transform = 'rotate(' + event.value + 'deg)';\r\n      }\r\n    },\r\n    computed: {\r\n      compassDom() {\r\n        return document.getElementById('compassBox');\r\n      }\r\n    },\r\n    methods: {\r\n      resetRotation() {\r\n        this.compassDom.style.transform = 'rotate(0deg)';\r\n        MainScene.resetCameraRotate();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CompassItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CompassItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CompassItem.vue?vue&type=template&id=c5c50c1a&scoped=true&\"\nimport script from \"./CompassItem.vue?vue&type=script&lang=js&\"\nexport * from \"./CompassItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c5c50c1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"locationReset icon-location-reset\",on:{\"click\":_vm.resetPosition}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"locationReset icon-location-reset\" @click=\"resetPosition\">\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import MainScene from '@/3d/js/MainScene';\r\n\r\n  export default {\r\n    name: \"LocationResetItem\",\r\n    methods: {\r\n      resetPosition() {\r\n        MainScene.resetCameraPos();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.locationReset {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationResetItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationResetItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LocationResetItem.vue?vue&type=template&id=333464ed&scoped=true&\"\nimport script from \"./LocationResetItem.vue?vue&type=script&lang=js&\"\nexport * from \"./LocationResetItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LocationResetItem.vue?vue&type=style&index=0&id=333464ed&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"333464ed\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-toolbar\"},[_c('div',{staticStyle:{\"width\":\"77px\",\"margin-left\":\"10px\"}},[_c('el-select',{attrs:{\"size\":\"mini\",\"hideBorder\":true,\"customIcon\":\"iconfont iconxiala2\"},on:{\"change\":_vm.onChangeScale},model:{value:(_vm.scaleValue),callback:function ($$v) {_vm.scaleValue=$$v},expression:\"scaleValue\"}},_vm._l((_vm.scaleOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._m(0),_c('div',{staticClass:\"btnGroup\"},[_c('div',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[0]),expression:\"tips[0]\",modifiers:{\"dark\":true}}],staticClass:\"singleBtnBox\",on:{\"click\":_vm.startAddTextMark}},[_c('i',{staticClass:\"iconfont iconA bareIcon\"})]),_c('el-dropdown',{attrs:{\"trigger\":\"click\"},on:{\"command\":_vm.onMeasureAction}},[_c('div',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[1]),expression:\"tips[1]\",modifiers:{\"dark\":true}}],staticClass:\"singleBtnBox\"},[_c('i',{staticClass:\"iconfont iconbiaochi bareIcon\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":2}},[_vm._v(\"测距离\")]),_c('el-dropdown-item',{attrs:{\"command\":1}},[_vm._v(\"测面积\")]),_c('el-dropdown-item',{attrs:{\"command\":0}},[_vm._v(\"清除\")])],1)],1),_c('div',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.fullScreenTip),expression:\"fullScreenTip\",modifiers:{\"dark\":true}}],staticClass:\"singleBtnBox\",on:{\"click\":_vm.toggleFull}},[_c('i',{staticClass:\"iconfont iconquanping bareIcon\"})]),_c('div',{directives:[{name:\"tip\",rawName:\"v-tip.dark\",value:(_vm.tips[3]),expression:\"tips[3]\",modifiers:{\"dark\":true}}],staticClass:\"singleBtnBox\"},[_c('i',{staticClass:\"iconfont iconchakan bareIcon\"})])],1),_vm._m(1),_c('span',[_vm._v(\"拆分：\")]),_c('div',{staticStyle:{\"width\":\"65px\"}},[_c('el-select',{attrs:{\"size\":\"mini\",\"customIcon\":\"iconfont iconxiala2\",\"hideBorder\":true},on:{\"change\":_vm.onChangeDivide},model:{value:(_vm.divideValue),callback:function ($$v) {_vm.divideValue=$$v},expression:\"divideValue\"}},_vm._l((_vm.divideOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._m(2),_c('span',[_vm._v(\"楼层：\")]),_c('div',{staticStyle:{\"width\":\"55px\",\"margin-right\":\"10px\"}},[_c('el-select',{attrs:{\"size\":\"mini\",\"customIcon\":\"iconfont iconxiala2\",\"hideBorder\":true},on:{\"change\":_vm.onChangeFloor},model:{value:(_vm.floorValue),callback:function ($$v) {_vm.floorValue=$$v},expression:\"floorValue\"}},_vm._l((_vm.floorOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"div-divider\"},[_c('div',{staticClass:\"vertital-divide\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"div-divider\"},[_c('div',{staticClass:\"vertital-divide\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"div-divider\"},[_c('div',{staticClass:\"vertital-divide\"})])}]\n\nexport { render, staticRenderFns }","//https://www.jianshu.com/p/54729c73686a\r\n//进入全屏\r\nfunction fullScreen(ele) {\r\n  if (ele.requestFullscreen) {\r\n    ele.requestFullscreen();\r\n  } else if (ele.mozRequestFullScreen) {\r\n    ele.mozRequestFullScreen();\r\n  } else if (ele.webkitRequestFullscreen) {\r\n    ele.webkitRequestFullscreen();\r\n  } else if (ele.msRequestFullscreen) {\r\n    ele.msRequestFullscreen();\r\n  }\r\n}\r\n\r\nfunction exitFullscreen() {\r\n  if(document.exitFullScreen) {\r\n    document.exitFullScreen();\r\n  } else if(document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen();\r\n  } else if(document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  } else if(document.msExitFullscreen) {\r\n    document.msExitFullscreen();\r\n  }\r\n}\r\n\r\nfunction getFullscreenElement() {\r\n  return (\r\n    document.fullscreenElement ||\r\n    document.mozFullScreenElement ||\r\n    document.msFullScreenElement ||\r\n    document.webkitFullscreenElement||null\r\n  );\r\n}\r\n\r\nfunction isFullScreen() {\r\n  return  !! (\r\n    document.fullscreen ||\r\n    document.mozFullScreen ||\r\n    document.webkitIsFullScreen ||\r\n    document.webkitFullScreen ||\r\n    document.msFullScreen\r\n  );\r\n}\r\n\r\nfunction isFullscreenEnabled() {\r\n  return  (\r\n    document.fullscreenEnabled ||\r\n    document.mozFullScreenEnabled ||\r\n    document.webkitFullscreenEnabled ||\r\n    document.msFullscreenEnabled\r\n  );\r\n}\r\n\r\nexport {fullScreen, exitFullscreen, getFullscreenElement, isFullScreen, isFullscreenEnabled}\r\n","<template>\r\n  <div class=\"editor-toolbar\">\r\n    <div style=\"width: 77px; margin-left: 10px\">\r\n      <el-select v-model=\"scaleValue\" @change=\"onChangeScale\" size=\"mini\" :hideBorder=\"true\"\r\n        customIcon=\"iconfont iconxiala2\">\r\n        <el-option\r\n                v-for=\"item in scaleOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n    <div class=\"div-divider\">\r\n      <div class=\"vertital-divide\"/>\r\n    </div>\r\n    <div class=\"btnGroup\">\r\n      <div class=\"singleBtnBox\" v-tip.dark=\"tips[0]\" @click=\"startAddTextMark\">\r\n        <i class=\"iconfont iconA bareIcon\"></i>\r\n      </div>\r\n\r\n      <el-dropdown trigger=\"click\" @command=\"onMeasureAction\">\r\n        <div class=\"singleBtnBox\" v-tip.dark=\"tips[1]\">\r\n          <i class=\"iconfont iconbiaochi bareIcon\"></i>\r\n        </div>\r\n        <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item :command=\"2\">测距离</el-dropdown-item>\r\n          <el-dropdown-item :command=\"1\">测面积</el-dropdown-item>\r\n          <el-dropdown-item :command=\"0\">清除</el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </el-dropdown>\r\n\r\n      <div class=\"singleBtnBox\" v-tip.dark=\"fullScreenTip\" @click=\"toggleFull\">\r\n        <i class=\"iconfont iconquanping bareIcon\"></i>\r\n      </div>\r\n      <div class=\"singleBtnBox\" v-tip.dark=\"tips[3]\">\r\n        <i class=\"iconfont iconchakan bareIcon\"></i>\r\n      </div>\r\n    </div>\r\n    <div class=\"div-divider\">\r\n      <div class=\"vertital-divide\"/>\r\n    </div>\r\n    <span>拆分：</span>\r\n    <div style=\"width: 65px; \">\r\n      <el-select v-model=\"divideValue\" @change=\"onChangeDivide\" size=\"mini\"\r\n                 customIcon=\"iconfont iconxiala2\" :hideBorder=\"true\">\r\n        <el-option\r\n                v-for=\"item in divideOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n\r\n    <div class=\"div-divider\">\r\n      <div class=\"vertital-divide\"/>\r\n    </div>\r\n    <span>楼层：</span>\r\n    <div style=\"width: 55px; margin-right: 10px\">\r\n      <el-select v-model=\"floorValue\" @change=\"onChangeFloor\" size=\"mini\"\r\n                 customIcon=\"iconfont iconxiala2\" :hideBorder=\"true\">\r\n        <el-option\r\n                v-for=\"item in floorOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ElSelect from '@/components/element/select';\r\n  import ElOption from '@/components/element/select/src/option';\r\n  import ElDropdown from '@/components/element/dropdown';\r\n  import ElDropdownMenu from '@/components/element/dropdown/src/dropdown-menu';\r\n  import ElDropdownItem from '@/components/element/dropdown/src/dropdown-item';\r\n  import MainScene from \"@/3d/js/MainScene\";\r\n  import Notification from \"../../element/notification\";\r\n  import {fullScreen, exitFullscreen, isFullScreen} from \"../../../external_lib/fullscreen\";\r\n\r\n  export default {\r\n    name: \"EditorToolbar\",\r\n    components: {\r\n      ElSelect, ElOption, ElDropdown, ElDropdownMenu, ElDropdownItem\r\n    },\r\n    mounted() {\r\n      let _this = this;\r\n      document.addEventListener(\"fullscreenchange\", function (e) {\r\n        if (document.fullscreenElement) {\r\n          _this.fullScreenTip = \"退出全屏\"\r\n        } else {\r\n          _this.fullScreenTip = \"全屏\"\r\n        }\r\n      })\r\n\r\n      MainScene.cameraControl().addEventListener(\"change scale\", onCameraScaling);\r\n\r\n      function onCameraScaling(event) {\r\n        let val = parseInt((1/event.scaleValue) * 100);\r\n        let res = _this.scaleOptions.find((value, index, arr) => value.value == val);\r\n        if (res) {\r\n          _this.scaleValue = val;\r\n        } else {\r\n          _this.scaleValue = val + \"%\";\r\n        }\r\n      }\r\n      MainScene.scene().addEventListener(\"divide ref layer\", (event) => {\r\n        for (let dOption of _this.divideOptions) {\r\n          if (dOption.label == event.value) {\r\n            _this.divideValue = dOption.value;\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    data() {\r\n      return {\r\n        tips: [\"新增标注\", \"测量\", \"全屏\", \"显示所有隐藏元素\", \"拆分底图\"],\r\n        fullScreenTip: '全屏',\r\n        scaleOptions: [{\r\n          value: 25,\r\n          label: '25%'\r\n        }, {\r\n          value: 50,\r\n          label: '50%'\r\n        }, {\r\n          value: 100,\r\n          label: '100%'\r\n        }, {\r\n          value: 200,\r\n          label: '200%'\r\n        }, {\r\n          value: 400,\r\n          label: '400%'\r\n        }, {\r\n          value: 800,\r\n          label: '800%'\r\n        }],\r\n        scaleValue: 100,\r\n\r\n        floorOptions: [{\r\n          value: 0,\r\n          label: 'b1'\r\n        }, {\r\n          value: 1,\r\n          label: 'b2'\r\n        }, {\r\n          value: 2,\r\n          label: 'b3'\r\n        }],\r\n        floorValue: 0,\r\n\r\n        divideOptions: [{\r\n          value: 0,\r\n          label: '1x1'\r\n        }, {\r\n          value: 1,\r\n          label: '2x2'\r\n        }, {\r\n          value: 2,\r\n          label: '3x3'\r\n        }, {\r\n          value: 3,\r\n          label: '4x4'\r\n        }, {\r\n          value: 4,\r\n          label: '5x5'\r\n        }],\r\n        divideValue: 0\r\n      }\r\n    },\r\n    methods: {\r\n      onMeasureAction(command) {\r\n        switch (command) {\r\n          case 2:\r\n            MainScene.measureTool().startMeasureLength();\r\n            break;\r\n          case 1:\r\n            MainScene.measureTool().startMeasureArea();\r\n            break;\r\n          case 0:\r\n            MainScene.measureTool().clearMeasures();\r\n            break;\r\n        }\r\n      },\r\n      startAddTextMark() {\r\n        MainScene.markerTool().startAddTextMark();\r\n      },\r\n      onChangeScale() {\r\n        MainScene.cameraControl().zoomCameraToPercentage(this.scaleValue);\r\n      },\r\n      onChangeDivide() {\r\n        let divideStr = this.divideOptions[this.divideValue].label;\r\n        try {\r\n          MainScene.divideRefImg(divideStr);\r\n        } catch (err) {\r\n          Notification.error({message:err, position:'top-left'});\r\n        }\r\n      },\r\n      toggleFull() {\r\n        if (isFullScreen()) {\r\n          exitFullscreen();\r\n        } else {\r\n          fullScreen(document.body);\r\n        }\r\n      },\r\n      onChangeFloor() {\r\n\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .editor-toolbar {\r\n    display: flex;\r\n    background-color: white;\r\n    box-shadow:0px 2px 13px 0px rgba(0, 0, 0, 0.2);\r\n    align-items: center;\r\n    /*width: 458px;*/\r\n    /*height: 54px;*/\r\n  }\r\n  .btnGroup {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    /*padding: 0 10px;*/\r\n\r\n  }\r\n  .vertital-divide {\r\n    border-left: solid 1px #ddd;\r\n    height: 24px;\r\n  }\r\n  .div-divider {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 20px;\r\n  }\r\n  .singleBtnBox {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .singleBtnBox:hover {\r\n    background-color: #ddd;\r\n  }\r\n  .bareIcon {\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    padding: 10px;\r\n    color: black;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorToolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorToolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorToolbar.vue?vue&type=template&id=871ebdbe&scoped=true&\"\nimport script from \"./EditorToolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorToolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditorToolbar.vue?vue&type=style&index=0&id=871ebdbe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"871ebdbe\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showing),expression:\"showing\"}],staticClass:\"bili\"},[_c('div',[_vm._v(_vm._s(_vm.biliNum)+\"m\")]),_c('div',{ref:\"biliSeg\",staticClass:\"segment\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"bili\" v-show=\"showing\">\r\n    <div>{{biliNum}}m</div>\r\n    <div class=\"segment\" ref=\"biliSeg\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import MainScene from '@/3d/js/MainScene';\r\n\r\n  export default {\r\n    name: \"BiliText\",\r\n    mounted() {\r\n      let width = MainScene.biliSegmentWidth();\r\n      let height = parseInt(width/5);\r\n      this.$refs.biliSeg.style.width = width + 'px';\r\n      this.$refs.biliSeg.style.height = height + 'px';\r\n      let _this = this;\r\n      this.showing = MainScene.coordTool().getScale() > 0;\r\n      MainScene.scene().addEventListener('reset ui', () => {\r\n        _this.showing = MainScene.coordTool().getScale() > 0;\r\n      })\r\n      MainScene.cameraControl().addEventListener('change scale', (event) => {\r\n        _this.biliNum = parseInt(MainScene.coordTool().getScale() * 2 * event.scaleValue);\r\n      })\r\n    },\r\n    data() {\r\n      return {\r\n        biliNum: 100,\r\n        showing: true\r\n      }\r\n    },\r\n    methods: {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.bili {\r\n  color: black;\r\n  position: absolute;\r\n  bottom: 24px;\r\n  left: 55px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n  .segment {\r\n    border-bottom: 1px solid black;\r\n    border-left: 1px solid black;\r\n    border-right: 1px solid black;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BiliText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BiliText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BiliText.vue?vue&type=template&id=ee693466&scoped=true&\"\nimport script from \"./BiliText.vue?vue&type=script&lang=js&\"\nexport * from \"./BiliText.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BiliText.vue?vue&type=style&index=0&id=ee693466&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee693466\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"home\" v-title :data-title=\"pageTitle\">\r\n    <main3d/>\r\n    <main-top-bar/>\r\n    <tab-view>\r\n      <main-tab-bar @tabClick=\"onTabClick\"/>\r\n      <main-tab-box ref=\"tabBoxes\"/>\r\n    </tab-view>\r\n    <guide-box ref=\"guide\"/>\r\n    <compass-item class=\"compassIndicator\"/>\r\n    <location-reset-item class=\"locationIndicator\"/>\r\n    <editor-toolbar class=\"editor-float-bar\"/>\r\n    <bili-text/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // @ is an alias to /src\r\n  import MainTopBar from \"../components/content/MainTopBar\";\r\n  import TabView from \"../components/common/TabView\";\r\n  import MainTabBar from \"../components/content/MainTabBar\";\r\n  import MainTabBox from \"../components/content/MainTabBox\";\r\n  import GuideBox from \"../components/content/guide/GuideBox\";\r\n  import CompassItem from \"../components/content/gadget/CompassItem\";\r\n  import LocationResetItem from \"../components/content/gadget/LocationResetItem\";\r\n  import EditorToolbar from \"../components/content/gadget/EditorToolbar\";\r\n  import Main3d from \"@/3d/Main\";\r\n  import Config from \"../3d/js/configurable/Config\";\r\n\r\n  import jsColor from \"@/external_lib/jscolor\";\r\n\r\n  import Vue from 'vue'\r\n  import Vtip from '../external_lib/vtip/index.com'\r\n  import '../external_lib/vtip/index.min.css'\r\n  import axios from 'axios'\r\n  import VueAxios from 'vue-axios'\r\n  import BiliText from \"../components/content/gadget/BiliText\";\r\n\r\n  Vue.use(VueAxios, axios)\r\n  // 注册指令使用\r\n  Vue.use(Vtip.directive)\r\n\r\n  export default {\r\n    name: 'Home',\r\n    beforeCreate() {\r\n      jsColor.init();\r\n      if (this.$route.query.fps != undefined)\r\n        Config.ui.showFps = this.$route.query.fps == 1;\r\n      Config.remote.token = this.$route.query.token;\r\n      Config.remote.mapId = this.$route.query.mapId;\r\n      axios.defaults.baseURL = Config.remote.baseUrl;\r\n      axios.defaults.headers.common['token'] = Config.remote.token;\r\n      if (Config.remote.token)\r\n        Config.code.loadSavingFromStart = false;\r\n    },\r\n    data() {\r\n      return {\r\n        pageTitle: \"室内地图编辑器\"\r\n      }\r\n    },\r\n    methods: {\r\n      onTabClick(obj) {\r\n        this.$refs.tabBoxes.setTabs(obj);\r\n        this.$refs.guide.setTipIndex(obj.cur);\r\n      }\r\n    },\r\n    components: {\r\n      BiliText,\r\n      MainTopBar, TabView, MainTabBar, MainTabBox, GuideBox, CompassItem, LocationResetItem,\r\n      Main3d, EditorToolbar\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .home {\r\n    overflow: hidden;\r\n    width: 100vw;\r\n    height: 100vh;\r\n  }\r\n  .compassIndicator {\r\n    position: fixed;\r\n    top: 56px;\r\n    right: 24px;\r\n\r\n    width: 36px;\r\n    height: 36px;\r\n    cursor: pointer;\r\n  }\r\n  .locationIndicator {\r\n    position: fixed;\r\n    top: 96px;\r\n    right: 24px;\r\n\r\n    width: 36px;\r\n    height: 36px;\r\n    cursor: pointer;\r\n  }\r\n  .editor-float-bar {\r\n    position: absolute;\r\n    bottom: 20px;\r\n    right: 20px;\r\n    z-index: 1;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=c3394e22&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=c3394e22&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c3394e22\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\n// import PreviewPage from '../views/PreviewPage.vue'\r\n// import About from '../views/About.vue'\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: Home,\r\n    meta: {\r\n      title: \"室内地图编辑器\"\r\n    }\r\n  },\r\n  {\r\n    path: '/preview',\r\n    name: 'PreviewV2',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/PreviewV2.vue'),\r\n    // component: PreviewPage\r\n    meta: {\r\n      title: \"地图预览手机端\"\r\n    }\r\n  },\r\n  {\r\n    path: '/preview4pc',\r\n    name: 'PreviewPage4pc',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/PreviewPage4pc.vue'),\r\n    // component: PreviewPage\r\n    meta: {\r\n      title: \"地图预览pc端\"\r\n    }\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'About',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue')\r\n    // component: About\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'hash',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n});\r\n\r\nexport default router\r\n","import Vue from 'vue'\r\nimport Vuex from '../external_lib/vuex.esm.browser.min.js'\r\nimport * as M from \"./mutations-types\";\r\n\r\nVue.use(Vuex)\r\n\r\nconst store =  new Vuex.Store({\r\n  state: {\r\n    hasRefImage: false,\r\n    editingFor3d: false,\r\n    showCompassItem: false,\r\n    showBottomBox: false,\r\n    showBottomInfo: false,\r\n    showGraphicAdd: true,\r\n    isNavigating: false,\r\n    lightsEditable: true,\r\n  },\r\n  mutations: {\r\n    [M.Ref_Flag](state, flag) {\r\n      state.hasRefImage = flag;\r\n    },\r\n    [M.Show_CompassItem](state, flag) {\r\n      state.showCompassItem = flag;\r\n    },\r\n    [M.Show_BottomBox](state, flag) {\r\n      state.showBottomBox = flag;\r\n    },\r\n    [M.Show_BottomInfo](state, flag) {\r\n      state.showBottomInfo = flag;\r\n    },\r\n    [M.Show_GraphicAdd](state, flag) {\r\n      state.showGraphicAdd = flag;\r\n    },\r\n    [M.Is_Navigating](state, flag) {\r\n      state.isNavigating = flag\r\n    },\r\n    [M.Editing_For_3d](state, flag) {\r\n      state.editingFor3d = flag\r\n    },\r\n    [M.Lights_Editable](state, flag) {\r\n      state.lightsEditable = flag\r\n    }\r\n  },\r\n  actions: {\r\n  },\r\n  modules: {\r\n  }\r\n});\r\n\r\nexport default store;\r\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\n\r\nVue.config.productionTip = false\r\n\r\n// router.beforeEach((to, from, next) => {\r\n//   window.document.title = to.meta.title == undefined ? '室内地图编辑' : to.meta.title;\r\n//\r\n//   next();\r\n// })\r\nVue.directive('title', {\r\n  inserted: function (el, binding) {\r\n    const { value } = binding\r\n    if (el.dataset.title) { // 方式1，可以给标签的data-title的属性赋值\r\n      document.title = el.dataset.title\r\n    } else if (value && value.title) { // 方式2，指令传参\r\n      document.title = value.title\r\n    }\r\n  }\r\n})\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n\r\n\r\n","/**\r\n * @fileOverview Kickass library to create and place poppers near their reference elements.\r\n * @version {{version}}\r\n * @license\r\n * Copyright (c) 2016 Federico Zivolo and contributors\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all\r\n * copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n * SOFTWARE.\r\n */\r\n\r\n//\r\n// Cross module loader\r\n// Supported: Node, AMD, Browser globals\r\n//\r\n;(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n    } else if (typeof module === 'object' && module.exports) {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals (root is window)\r\n        root.Popper = factory();\r\n    }\r\n}(this, function () {\r\n\r\n    'use strict';\r\n\r\n    var root = window;\r\n\r\n    // default options\r\n    var DEFAULTS = {\r\n        // placement of the popper\r\n        placement: 'bottom',\r\n\r\n        gpuAcceleration: true,\r\n\r\n        // shift popper from its origin by the given amount of pixels (can be negative)\r\n        offset: 0,\r\n\r\n        // the element which will act as boundary of the popper\r\n        boundariesElement: 'viewport',\r\n\r\n        // amount of pixel used to define a minimum distance between the boundaries and the popper\r\n        boundariesPadding: 5,\r\n\r\n        // popper will try to prevent overflow following this order,\r\n        // by default, then, it could overflow on the left and on top of the boundariesElement\r\n        preventOverflowOrder: ['left', 'right', 'top', 'bottom'],\r\n\r\n        // the behavior used by flip to change the placement of the popper\r\n        flipBehavior: 'flip',\r\n\r\n        arrowElement: '[x-arrow]',\r\n\r\n        arrowOffset: 0,\r\n\r\n        // list of functions used to modify the offsets before they are applied to the popper\r\n        modifiers: [ 'shift', 'offset', 'preventOverflow', 'keepTogether', 'arrow', 'flip', 'applyStyle'],\r\n\r\n        modifiersIgnored: [],\r\n\r\n        forceAbsolute: false\r\n    };\r\n\r\n    /**\r\n     * Create a new Popper.js instance\r\n     * @constructor Popper\r\n     * @param {HTMLElement} reference - The reference element used to position the popper\r\n     * @param {HTMLElement|Object} popper\r\n     *      The HTML element used as popper, or a configuration used to generate the popper.\r\n     * @param {String} [popper.tagName='div'] The tag name of the generated popper.\r\n     * @param {Array} [popper.classNames=['popper']] Array of classes to apply to the generated popper.\r\n     * @param {Array} [popper.attributes] Array of attributes to apply, specify `attr:value` to assign a value to it.\r\n     * @param {HTMLElement|String} [popper.parent=window.document.body] The parent element, given as HTMLElement or as query string.\r\n     * @param {String} [popper.content=''] The content of the popper, it can be text, html, or node; if it is not text, set `contentType` to `html` or `node`.\r\n     * @param {String} [popper.contentType='text'] If `html`, the `content` will be parsed as HTML. If `node`, it will be appended as-is.\r\n     * @param {String} [popper.arrowTagName='div'] Same as `popper.tagName` but for the arrow element.\r\n     * @param {Array} [popper.arrowClassNames='popper__arrow'] Same as `popper.classNames` but for the arrow element.\r\n     * @param {String} [popper.arrowAttributes=['x-arrow']] Same as `popper.attributes` but for the arrow element.\r\n     * @param {Object} options\r\n     * @param {String} [options.placement=bottom]\r\n     *      Placement of the popper accepted values: `top(-start, -end), right(-start, -end), bottom(-start, -right),\r\n     *      left(-start, -end)`\r\n     *\r\n     * @param {HTMLElement|String} [options.arrowElement='[x-arrow]']\r\n     *      The DOM Node used as arrow for the popper, or a CSS selector used to get the DOM node. It must be child of\r\n     *      its parent Popper. Popper.js will apply to the given element the style required to align the arrow with its\r\n     *      reference element.\r\n     *      By default, it will look for a child node of the popper with the `x-arrow` attribute.\r\n     *\r\n     * @param {Boolean} [options.gpuAcceleration=true]\r\n     *      When this property is set to true, the popper position will be applied using CSS3 translate3d, allowing the\r\n     *      browser to use the GPU to accelerate the rendering.\r\n     *      If set to false, the popper will be placed using `top` and `left` properties, not using the GPU.\r\n     *\r\n     * @param {Number} [options.offset=0]\r\n     *      Amount of pixels the popper will be shifted (can be negative).\r\n     *\r\n     * @param {String|Element} [options.boundariesElement='viewport']\r\n     *      The element which will define the boundaries of the popper position, the popper will never be placed outside\r\n     *      of the defined boundaries (except if `keepTogether` is enabled)\r\n     *\r\n     * @param {Number} [options.boundariesPadding=5]\r\n     *      Additional padding for the boundaries\r\n     *\r\n     * @param {Array} [options.preventOverflowOrder=['left', 'right', 'top', 'bottom']]\r\n     *      Order used when Popper.js tries to avoid overflows from the boundaries, they will be checked in order,\r\n     *      this means that the last ones will never overflow\r\n     *\r\n     * @param {String|Array} [options.flipBehavior='flip']\r\n     *      The behavior used by the `flip` modifier to change the placement of the popper when the latter is trying to\r\n     *      overlap its reference element. Defining `flip` as value, the placement will be flipped on\r\n     *      its axis (`right - left`, `top - bottom`).\r\n     *      You can even pass an array of placements (eg: `['right', 'left', 'top']` ) to manually specify\r\n     *      how alter the placement when a flip is needed. (eg. in the above example, it would first flip from right to left,\r\n     *      then, if even in its new placement, the popper is overlapping its reference element, it will be moved to top)\r\n     *\r\n     * @param {Array} [options.modifiers=[ 'shift', 'offset', 'preventOverflow', 'keepTogether', 'arrow', 'flip', 'applyStyle']]\r\n     *      List of functions used to modify the data before they are applied to the popper, add your custom functions\r\n     *      to this array to edit the offsets and placement.\r\n     *      The function should reflect the @params and @returns of preventOverflow\r\n     *\r\n     * @param {Array} [options.modifiersIgnored=[]]\r\n     *      Put here any built-in modifier name you want to exclude from the modifiers list\r\n     *      The function should reflect the @params and @returns of preventOverflow\r\n     *\r\n     * @param {Boolean} [options.removeOnDestroy=false]\r\n     *      Set to true if you want to automatically remove the popper when you call the `destroy` method.\r\n     */\r\n    function Popper(reference, popper, options) {\r\n        this._reference = reference.jquery ? reference[0] : reference;\r\n        this.state = {};\r\n\r\n        // if the popper variable is a configuration object, parse it to generate an HTMLElement\r\n        // generate a default popper if is not defined\r\n        var isNotDefined = typeof popper === 'undefined' || popper === null;\r\n        var isConfig = popper && Object.prototype.toString.call(popper) === '[object Object]';\r\n        if (isNotDefined || isConfig) {\r\n            this._popper = this.parse(isConfig ? popper : {});\r\n        }\r\n        // otherwise, use the given HTMLElement as popper\r\n        else {\r\n            this._popper = popper.jquery ? popper[0] : popper;\r\n        }\r\n\r\n        // with {} we create a new object with the options inside it\r\n        this._options = Object.assign({}, DEFAULTS, options);\r\n\r\n        // refactoring modifiers' list\r\n        this._options.modifiers = this._options.modifiers.map(function(modifier){\r\n            // remove ignored modifiers\r\n            if (this._options.modifiersIgnored.indexOf(modifier) !== -1) return;\r\n\r\n            // set the x-placement attribute before everything else because it could be used to add margins to the popper\r\n            // margins needs to be calculated to get the correct popper offsets\r\n            if (modifier === 'applyStyle') {\r\n                this._popper.setAttribute('x-placement', this._options.placement);\r\n            }\r\n\r\n            // return predefined modifier identified by string or keep the custom one\r\n            return this.modifiers[modifier] || modifier;\r\n        }.bind(this));\r\n\r\n        // make sure to apply the popper position before any computation\r\n        this.state.position = this._getPosition(this._popper, this._reference);\r\n        setStyle(this._popper, { position: this.state.position, top: 0 });\r\n\r\n        // fire the first update to position the popper in the right place\r\n        this.update();\r\n\r\n        // setup event listeners, they will take care of update the position in specific situations\r\n        this._setupEventListeners();\r\n        return this;\r\n    }\r\n\r\n\r\n    //\r\n    // Methods\r\n    //\r\n    /**\r\n     * Destroy the popper\r\n     * @method\r\n     * @memberof Popper\r\n     */\r\n    Popper.prototype.destroy = function() {\r\n        this._popper.removeAttribute('x-placement');\r\n        this._popper.style.left = '';\r\n        this._popper.style.position = '';\r\n        this._popper.style.top = '';\r\n        this._popper.style[getSupportedPropertyName('transform')] = '';\r\n        this._removeEventListeners();\r\n\r\n        // remove the popper if user explicity asked for the deletion on destroy\r\n        if (this._options.removeOnDestroy) {\r\n            this._popper.remove();\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Updates the position of the popper, computing the new offsets and applying the new style\r\n     * @method\r\n     * @memberof Popper\r\n     */\r\n    Popper.prototype.update = function() {\r\n        var data = { instance: this, styles: {} };\r\n\r\n        // store placement inside the data object, modifiers will be able to edit `placement` if needed\r\n        // and refer to _originalPlacement to know the original value\r\n        data.placement = this._options.placement;\r\n        data._originalPlacement = this._options.placement;\r\n\r\n        // compute the popper and reference offsets and put them inside data.offsets\r\n        data.offsets = this._getOffsets(this._popper, this._reference, data.placement);\r\n\r\n        // get boundaries\r\n        data.boundaries = this._getBoundaries(data, this._options.boundariesPadding, this._options.boundariesElement);\r\n\r\n        data = this.runModifiers(data, this._options.modifiers);\r\n\r\n        if (typeof this.state.updateCallback === 'function') {\r\n            this.state.updateCallback(data);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * If a function is passed, it will be executed after the initialization of popper with as first argument the Popper instance.\r\n     * @method\r\n     * @memberof Popper\r\n     * @param {Function} callback\r\n     */\r\n    Popper.prototype.onCreate = function(callback) {\r\n        // the createCallbacks return as first argument the popper instance\r\n        callback(this);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * If a function is passed, it will be executed after each update of popper with as first argument the set of coordinates and informations\r\n     * used to style popper and its arrow.\r\n     * NOTE: it doesn't get fired on the first call of the `Popper.update()` method inside the `Popper` constructor!\r\n     * @method\r\n     * @memberof Popper\r\n     * @param {Function} callback\r\n     */\r\n    Popper.prototype.onUpdate = function(callback) {\r\n        this.state.updateCallback = callback;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Helper used to generate poppers from a configuration file\r\n     * @method\r\n     * @memberof Popper\r\n     * @param config {Object} configuration\r\n     * @returns {HTMLElement} popper\r\n     */\r\n    Popper.prototype.parse = function(config) {\r\n        var defaultConfig = {\r\n            tagName: 'div',\r\n            classNames: [ 'popper' ],\r\n            attributes: [],\r\n            parent: root.document.body,\r\n            content: '',\r\n            contentType: 'text',\r\n            arrowTagName: 'div',\r\n            arrowClassNames: [ 'popper__arrow' ],\r\n            arrowAttributes: [ 'x-arrow']\r\n        };\r\n        config = Object.assign({}, defaultConfig, config);\r\n\r\n        var d = root.document;\r\n\r\n        var popper = d.createElement(config.tagName);\r\n        addClassNames(popper, config.classNames);\r\n        addAttributes(popper, config.attributes);\r\n        if (config.contentType === 'node') {\r\n            popper.appendChild(config.content.jquery ? config.content[0] : config.content);\r\n        }else if (config.contentType === 'html') {\r\n            popper.innerHTML = config.content;\r\n        } else {\r\n            popper.textContent = config.content;\r\n        }\r\n\r\n        if (config.arrowTagName) {\r\n            var arrow = d.createElement(config.arrowTagName);\r\n            addClassNames(arrow, config.arrowClassNames);\r\n            addAttributes(arrow, config.arrowAttributes);\r\n            popper.appendChild(arrow);\r\n        }\r\n\r\n        var parent = config.parent.jquery ? config.parent[0] : config.parent;\r\n\r\n        // if the given parent is a string, use it to match an element\r\n        // if more than one element is matched, the first one will be used as parent\r\n        // if no elements are matched, the script will throw an error\r\n        if (typeof parent === 'string') {\r\n            parent = d.querySelectorAll(config.parent);\r\n            if (parent.length > 1) {\r\n                console.warn('WARNING: the given `parent` query(' + config.parent + ') matched more than one element, the first one will be used');\r\n            }\r\n            if (parent.length === 0) {\r\n                throw 'ERROR: the given `parent` doesn\\'t exists!';\r\n            }\r\n            parent = parent[0];\r\n        }\r\n        // if the given parent is a DOM nodes list or an array of nodes with more than one element,\r\n        // the first one will be used as parent\r\n        if (parent.length > 1 && parent instanceof Element === false) {\r\n            console.warn('WARNING: you have passed as parent a list of elements, the first one will be used');\r\n            parent = parent[0];\r\n        }\r\n\r\n        // append the generated popper to its parent\r\n        parent.appendChild(popper);\r\n\r\n        return popper;\r\n\r\n        /**\r\n         * Adds class names to the given element\r\n         * @function\r\n         * @ignore\r\n         * @param {HTMLElement} target\r\n         * @param {Array} classes\r\n         */\r\n        function addClassNames(element, classNames) {\r\n            classNames.forEach(function(className) {\r\n                element.classList.add(className);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Adds attributes to the given element\r\n         * @function\r\n         * @ignore\r\n         * @param {HTMLElement} target\r\n         * @param {Array} attributes\r\n         * @example\r\n         * addAttributes(element, [ 'data-info:foobar' ]);\r\n         */\r\n        function addAttributes(element, attributes) {\r\n            attributes.forEach(function(attribute) {\r\n                element.setAttribute(attribute.split(':')[0], attribute.split(':')[1] || '');\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Helper used to get the position which will be applied to the popper\r\n     * @method\r\n     * @memberof Popper\r\n     * @param config {HTMLElement} popper element\r\n     * @param reference {HTMLElement} reference element\r\n     * @returns {String} position\r\n     */\r\n    Popper.prototype._getPosition = function(popper, reference) {\r\n        var container = getOffsetParent(reference);\r\n\r\n        if (this._options.forceAbsolute) {\r\n            return 'absolute';\r\n        }\r\n\r\n        // Decide if the popper will be fixed\r\n        // If the reference element is inside a fixed context, the popper will be fixed as well to allow them to scroll together\r\n        var isParentFixed = isFixed(reference, container);\r\n        return isParentFixed ? 'fixed' : 'absolute';\r\n    };\r\n\r\n    /**\r\n     * Get offsets to the popper\r\n     * @method\r\n     * @memberof Popper\r\n     * @access private\r\n     * @param {Element} popper - the popper element\r\n     * @param {Element} reference - the reference element (the popper will be relative to this)\r\n     * @returns {Object} An object containing the offsets which will be applied to the popper\r\n     */\r\n    Popper.prototype._getOffsets = function(popper, reference, placement) {\r\n        placement = placement.split('-')[0];\r\n        var popperOffsets = {};\r\n\r\n        popperOffsets.position = this.state.position;\r\n        var isParentFixed = popperOffsets.position === 'fixed';\r\n\r\n        //\r\n        // Get reference element position\r\n        //\r\n        var referenceOffsets = getOffsetRectRelativeToCustomParent(reference, getOffsetParent(popper), isParentFixed);\r\n\r\n        //\r\n        // Get popper sizes\r\n        //\r\n        var popperRect = getOuterSizes(popper);\r\n\r\n        //\r\n        // Compute offsets of popper\r\n        //\r\n\r\n        // depending by the popper placement we have to compute its offsets slightly differently\r\n        if (['right', 'left'].indexOf(placement) !== -1) {\r\n            popperOffsets.top = referenceOffsets.top + referenceOffsets.height / 2 - popperRect.height / 2;\r\n            if (placement === 'left') {\r\n                popperOffsets.left = referenceOffsets.left - popperRect.width;\r\n            } else {\r\n                popperOffsets.left = referenceOffsets.right;\r\n            }\r\n        } else {\r\n            popperOffsets.left = referenceOffsets.left + referenceOffsets.width / 2 - popperRect.width / 2;\r\n            if (placement === 'top') {\r\n                popperOffsets.top = referenceOffsets.top - popperRect.height;\r\n            } else {\r\n                popperOffsets.top = referenceOffsets.bottom;\r\n            }\r\n        }\r\n\r\n        // Add width and height to our offsets object\r\n        popperOffsets.width   = popperRect.width;\r\n        popperOffsets.height  = popperRect.height;\r\n\r\n        return {\r\n            popper: popperOffsets,\r\n            reference: referenceOffsets\r\n        };\r\n    };\r\n\r\n\r\n    /**\r\n     * Setup needed event listeners used to update the popper position\r\n     * @method\r\n     * @memberof Popper\r\n     * @access private\r\n     */\r\n    Popper.prototype._setupEventListeners = function() {\r\n        // NOTE: 1 DOM access here\r\n        this.state.updateBound = this.update.bind(this);\r\n        root.addEventListener('resize', this.state.updateBound);\r\n        // if the boundariesElement is window we don't need to listen for the scroll event\r\n        if (this._options.boundariesElement !== 'window') {\r\n            var target = getScrollParent(this._reference);\r\n            // here it could be both `body` or `documentElement` thanks to Firefox, we then check both\r\n            if (target === root.document.body || target === root.document.documentElement) {\r\n                target = root;\r\n            }\r\n            target.addEventListener('scroll', this.state.updateBound);\r\n            this.state.scrollTarget = target;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Remove event listeners used to update the popper position\r\n     * @method\r\n     * @memberof Popper\r\n     * @access private\r\n     */\r\n    Popper.prototype._removeEventListeners = function() {\r\n        // NOTE: 1 DOM access here\r\n        root.removeEventListener('resize', this.state.updateBound);\r\n        if (this._options.boundariesElement !== 'window' && this.state.scrollTarget) {\r\n            this.state.scrollTarget.removeEventListener('scroll', this.state.updateBound);\r\n            this.state.scrollTarget = null;\r\n        }\r\n        this.state.updateBound = null;\r\n    };\r\n\r\n    /**\r\n     * Computed the boundaries limits and return them\r\n     * @method\r\n     * @memberof Popper\r\n     * @access private\r\n     * @param {Object} data - Object containing the property \"offsets\" generated by `_getOffsets`\r\n     * @param {Number} padding - Boundaries padding\r\n     * @param {Element} boundariesElement - Element used to define the boundaries\r\n     * @returns {Object} Coordinates of the boundaries\r\n     */\r\n    Popper.prototype._getBoundaries = function(data, padding, boundariesElement) {\r\n        // NOTE: 1 DOM access here\r\n        var boundaries = {};\r\n        var width, height;\r\n        if (boundariesElement === 'window') {\r\n            var body = root.document.body,\r\n                html = root.document.documentElement;\r\n\r\n            height = Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n            width = Math.max( body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth );\r\n\r\n            boundaries = {\r\n                top: 0,\r\n                right: width,\r\n                bottom: height,\r\n                left: 0\r\n            };\r\n        } else if (boundariesElement === 'viewport') {\r\n            var offsetParent = getOffsetParent(this._popper);\r\n            var scrollParent = getScrollParent(this._popper);\r\n            var offsetParentRect = getOffsetRect(offsetParent);\r\n\r\n            // Thanks the fucking native API, `document.body.scrollTop` & `document.documentElement.scrollTop`\r\n            var getScrollTopValue = function (element) {\r\n                return element == document.body ? Math.max(document.documentElement.scrollTop, document.body.scrollTop) : element.scrollTop;\r\n            }\r\n            var getScrollLeftValue = function (element) {\r\n                return element == document.body ? Math.max(document.documentElement.scrollLeft, document.body.scrollLeft) : element.scrollLeft;\r\n            }\r\n\r\n            // if the popper is fixed we don't have to substract scrolling from the boundaries\r\n            var scrollTop = data.offsets.popper.position === 'fixed' ? 0 : getScrollTopValue(scrollParent);\r\n            var scrollLeft = data.offsets.popper.position === 'fixed' ? 0 : getScrollLeftValue(scrollParent);\r\n\r\n            boundaries = {\r\n                top: 0 - (offsetParentRect.top - scrollTop),\r\n                right: root.document.documentElement.clientWidth - (offsetParentRect.left - scrollLeft),\r\n                bottom: root.document.documentElement.clientHeight - (offsetParentRect.top - scrollTop),\r\n                left: 0 - (offsetParentRect.left - scrollLeft)\r\n            };\r\n        } else {\r\n            if (getOffsetParent(this._popper) === boundariesElement) {\r\n                boundaries = {\r\n                    top: 0,\r\n                    left: 0,\r\n                    right: boundariesElement.clientWidth,\r\n                    bottom: boundariesElement.clientHeight\r\n                };\r\n            } else {\r\n                boundaries = getOffsetRect(boundariesElement);\r\n            }\r\n        }\r\n        boundaries.left += padding;\r\n        boundaries.right -= padding;\r\n        boundaries.top = boundaries.top + padding;\r\n        boundaries.bottom = boundaries.bottom - padding;\r\n        return boundaries;\r\n    };\r\n\r\n\r\n    /**\r\n     * Loop trough the list of modifiers and run them in order, each of them will then edit the data object\r\n     * @method\r\n     * @memberof Popper\r\n     * @access public\r\n     * @param {Object} data\r\n     * @param {Array} modifiers\r\n     * @param {Function} ends\r\n     */\r\n    Popper.prototype.runModifiers = function(data, modifiers, ends) {\r\n        var modifiersToRun = modifiers.slice();\r\n        if (ends !== undefined) {\r\n            modifiersToRun = this._options.modifiers.slice(0, getArrayKeyIndex(this._options.modifiers, ends));\r\n        }\r\n\r\n        modifiersToRun.forEach(function(modifier) {\r\n            if (isFunction(modifier)) {\r\n                data = modifier.call(this, data);\r\n            }\r\n        }.bind(this));\r\n\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * Helper used to know if the given modifier depends from another one.\r\n     * @method\r\n     * @memberof Popper\r\n     * @param {String} requesting - name of requesting modifier\r\n     * @param {String} requested - name of requested modifier\r\n     * @returns {Boolean}\r\n     */\r\n    Popper.prototype.isModifierRequired = function(requesting, requested) {\r\n        var index = getArrayKeyIndex(this._options.modifiers, requesting);\r\n        return !!this._options.modifiers.slice(0, index).filter(function(modifier) {\r\n            return modifier === requested;\r\n        }).length;\r\n    };\r\n\r\n    //\r\n    // Modifiers\r\n    //\r\n\r\n    /**\r\n     * Modifiers list\r\n     * @namespace Popper.modifiers\r\n     * @memberof Popper\r\n     * @type {Object}\r\n     */\r\n    Popper.prototype.modifiers = {};\r\n\r\n    /**\r\n     * Apply the computed styles to the popper element\r\n     * @method\r\n     * @memberof Popper.modifiers\r\n     * @argument {Object} data - The data object generated by `update` method\r\n     * @returns {Object} The same data object\r\n     */\r\n    Popper.prototype.modifiers.applyStyle = function(data) {\r\n        // apply the final offsets to the popper\r\n        // NOTE: 1 DOM access here\r\n        var styles = {\r\n            position: data.offsets.popper.position\r\n        };\r\n\r\n        // round top and left to avoid blurry text\r\n        var left = Math.round(data.offsets.popper.left);\r\n        var top = Math.round(data.offsets.popper.top);\r\n\r\n        // if gpuAcceleration is set to true and transform is supported, we use `translate3d` to apply the position to the popper\r\n        // we automatically use the supported prefixed version if needed\r\n        var prefixedProperty;\r\n        if (this._options.gpuAcceleration && (prefixedProperty = getSupportedPropertyName('transform'))) {\r\n            styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\r\n            styles.top = 0;\r\n            styles.left = 0;\r\n        }\r\n        // othwerise, we use the standard `left` and `top` properties\r\n        else {\r\n            styles.left =left;\r\n            styles.top = top;\r\n        }\r\n\r\n        // any property present in `data.styles` will be applied to the popper,\r\n        // in this way we can make the 3rd party modifiers add custom styles to it\r\n        // Be aware, modifiers could override the properties defined in the previous\r\n        // lines of this modifier!\r\n        Object.assign(styles, data.styles);\r\n\r\n        setStyle(this._popper, styles);\r\n\r\n        // set an attribute which will be useful to style the tooltip (use it to properly position its arrow)\r\n        // NOTE: 1 DOM access here\r\n        this._popper.setAttribute('x-placement', data.placement);\r\n\r\n        // if the arrow modifier is required and the arrow style has been computed, apply the arrow style\r\n        if (this.isModifierRequired(this.modifiers.applyStyle, this.modifiers.arrow) && data.offsets.arrow) {\r\n            setStyle(data.arrowElement, data.offsets.arrow);\r\n        }\r\n\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * Modifier used to shift the popper on the start or end of its reference element side\r\n     * @method\r\n     * @memberof Popper.modifiers\r\n     * @argument {Object} data - The data object generated by `update` method\r\n     * @returns {Object} The data object, properly modified\r\n     */\r\n    Popper.prototype.modifiers.shift = function(data) {\r\n        var placement = data.placement;\r\n        var basePlacement = placement.split('-')[0];\r\n        var shiftVariation = placement.split('-')[1];\r\n\r\n        // if shift shiftVariation is specified, run the modifier\r\n        if (shiftVariation) {\r\n            var reference = data.offsets.reference;\r\n            var popper = getPopperClientRect(data.offsets.popper);\r\n\r\n            var shiftOffsets = {\r\n                y: {\r\n                    start:  { top: reference.top },\r\n                    end:    { top: reference.top + reference.height - popper.height }\r\n                },\r\n                x: {\r\n                    start:  { left: reference.left },\r\n                    end:    { left: reference.left + reference.width - popper.width }\r\n                }\r\n            };\r\n\r\n            var axis = ['bottom', 'top'].indexOf(basePlacement) !== -1 ? 'x' : 'y';\r\n\r\n            data.offsets.popper = Object.assign(popper, shiftOffsets[axis][shiftVariation]);\r\n        }\r\n\r\n        return data;\r\n    };\r\n\r\n\r\n    /**\r\n     * Modifier used to make sure the popper does not overflows from it's boundaries\r\n     * @method\r\n     * @memberof Popper.modifiers\r\n     * @argument {Object} data - The data object generated by `update` method\r\n     * @returns {Object} The data object, properly modified\r\n     */\r\n    Popper.prototype.modifiers.preventOverflow = function(data) {\r\n        var order = this._options.preventOverflowOrder;\r\n        var popper = getPopperClientRect(data.offsets.popper);\r\n\r\n        var check = {\r\n            left: function() {\r\n                var left = popper.left;\r\n                if (popper.left < data.boundaries.left) {\r\n                    left = Math.max(popper.left, data.boundaries.left);\r\n                }\r\n                return { left: left };\r\n            },\r\n            right: function() {\r\n                var left = popper.left;\r\n                if (popper.right > data.boundaries.right) {\r\n                    left = Math.min(popper.left, data.boundaries.right - popper.width);\r\n                }\r\n                return { left: left };\r\n            },\r\n            top: function() {\r\n                var top = popper.top;\r\n                if (popper.top < data.boundaries.top) {\r\n                    top = Math.max(popper.top, data.boundaries.top);\r\n                }\r\n                return { top: top };\r\n            },\r\n            bottom: function() {\r\n                var top = popper.top;\r\n                if (popper.bottom > data.boundaries.bottom) {\r\n                    top = Math.min(popper.top, data.boundaries.bottom - popper.height);\r\n                }\r\n                return { top: top };\r\n            }\r\n        };\r\n\r\n        order.forEach(function(direction) {\r\n            data.offsets.popper = Object.assign(popper, check[direction]());\r\n        });\r\n\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * Modifier used to make sure the popper is always near its reference\r\n     * @method\r\n     * @memberof Popper.modifiers\r\n     * @argument {Object} data - The data object generated by _update method\r\n     * @returns {Object} The data object, properly modified\r\n     */\r\n    Popper.prototype.modifiers.keepTogether = function(data) {\r\n        var popper  = getPopperClientRect(data.offsets.popper);\r\n        var reference = data.offsets.reference;\r\n        var f = Math.floor;\r\n\r\n        if (popper.right < f(reference.left)) {\r\n            data.offsets.popper.left = f(reference.left) - popper.width;\r\n        }\r\n        if (popper.left > f(reference.right)) {\r\n            data.offsets.popper.left = f(reference.right);\r\n        }\r\n        if (popper.bottom < f(reference.top)) {\r\n            data.offsets.popper.top = f(reference.top) - popper.height;\r\n        }\r\n        if (popper.top > f(reference.bottom)) {\r\n            data.offsets.popper.top = f(reference.bottom);\r\n        }\r\n\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * Modifier used to flip the placement of the popper when the latter is starting overlapping its reference element.\r\n     * Requires the `preventOverflow` modifier before it in order to work.\r\n     * **NOTE:** This modifier will run all its previous modifiers everytime it tries to flip the popper!\r\n     * @method\r\n     * @memberof Popper.modifiers\r\n     * @argument {Object} data - The data object generated by _update method\r\n     * @returns {Object} The data object, properly modified\r\n     */\r\n    Popper.prototype.modifiers.flip = function(data) {\r\n        // check if preventOverflow is in the list of modifiers before the flip modifier.\r\n        // otherwise flip would not work as expected.\r\n        if (!this.isModifierRequired(this.modifiers.flip, this.modifiers.preventOverflow)) {\r\n            console.warn('WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!');\r\n            return data;\r\n        }\r\n\r\n        if (data.flipped && data.placement === data._originalPlacement) {\r\n            // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\r\n            return data;\r\n        }\r\n\r\n        var placement = data.placement.split('-')[0];\r\n        var placementOpposite = getOppositePlacement(placement);\r\n        var variation = data.placement.split('-')[1] || '';\r\n\r\n        var flipOrder = [];\r\n        if(this._options.flipBehavior === 'flip') {\r\n            flipOrder = [\r\n                placement,\r\n                placementOpposite\r\n            ];\r\n        } else {\r\n            flipOrder = this._options.flipBehavior;\r\n        }\r\n\r\n        flipOrder.forEach(function(step, index) {\r\n            if (placement !== step || flipOrder.length === index + 1) {\r\n                return;\r\n            }\r\n\r\n            placement = data.placement.split('-')[0];\r\n            placementOpposite = getOppositePlacement(placement);\r\n\r\n            var popperOffsets = getPopperClientRect(data.offsets.popper);\r\n\r\n            // this boolean is used to distinguish right and bottom from top and left\r\n            // they need different computations to get flipped\r\n            var a = ['right', 'bottom'].indexOf(placement) !== -1;\r\n\r\n            // using Math.floor because the reference offsets may contain decimals we are not going to consider here\r\n            if (\r\n                a && Math.floor(data.offsets.reference[placement]) > Math.floor(popperOffsets[placementOpposite]) ||\r\n                !a && Math.floor(data.offsets.reference[placement]) < Math.floor(popperOffsets[placementOpposite])\r\n            ) {\r\n                // we'll use this boolean to detect any flip loop\r\n                data.flipped = true;\r\n                data.placement = flipOrder[index + 1];\r\n                if (variation) {\r\n                    data.placement += '-' + variation;\r\n                }\r\n                data.offsets.popper = this._getOffsets(this._popper, this._reference, data.placement).popper;\r\n\r\n                data = this.runModifiers(data, this._options.modifiers, this._flip);\r\n            }\r\n        }.bind(this));\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * Modifier used to add an offset to the popper, useful if you more granularity positioning your popper.\r\n     * The offsets will shift the popper on the side of its reference element.\r\n     * @method\r\n     * @memberof Popper.modifiers\r\n     * @argument {Object} data - The data object generated by _update method\r\n     * @returns {Object} The data object, properly modified\r\n     */\r\n    Popper.prototype.modifiers.offset = function(data) {\r\n        var offset = this._options.offset;\r\n        var popper  = data.offsets.popper;\r\n\r\n        if (data.placement.indexOf('left') !== -1) {\r\n            popper.top -= offset;\r\n        }\r\n        else if (data.placement.indexOf('right') !== -1) {\r\n            popper.top += offset;\r\n        }\r\n        else if (data.placement.indexOf('top') !== -1) {\r\n            popper.left -= offset;\r\n        }\r\n        else if (data.placement.indexOf('bottom') !== -1) {\r\n            popper.left += offset;\r\n        }\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * Modifier used to move the arrows on the edge of the popper to make sure them are always between the popper and the reference element\r\n     * It will use the CSS outer size of the arrow element to know how many pixels of conjuction are needed\r\n     * @method\r\n     * @memberof Popper.modifiers\r\n     * @argument {Object} data - The data object generated by _update method\r\n     * @returns {Object} The data object, properly modified\r\n     */\r\n    Popper.prototype.modifiers.arrow = function(data) {\r\n        var arrow  = this._options.arrowElement;\r\n        var arrowOffset = this._options.arrowOffset;\r\n\r\n        // if the arrowElement is a string, suppose it's a CSS selector\r\n        if (typeof arrow === 'string') {\r\n            arrow = this._popper.querySelector(arrow);\r\n        }\r\n\r\n        // if arrow element is not found, don't run the modifier\r\n        if (!arrow) {\r\n            return data;\r\n        }\r\n\r\n        // the arrow element must be child of its popper\r\n        if (!this._popper.contains(arrow)) {\r\n            console.warn('WARNING: `arrowElement` must be child of its popper element!');\r\n            return data;\r\n        }\r\n\r\n        // arrow depends on keepTogether in order to work\r\n        if (!this.isModifierRequired(this.modifiers.arrow, this.modifiers.keepTogether)) {\r\n            console.warn('WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!');\r\n            return data;\r\n        }\r\n\r\n        var arrowStyle  = {};\r\n        var placement   = data.placement.split('-')[0];\r\n        var popper      = getPopperClientRect(data.offsets.popper);\r\n        var reference   = data.offsets.reference;\r\n        var isVertical  = ['left', 'right'].indexOf(placement) !== -1;\r\n\r\n        var len         = isVertical ? 'height' : 'width';\r\n        var side        = isVertical ? 'top' : 'left';\r\n        var translate   = isVertical ? 'translateY' : 'translateX';\r\n        var altSide     = isVertical ? 'left' : 'top';\r\n        var opSide      = isVertical ? 'bottom' : 'right';\r\n        var arrowSize   = getOuterSizes(arrow)[len];\r\n\r\n        //\r\n        // extends keepTogether behavior making sure the popper and its reference have enough pixels in conjuction\r\n        //\r\n\r\n        // top/left side\r\n        if (reference[opSide] - arrowSize < popper[side]) {\r\n            data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowSize);\r\n        }\r\n        // bottom/right side\r\n        if (reference[side] + arrowSize > popper[opSide]) {\r\n            data.offsets.popper[side] += (reference[side] + arrowSize) - popper[opSide];\r\n        }\r\n\r\n        // compute center of the popper\r\n        var center = reference[side] + (arrowOffset || (reference[len] / 2) - (arrowSize / 2));\r\n\r\n        var sideValue = center - popper[side];\r\n\r\n        // prevent arrow from being placed not contiguously to its popper\r\n        sideValue = Math.max(Math.min(popper[len] - arrowSize - 8, sideValue), 8);\r\n        arrowStyle[side] = sideValue;\r\n        arrowStyle[altSide] = ''; // make sure to remove any old style from the arrow\r\n\r\n        data.offsets.arrow = arrowStyle;\r\n        data.arrowElement = arrow;\r\n\r\n        return data;\r\n    };\r\n\r\n\r\n    //\r\n    // Helpers\r\n    //\r\n\r\n    /**\r\n     * Get the outer sizes of the given element (offset size + margins)\r\n     * @function\r\n     * @ignore\r\n     * @argument {Element} element\r\n     * @returns {Object} object containing width and height properties\r\n     */\r\n    function getOuterSizes(element) {\r\n        // NOTE: 1 DOM access here\r\n        var _display = element.style.display, _visibility = element.style.visibility;\r\n        element.style.display = 'block'; element.style.visibility = 'hidden';\r\n        var calcWidthToForceRepaint = element.offsetWidth;\r\n\r\n        // original method\r\n        var styles = root.getComputedStyle(element);\r\n        var x = parseFloat(styles.marginTop) + parseFloat(styles.marginBottom);\r\n        var y = parseFloat(styles.marginLeft) + parseFloat(styles.marginRight);\r\n        var result = { width: element.offsetWidth + y, height: element.offsetHeight + x };\r\n\r\n        // reset element styles\r\n        element.style.display = _display; element.style.visibility = _visibility;\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Get the opposite placement of the given one/\r\n     * @function\r\n     * @ignore\r\n     * @argument {String} placement\r\n     * @returns {String} flipped placement\r\n     */\r\n    function getOppositePlacement(placement) {\r\n        var hash = {left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\r\n        return placement.replace(/left|right|bottom|top/g, function(matched){\r\n            return hash[matched];\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Given the popper offsets, generate an output similar to getBoundingClientRect\r\n     * @function\r\n     * @ignore\r\n     * @argument {Object} popperOffsets\r\n     * @returns {Object} ClientRect like output\r\n     */\r\n    function getPopperClientRect(popperOffsets) {\r\n        var offsets = Object.assign({}, popperOffsets);\r\n        offsets.right = offsets.left + offsets.width;\r\n        offsets.bottom = offsets.top + offsets.height;\r\n        return offsets;\r\n    }\r\n\r\n    /**\r\n     * Given an array and the key to find, returns its index\r\n     * @function\r\n     * @ignore\r\n     * @argument {Array} arr\r\n     * @argument keyToFind\r\n     * @returns index or null\r\n     */\r\n    function getArrayKeyIndex(arr, keyToFind) {\r\n        var i = 0, key;\r\n        for (key in arr) {\r\n            if (arr[key] === keyToFind) {\r\n                return i;\r\n            }\r\n            i++;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Get CSS computed property of the given element\r\n     * @function\r\n     * @ignore\r\n     * @argument {Eement} element\r\n     * @argument {String} property\r\n     */\r\n    function getStyleComputedProperty(element, property) {\r\n        // NOTE: 1 DOM access here\r\n        var css = root.getComputedStyle(element, null);\r\n        return css[property];\r\n    }\r\n\r\n    /**\r\n     * Returns the offset parent of the given element\r\n     * @function\r\n     * @ignore\r\n     * @argument {Element} element\r\n     * @returns {Element} offset parent\r\n     */\r\n    function getOffsetParent(element) {\r\n        // NOTE: 1 DOM access here\r\n        var offsetParent = element.offsetParent;\r\n        return offsetParent === root.document.body || !offsetParent ? root.document.documentElement : offsetParent;\r\n    }\r\n\r\n    /**\r\n     * Returns the scrolling parent of the given element\r\n     * @function\r\n     * @ignore\r\n     * @argument {Element} element\r\n     * @returns {Element} offset parent\r\n     */\r\n    function getScrollParent(element) {\r\n        var parent = element.parentNode;\r\n\r\n        if (!parent) {\r\n            return element;\r\n        }\r\n\r\n        if (parent === root.document) {\r\n            // Firefox puts the scrollTOp value on `documentElement` instead of `body`, we then check which of them is\r\n            // greater than 0 and return the proper element\r\n            if (root.document.body.scrollTop || root.document.body.scrollLeft) {\r\n                return root.document.body;\r\n            } else {\r\n                return root.document.documentElement;\r\n            }\r\n        }\r\n\r\n        // Firefox want us to check `-x` and `-y` variations as well\r\n        if (\r\n            ['scroll', 'auto'].indexOf(getStyleComputedProperty(parent, 'overflow')) !== -1 ||\r\n            ['scroll', 'auto'].indexOf(getStyleComputedProperty(parent, 'overflow-x')) !== -1 ||\r\n            ['scroll', 'auto'].indexOf(getStyleComputedProperty(parent, 'overflow-y')) !== -1\r\n        ) {\r\n            // If the detected scrollParent is body, we perform an additional check on its parentNode\r\n            // in this way we'll get body if the browser is Chrome-ish, or documentElement otherwise\r\n            // fixes issue #65\r\n            return parent;\r\n        }\r\n        return getScrollParent(element.parentNode);\r\n    }\r\n\r\n    /**\r\n     * Check if the given element is fixed or is inside a fixed parent\r\n     * @function\r\n     * @ignore\r\n     * @argument {Element} element\r\n     * @argument {Element} customContainer\r\n     * @returns {Boolean} answer to \"isFixed?\"\r\n     */\r\n    function isFixed(element) {\r\n        if (element === root.document.body) {\r\n            return false;\r\n        }\r\n        if (getStyleComputedProperty(element, 'position') === 'fixed') {\r\n            return true;\r\n        }\r\n        return element.parentNode ? isFixed(element.parentNode) : element;\r\n    }\r\n\r\n    /**\r\n     * Set the style to the given popper\r\n     * @function\r\n     * @ignore\r\n     * @argument {Element} element - Element to apply the style to\r\n     * @argument {Object} styles - Object with a list of properties and values which will be applied to the element\r\n     */\r\n    function setStyle(element, styles) {\r\n        function is_numeric(n) {\r\n            return (n !== '' && !isNaN(parseFloat(n)) && isFinite(n));\r\n        }\r\n        Object.keys(styles).forEach(function(prop) {\r\n            var unit = '';\r\n            // add unit if the value is numeric and is one of the following\r\n            if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && is_numeric(styles[prop])) {\r\n                unit = 'px';\r\n            }\r\n            element.style[prop] = styles[prop] + unit;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Check if the given variable is a function\r\n     * @function\r\n     * @ignore\r\n     * @argument {*} functionToCheck - variable to check\r\n     * @returns {Boolean} answer to: is a function?\r\n     */\r\n    function isFunction(functionToCheck) {\r\n        var getType = {};\r\n        return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\r\n    }\r\n\r\n    /**\r\n     * Get the position of the given element, relative to its offset parent\r\n     * @function\r\n     * @ignore\r\n     * @param {Element} element\r\n     * @return {Object} position - Coordinates of the element and its `scrollTop`\r\n     */\r\n    function getOffsetRect(element) {\r\n        var elementRect = {\r\n            width: element.offsetWidth,\r\n            height: element.offsetHeight,\r\n            left: element.offsetLeft,\r\n            top: element.offsetTop\r\n        };\r\n\r\n        elementRect.right = elementRect.left + elementRect.width;\r\n        elementRect.bottom = elementRect.top + elementRect.height;\r\n\r\n        // position\r\n        return elementRect;\r\n    }\r\n\r\n    /**\r\n     * Get bounding client rect of given element\r\n     * @function\r\n     * @ignore\r\n     * @param {HTMLElement} element\r\n     * @return {Object} client rect\r\n     */\r\n    function getBoundingClientRect(element) {\r\n        var rect = element.getBoundingClientRect();\r\n\r\n        // whether the IE version is lower than 11\r\n        var isIE = navigator.userAgent.indexOf(\"MSIE\") != -1;\r\n\r\n        // fix ie document bounding top always 0 bug\r\n        var rectTop = isIE && element.tagName === 'HTML'\r\n            ? -element.scrollTop\r\n            : rect.top;\r\n\r\n        return {\r\n            left: rect.left,\r\n            top: rectTop,\r\n            right: rect.right,\r\n            bottom: rect.bottom,\r\n            width: rect.right - rect.left,\r\n            height: rect.bottom - rectTop\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Given an element and one of its parents, return the offset\r\n     * @function\r\n     * @ignore\r\n     * @param {HTMLElement} element\r\n     * @param {HTMLElement} parent\r\n     * @return {Object} rect\r\n     */\r\n    function getOffsetRectRelativeToCustomParent(element, parent, fixed) {\r\n        var elementRect = getBoundingClientRect(element);\r\n        var parentRect = getBoundingClientRect(parent);\r\n\r\n        if (fixed) {\r\n            var scrollParent = getScrollParent(parent);\r\n            parentRect.top += scrollParent.scrollTop;\r\n            parentRect.bottom += scrollParent.scrollTop;\r\n            parentRect.left += scrollParent.scrollLeft;\r\n            parentRect.right += scrollParent.scrollLeft;\r\n        }\r\n\r\n        var rect = {\r\n            top: elementRect.top - parentRect.top ,\r\n            left: elementRect.left - parentRect.left ,\r\n            bottom: (elementRect.top - parentRect.top) + elementRect.height,\r\n            right: (elementRect.left - parentRect.left) + elementRect.width,\r\n            width: elementRect.width,\r\n            height: elementRect.height\r\n        };\r\n        return rect;\r\n    }\r\n\r\n    /**\r\n     * Get the prefixed supported property name\r\n     * @function\r\n     * @ignore\r\n     * @argument {String} property (camelCase)\r\n     * @returns {String} prefixed property (camelCase)\r\n     */\r\n    function getSupportedPropertyName(property) {\r\n        var prefixes = ['', 'ms', 'webkit', 'moz', 'o'];\r\n\r\n        for (var i = 0; i < prefixes.length; i++) {\r\n            var toCheck = prefixes[i] ? prefixes[i] + property.charAt(0).toUpperCase() + property.slice(1) : property;\r\n            if (typeof root.document.body.style[toCheck] !== 'undefined') {\r\n                return toCheck;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * The Object.assign() method is used to copy the values of all enumerable own properties from one or more source\r\n     * objects to a target object. It will return the target object.\r\n     * This polyfill doesn't support symbol properties, since ES5 doesn't have symbols anyway\r\n     * Source: https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n     * @function\r\n     * @ignore\r\n     */\r\n    if (!Object.assign) {\r\n        Object.defineProperty(Object, 'assign', {\r\n            enumerable: false,\r\n            configurable: true,\r\n            writable: true,\r\n            value: function(target) {\r\n                if (target === undefined || target === null) {\r\n                    throw new TypeError('Cannot convert first argument to object');\r\n                }\r\n\r\n                var to = Object(target);\r\n                for (var i = 1; i < arguments.length; i++) {\r\n                    var nextSource = arguments[i];\r\n                    if (nextSource === undefined || nextSource === null) {\r\n                        continue;\r\n                    }\r\n                    nextSource = Object(nextSource);\r\n\r\n                    var keysArray = Object.keys(nextSource);\r\n                    for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n                        var nextKey = keysArray[nextIndex];\r\n                        var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\r\n                        if (desc !== undefined && desc.enumerable) {\r\n                            to[nextKey] = nextSource[nextKey];\r\n                        }\r\n                    }\r\n                }\r\n                return to;\r\n            }\r\n        });\r\n    }\r\n\r\n    return Popper;\r\n}));\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleColorInput.vue?vue&type=style&index=0&id=058d4338&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxLights.vue?vue&type=style&index=0&id=fbccf048&scoped=true&lang=css&\"","let getCSSValue = function(element, property) {\r\n  return document.defaultView.getComputedStyle(element,null).getPropertyValue(property);\r\n};\r\n\r\nfunction LCS(str1, str2){\r\n  var m = str1.length\r\n  var n = str2.length\r\n  var dp = [new Array(n+1).fill(0)] //第一行全是0\r\n  for(var i = 1; i <= m; i++){ //一共有m+1行\r\n    dp[i] = [0] //第一列全是0\r\n    for(var j = 1; j <= n; j++){//一共有n+1列\r\n      if(str1[i-1] === str2[j-1]){\r\n        //注意这里，str1的第一个字符是在第二列中，因此要减1，str2同理\r\n        dp[i][j] = dp[i-1][j-1] + 1 //对角＋1\r\n      } else {\r\n        dp[i][j] = Math.max( dp[i-1][j], dp[i][j-1])\r\n      }\r\n    }\r\n  }\r\n  return dp[m][n];\r\n}\r\n\r\nexport {getCSSValue, LCS}\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTabBox.vue?vue&type=style&index=0&id=ae3cc558&scoped=true&lang=css&\"","/*\r\n* 智能机浏览器版本信息:\r\n*\r\n*/\r\nlet browser={\r\n  versions:function(){\r\n    var u = navigator.userAgent, app = navigator.appVersion;\r\n    return {//移动终端浏览器版本信息\r\n      trident: u.indexOf('Trident') > -1, //IE内核\r\n      presto: u.indexOf('Presto') > -1, //opera内核\r\n      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核\r\n      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核\r\n      mobile: !!u.match(/AppleWebKit.*Mobile.*/)||!!u.match(/AppleWebKit/), //是否为移动终端\r\n      ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\r\n      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器\r\n      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器\r\n      iPad: u.indexOf('iPad') > -1, //是否iPad\r\n      webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部\r\n    };\r\n  }(),\r\n  runOnMobile: function () {\r\n    return browser.versions.android || browser.versions.ios;\r\n  },\r\n  language:(navigator.browserLanguage || navigator.language).toLowerCase()\r\n};\r\nexport default browser;\r\n","let Common = {\r\n  clearNull(str) {\r\n    let output = \"\";\r\n    for (let i = 0; i < str.length; i++) {\r\n      if (str.charCodeAt(i) <= 127 && str.charCodeAt(i) > 0) {\r\n        output += str.charAt(i);\r\n      }\r\n    }\r\n    return output\r\n  },\r\n  convertLayerObj(layerObj) {\r\n    let obj = {\r\n      id: layerObj.id,\r\n      hidden: layerObj.hidden, locked: layerObj.locked, name: layerObj.name,\r\n      nameEditable: layerObj.nameEditable, removable: layerObj.removable,\r\n    };\r\n    return obj;\r\n  }\r\n};\r\n\r\nexport default Common;\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorToolbar.vue?vue&type=style&index=0&id=871ebdbe&scoped=true&lang=css&\"","let undoTypes = function () {\r\n  let addPolygons = \"add polygons\",\r\n      removePolygons =  \"remove polygons\",\r\n      addPaths = \"add paths\",\r\n      removePaths = \"remove paths\",\r\n      updateModelsTexts =  \"update models names\",\r\n      unifyModelsTexts =  \"unify models names\",\r\n      updateModelFillColors =  \"update model fillcolors\",\r\n      unifyModelFillColors =  \"unify model fillcolors\",\r\n      updateModelLineColors =  \"update model linecolors\",\r\n      unifyModelLineColors =  \"unify model linecolors\",\r\n      updateModelsHeight = \"update models height\",\r\n      unifyModelsHeight = \"unify models height\",\r\n      updateModelsTextHeight = \"update models text height\",\r\n      unifyModelsTextHeight = \"unify models text height\",\r\n\r\n      updateModelShape = \"update model shape\",\r\n      updateModelShapeUndo = \"update model shape undo\",\r\n      updateModelShapeSlightly = \"update model shape slightly\",\r\n      updateModelShapeSlightlyUndo = \"update model shape slightly undo\",\r\n      updateModelsPos = \"update models position\",\r\n      updateModelsPosUndo = \"update models position undo\",\r\n      updateModelScale = \"update model scale\",\r\n      updateModelScaleUndo = \"update model scale undo\",\r\n      updateModelRotate = \"update model rotation\",\r\n      updateModelRotateUndo = \"update model rotation undo\",\r\n\r\n      shortcutMove = \"shortcut move\",\r\n      shortcutMoveUndo = \"shortcut move undo\",\r\n      shortcutRotate = \"shortcut rotate\",\r\n      shortcutRotateUndo = \"shortcut rotate undo\",\r\n\r\n      mergeModels = \"merge models\",\r\n      mergeModelsUndo = \"merge models undo\",\r\n      sliceModel = \"slice model\",\r\n      sliceModelUndo = \"slice model undo\",\r\n\r\n      updatePathPoint = \"update path point\",\r\n      updatePathPointUndo = \"update path point undo\",\r\n\r\n      replacePathsPoint = \"replace paths point\",\r\n      replacePathsPointUndo = \"replace paths point undo\",\r\n\r\n      updatePathsType = \"update paths type\",\r\n      unifyPathsType = \"unify paths type\",\r\n      updatePathsDirection = \"update paths direction\",\r\n      unifyPathsDirection = \"unify paths direction\";\r\n\r\n  let lst0 = [addPolygons, removePolygons, addPaths, removePaths, updateModelShapeSlightly, updateModelShapeSlightlyUndo,\r\n    updateModelsTexts, unifyModelsTexts, updateModelFillColors, unifyModelFillColors, shortcutMove, shortcutMoveUndo,\r\n    shortcutRotate, shortcutRotateUndo,\r\n    updateModelLineColors, unifyModelLineColors, updateModelsHeight, unifyModelsHeight,\r\n    updateModelsTextHeight, unifyModelsTextHeight, updatePathsType, unifyPathsType, updatePathsDirection, unifyPathsDirection,\r\n    updatePathPoint, updatePathPointUndo, replacePathsPoint, replacePathsPointUndo,\r\n    updateModelShape, updateModelShapeUndo, updateModelsPos, updateModelsPosUndo, updateModelScale, updateModelScaleUndo,\r\n    updateModelRotate, updateModelRotateUndo, mergeModels, mergeModelsUndo, sliceModel, sliceModelUndo];\r\n\r\n  let lst1 = [removePolygons, addPolygons, removePaths, addPaths, updateModelShapeSlightlyUndo, updateModelShapeSlightly,\r\n    unifyModelsTexts, updateModelsTexts, unifyModelFillColors, updateModelFillColors, shortcutMoveUndo, shortcutMove,\r\n    shortcutRotateUndo, shortcutRotate,\r\n    unifyModelLineColors, updateModelLineColors, unifyModelsHeight, updateModelsHeight,\r\n    unifyModelsTextHeight, updateModelsTextHeight, unifyPathsType, updatePathsType, unifyPathsDirection, updatePathsDirection,\r\n    updatePathPointUndo, updatePathPoint, replacePathsPointUndo, replacePathsPoint,\r\n    updateModelShapeUndo, updateModelShape, updateModelsPosUndo, updateModelsPos, updateModelScaleUndo, updateModelScale,\r\n    updateModelRotateUndo, updateModelRotate, mergeModelsUndo, mergeModels, sliceModelUndo, sliceModel];\r\n\r\n  function strToCamelStr(str) {\r\n    let arr0 = str.split(\" \");\r\n    let arr1 = [arr0[0] ];\r\n    for (let i = 1; i < arr0.length; i++) {\r\n      arr1[i] = arr0[i].charAt(0).toUpperCase() + arr0[i].substr(1);\r\n    }\r\n    return arr1.join(\"\");\r\n  }\r\n\r\n  let scope = this;\r\n  function init() {\r\n    for (let i = 0; i < lst0.length; i++) {\r\n      let str = lst0[i];\r\n      let obj = {label: str, num: i};\r\n      obj.undoNum = lst1.indexOf(str);\r\n      scope[strToCamelStr(str)] = obj;\r\n      scope[str.split(\" \").join(\"_\")] = i;\r\n    }\r\n  }\r\n  init();\r\n\r\n  this.getActionName = function(index) {\r\n    return lst0[index];\r\n  };\r\n  this.getAction = function (actionName) {\r\n    return scope[strToCamelStr(actionName)];\r\n  };\r\n  this.getUndoAction = function (actionName) {\r\n    let index = lst0.indexOf(actionName);\r\n    let undoActionName = lst1[index];\r\n    return scope[strToCamelStr(undoActionName)];\r\n  }\r\n};\r\nlet UndoTypes = new undoTypes();\r\nexport default UndoTypes;\r\n","import UndoTypes from \"./UndoTypes\";\r\nimport Layers from \"../Layers\";\r\n\r\nlet CommandExecutor = function() {\r\n  let replaced, replacement;\r\n  let angleInRadian;\r\n\r\n  function removeItem(arr, item) {\r\n    let ind = arr.indexOf(item);\r\n    if (ind > -1) {\r\n      arr.splice(ind, 1);\r\n    }\r\n  }\r\n  function replaceItem(arr, oldItem, newItem) {\r\n    let ind = arr.indexOf(oldItem);\r\n    if (ind > -1) {\r\n      arr[ind] = newItem;\r\n    }\r\n  }\r\n  let that = {\r\n    execute(type, obj) {\r\n      switch (type) {\r\n        case UndoTypes.add_polygons:\r\n          obj.meshes.forEach(mesh => {\r\n            obj.selectedMeshes.push(mesh);\r\n            obj.parentGroup.add(mesh.holder.getHolderGroup());\r\n          } );\r\n          // obj.tool.dispatchSelectionChange();\r\n          break;\r\n        case UndoTypes.remove_polygons:\r\n          obj.meshes.forEach(mesh => {\r\n            removeItem(obj.selectedMeshes, mesh);\r\n            obj.parentGroup.remove(mesh.holder.getHolderGroup());\r\n          } );\r\n          // obj.tool.dispatchSelectionChange();\r\n          break;\r\n        case UndoTypes.add_paths:\r\n          obj.addLines.forEach(line => {\r\n            line.holder.getItems().forEach(it => Layers.navPathLayer.add(it) );\r\n          } );\r\n          obj.removeLines.forEach(line => Layers.navPathLayer.remove(line) );\r\n          Layers.removeUnusedSegmentRings();\r\n\r\n          if (obj.relatedHolders) {\r\n            obj.ring.position.copy(obj.position);\r\n            obj.relatedHolders.forEach(it => it != null && it.updateLine() );\r\n          }\r\n          break;\r\n        case UndoTypes.remove_paths:\r\n          obj.addLines.forEach(line => Layers.navPathLayer.remove(line) );\r\n          obj.removeLines.forEach(line => Layers.navPathLayer.add(line) );\r\n          Layers.removeUnusedSegmentRings();\r\n\r\n          if (obj.relatedHolders) {\r\n            obj.ring.position.copy(obj.oldPosition);\r\n            obj.relatedHolders.forEach(it => it != null && it.updateLine() );\r\n          }\r\n          break;\r\n\r\n        case UndoTypes.merge_models:\r\n        case UndoTypes.slice_model:\r\n          obj.appendLst.forEach(mesh => {\r\n            obj.parentGroup.add(mesh.holder.getHolderGroup());\r\n          } );\r\n          obj.removeLst.forEach(mesh => {\r\n            obj.parentGroup.remove(mesh.holder.getHolderGroup());;\r\n          } );\r\n          break;\r\n        case UndoTypes.merge_models_undo:\r\n        case UndoTypes.slice_model_undo:\r\n          obj.removeLst.forEach(mesh => {\r\n            obj.parentGroup.add(mesh.holder.getHolderGroup());\r\n          } );\r\n          obj.appendLst.forEach(mesh => {\r\n            obj.parentGroup.remove(mesh.holder.getHolderGroup());\r\n            removeItem(obj.selectedMeshes, mesh);\r\n          } );\r\n          break;\r\n\r\n        case UndoTypes.update_model_shape:\r\n          obj.holder.startEditCtrlPoint(obj.parentGroup);\r\n          if (obj.add) {\r\n            obj.holder.addCtrlPoint(obj.adhereObj);\r\n          } else {\r\n            obj.holder.removeCtrlPoint(obj.adhereObj);\r\n          }\r\n          obj.holder.endEditCtrlPoint();\r\n\r\n          replaced = obj.holder.getMesh();\r\n          replacement = obj.holder.getMesh();\r\n          break;\r\n        case UndoTypes.update_model_shape_undo:\r\n          obj.holder.startEditCtrlPoint(obj.parentGroup);\r\n          if (obj.add) {\r\n            obj.holder.removeCtrlPoint(obj.adhereObj);\r\n          } else {\r\n            obj.holder.addCtrlPoint(obj.adhereObj);\r\n          }\r\n          obj.holder.endEditCtrlPoint();\r\n\r\n          replaced = obj.holder.getMesh();\r\n          replacement = obj.holder.getMesh();\r\n          break;\r\n        case UndoTypes.update_model_shape_slightly:\r\n          obj.mesh.holder.updateCurPointIndex(obj.ctrlPointObj);\r\n          obj.mesh.holder.startEditCtrlPoint(obj.parentGroup);\r\n          obj.ctrlPointObj.position.copy(obj.position);\r\n          obj.mesh.holder.moveCtrlPoint(obj.ctrlPointObj);\r\n          obj.mesh.holder.endEditCtrlPoint();\r\n          break;\r\n        case UndoTypes.update_model_shape_slightly_undo:\r\n          obj.mesh.holder.updateCurPointIndex(obj.ctrlPointObj);\r\n          obj.mesh.holder.startEditCtrlPoint(obj.parentGroup);\r\n          obj.ctrlPointObj.position.copy(obj.oldPosition);\r\n          obj.mesh.holder.moveCtrlPoint(obj.ctrlPointObj);\r\n          obj.mesh.holder.endEditCtrlPoint();\r\n          break;\r\n\r\n        case UndoTypes.shortcut_move:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            mesh.holder.move(obj.moveVector);\r\n            mesh.holder.updatePosition();\r\n          } );\r\n          break;\r\n        case UndoTypes.shortcut_move_undo:\r\n          let move = obj.moveVector.clone().negate();\r\n          obj.meshes.forEach((mesh, index) => {\r\n            mesh.holder.move(move);\r\n            mesh.holder.updatePosition();\r\n          } );\r\n          break;\r\n\r\n        case UndoTypes.shortcut_rotate:\r\n          angleInRadian = obj.degree / 180 * Math.PI;\r\n          obj.mesh.rotation.z += angleInRadian;\r\n          break;\r\n        case UndoTypes.shortcut_rotate_undo:\r\n          angleInRadian = obj.degree / 180 * Math.PI;\r\n          obj.mesh.rotation.z -= angleInRadian;\r\n          break;\r\n\r\n        case UndoTypes.update_models_position:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            mesh.holder.move(obj.positions[index].clone().sub(obj.oldPositions[index]) );\r\n            // mesh.position.copy(obj.positions[index]);\r\n            mesh.holder.updatePosition();\r\n          } );\r\n          break;\r\n        case UndoTypes.update_models_position_undo:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            mesh.holder.move(obj.oldPositions[index].clone().sub(obj.positions[index]) );\r\n            // mesh.position.copy(obj.oldPositions[index]);\r\n            mesh.holder.updatePosition();\r\n          } );\r\n          break;\r\n        case UndoTypes.update_model_scale:\r\n          obj.mesh.scale.copy(obj.scale);\r\n          obj.mesh.userData.oldScale.copy(obj.mesh.scale);\r\n          break;\r\n        case UndoTypes.update_model_scale_undo:\r\n          obj.mesh.scale.copy(obj.oldScale);\r\n          obj.mesh.userData.oldScale.copy(obj.mesh.scale);\r\n          break;\r\n        case UndoTypes.update_model_rotation:\r\n          obj.mesh.rotation.copy(obj.rotation);\r\n          obj.mesh.userData.oldRotation.copy(obj.mesh.rotation);\r\n          break;\r\n        case UndoTypes.update_model_rotation_undo:\r\n          obj.mesh.rotation.copy(obj.oldRotation);\r\n          obj.mesh.userData.oldRotation.copy(obj.mesh.rotation);\r\n          break;\r\n\r\n        case UndoTypes.update_model_fillcolors:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            if (obj.preColor) {\r\n              mesh.material.color.setHex(obj.preColor);\r\n              mesh.userData.bacOpacity = mesh.material.opacity = obj.preOpacity;\r\n            } else {\r\n              mesh.material.color.copy(obj.colors[index]);\r\n              mesh.material.opacity = obj.opacities[index];\r\n              mesh.userData.bacOpacity = mesh.material.opacity;\r\n            }\r\n          } );\r\n          break;\r\n        case UndoTypes.unify_model_fillcolors:\r\n          obj.meshes.forEach(mesh => {\r\n            mesh.material.color.setHex(obj.unifyColor);\r\n            mesh.material.opacity = obj.unifyOpacity;\r\n            mesh.userData.bacOpacity = obj.unifyOpacity;\r\n          } );\r\n          break;\r\n        case UndoTypes.update_model_linecolors:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            let outlines = mesh.holder.getOutlines();\r\n            if (obj.preColor) {\r\n              outlines.forEach(outline => outline.material.color.setHex(obj.preColor) );\r\n            } else {\r\n              outlines.forEach(outline => outline.material.color.setHex(obj.lineColors[index]) );\r\n            }\r\n          } );\r\n          break;\r\n        case UndoTypes.unify_model_linecolors:\r\n          obj.meshes.forEach(mesh => {\r\n            let outlines = mesh.holder.getOutlines();\r\n            outlines.forEach(outline => outline.material.color.setHex(obj.unifyColor) );\r\n          } );\r\n          break;\r\n\r\n        case UndoTypes.update_models_names:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            if (obj.preText) {\r\n              mesh.holder.setName(obj.preText);\r\n            } else {\r\n              mesh.holder.setName(obj.texts[index]);\r\n            }\r\n          });\r\n          break;\r\n        case UndoTypes.unify_models_names:\r\n          obj.meshes.forEach(mesh => mesh.holder.setName(obj.unifyText));\r\n          break;\r\n\r\n        case UndoTypes.update_models_height:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            if (obj.preHeight) {\r\n              mesh.holder.setHeight(obj.preHeight);\r\n            } else {\r\n              mesh.holder.setHeight(obj.heights[index]);\r\n            }\r\n          });\r\n          break;\r\n        case UndoTypes.unify_models_height:\r\n          obj.meshes.forEach(mesh => mesh.holder.setHeight(obj.unifyHeight));\r\n          break;\r\n        case UndoTypes.update_models_text_height:\r\n          obj.meshes.forEach((mesh, index) => {\r\n            if (obj.preTextHeight) {\r\n              mesh.holder.setTextHeight(obj.preTextHeight);\r\n            } else {\r\n              mesh.holder.setTextHeight(obj.textHeights[index]);\r\n            }\r\n          });\r\n          break;\r\n        case UndoTypes.unify_models_text_height:\r\n          obj.meshes.forEach(mesh => mesh.holder.setTextHeight(obj.unifyTextHeight));\r\n          break;\r\n\r\n        case UndoTypes.update_path_point:\r\n          obj.pathPointObj.position.copy(obj.position);\r\n          obj.relatedHolders.forEach(it => it != null && it.updateLine());\r\n          break;\r\n        case UndoTypes.update_path_point_undo:\r\n          obj.pathPointObj.position.copy(obj.oldPosition);\r\n          obj.relatedHolders.forEach(it => it != null && it.updateLine());\r\n          break;\r\n        case UndoTypes.replace_paths_point:\r\n          obj.relatedHolders.forEach(it => it != null && it.replaceCircle(obj.replaced, obj.replacement));\r\n          obj.ringGroup.remove(obj.replaced);\r\n          obj.relatedHolders.forEach(it => it != null && it.updateLine());\r\n          break;\r\n        case UndoTypes.replace_paths_point_undo:\r\n          obj.relatedHolders.forEach(it => it != null && it.replaceCircle(obj.replacement, obj.replaced));\r\n          obj.ringGroup.add(obj.replaced);\r\n          obj.replaced.position.copy(obj.oldPosition);\r\n          obj.relatedHolders.forEach(it => it != null && it.updateLine());\r\n          break;\r\n\r\n        case UndoTypes.update_paths_type:\r\n          obj.pathHolders.forEach((holder, index) => {\r\n            if (obj.preType) {\r\n              holder.setPathType(obj.preType);\r\n            } else {\r\n              holder.setPathType(obj.pathTypes[index]);\r\n            }\r\n          });\r\n          break;\r\n        case UndoTypes.unify_paths_type:\r\n          obj.pathHolders.forEach(holder => holder.setPathType(obj.unifyType) );\r\n          break;\r\n        case UndoTypes.update_paths_direction:\r\n          obj.pathHolders.forEach((holder, index) => {\r\n            if (obj.preDirection) {\r\n              holder.setPathDirection(obj.preDirection);\r\n            } else {\r\n              holder.setPathDirection(obj.pathDirections[index]);\r\n            }\r\n          });\r\n          break;\r\n        case UndoTypes.unify_paths_direction:\r\n          obj.pathHolders.forEach(holder => holder.setPathDirection(obj.unifyDirection) );\r\n          break;\r\n        default: break;\r\n      }\r\n\r\n    }\r\n  };\r\n  return that;\r\n};\r\n\r\nlet cmdExecutor = CommandExecutor();\r\nlet Action = function (undoTypeStr, context) {\r\n  this.undoObj = UndoTypes.getAction(undoTypeStr);\r\n  this.name = undoTypeStr;\r\n  let done = true;\r\n  this.context = function () {\r\n    return context;\r\n  };\r\n  this.undo = function () {\r\n    done = false;\r\n    cmdExecutor.execute(this.undoObj.undoNum, context);\r\n  };\r\n  this.redo = function () {\r\n    done = true;\r\n    cmdExecutor.execute(this.undoObj.num, context);\r\n  }\r\n};\r\nexport default Action;\r\n","import {EventDispatcher} from \"three\";\r\nimport Action from \"./Action\";\r\n\r\nfunction equalMeshes(meshes0, meshes1) {\r\n  if (meshes0.length != meshes1.length) {\r\n    return false;\r\n  }\r\n  for (let mesh of meshes0) {\r\n    if (meshes1.indexOf(mesh) < 0) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nlet history = function () {\r\n  this.actionModified = false;\r\n  this.stackLen = 100;\r\n  this.stack = [];\r\n  this.eventStackChange = {type: \"stack change\", undoLen: 0, redoLen: 0};\r\n};\r\n\r\nhistory.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n  constructor: history,\r\n  dispatchStackChange() {\r\n    this.eventStackChange.undoLen = this.stack.length;\r\n    this.eventStackChange.redoLen = this.redoStack ? this.redoStack.length : 0;\r\n    this.dispatchEvent(this.eventStackChange)\r\n  },\r\n  removeAll() {\r\n    this.stack.splice(0, this.stack.length);\r\n    if (this.redoStack) {\r\n      this.redoStack.splice(0, this.redoStack.length);\r\n    }\r\n    this.actionModified = false;\r\n    this.dispatchStackChange();\r\n  },\r\n  addAction(actionName, context) {\r\n    let action = new Action(actionName, context);\r\n    this.redoStack = [];\r\n    this.stack.push(action);\r\n    if (this.stack.length > this.stackLen) {\r\n      this.stack.shift();\r\n    }\r\n    this.actionModified = true;\r\n    this.dispatchStackChange();\r\n  },\r\n  addOrUpdateAction(actionName, context) {\r\n    let latestAction;\r\n    if (this.stack.length > 0) {\r\n      latestAction = this.stack[this.stack.length - 1];\r\n    }\r\n    let updated = false;\r\n    if (latestAction && latestAction.name == actionName ) {\r\n      if (actionName == \"shortcut move\" && equalMeshes(latestAction.context().meshes, context.meshes) ) {\r\n        latestAction.context().moveVector.add(context.moveVector);\r\n        updated = true;\r\n      } else if (actionName == \"shortcut rotate\" && latestAction.context().mesh == context.mesh) {\r\n        latestAction.context().degree += context.degree;\r\n        updated = true;\r\n      }\r\n    }\r\n    if (!updated) this.addAction(actionName, context);\r\n  },\r\n  undoAction() {\r\n    if (this.stack.length == 0) {\r\n      return;\r\n    }\r\n    let action = this.stack.pop();\r\n    this.redoStack.push(action);\r\n    this.dispatchStackChange();\r\n\r\n    action.undo();\r\n  },\r\n\r\n  redoAction() {\r\n    if (this.redoStack.length == 0) {\r\n      return;\r\n    }\r\n    let action = this.redoStack.pop();\r\n    this.stack.push(action);\r\n    this.dispatchStackChange();\r\n\r\n    action.redo();\r\n  }\r\n});\r\n\r\nlet History = new history();\r\nexport default History\r\n","/*\r\n中国国测局地理坐标（GCJ-02）、世界标准地理坐标(WGS-84)\r\n pi: 圆周率。\r\n a: 卫星椭球坐标投影到平面地图坐标系的投影因子。\r\n ee: 椭球的偏心率。\r\n x_pi: 圆周率转换量。\r\n transformLat(lat, lon): 转换方法，比较复杂，不必深究了。输入：横纵坐标，输出：转换后的横坐标。\r\n transformLng(lat, lon): 转换方法，同样复杂，自行脑补吧。输入：横纵坐标，输出：转换后的纵坐标。\r\n wgs2gcj(lat, lon): WGS坐标转换为GCJ坐标。\r\n gcj2bd(lat, lon): GCJ坐标转换为百度坐标。\r\n*/\r\n\r\nlet pi = 3.14159265358979324;\r\nlet a = 6378245.0;\r\nlet ee = 0.00669342162296594323;\r\nlet x_pi = 3.14159265358979324 * 3000.0 / 180.0;\r\n\r\nexport function wgs2bd(lat, lon) {\r\n  let _wgs2gcj = wgs2gcj(lat, lon);\r\n  let _gcj2bd = gcj2bd(_wgs2gcj[0], _wgs2gcj[1]);\r\n  return _gcj2bd;\r\n}\r\nexport function bd2wgs(lat, lon) {\r\n  let _bd2gcj = bd2gcj(lat, lon);\r\n  let _gcj2wgs = gcj02towgs84(_bd2gcj[0], _bd2gcj[1]);\r\n  return _gcj2wgs;\r\n}\r\n//wgs2bd(30.563119999999998, 104.04921080000001); [30.566882476258105, 104.05808460983931]\r\n//bd2wgs(30.566882476258105, 104.05808460983931); [30.56063101298715, 104.05167698078606]\r\n//30.56063101298715 - 30.563119999999998 = -0.0024889870128461666\r\n//104.05167698078606 - 104.04921080000001 = 0.002466180786043992\r\n\r\nexport function gcj2bd(lat, lon) {\r\n  let x = lon, y = lat;\r\n  let z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * x_pi);\r\n  let theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * x_pi);\r\n  let bd_lon = z * Math.cos(theta) + 0.0065;\r\n  let bd_lat = z * Math.sin(theta) + 0.006;\r\n  return [ bd_lat, bd_lon ];\r\n}\r\n\r\nfunction bd2gcj(lat, lon) {\r\n  let x = lon - 0.0065, y = lat - 0.006;\r\n  let z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_pi);\r\n  let theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_pi);\r\n  let gg_lon = z * Math.cos(theta);\r\n  let gg_lat = z * Math.sin(theta);\r\n  return [ gg_lat, gg_lon ];\r\n}\r\n\r\nfunction wgs2gcj(lat, lon) {\r\n  let dLat = transformLat(lon - 105.0, lat - 35.0);\r\n  let dLon = transformLng(lon - 105.0, lat - 35.0);\r\n  let radLat = lat / 180.0 * pi;\r\n  let magic = Math.sin(radLat);\r\n  magic = 1 - ee * magic * magic;\r\n  let sqrtMagic = Math.sqrt(magic);\r\n  dLat = (dLat * 180.0) / ((a * (1 - ee)) / (magic * sqrtMagic) * pi);\r\n  dLon = (dLon * 180.0) / (a / sqrtMagic * Math.cos(radLat) * pi);\r\n  let mgLat = lat + dLat;\r\n  let mgLon = lon + dLon;\r\n  return [ mgLat, mgLon ];\r\n}\r\n\r\n/**\r\n * GCJ-02 转换为 WGS-84\r\n * @param lng\r\n * @param lat\r\n * @returns {*[]}\r\n */\r\nfunction gcj02towgs84(lng, lat) {\r\n  if (outOfChina(lng, lat)) {\r\n    return [lng, lat]\r\n  } else {\r\n    let dlat = transformLat(lng - 105.0, lat - 35.0);\r\n    let dlng = transformLng(lng - 105.0, lat - 35.0);\r\n    let radlat = lat / 180.0 * pi;\r\n    let magic = Math.sin(radlat);\r\n    magic = 1 - ee * magic * magic;\r\n    let sqrtmagic = Math.sqrt(magic);\r\n    dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * pi);\r\n    dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * pi);\r\n    let mglat = lat + dlat;\r\n    let mglng = lng + dlng;\r\n    return [lng * 2 - mglng, lat * 2 - mglat]\r\n  }\r\n};\r\n\r\n//判断是否在国内，不在国内不做偏移\r\nfunction outOfChina(lng, lat) {\r\n  if (lng < 72.004 || lng > 137.8347) {\r\n    return true;\r\n  }\r\n  if (lat < 0.8293 || lat > 55.8271) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction transformLat(lng, lat) {\r\n  let ret = -100.0 + 2.0 * lng + 3.0 * lat + 0.2 * lat * lat +\r\n        0.1 * lng * lat + 0.2 * Math.sqrt(Math.abs(lng))\r\n  ret += (20.0 * Math.sin(6.0 * lng * pi) + 20.0 *\r\n      Math.sin(2.0 * lng * pi)) * 2.0 / 3.0\r\n  ret += (20.0 * Math.sin(lat * pi) + 40.0 *\r\n      Math.sin(lat / 3.0 * pi)) * 2.0 / 3.0\r\n  ret += (160.0 * Math.sin(lat / 12.0 * pi) + 320 *\r\n      Math.sin(lat * pi / 30.0)) * 2.0 / 3.0\r\n  return ret\r\n}\r\n\r\nfunction transformLng(lng, lat) {\r\n  let ret = 300.0 + lng + 2.0 * lat + 0.1 * lng * lng +\r\n        0.1 * lng * lat + 0.1 * Math.sqrt(Math.abs(lng));\r\n  ret += (20.0 * Math.sin(6.0 * lng * pi) + 20.0 *\r\n      Math.sin(2.0 * lng * pi)) * 2.0 / 3.0;\r\n  ret += (20.0 * Math.sin(lng * pi) + 40.0 *\r\n      Math.sin(lng / 3.0 * pi)) * 2.0 / 3.0;\r\n  ret += (150.0 * Math.sin(lng / 12.0 * pi) + 300.0 *\r\n      Math.sin(lng / 30.0 * pi)) * 2.0 / 3.0\r\n  return ret\r\n}\r\n//----------------------\r\n/**\r\n * 经纬度转墨卡托坐标\r\n * @param {Object} poi {y:纬度, x:经度}\r\n */\r\nexport function getMercator(poi) {//{lat:11732811, lng:3361629.5}\r\n  var mercator = {};\r\n  var earthRad = 6378137.0;\r\n  mercator.x = poi.x * Math.PI / 180 * earthRad;\r\n  var a = poi.y * Math.PI / 180;\r\n  mercator.y = earthRad / 2 * Math.log((1.0 + Math.sin(a)) / (1.0 - Math.sin(a)));\r\n  return mercator;\r\n}\r\n/**\r\n * 墨卡托转经纬度\r\n * @param {Object} poi {x:11732811, y:3361629.5}\r\n */\r\nexport function getLngLat(poi){\r\n  var lnglat = {};\r\n  lnglat.x = poi.x/20037508.34*180;\r\n  var mmy = poi.y/20037508.34*180;\r\n  lnglat.y = 180/Math.PI*(2*Math.atan(Math.exp(mmy*Math.PI/180))-Math.PI/2);\r\n  return lnglat;\r\n}\r\n","let Config = function () {\r\n  let configByUI = {\r\n    modelTextVisible: true,\r\n    refOpacityPathTab: 0.8,\r\n    isPublished() {\r\n      let pathHash = window.location.hash;\r\n      return pathHash && pathHash.startsWith(\"#/preview\");\r\n    },\r\n    enableEditPointAdhere: true,\r\n    defaultFillColor: [0x1bbeff, 0.9],\r\n    defaultLineColor: [0x2b51a9, 1],\r\n    defaultFillColorFloor: [0xdbdbdb, 1],\r\n    defaultLineColorFloor: [0x2b51a9, 1],\r\n    defaultHeightFloor: 0.1,\r\n    defaultHeight: 0.3,\r\n    txtHeightExtra: 0.55,\r\n    showFps: false, //true 开启每秒帧数 调试\r\n\r\n    noLight: false,\r\n\r\n    defaultFillColorStr() {\r\n      return configByUI.defaultFillColor[0].toString(16).toUpperCase() + \" \" + configByUI.defaultFillColor[1];\r\n    },\r\n    defaultFillColorFloorStr() {\r\n      return configByUI.defaultFillColorFloor[0].toString(16).toUpperCase() + \" \" + configByUI.defaultFillColorFloor[1];\r\n    }\r\n  };\r\n\r\n  let configByCode = {\r\n    adhereRadiusForCreating: 0.5,\r\n    adhereRadiusForEditing: 0.4,\r\n    adhereEdgeDistance: 0.5,\r\n    moveSlightlyStep: 0.01,\r\n    moveStep:0.5,\r\n    rotateStep: 90, //rotate in degree\r\n    loadSavingFromStart: true,\r\n    smartGuideSpan: 0.5,\r\n    extraSpan: 1,\r\n    instancingRect: true, //true 为矩形Mesh 使用intancing优化\r\n    textOutline: true, //true 为标注添加轮廓\r\n    autoSaveInterval: 0, //每间隔多少秒保存当前数据到localStorage\r\n\r\n    pathAdhereSpanSq: 1.5 * 1.5,\r\n    pointAdhereSpanSq: 0.1 * 0.1,\r\n    defaultSaveForPreview: \"mapPreview\",\r\n    defaultSaveForEditor: \"wuboMap2\",\r\n    lngLatBind: false,  //true: 直接使用经纬度进行坐标绑定, 不使用墨卡托\r\n    TYPE_WGS84: 0,\r\n    TYPE_BaiDu: 2,\r\n    coordType: 2, // 0为wgs84 经纬度坐标，1为火星坐标，2为百度坐标\r\n\r\n    getPrecision() {\r\n      let str = configByCode.moveSlightlyStep + \"\";\r\n      return str.substr(str.indexOf(\".\") + 1).length;\r\n    }\r\n  };\r\n\r\n  let remote = {\r\n    baseUrl: \"http://192.168.0.154:8151/\",\r\n    encKey: \"1234\",\r\n    token: null,\r\n    mapId: null,\r\n    previewToken: null,\r\n    previewMapId: null,\r\n    heatmap: undefined,\r\n    track: undefined,\r\n    trackOwner: null, //名称 名字\r\n    userId: null,\r\n    timeStart: null,\r\n    timeEnd: null,\r\n    version: null,\r\n    // userId: null,\r\n    updateByVue(router) {\r\n      Config.remote.previewToken = router.query.token;\r\n      Config.remote.previewMapId = router.query.mapId;\r\n      Config.remote.heatmap = router.query.heatmap;\r\n      Config.remote.track = router.query.track;\r\n      Config.remote.trackOwner = router.query.owner;\r\n      Config.remote.userId = router.query.userId;\r\n      Config.remote.mapId = router.query.mapId;\r\n      Config.remote.timeStart = router.query.beginTime;\r\n      Config.remote.timeEnd = router.query.endTime;\r\n      Config.remote.version = router.query.version;\r\n      if (Config.remote.timeStart && Config.remote.timeStart.trim().indexOf(\" \") > 3) {\r\n        Config.remote.timeStart = Config.remote.timeStart.split(\" \")[0]\r\n      }\r\n      if (Config.remote.timeEnd && Config.remote.timeEnd.trim().indexOf(\" \") > 3) {\r\n        Config.remote.timeEnd = Config.remote.timeEnd.split(\" \")[0]\r\n      }\r\n    }\r\n  };\r\n\r\n  let that = {\r\n    ui: configByUI,\r\n    code: configByCode,\r\n    remote: remote,\r\n    mathConsts: {\r\n      radianToDegree: 180 / Math.PI,\r\n      degreeToRadian: Math.PI / 180,\r\n    }\r\n  };\r\n  return that;\r\n} ();\r\n\r\nexport default Config;\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleNumberInput.vue?vue&type=style&index=0&id=781815a2&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxMisc.vue?vue&type=style&index=0&id=0a8e96a9&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BiliText.vue?vue&type=style&index=0&id=ee693466&scoped=true&lang=css&\"","/**\r\n * vuex v3.1.3\r\n * (c) 2020 Evan You\r\n * @license MIT\r\n */\r\nconst t=(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function e(t,e){Object.keys(t).forEach(s=>e(t[s],s))}function s(t){return null!==t&&\"object\"==typeof t}class i{constructor(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;const s=t.state;this.state=(\"function\"==typeof s?s():s)||{}}get namespaced(){return!!this._rawModule.namespaced}addChild(t,e){this._children[t]=e}removeChild(t){delete this._children[t]}getChild(t){return this._children[t]}update(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)}forEachChild(t){e(this._children,t)}forEachGetter(t){this._rawModule.getters&&e(this._rawModule.getters,t)}forEachAction(t){this._rawModule.actions&&e(this._rawModule.actions,t)}forEachMutation(t){this._rawModule.mutations&&e(this._rawModule.mutations,t)}}class o{constructor(t){this.register([],t,!1)}get(t){return t.reduce((t,e)=>t.getChild(e),this.root)}getNamespace(t){let e=this.root;return t.reduce((t,s)=>t+((e=e.getChild(s)).namespaced?s+\"/\":\"\"),\"\")}update(t){!function t(e,s,i){s.update(i);if(i.modules)for(const o in i.modules){if(!s.getChild(o))return;t(e.concat(o),s.getChild(o),i.modules[o])}}([],this.root,t)}register(t,s,o=!0){const n=new i(s,o);if(0===t.length)this.root=n;else{this.get(t.slice(0,-1)).addChild(t[t.length-1],n)}s.modules&&e(s.modules,(e,s)=>{this.register(t.concat(s),e,o)})}unregister(t){const e=this.get(t.slice(0,-1)),s=t[t.length-1];e.getChild(s).runtime&&e.removeChild(s)}}let n;class r{constructor(e={}){!n&&\"undefined\"!=typeof window&&window.Vue&&p(window.Vue);const{plugins:s=[],strict:i=!1}=e;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new o(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new n,this._makeLocalGettersCache=Object.create(null);const r=this,{dispatch:c,commit:a}=this;this.dispatch=function(t,e){return c.call(r,t,e)},this.commit=function(t,e,s){return a.call(r,t,e,s)},this.strict=i;const l=this._modules.root.state;h(this,l,[],this._modules.root),u(this,l),s.forEach(t=>t(this)),(void 0!==e.devtools?e.devtools:n.config.devtools)&&function(e){t&&(e._devtoolHook=t,t.emit(\"vuex:init\",e),t.on(\"vuex:travel-to-state\",t=>{e.replaceState(t)}),e.subscribe((e,s)=>{t.emit(\"vuex:mutation\",e,s)}))}(this)}get state(){return this._vm._data.$$state}set state(t){}commit(t,e,s){const{type:i,payload:o,options:n}=d(t,e,s),r={type:i,payload:o},c=this._mutations[i];c&&(this._withCommit(()=>{c.forEach(function(t){t(o)})}),this._subscribers.slice().forEach(t=>t(r,this.state)))}dispatch(t,e){const{type:s,payload:i}=d(t,e),o={type:s,payload:i},n=this._actions[s];if(n){try{this._actionSubscribers.slice().filter(t=>t.before).forEach(t=>t.before(o,this.state))}catch(t){}return(n.length>1?Promise.all(n.map(t=>t(i))):n[0](i)).then(t=>{try{this._actionSubscribers.filter(t=>t.after).forEach(t=>t.after(o,this.state))}catch(t){}return t})}}subscribe(t){return c(t,this._subscribers)}subscribeAction(t){return c(\"function\"==typeof t?{before:t}:t,this._actionSubscribers)}watch(t,e,s){return this._watcherVM.$watch(()=>t(this.state,this.getters),e,s)}replaceState(t){this._withCommit(()=>{this._vm._data.$$state=t})}registerModule(t,e,s={}){\"string\"==typeof t&&(t=[t]),this._modules.register(t,e),h(this,this.state,t,this._modules.get(t),s.preserveState),u(this,this.state)}unregisterModule(t){\"string\"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit(()=>{const e=l(this.state,t.slice(0,-1));n.delete(e,t[t.length-1])}),a(this)}hotUpdate(t){this._modules.update(t),a(this,!0)}_withCommit(t){const e=this._committing;this._committing=!0,t(),this._committing=e}}function c(t,e){return e.indexOf(t)<0&&e.push(t),()=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)}}function a(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);const s=t.state;h(t,s,[],t._modules.root,!0),u(t,s,e)}function u(t,s,i){const o=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);const r=t._wrappedGetters,c={};e(r,(e,s)=>{c[s]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,s,{get:()=>t._vm[s],enumerable:!0})});const a=n.config.silent;n.config.silent=!0,t._vm=new n({data:{$$state:s},computed:c}),n.config.silent=a,t.strict&&function(t){t._vm.$watch(function(){return this._data.$$state},()=>{},{deep:!0,sync:!0})}(t),o&&(i&&t._withCommit(()=>{o._data.$$state=null}),n.nextTick(()=>o.$destroy()))}function h(t,e,s,i,o){const r=!s.length,c=t._modules.getNamespace(s);if(i.namespaced&&(t._modulesNamespaceMap[c],t._modulesNamespaceMap[c]=i),!r&&!o){const o=l(e,s.slice(0,-1)),r=s[s.length-1];t._withCommit(()=>{n.set(o,r,i.state)})}const a=i.context=function(t,e,s){const i=\"\"===e,o={dispatch:i?t.dispatch:(s,i,o)=>{const n=d(s,i,o),{payload:r,options:c}=n;let{type:a}=n;return c&&c.root||(a=e+a),t.dispatch(a,r)},commit:i?t.commit:(s,i,o)=>{const n=d(s,i,o),{payload:r,options:c}=n;let{type:a}=n;c&&c.root||(a=e+a),t.commit(a,r,c)}};return Object.defineProperties(o,{getters:{get:i?()=>t.getters:()=>(function(t,e){if(!t._makeLocalGettersCache[e]){const s={},i=e.length;Object.keys(t.getters).forEach(o=>{if(o.slice(0,i)!==e)return;const n=o.slice(i);Object.defineProperty(s,n,{get:()=>t.getters[o],enumerable:!0})}),t._makeLocalGettersCache[e]=s}return t._makeLocalGettersCache[e]})(t,e)},state:{get:()=>l(t.state,s)}}),o}(t,c,s);i.forEachMutation((e,s)=>{!function(t,e,s,i){(t._mutations[e]||(t._mutations[e]=[])).push(function(e){s.call(t,i.state,e)})}(t,c+s,e,a)}),i.forEachAction((e,s)=>{const i=e.root?s:c+s,o=e.handler||e;!function(t,e,s,i){(t._actions[e]||(t._actions[e]=[])).push(function(e){let o=s.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e);var n;return(n=o)&&\"function\"==typeof n.then||(o=Promise.resolve(o)),t._devtoolHook?o.catch(e=>{throw t._devtoolHook.emit(\"vuex:error\",e),e}):o})}(t,i,o,a)}),i.forEachGetter((e,s)=>{!function(t,e,s,i){if(t._wrappedGetters[e])return;t._wrappedGetters[e]=function(t){return s(i.state,i.getters,t.state,t.getters)}}(t,c+s,e,a)}),i.forEachChild((i,n)=>{h(t,e,s.concat(n),i,o)})}function l(t,e){return e.reduce((t,e)=>t[e],t)}function d(t,e,i){return s(t)&&t.type&&(i=e,e=t,t=t.type),{type:t,payload:e,options:i}}function p(t){n&&t===n||function(t){if(Number(t.version.split(\".\")[0])>=2)t.mixin({beforeCreate:e});else{const s=t.prototype._init;t.prototype._init=function(t={}){t.init=t.init?[e].concat(t.init):e,s.call(this,t)}}function e(){const t=this.$options;t.store?this.$store=\"function\"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(n=t)}const m=w((t,e)=>{const s={};return b(e).forEach(({key:e,val:i})=>{s[e]=function(){let e=this.$store.state,s=this.$store.getters;if(t){const i=v(this.$store,\"mapState\",t);if(!i)return;e=i.context.state,s=i.context.getters}return\"function\"==typeof i?i.call(this,e,s):e[i]},s[e].vuex=!0}),s}),f=w((t,e)=>{const s={};return b(e).forEach(({key:e,val:i})=>{s[e]=function(...e){let s=this.$store.commit;if(t){const e=v(this.$store,\"mapMutations\",t);if(!e)return;s=e.context.commit}return\"function\"==typeof i?i.apply(this,[s].concat(e)):s.apply(this.$store,[i].concat(e))}}),s}),_=w((t,e)=>{const s={};return b(e).forEach(({key:e,val:i})=>{i=t+i,s[e]=function(){if(!t||v(this.$store,\"mapGetters\",t))return this.$store.getters[i]},s[e].vuex=!0}),s}),g=w((t,e)=>{const s={};return b(e).forEach(({key:e,val:i})=>{s[e]=function(...e){let s=this.$store.dispatch;if(t){const e=v(this.$store,\"mapActions\",t);if(!e)return;s=e.context.dispatch}return\"function\"==typeof i?i.apply(this,[s].concat(e)):s.apply(this.$store,[i].concat(e))}}),s}),y=t=>({mapState:m.bind(null,t),mapGetters:_.bind(null,t),mapMutations:f.bind(null,t),mapActions:g.bind(null,t)});function b(t){return function(t){return Array.isArray(t)||s(t)}(t)?Array.isArray(t)?t.map(t=>({key:t,val:t})):Object.keys(t).map(e=>({key:e,val:t[e]})):[]}function w(t){return(e,s)=>(\"string\"!=typeof e?(s=e,e=\"\"):\"/\"!==e.charAt(e.length-1)&&(e+=\"/\"),t(e,s))}function v(t,e,s){return t._modulesNamespaceMap[s]}export default{Store:r,install:p,version:\"3.1.3\",mapState:m,mapMutations:f,mapGetters:_,mapActions:g,createNamespacedHelpers:y};export{r as Store,p as install,m as mapState,f as mapMutations,_ as mapGetters,g as mapActions,y as createNamespacedHelpers};","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./collapse.vue?vue&type=style&index=0&id=78017b3e&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabBarItem.vue?vue&type=style&index=0&id=006f9056&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=c3394e22&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxSettings.vue?vue&type=style&index=0&id=e11cd3fe&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabView.vue?vue&type=style&index=0&id=32ff9422&scoped=true&lang=css&\"","import {Vector3} from 'three';\r\nimport {getPathCtrlPoint} from \"./StaticMethods\";\r\nimport PathSegment from \"../instance/PathSegment\";\r\nimport PolygonMesh from \"../instance/PolygonMesh\";\r\nimport Layers from \"../Layers\";\r\nimport MainScene from '../MainScene';\r\nimport * as Consts from \"../consts/Constants\";\r\nimport Config from \"../configurable/Config\";\r\nimport History from \"../undo/History\";\r\nimport TextMark from \"../instance/TextMark\";\r\n\r\nlet serializeTool = function () {\r\n  let defaultSaveName = Config.code.defaultSaveForEditor;\r\n  // obj.eles.buildings[0].allVertices [25.843, -12.357, 0]\r\n  // obj.eles.buildings[0].holeNums []\r\n  function test0(obj) {\r\n    let arr = []\r\n    obj.eles.buildings.forEach(item => {\r\n      arr.push({vertices:item.allVertices, holeNums:item.holeNums})\r\n    })\r\n    let str = JSON.stringify(arr)\r\n    console.log(str)\r\n  }\r\n  function findHolder(holders, from, to) {\r\n    for(let holder of holders) {\r\n      if (holder.fromCircle() == from && holder.toCircle() == to) {\r\n        return holder;\r\n      }\r\n      if (holder.fromCircle() == to && holder.toCircle() == from) {\r\n        return holder;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  function removeDuplicate(holders) {\r\n    let target = [];\r\n    for (let holder of holders) {\r\n      if (!findHolder(target, holder.fromCircle(), holder.toCircle())) {\r\n        target.push(holder);\r\n      }\r\n    }\r\n    return target;\r\n  }\r\n  function retrieveRings(holders) {\r\n    let target = [];\r\n    for (let holder of holders) {\r\n      let from = holder.fromCircle(), to = holder.toCircle();\r\n      if (target.indexOf(from) < 0) {\r\n        target.push(from);\r\n      }\r\n      if (target.indexOf(to) < 0) {\r\n        target.push(to);\r\n      }\r\n    }\r\n    return target;\r\n  }\r\n\r\n  function serializeNavPathLayer() {\r\n    let holders = Layers.getPathSegmentHolders();\r\n    holders = removeDuplicate(holders);\r\n    let rings = retrieveRings(holders);\r\n    let target = {rings: [], segments: []};\r\n    for (let ring of rings) {\r\n      target.rings.push({x: ring.position.x, y: ring.position.y});\r\n    }\r\n    for (let holder of holders) {\r\n      let segment = {from: rings.indexOf(holder.fromCircle()), to: rings.indexOf(holder.toCircle()),\r\n        pathType: holder.getPathType(), pathDirection: holder.getPathDirection()};\r\n      target.segments.push(segment);\r\n    }\r\n    return target;\r\n  }\r\n  function deserializeNavPathLayer(obj) {\r\n    let ringObjs = [], vector;\r\n    let previewPath = Layers.getPreviewPath();\r\n    previewPath.pathPoints = [];\r\n    previewPath.pathEdges = [];\r\n\r\n    for (let pos of obj.rings) {\r\n      vector = new Vector3(pos.x, pos.y, 0);\r\n      let ringObj = getPathCtrlPoint(vector, Consts.pointTypeRing);\r\n      ringObjs.push(ringObj);\r\n      Layers.navPathLayer.add(ringObj);\r\n    }\r\n    for (let segment of obj.segments) {\r\n      let from = ringObjs[segment.from], to = ringObjs[segment.to];\r\n      let holder = PathSegment(from, to, segment.pathType);\r\n      holder.setPathDirection(segment.pathDirection);\r\n      Layers.navPathLayer.add(holder.getLine());\r\n    }\r\n  }\r\n\r\n  let that = {\r\n    serialize() {\r\n      //let target = {floor:[], buildings:[], navPaths: serializeNavPathLayer(), lightList: [], layers:[] };\r\n      let target = {eles: {}, navPaths: serializeNavPathLayer(), lightList: [], layers:[] };\r\n      Layers.getAllLayers().forEach(obj => {\r\n        target.layers.push({id: obj.id, hidden: obj.hidden, locked: obj.locked,\r\n          name: obj.name, order: obj.group.renderOrder\r\n        });\r\n        target[obj.id] = [];\r\n      } );\r\n      for (let obj of target.layers) {\r\n        let group = Layers.getLayerById(obj.id).group;\r\n        for (let mesh of group.children) {\r\n          if (!mesh.holder || !mesh.holder.serialize) continue;\r\n          if (target.eles[obj.id] == undefined)\r\n            target.eles[obj.id] = [];\r\n          target.eles[obj.id].push(mesh.holder.serialize());\r\n        }\r\n      }\r\n\r\n      target.coordBinding = MainScene.coordTool().serialize();\r\n      let referMesh = Layers.referMesh();\r\n      if (referMesh != null) {\r\n        target.refLayer = {};\r\n        target.refLayer.pos = referMesh.position.toArrayFixed(3);\r\n        target.refLayer.scale = referMesh.scale.toArrayFixed(2);\r\n        target.refLayer.rotation = referMesh.rotation.z;\r\n        target.refLayer.opacity = referMesh.material.opacity;\r\n      }\r\n      target.lightList = MainScene.lightTool().serializeLights();\r\n      return JSON.stringify(target);\r\n    },\r\n    deserialize(jsonStr) {\r\n      Layers.clearLayer(Layers.navPathLayer);\r\n      Layers.clearLayer(Layers.floorLayer);\r\n      Layers.clearLayer(Layers.buildingsLayer);\r\n      Layers.clearLayer(Layers.referLayer);\r\n      Layers.clearLayer(Layers.markLayer);\r\n      Layers.clearCustomLayers();\r\n      if (!jsonStr)\r\n        return;\r\n      let obj = JSON.parse(jsonStr);\r\n      test0(obj)\r\n\r\n      if (obj.layers == undefined) { //兼容\r\n        obj.layers = [{id: 'floor', hidden: false, locked: false, order: 1},\r\n          {id: 'buildings', hidden: false, locked: false, order: 3}];\r\n      }\r\n\r\n      for (let layer of obj.layers) {\r\n        if (Layers.layers.hasOwnProperty(layer.id)) {\r\n          Layers.layers[layer.id].hidden = layer.hidden;\r\n          Layers.layers[layer.id].locked = layer.locked;\r\n          Layers.layers[layer.id].group.renderOrder = layer.order;\r\n        } else {\r\n          Layers.addLayer(layer);\r\n        }\r\n        let elementArr;\r\n        if (obj.eles != undefined) {\r\n          elementArr = obj.eles[layer.id];  //新版本的地图文件\r\n        } else {\r\n          elementArr = obj[layer.id];\r\n        }\r\n        if (elementArr == undefined)\r\n          continue;\r\n        for (let itemObj of elementArr) {  //for (let itemObj of obj[layer.id]) {\r\n          let group = Layers.getLayerById(layer.id).group;\r\n          if (itemObj.isMarker) {\r\n            let marker = TextMark().deserialize(itemObj);\r\n            marker.attach(group);\r\n          } else {\r\n            let polygonMesh = PolygonMesh().deserialize(itemObj);\r\n            group.add(polygonMesh.getHolderGroup());\r\n          }\r\n        }\r\n      }\r\n\r\n      deserializeNavPathLayer(obj.navPaths);\r\n      MainScene.updateMeshesScale();\r\n      MainScene.coordTool().clearBinding();\r\n      if (obj.coordBinding) {\r\n        MainScene.initCoordBinding(obj.coordBinding);\r\n      }\r\n      Layers.setReferLayerSaving(obj.refLayer);\r\n\r\n      MainScene.lightTool().deleteAllLights();\r\n      if (obj.lightList != undefined)\r\n        MainScene.lightTool().deserializeLights(obj.lightList);\r\n\r\n      MainScene.pathTool().prepareToFree();\r\n      Layers.syncVisibilities();\r\n      // console.log('reset ui in Serialization.js')\r\n      History.removeAll();\r\n    },\r\n\r\n    saveToLoal(saveForPreview) {\r\n      let saving = that.serialize();\r\n      if (saveForPreview) {\r\n        window.localStorage[Config.code.defaultSaveForPreview] = saving;\r\n      } else {\r\n        window.localStorage[defaultSaveName] = saving;\r\n      }\r\n      // console.log(window.localStorage[defaultSaveName]);\r\n      // document.getElementById('mapInput').value = window.localStorage[defaultSaveName];\r\n      return saving;\r\n    },\r\n    loadFromLocal() {\r\n      let saving = window.localStorage[defaultSaveName];\r\n      if (saving == undefined) {\r\n        console.log(\"no saving for \" + defaultSaveName + \" founded!\");\r\n        return;\r\n      }\r\n      that.deserialize(saving);\r\n    }\r\n  };\r\n  return that;\r\n};\r\nlet Serializer = serializeTool();\r\nexport default Serializer;\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleGrid.vue?vue&type=style&index=0&id=dc071400&scoped=true&lang=css&\"","import {Vector3, Line3} from 'three';\r\nimport {getPathSegment, getPathCtrlPoint, getPathArrow, getPathArrowRotation} from '../util/StaticMethods';\r\nimport * as Constants from '../consts/Constants'\r\nimport Config from \"../configurable/Config\";\r\n\r\nlet PathSegment = function (from, to, lineType, scalar0) {\r\n//from.starts, from.ends, to.starts, to.ends = [element of PathSegment];\r\n  let pathType = lineType;\r\n  let pathDirection = 0;\r\n  let lineObj, fromCircle, toCircle, arrowObj;\r\n  let selectedLine = getPathSegment(new Vector3(0,0,0), new Vector3(0,1,0), Constants.pathTypeSelected);\r\n  let findedLine = getPathSegment(new Vector3(0,0,0), new Vector3(0,1,0), Constants.pathTypeFinded);\r\n  // let selectedLine = getPolygonLineMesh([new Vector3(0,0,0), new Vector3(0,3,0)], null, false);\r\n  findedLine.renderOrder = 4;\r\n  selectedLine.renderOrder = 3;\r\n  const edgeAdhere = Config.code.adhereEdgeDistance;\r\n  const adhereDistance = Config.code.adhereRadiusForCreating;\r\n  let edgeAdhereDistanceSq = edgeAdhere * edgeAdhere;\r\n  let adhereDistanceSq = adhereDistance * adhereDistance;\r\n  let cost = 0;\r\n  if (scalar0 != undefined) {\r\n    updateScaleFactor(scalar0);\r\n  }\r\n\r\n  if (from instanceof Vector3) {\r\n    fromCircle = getPathCtrlPoint(from, Constants.pointTypeRing);\r\n  } else {\r\n    fromCircle = from;\r\n  }\r\n  if (to instanceof Vector3) {\r\n    toCircle = getPathCtrlPoint(to, Constants.pointTypeRing);\r\n  } else {\r\n    toCircle = to;\r\n  }\r\n  fromCircle.renderOrder = toCircle.renderOrder = 2;\r\n  lineObj = getPathSegment(fromCircle.position, toCircle.position, lineType);\r\n  lineObj.renderOrder = 1;\r\n\r\n  let tmp = new Vector3();\r\n  let line = new Line3(fromCircle.position, toCircle.position);\r\n\r\n  function getPosition() {\r\n    let pos = fromCircle.position.clone().lerp(toCircle.position, 0.5);\r\n    return pos;\r\n  }\r\n  function updateScaleFactor(scalar) {\r\n    edgeAdhereDistanceSq = edgeAdhere * edgeAdhere * scalar * scalar;\r\n    adhereDistanceSq = adhereDistance * adhereDistance * scalar * scalar;\r\n  }\r\n  let that = {\r\n    splitBy:[],\r\n    splitCircles: [],\r\n    processSplitBy() {\r\n      let p0 = fromCircle.position;\r\n      let distanceSqs = [];\r\n      that.splitBy.forEach(it => distanceSqs.push(p0.distanceToSquared(it)) );\r\n      let distanceSqsSorted = distanceSqs.slice().sort((a,b) => a - b);\r\n      let pFrom = p0;\r\n      let segments = [];\r\n      for (let i = 0; i < distanceSqsSorted.length; i++) {\r\n        let index = distanceSqs.indexOf(distanceSqsSorted[i]);\r\n        let pTo = that.splitBy[index];\r\n        let circle = that.splitCircles[index];\r\n        let segment;\r\n        if (i == 0) {\r\n          segment = PathSegment(fromCircle, circle || pTo, pathType);\r\n        } else {\r\n          segment = PathSegment(pFrom, circle || pTo, pathType);\r\n        }\r\n        segments.push(segment);\r\n        pFrom = circle || pTo;\r\n      }\r\n      segments.push( PathSegment(pFrom, toCircle, pathType) );\r\n      return segments;\r\n    },\r\n    fromCircle() {\r\n      return fromCircle;\r\n    },\r\n    toCircle() {\r\n      return toCircle;\r\n    },\r\n    length() {\r\n      return fromCircle.position.distanceTo(toCircle.position);\r\n    },\r\n    getPathType() {\r\n      return pathType;\r\n    },\r\n    setPathType(type) {\r\n      if (pathType == type) {\r\n        return;\r\n      }\r\n      let parent = lineObj.parent;\r\n      parent.remove(lineObj);\r\n      lineObj = getPathSegment(fromCircle.position, toCircle.position, type);\r\n      parent.add(lineObj);\r\n      if (arrowObj) {\r\n        lineObj.add(arrowObj);\r\n      }\r\n      lineObj.holder = that;\r\n      pathType = type;\r\n    },\r\n    setPathDirection(direction) {\r\n      if (pathDirection == direction) {\r\n        return;\r\n      }\r\n      if (arrowObj && arrowObj.parent) {\r\n        arrowObj.parent.remove(arrowObj);\r\n      }\r\n      if (direction !== Constants.pathDirBoth) {\r\n        arrowObj = getPathArrow(fromCircle.position, toCircle.position, direction);\r\n        lineObj.add(arrowObj);\r\n      } else {\r\n        arrowObj = null;\r\n      }\r\n      pathDirection = direction;\r\n    },\r\n    getPathDirection() {\r\n      return pathDirection;\r\n    },\r\n    getLine() {\r\n      return lineObj;\r\n    },\r\n    updateLine() {\r\n      let pf = fromCircle.position, pt = toCircle.position;\r\n      lineObj.geometry.setPositions([pf.x, pf.y, 0, pt.x, pt.y, 0]);\r\n      lineObj.computeLineDistances();\r\n      if (arrowObj && arrowObj.parent) {\r\n        arrowObj.position.copy(pf.clone().lerp(pt, 0.5));\r\n        arrowObj.material.rotation = getPathArrowRotation(pf, pt, pathDirection);\r\n      }\r\n    },\r\n    replaceCircle(oldCircle, newCircle) {\r\n      if (oldCircle == fromCircle) {\r\n        fromCircle = newCircle;\r\n      } else if (oldCircle == toCircle) {\r\n        toCircle = newCircle;\r\n      }\r\n    },\r\n    selectFinding() {\r\n      let pf = fromCircle.position, pt = toCircle.position;\r\n      findedLine.geometry.setPositions([pf.x, pf.y, 0, pt.x, pt.y, 0]);\r\n      findedLine.computeLineDistances();\r\n      lineObj.add(findedLine);\r\n    },\r\n    unselectFinding() {\r\n      if (findedLine.parent) lineObj.remove(findedLine);\r\n    },\r\n    select() {\r\n      let pf = fromCircle.position, pt = toCircle.position;\r\n      selectedLine.geometry.setPositions([pf.x, pf.y, 0, pt.x, pt.y, 0]);\r\n      selectedLine.computeLineDistances();\r\n      lineObj.add(selectedLine);\r\n    },\r\n    unselect() {\r\n      lineObj.remove(selectedLine);\r\n    },\r\n    getItems() {\r\n      return [lineObj, fromCircle, toCircle];\r\n    },\r\n    updateScaleFactor: updateScaleFactor,\r\n    updateCost() {\r\n      cost = fromCircle.position.distanceTo(toCircle.position);\r\n    },\r\n    getCost() {\r\n      return cost;\r\n    },\r\n    getAdhereObj(point, skipEdge) {\r\n      let target = { ctrlPoint: null, posOnEdge: null, distanceSq:-1, holder: that};\r\n      let distance = fromCircle.position.distanceToSquared(point);\r\n      if (distance <= adhereDistanceSq) {\r\n        target.ctrlPoint = fromCircle;\r\n        target.distanceSq = distance;\r\n        return target;\r\n      }\r\n      distance = toCircle.position.distanceToSquared(point);\r\n      if (toCircle.position.distanceToSquared(point) <= adhereDistanceSq) {\r\n        target.ctrlPoint = toCircle;\r\n        target.distanceSq = distance;\r\n        return target;\r\n      }\r\n      if (skipEdge) {\r\n        return target;\r\n      }\r\n\r\n      line.start.copy(fromCircle.position);\r\n      line.end.copy(toCircle.position);\r\n      let t = line.closestPointToPointParameter(point, false);\r\n      if (t > 1 || t < 0) {\r\n        return target;\r\n      }\r\n      line.closestPointToPoint(point, false, tmp);\r\n      let distanceSq = tmp.distanceToSquared(point);\r\n      if (distanceSq <= edgeAdhereDistanceSq) {\r\n        target.posOnEdge = tmp;\r\n        target.distanceSq = distanceSq;\r\n      }\r\n      return target;\r\n    }\r\n  };\r\n  lineObj.holder = that;\r\n  return that;\r\n}\r\n\r\nexport default PathSegment;\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageTitle.vue?vue&type=style&index=0&id=e6d45a3c&scoped=true&lang=css&\"","import {DirectionalLight, PointLight, SpotLight, HemisphereLight} from 'three';\r\n\r\nexport const pointTypeCircleWhite = 0;\r\nexport const pointTypeCircleBlue = 1;\r\nexport const pointTypeRing = 2;\r\nexport const pointTypeRingSelected = 3;\r\n\r\nexport const pathTypeBold = 0;\r\nexport const pathTypeMiddle = 1;\r\nexport const pathTypeThin = 2;\r\nexport const pathTypeSelected = 3;\r\nexport const pathTypeAdding = 4;\r\nexport const pathTypeFinded = 5;\r\n\r\nexport const pathDirBoth = 0;\r\nexport const pathDirFromTo = 1; //正向通行\r\nexport const pathDirToFrom = 2; //逆向通行\r\nexport const pathDirBan = 3;\r\n\r\nexport const lightTypeDirection = 3;  //方向光\r\nexport const lightTypePoint = 4;  //点光源\r\nexport const lightTypeSpot = 5;  //聚光灯\r\nexport const lightTypeHemiSphere = 6;  //半球光\r\n\r\nexport const remote_token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE1OTc4MTYyOTYsInVzZXJJZCI6IjEwNDM5NzQ2NDI2MjIzMjQ3MzYiLCJ1c2VyTmFtZSI6IjE4ODQ4NDI5Nzk0IiwibWVyY2hhbnRJZCI6IjExMjYyNzUxMTUxODY2MTAxNzYiLCJtZXJjaGFudE5hbWUiOiLmtYvor5Xog6EiLCJzb3VyY2UiOiIxIiwiaXNzIjoicWMtd2JvLmNvbSJ9.iuTAeNVE9AbKePkAaaFdGp_uNnNtY5_iO27RnWl4FaE\";\r\nexport const remote_map_id = \"1141650032954523673\";\r\n\r\nlet polygonCount = 0;  //global variable\r\nexport function getPolygonCount() {\r\n  polygonCount++;\r\n  return polygonCount;\r\n}\r\n\r\nexport function getLightType(light) {\r\n  if (light instanceof  DirectionalLight)\r\n    return lightTypeDirection;\r\n  if (light instanceof  PointLight)\r\n    return lightTypePoint;\r\n  if (light instanceof  SpotLight)\r\n    return lightTypeSpot;\r\n  if (light instanceof  HemisphereLight)\r\n    return lightTypeHemiSphere;\r\n  return  -1;\r\n}\r\n\r\nexport function getLightTypeName(light) {\r\n  if (!light)\r\n    return \"\";\r\n  if (light instanceof DirectionalLight)\r\n    return \"方向光\";\r\n  if (light instanceof PointLight)\r\n    return \"点光源\";\r\n  if (light instanceof SpotLight)\r\n    return \"聚光灯\";\r\n  if (light instanceof HemisphereLight)\r\n    return \"半球光\";\r\n  return \"未知光源\";\r\n}\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTabBar.vue?vue&type=style&index=0&id=38e3a795&scoped=true&lang=css&\"","import {\r\n  Group, BufferGeometry, BufferAttribute, Mesh, Vector3, Line3, FrontSide,\r\n  MeshBasicMaterial, LineBasicMaterial, MeshNormalMaterial, MeshLambertMaterial, MeshPhongMaterial\r\n} from 'three'\r\n\r\nimport Earcut from '../lib_external/Earcut'\r\nimport * as Consts from \"../consts/Constants\"\r\nimport Box2 from \"../lib/Box2\";\r\nimport Config from \"../configurable/Config\";\r\nimport MainScene from \"../MainScene\"\r\nimport Layers from \"../Layers\";\r\n\r\nimport {flatten, bufferAttributeToVertices, getPolygonLineMesh, getDashedOutLine, createLines3d,\r\n  getPolygonCtrlPoint, vectorsToObjXY, makeCanvasTextSprite, generateTextCanvas, createModel3D} from \"../util/StaticMethods\"\r\n\r\nlet PolygonMesh = function (vectorLst, holeNums) {\r\n  //一维数组vectices 二维数组holesVectices 的元素，始终是世界坐标系的坐标\r\n  //最外轮廓为逆时钟序列，孔为顺时钟序列\r\n  let vectices = [];\r\n  let holeIndices = [], holesVectices = [], holes = [];\r\n\r\n  if (vectorLst != null && vectorLst.length > 2) {\r\n    init(vectorLst, holeNums);\r\n  }\r\n\r\n  let fixedPointColor = 0x3652A9;\r\n  const ctrlPointHeight = 0;  //0.00001;\r\n  const topOrder = 99999;\r\n\r\n  let ctrlPoints = [];    //二维数组\r\n  const edgeAdhere = Config.code.adhereEdgeDistance;\r\n  const adhereDistance = Config.code.adhereRadiusForEditing;\r\n  let edgeAdhereDistanceSq = edgeAdhere * edgeAdhere;\r\n  let adhereDistanceSq = adhereDistance * adhereDistance;\r\n  let holderGroup = new Group();\r\n  let mesh, outline, mesh3d, mesh3dMat = Config.ui.noLight ? \"MeshBasicMaterial\" : \"MeshLambertMaterial\";\r\n  let lineSegments3d;\r\n  let mode = 'global';\r\n  let name = \"模型\" + Consts.getPolygonCount();\r\n\r\n  let zHeight = Layers.getDefaultHeight(), txtHeight = (zHeight + Config.ui.txtHeightExtra).toFixed(2)*1;\r\n  let originBox = Box2(), expandedBox = Box2();\r\n  let textSprite;\r\n  let instanceRectScale;\r\n  function initInstanceRectScale(vertices, holeNums) {\r\n    if (vertices.length != 4 || holeNums.length > 1)\r\n      return;\r\n    let p0 = vertices[0], p1 = vertices[1], p2 = vertices[2], p3 = vertices[3];\r\n    if (p0.x == p1.x && p2.x == p3.x && p0.y == p3.y && p1.y == p2.y) {\r\n      let rectWidth = Math.abs(p3.x - p0.x), rectHeight = Math.abs(p1.y - p0.y);\r\n      instanceRectScale = new Vector3(rectWidth, rectHeight, 1);\r\n    }\r\n  }\r\n\r\n  function setTextSprite() {\r\n    let textParent;\r\n    if (textSprite) {\r\n      textParent = textSprite.parent;\r\n      if (textParent) {\r\n        textParent.remove(textSprite);\r\n      }\r\n    }\r\n    if (name && name.trim().length > 0) {\r\n      let canvas = generateTextCanvas(name);\r\n      textSprite = makeCanvasTextSprite(canvas);\r\n      (textParent || holderGroup).add(textSprite);\r\n      textSprite.position.copy(mesh.position);\r\n      textSprite.renderOrder = topOrder;\r\n      textSprite.visible = Config.ui.modelTextVisible;\r\n    }\r\n  }\r\n\r\n  function init(vecLst, holeNums) {\r\n    if (holeNums != null && holeNums.length > 0) {\r\n      holeIndices = holeNums.slice();\r\n    } else {\r\n      vectices = vecLst.slice();\r\n    }\r\n    if (holeIndices.length > 0) {\r\n      for (let i = 0; i < holeIndices.length; i++) {\r\n        if (i == 0) {\r\n          vectices = vecLst.slice(0, holeIndices[i]);\r\n        } else {\r\n          let arr = vecLst.slice(holeIndices[i - 1], holeIndices[i]);\r\n          holesVectices.push(arr);\r\n        }\r\n      }\r\n      holesVectices.push(vecLst.slice(holeIndices[holeIndices.length - 1], vecLst.length));\r\n    }\r\n  }\r\n\r\n  createMeshAndOutlines(true);\r\n  updateBox2();\r\n\r\n  function createMeshAndOutlines(addItemsToMesh, meshParent) {\r\n    if (vectices.length == 0) {\r\n      return;\r\n    }\r\n    // console.log(\"createMeshAndOutlines called \" );\r\n    let arr2d = [];\r\n    let allVertices = vectices.slice();\r\n    holeIndices = [];\r\n    if (holesVectices.length > 0) {\r\n      let cur = vectices.length;\r\n      holesVectices.forEach(arr => {\r\n        allVertices.push(...arr);\r\n        holeIndices.push(cur);\r\n        cur += arr.length;\r\n      });\r\n    }\r\n    originBox.setFromPoints(vectices);\r\n    let centroid;\r\n    if (addItemsToMesh) {\r\n      centroid = getPosition();\r\n      allVertices.forEach(it => it.sub(centroid));\r\n    }\r\n    allVertices.forEach(it => arr2d.push(it.x, it.y));\r\n    let triangles = Earcut.triangulate(arr2d, holeIndices);\r\n\r\n    let geometry = new BufferGeometry();\r\n    geometry.setAttribute(\"position\", new BufferAttribute(flatten(allVertices), 3));\r\n    geometry.setIndex(triangles);\r\n    let arrStyle = Layers.getDefaultFillColorArr();\r\n    let lineColorStyle = Layers.getDefaultLineColorArr();\r\n    let material = new MeshBasicMaterial({\r\n      color: arrStyle[0],\r\n      transparent: true,\r\n      opacity: arrStyle[1],\r\n      wireframe: false\r\n    });\r\n    mesh = new Mesh(geometry, material);\r\n    mesh.userData.bacOpacity = material.opacity;\r\n    // let shareGeometry = (holesVectices.length == 0 && isRectangle(vectices)) ? geometry : null;\r\n    outline = getPolygonLineMesh(vectices, null, true, lineColorStyle[0]);\r\n    outline.renderOrder = topOrder - 1;\r\n    //create holes' outlines\r\n    holes = [];\r\n    holesVectices.forEach(arr => {\r\n      let holeOutline = getPolygonLineMesh(arr, null, true, lineColorStyle[0]);\r\n      holeOutline.renderOrder = topOrder - 2;\r\n      holes.push(holeOutline);\r\n    });\r\n    if (addItemsToMesh) {\r\n      mesh.add(outline);\r\n      holes.forEach(hole => mesh.add(hole));\r\n      mesh.position.set(centroid.x, centroid.y, 0);\r\n      mesh.updateMatrixWorld();\r\n      holderGroup.add(mesh);\r\n      setTextSprite();\r\n      mesh.renderOrder = 0;\r\n      mode = 'local';\r\n    } else {\r\n      meshParent.add(mesh);\r\n      meshParent.add(outline);\r\n      holes.forEach(hole => meshParent.add(hole));\r\n      mode = 'global';\r\n    }\r\n    ctrlPoints = [];\r\n    let arr2 = [vectices].concat(holesVectices);\r\n    arr2.forEach(arr => {\r\n      let ctrl = [];\r\n      arr.forEach((it, index) => {\r\n        let ptObj = getPolygonCtrlPoint(index, it, fixedPointColor);\r\n        ptObj.renderOrder = topOrder - 3;\r\n        ptObj.position.z = ctrlPointHeight;\r\n        ctrl.push(ptObj);\r\n        if (!addItemsToMesh) meshParent.add(ptObj);\r\n      });\r\n      ctrlPoints.push(ctrl);\r\n    });\r\n    updateVertices();\r\n  }\r\n\r\n  function updateVertices() {\r\n    [outline].concat(holes).forEach((it, index) => {\r\n      let attr = it.geometry.attributes.position.clone();\r\n      attr.applyMatrix4(mesh.matrixWorld)\r\n      let arr = bufferAttributeToVertices(attr);\r\n      if (index == 0) {\r\n        vectices = arr;\r\n      } else {\r\n        holesVectices[index - 1] = arr;\r\n      }\r\n    });\r\n  }\r\n\r\n  function getArr2() {\r\n    let arr2 = [];\r\n    [outline].concat(holes).forEach(it => {\r\n      let attr = it.geometry.attributes.position.clone();\r\n      attr.applyMatrix4(mesh.matrixWorld)\r\n      let arr = bufferAttributeToVertices(attr);\r\n      arr2.push(arr);\r\n    });\r\n    return arr2;\r\n  }\r\n\r\n  function localToGlobal(scene) {\r\n    if (mode == 'global') {\r\n      return;\r\n    }\r\n    if (textSprite) textSprite.visible = false;\r\n    //update vectices and holesVectices\r\n    holesVectices = [];\r\n    [outline].concat(holes).forEach((it, index) => {\r\n      scene.add(it);\r\n      let attr = it.geometry.attributes.position;\r\n      attr.applyMatrix4(mesh.matrixWorld);\r\n      attr.needsUpdate = true;\r\n      let vLst = bufferAttributeToVertices(attr);\r\n      ctrlPoints[index].forEach((it, index) => {\r\n        scene.add(it);\r\n        it.position.set(vLst[index].x, vLst[index].y, ctrlPointHeight);\r\n      });\r\n      if (index == 0) {\r\n        vectices = vLst;\r\n      } else {\r\n        holesVectices.push(vLst);\r\n      }\r\n    });\r\n    let attrMesh = mesh.geometry.attributes.position;\r\n    attrMesh.applyMatrix4(mesh.matrixWorld);\r\n    attrMesh.needsUpdate = true;\r\n    mesh.position.set(0, 0, 0);\r\n    mesh.quaternion.set(0, 0, 0, 1);\r\n    mesh.scale.set(1, 1, 1);\r\n    mesh.updateMatrixWorld();\r\n    mesh.geometry.computeBoundingBox();\r\n    mesh.geometry.computeBoundingSphere();\r\n    mode = 'global';\r\n  }\r\n\r\n  function globalToLocal() {\r\n    if (mode == 'local') {\r\n      return;\r\n    }\r\n    if (textSprite) textSprite.visible = true;\r\n    let center = getPosition(), meshPos = mesh.position.clone();\r\n    let attr = mesh.geometry.attributes.position;\r\n    let vLst = bufferAttributeToVertices(attr);\r\n    vLst.forEach(it => it.sub(center));\r\n    attr.copyArray(flatten(vLst));\r\n    attr.needsUpdate = true;\r\n    mesh.position.copy(center).add(meshPos);\r\n    if (mesh.position.length() == 0) {\r\n      console.log(\"globalToLocal error happen\");\r\n    }\r\n    mesh.geometry.computeBoundingBox();\r\n    mesh.geometry.computeBoundingSphere();\r\n\r\n    [outline].concat(holes).forEach((it, index) => {\r\n      it.position.set(0, 0, 0);\r\n      let lineAttr = it.geometry.attributes.position;\r\n      let lst = bufferAttributeToVertices(lineAttr);\r\n      lst.forEach(it => it.sub(center));\r\n      lineAttr.copyArray(flatten(lst));\r\n      lineAttr.needsUpdate = true;\r\n      mesh.add(it);\r\n      ctrlPoints[index].forEach(pt => {\r\n        pt.position.sub(center).sub(meshPos);\r\n        mesh.add(pt);\r\n      });\r\n    });\r\n    mode = 'local';\r\n  }\r\n\r\n  function updateBox2() {\r\n    if (!mesh) {\r\n      return;\r\n    }\r\n    let lst = [];\r\n    mesh.updateMatrixWorld();\r\n    ctrlPoints[0].forEach(it => {\r\n      if (mode == 'local') {\r\n        let pt = it.position.clone().applyMatrix4(mesh.matrixWorld);\r\n        lst.push(pt);\r\n      } else {\r\n        lst.push(it.position.clone());\r\n      }\r\n    });\r\n    originBox.setFromPoints(lst);\r\n    expandedBox = originBox.expandBy(edgeAdhere);\r\n  }\r\n\r\n  function renewObjects(holder) {\r\n    that.unselect();\r\n    outline.parent.remove(outline);\r\n    mesh.parent.remove(mesh);\r\n    holes.forEach(hole => hole.parent.remove(hole));\r\n\r\n    let tmp = {meshColor: mesh.material.color, meshOpacity: mesh.material.opacity, lineColor: outline.material.color};\r\n    createMeshAndOutlines(false, holderGroup);\r\n    updateBox2();\r\n    mesh.holder = holder;\r\n    mesh.material.color.copy(tmp.meshColor);\r\n    mesh.material.opacity = tmp.meshOpacity;\r\n    outline.material.color.copy(tmp.lineColor);\r\n    holderGroup.holder = holder;\r\n  }\r\n\r\n  function getPosition() {\r\n    if (outline == null) {\r\n      let sum = new Vector3();\r\n      vectices.forEach(it => sum.add(it));\r\n      return sum.divideScalar(vectices.length);\r\n    }\r\n    if (mode === 'local') {\r\n      return mesh.position;\r\n    }\r\n    let target = new Vector3();\r\n    let vLst = bufferAttributeToVertices(outline.geometry.attributes.position);\r\n    vLst.forEach(it => target.add(it));\r\n    target.divideScalar(vLst.length);\r\n    return target.add(outline.position);\r\n  }\r\n\r\n  function getIndexOfMesh(position, meshItem) {\r\n    let vLst = bufferAttributeToVertices(meshItem.geometry.attributes.position);\r\n    vLst.forEach(it => it.z = 0);\r\n    let pos = position.clone();\r\n    pos.z = 0;\r\n    for(let i = 0; i < vLst.length; i++) {\r\n      if (vLst[i].manhattanDistanceTo(pos) < 0.0001) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  function updateCurPointIndex(pObj) {\r\n    indexOnMesh = getIndexOfMesh(pObj.position, mesh);\r\n    for (let i = 0; i < ctrlPoints.length; i++) {\r\n      let arr = ctrlPoints[i];\r\n      let index = getPointIndexInCircle(arr, pObj);\r\n      if (index >= 0) {\r\n        indexOfGroup = i, indexInGroup = index;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  function getPointIndexInCircle(arr, pObj) {\r\n    let index = arr.indexOf(pObj);\r\n    if (index >= 0) {\r\n      return index;\r\n    }\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (arr[i].position.manhattanDistanceTo(pObj.position) < 0.0001) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  function getCtrlPointObj(pos) {\r\n    for (let i = 0; i < ctrlPoints.length; i++) {\r\n      let arr = ctrlPoints[i];\r\n      for (let j = 0; j < arr.length; j++) {\r\n        if (arr[j].position.equals(pos) ) {\r\n          return arr[j];\r\n        }\r\n      }\r\n    }\r\n    console.log(\"getCtrlPointObj unexpected input!\");\r\n    return ctrlPoints[0][0];\r\n  }\r\n\r\n  function getMaterialByType(name) {\r\n    let mat = mesh.material;\r\n    if (name == \"MeshNormalMaterial\") {\r\n      return new MeshNormalMaterial({ transparent: true, side: FrontSide, opacity: mat.opacity});\r\n    } else if (name == \"MeshLambertMaterial\") {\r\n      return new MeshLambertMaterial({ transparent: true, side: FrontSide, color: mat.color, opacity: mat.opacity});\r\n    } else if (name == \"MeshPhongMaterial\") {\r\n      return new MeshPhongMaterial({ transparent: true, color: mat.color, emissive: 0x072534, side: FrontSide, flatShading: true});\r\n    }\r\n    return new MeshBasicMaterial({ transparent: true, side: FrontSide, color: mat.color, opacity: mat.opacity});\r\n  }\r\n\r\n  let indexOnMesh, indexOfGroup, indexInGroup;\r\n  let oldPos = new Vector3();\r\n  let that = {\r\n    getOldPos() {\r\n      return oldPos;\r\n    },\r\n    getHeight() {\r\n      return zHeight;\r\n    },\r\n    setHeight(value) {\r\n      zHeight = value;\r\n    },\r\n    setTextHeight(height) {\r\n      txtHeight = height.toFixed(2) * 1;\r\n    },\r\n    getTextHeight() {\r\n      return txtHeight;\r\n    },\r\n    getName() {\r\n      return name;\r\n    },\r\n    setName(nameStr) {\r\n      if (nameStr != null && nameStr != name) {\r\n        name = nameStr;\r\n        setTextSprite();\r\n      }\r\n    },\r\n    getMesh() {\r\n      return mesh;\r\n    },\r\n    getHolderGroup() {\r\n      holderGroup.holder = that;\r\n      return holderGroup;\r\n    },\r\n    getOutlines() {\r\n      return [outline].concat(holes);\r\n    },\r\n    updateScaleFactor(scalar) {\r\n      edgeAdhereDistanceSq = edgeAdhere * edgeAdhere * scalar * scalar;\r\n      adhereDistanceSq = adhereDistance * adhereDistance * scalar * scalar;\r\n      expandedBox = originBox.expandBy(edgeAdhere * scalar);\r\n    },\r\n    select() {\r\n      if (ctrlPoints.length > 0) {\r\n        ctrlPoints.forEach(arr => {\r\n          arr.forEach(it => mesh.add(it));\r\n        });\r\n      }\r\n    },\r\n    unselect() {\r\n      if (ctrlPoints.length > 0) {\r\n        ctrlPoints.forEach(arr => {\r\n          arr.forEach(it => {\r\n            if (it.parent) it.parent.remove(it);\r\n          });\r\n        });\r\n      }\r\n    },\r\n    remove() {\r\n      that.unselect();\r\n      if (holderGroup.parent) {\r\n        holderGroup.parent.remove(holderGroup);\r\n      }\r\n    },\r\n    move(vector) {\r\n      if (mode === 'local') {\r\n        let pos = oldPos.clone().add(vector);\r\n        mesh.position.set(pos.x, pos.y, mesh.position.z);\r\n        if (textSprite) textSprite.position.copy(mesh.position);\r\n        updateBox2();\r\n      }\r\n    },\r\n    getPosition: getPosition,\r\n    updatePosition() {\r\n      if (mode === 'local') {\r\n        oldPos.copy(mesh.position);\r\n      }\r\n    },\r\n    getArr4Merge() {\r\n      let indices = [], allVertices = [];\r\n      let count = 0;\r\n      [outline].concat(holes).forEach(it => {\r\n        let attr = it.geometry.attributes.position.clone();\r\n        attr.applyMatrix4(mesh.matrixWorld);\r\n        let arr = bufferAttributeToVertices(attr);\r\n        allVertices.push(...arr);\r\n        count += arr.length;\r\n        indices.push(count);\r\n      });\r\n      indices.pop();\r\n      return [vectorsToObjXY(allVertices), indices];\r\n    },\r\n    startEditCtrlPoint(scene) {\r\n      localToGlobal(scene);\r\n    },\r\n    endEditCtrlPoint() {\r\n      globalToLocal();\r\n      oldPos.copy(mesh.position);\r\n    },\r\n    updateCurPointIndex: updateCurPointIndex,\r\n    moveCtrlPoint(pObj) {\r\n      let pos = pObj.position;\r\n      let pp = [vectices].concat(holesVectices)[indexOfGroup][indexInGroup];\r\n      pp.set(pos.x, pos.y, pp.z);\r\n      //update shape of outline or hole\r\n      let line = [outline].concat(holes)[indexOfGroup];\r\n      let lineAttr = line.geometry.attributes.position;\r\n      lineAttr.setXY(indexInGroup, pos.x, pos.y);\r\n      lineAttr.needsUpdate = true;\r\n\r\n      //update shape of mesh\r\n      // let indexAttr = mesh.geometry.getIndex();\r\n      let attr = mesh.geometry.attributes.position;\r\n      if (mesh.position.lengthSq() != 0) {\r\n        let arr1 = bufferAttributeToVertices(attr);\r\n        arr1.forEach(it => it.add(mesh.position));\r\n        mesh.position.set(0, 0, 0);\r\n        attr = new BufferAttribute(flatten(arr1), 3);\r\n      }\r\n      attr.setXY(indexOnMesh, pos.x, pos.y);\r\n      if (attr !== mesh.geometry.attributes.position) {\r\n        mesh.geometry.attributes.position.copy(attr);\r\n        attr = mesh.geometry.attributes.position;\r\n      }\r\n      attr.needsUpdate = true;\r\n      let pts = bufferAttributeToVertices(attr);\r\n      let arr2d = [];\r\n      pts.forEach(it => arr2d.push(it.x, it.y));\r\n      let triangles = Earcut.triangulate(arr2d, holeIndices);\r\n      mesh.geometry.setIndex(triangles);\r\n      mesh.geometry.index.needsUpdate = true;\r\n      updateBox2();\r\n    },\r\n    removeCtrlPoint(adhereObj) {\r\n      let pObj = adhereObj.ctrlPoint;\r\n      updateCurPointIndex(pObj);\r\n      if (indexOfGroup == 0 && vectices.length < 4) {\r\n        return;\r\n      }\r\n      let arr = [vectices].concat(holesVectices)[indexOfGroup];\r\n      arr.splice(indexInGroup, 1);\r\n      if (indexOfGroup > 0 && arr.length < 3) {   //删除图形中的孔\r\n        holesVectices.splice(indexOfGroup - 1, 1);\r\n      }\r\n      renewObjects(that);\r\n      adhereObj.posOnEdge = adhereObj.ctrlPoint.position;\r\n    },\r\n    addCtrlPoint(adhereObj) {\r\n      let pos = adhereObj.posOnEdge, index = adhereObj.index, inGroup = adhereObj.inGroup;\r\n      if (pos == null) {\r\n        return;\r\n      }\r\n      let arr = [vectices].concat(holesVectices)[inGroup];\r\n      if (index == arr.length - 1) {\r\n        arr.unshift(pos);\r\n      } else {\r\n        arr.splice(index + 1, 0, pos);\r\n      }\r\n      renewObjects(that);\r\n      adhereObj.ctrlPoint = getCtrlPointObj(pos);\r\n    },\r\n    getBox2() {\r\n      return originBox;\r\n    },\r\n    getPointOnEdges(point, onlyVertices) {\r\n      let target = {ctrlPoint: null, posOnEdge: null, index: -1, inGroup: -1};\r\n      if (!expandedBox.contains(point)) {\r\n        return target;\r\n      }\r\n      let arr2 = getArr2();\r\n      let tmp = new Vector3(), lines2 = [];\r\n      for (let i = 0; i < arr2.length; i++) {\r\n        let arr = arr2[i], lines = [];\r\n        for (let j = 0; j < arr.length; j++) {\r\n          let pos = arr[j], nextPos, nextPtObj;\r\n          let distanceSq = pos.distanceToSquared(point);\r\n          if (distanceSq <= adhereDistanceSq) {\r\n            // console.log(\"getPointOnEdges, point distance less than: \" + adhereDistance);\r\n            target.ctrlPoint = ctrlPoints[i][j];  //getPolygonCtrlPoint返回的类型\r\n            target.ctrlPos = pos;   //Vector3 类型\r\n            target.index = j - 1;\r\n            target.inGroup = i;\r\n            target.distanceSq = distanceSq;\r\n            return target;\r\n          }\r\n          if (onlyVertices) {\r\n            continue;\r\n          }\r\n          if (j == arr.length - 1) {\r\n            nextPos = arr[0];\r\n            nextPtObj = ctrlPoints[i][0];\r\n          } else {\r\n            nextPos = arr[j + 1];\r\n            nextPtObj = ctrlPoints[i][j+1];\r\n          }\r\n          let line = new Line3(pos, nextPos);\r\n          line.startPt = ctrlPoints[i][j], line.endPt = nextPtObj;\r\n          lines.push(line);\r\n        }\r\n        lines2.push(lines);\r\n      }\r\n      if (onlyVertices) {\r\n        return target;\r\n      }\r\n      for (let i = 0; i < lines2.length; i++) {\r\n        for (let j = 0; j < lines2[i].length; j++) {\r\n          let line = lines2[i][j];\r\n          let t = line.closestPointToPointParameter(point, false);\r\n          if (t > 1 || t < 0) {\r\n            continue;\r\n          }\r\n          line.closestPointToPoint(point, false, tmp);\r\n          let distanceSq = tmp.distanceToSquared(point);\r\n          if (distanceSq <= edgeAdhereDistanceSq) {\r\n            target.posOnEdge = tmp;\r\n            target.index = j;\r\n            target.inGroup = i;\r\n            target.edge = [line.startPt, line.endPt];\r\n            return target;\r\n          }\r\n        }\r\n      }\r\n      return target;\r\n    },\r\n    getGuideLines4Editing(vector, excludes) {\r\n      let span = Config.code.smartGuideSpan * MainScene.currentCameraScale();\r\n      let target = [{line: null, distance: 0}, {line: null, distance: 0}];\r\n      let minH = Infinity, minV = Infinity;\r\n      let hPos, vPos;\r\n      for (let arr of ctrlPoints) {\r\n        for (let ptObj of arr) {\r\n          if (excludes.indexOf(ptObj) >= 0) {\r\n            continue;\r\n          }\r\n          let pos = ptObj.position;\r\n          if (mode === 'local') {\r\n            pos = pos.clone().applyMatrix4(mesh.matrixWorld);\r\n          }\r\n          let hVal = Math.abs(pos.x - vector.x);\r\n          let vVal = Math.abs(pos.y - vector.y);\r\n          if (hVal <= span && minH > hVal) {\r\n            minH = hVal;\r\n            hPos = pos;\r\n          }\r\n          if (vVal <= span && minV > vVal) {\r\n            minV = vVal;\r\n            vPos = pos;\r\n          }\r\n        }\r\n      }\r\n      if (vPos) {\r\n        target[1].line = {start: vPos, end: new Vector3(vector.x, vPos.y, ctrlPointHeight)};\r\n        target[1].distance = vector.y - vPos.y;\r\n      }\r\n      if (hPos) {\r\n        target[0].line = {start: hPos, end: new Vector3(hPos.x, vector.y, ctrlPointHeight)};\r\n        target[0].distance = vector.x - hPos.x;\r\n      }\r\n      return target;\r\n    },\r\n    rotateByKeyboard() {\r\n      let angleInRadian = Config.code.rotateStep / 180 * Math.PI;\r\n      mesh.rotation.z += angleInRadian;\r\n    },\r\n    displayAs3D(val) {\r\n      if (val) {\r\n        let obj = that.serialize();\r\n        let allVertices = [];\r\n        for (let arr of obj.allVertices) {\r\n          let vector = new Vector3().fromArray(arr);\r\n          allVertices.push(vector);\r\n        }\r\n        init(allVertices, obj.holeNums);\r\n        obj.vectices = vectices, obj.holesVectices = holesVectices;\r\n        mesh3d = createModel3D(obj);\r\n        lineSegments3d = createLines3d(obj);\r\n        holderGroup.remove(mesh);\r\n        holderGroup.add(mesh3d);\r\n        holderGroup.add(lineSegments3d);\r\n        lineSegments3d.visible = false;\r\n        if (textSprite)\r\n          textSprite.position.z = txtHeight;\r\n      } else {\r\n        holderGroup.remove(mesh3d);\r\n        holderGroup.remove(lineSegments3d);\r\n        holderGroup.add(mesh);\r\n        if (textSprite)\r\n          textSprite.position.z = 0;\r\n      }\r\n    },\r\n    change3dMaterial(materialType) {\r\n      if (materialType == mesh3dMat)\r\n        return;\r\n      mesh3dMat = materialType;\r\n      if (mesh3dMat == \"LineBasicMaterial\") {\r\n        lineSegments3d.visible = true;\r\n        mesh3d.visible = false;\r\n      } else {\r\n        lineSegments3d.visible = false;\r\n        mesh3d.visible = true;\r\n        mesh3d.material = getMaterialByType(materialType);\r\n      }\r\n    },\r\n    //called only in local mode\r\n    toPasteItem() {\r\n      let group = new Group();\r\n      let items = [outline].concat(holes);\r\n      let allVertices = [], holeNums = [];\r\n      items.forEach(it => {\r\n        let vLst = bufferAttributeToVertices(it.geometry.attributes.position);\r\n        let dashedOutline = getDashedOutLine(vLst);\r\n        group.add(dashedOutline);\r\n        allVertices.push(...vLst);\r\n        if (holeNums.length == 0) {\r\n          holeNums.push(vLst.length);\r\n        } else {\r\n          let cur = holeNums[holeNums.length - 1] + vLst.length;\r\n          holeNums.push(cur);\r\n        }\r\n      });\r\n      holeNums.pop();\r\n      group.scale.copy(mesh.scale);\r\n      group.quaternion.copy(mesh.quaternion);\r\n      group.lineColor = outline.material.color;\r\n      group.meshColor = mesh.material.color;\r\n      // group.meshOpacity = mesh.material.opacity;\r\n      group.meshOpacity = mesh.userData.bacOpacity;\r\n      group.allVertices = allVertices;\r\n      group.holeNums = holeNums;\r\n      group.name = name;\r\n      group.zVal = zHeight;\r\n      group.txtHeight = txtHeight;\r\n      return group;\r\n    },\r\n    initFromPasteItem(item, pos) {\r\n      if (pos != undefined && pos instanceof Vector3) {\r\n        item.allVertices.forEach(it => it.add(pos));\r\n      }\r\n      name = item.name;\r\n      zHeight = item.zVal;\r\n      txtHeight = item.txtHeight;\r\n      init(item.allVertices, item.holeNums);\r\n      createMeshAndOutlines(true);\r\n      mesh.quaternion.copy(item.quaternion);\r\n      mesh.scale.copy(item.scale);\r\n      mesh.material.color.copy(item.meshColor);\r\n      mesh.material.opacity = item.meshOpacity;\r\n      [outline].concat(holes).forEach(it => it.material.color.copy(item.lineColor));\r\n      mesh.holder = that;\r\n      return that;\r\n    },\r\n    serialize() {\r\n      if (mode == 'global') {\r\n        globalToLocal();\r\n      }\r\n      let pasteItem = that.toPasteItem();\r\n      let target = {\r\n        allVertices: [],\r\n        holeNums: pasteItem.holeNums,\r\n        opacity: pasteItem.meshOpacity,\r\n        meshColor: pasteItem.meshColor.toArray(),\r\n        lineColor: pasteItem.lineColor.toArray(),\r\n        scale: pasteItem.scale.toArray(),\r\n        quaternion: pasteItem.quaternion.toArray(),\r\n        name: name,\r\n        height: zHeight,\r\n        txtHeight: txtHeight,\r\n        position: mesh.position.toArrayFixed(4)\r\n      };\r\n      for (let vector3 of pasteItem.allVertices) {\r\n        target.allVertices.push(vector3.toArrayFixed(3));\r\n      }\r\n      return target;\r\n    },\r\n    deserialize(obj) {\r\n      let allVertices = [];\r\n      for (let arr of obj.allVertices) {\r\n        let vector = new Vector3().fromArray(arr);\r\n        allVertices.push(vector);\r\n      }\r\n      // initInstanceRectScale(allVertices, obj.holeNums);\r\n      name = obj.name;\r\n      zHeight = obj.height;\r\n      txtHeight = obj.txtHeight;\r\n      init(allVertices, obj.holeNums);\r\n      createMeshAndOutlines(true);\r\n      mesh.quaternion.fromArray(obj.quaternion);\r\n      mesh.scale.fromArray(obj.scale);\r\n      mesh.material.color.fromArray(obj.meshColor);\r\n      mesh.material.opacity = obj.opacity;\r\n      mesh.userData.bacOpacity = obj.opacity;\r\n      mesh.position.fromArray(obj.position);\r\n      if (textSprite) textSprite.position.fromArray(obj.position);\r\n      [outline].concat(holes).forEach(it => it.material.color.fromArray(obj.lineColor));\r\n      mesh.holder = that;\r\n      oldPos.copy(mesh.position);\r\n      updateBox2();\r\n      return that;\r\n    },\r\n    instanceRectScale() {\r\n      return instanceRectScale;\r\n    },\r\n    setTextVisibility(visible) {\r\n      if (!textSprite) {\r\n        return;\r\n      }\r\n      textSprite.visible = visible;\r\n    },\r\n    getTextSprite() {\r\n      return textSprite;\r\n    }\r\n  };\r\n  if (mesh) {\r\n    mesh.holder = that;\r\n  }\r\n  return that;\r\n};\r\nexport default PolygonMesh;\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightItems.vue?vue&type=style&index=0&id=57ac25c6&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SquareButtonsGroup.vue?vue&type=style&index=0&id=2d8dab4c&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/guide_show.054432d3.png\";","import {Vector3, Line3} from 'three';\r\nimport Config from \"../configurable/Config\";\r\nimport MainScene from \"../MainScene\";\r\n\r\nlet Box2 = function () {\r\n    function isBetween(m, a, b) {\r\n        if (m >= a && m <= b) {\r\n            return true;\r\n        }\r\n        if (m >= b && m <= a) {\r\n            return true;\r\n        }\r\n        let ma = Math.abs(m - a), mb = Math.abs(m-b);\r\n        if (ma < 0.001 && mb < 0.001) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // let minOld = new Vector3(), maxOld = new Vector3();\r\n    let surroundLines = [], midLines = [];\r\n    function clearLines() {\r\n        surroundLines = [], midLines = [];\r\n    }\r\n    function updateLines(zVal) {\r\n        if (surroundLines.length == 0) {\r\n            let topLeft = new Vector3(that.min.x, that.max.y, zVal);\r\n            let bottomRight = new Vector3(that.max.x, that.min.y, zVal);\r\n            let top = new Line3(topLeft, that.max), right = new Line3(that.max, bottomRight);\r\n            let bottom = new Line3(bottomRight, that.min), left = new Line3(that.min, topLeft);\r\n            surroundLines = [top, right, bottom, left];\r\n            top.represent = that.max.y, bottom.represent = that.min.y;\r\n            right.represent = that.max.x, left.represent = that.min.x;\r\n\r\n            let mLeft = new Vector3(that.min.x, (that.min.y + that.max.y)/2, zVal);\r\n            let mRight = new Vector3(that.max.x, (that.min.y + that.max.y)/2, zVal);\r\n            let mTop = new Vector3((that.min.x + that.max.x)/2, that.max.y, zVal);\r\n            let mBottom = new Vector3((that.min.x + that.max.x)/2, that.min.y, zVal);\r\n            let lineX = new Line3(mLeft, mRight), lineY = new Line3(mTop, mBottom);\r\n            midLines = [lineX, lineY];\r\n            lineX.represent = (that.min.y + that.max.y)/2;  //与x轴平行的线段\r\n            lineY.represent = (that.min.x + that.max.x)/2;  //与y轴平行的线段\r\n        } else if (surroundLines[0].start.z != zVal) {\r\n            surroundLines.concat(midLines).forEach(line3 => {\r\n                line3.start.z = zVal;\r\n                line3.end.z = zVal;\r\n            });\r\n        }\r\n    }\r\n\r\n    //return {lineY: line3, horizontal: 0.3, hVector: vector3, lineX: line3, vertical: 0.3, vVector: vector3 }\r\n    function getClosestLines(point) {\r\n        let target = {};\r\n        updateLines(point.z);\r\n        let leftLine = surroundLines[3], bottomLine = surroundLines[2];\r\n        let spanX = that.max.x - that.min.x, spanY = that.max.y - that.min.y;\r\n        let tmp = new Vector3(leftLine.start.x, point.y, point.z);\r\n        let dx = point.x - tmp.x;\r\n        if (dx <= 0) {\r\n            target.lineY = leftLine, target.horizontal = -dx;\r\n        } else {\r\n            if (dx <= spanX * 0.25) {\r\n                target.lineY = leftLine, target.horizontal = dx;\r\n            } else if (dx <= spanX * 0.75) {\r\n                target.lineY = midLines[1], target.horizontal = Math.abs(dx - spanX*0.5);\r\n            } else {\r\n                target.lineY = surroundLines[1], target.horizontal = Math.abs(dx - spanX);\r\n            }\r\n        }\r\n        target.hVector = new Vector3(target.lineY.start.x, point.y, point.z);\r\n\r\n        tmp = new Vector3(point.x, bottomLine.start.y, point.z);\r\n        let dy = point.y - tmp.y;\r\n        if (dy <= 0) {\r\n            target.lineX = bottomLine, target.vertical = -dy;\r\n        } else {\r\n            if (dy <= spanY * 0.25) {\r\n                target.lineX = bottomLine, target.vertical = dy;\r\n            } else if (dy <= spanY * 0.75) {\r\n                target.lineX = midLines[0], target.vertical = Math.abs(dy - spanY*0.5);\r\n            } else {\r\n                target.lineX = surroundLines[0], target.vertical = Math.abs(dy - spanY);\r\n            }\r\n        }\r\n        target.vVector = new Vector3(point.x, target.lineX.start.y, point.z);\r\n        return target;\r\n    }\r\n\r\n    function compareLines(hostLine, guestLine, obj, target) {\r\n        let val = hostLine.represent - guestLine.represent;\r\n        val = val >= 0 ? val : -val;\r\n        if (obj.min > val) {\r\n            obj.min = val;\r\n            target.hostLine = hostLine;\r\n            target.guestLine = guestLine;\r\n            target.distance = val;\r\n        }\r\n    }\r\n    function findMinPair(arrHost, arrGuest, lessCompare) {\r\n        let minObj = {min: Infinity};\r\n        let target = {hostLine: null, guestLine: null, distance: 0};\r\n        if (lessCompare) {\r\n            for (let i = 0; i < arrHost.length; i++) {\r\n                compareLines(arrHost[i], arrGuest[i], minObj, target);\r\n            }\r\n        } else {\r\n            for (let i = 0; i < arrHost.length - 1; i++) {\r\n                for (let j = 0; j < arrGuest.length - 1; j++) {\r\n                    compareLines(arrHost[i], arrGuest[j], minObj, target);\r\n                }\r\n            }\r\n            compareLines(arrHost[2], arrGuest[2], minObj, target);\r\n        }\r\n        return target;\r\n    }\r\n\r\n    function getClosestLinesWithBox(box2) {\r\n        let linesHostHorizontal = [surroundLines[0], surroundLines[2], midLines[0]];\r\n        let linesHostVertical = [surroundLines[1], surroundLines[3], midLines[1]];\r\n        let surroundings = box2.surroundLines(), middles = box2.midLines();\r\n        let linesGuestHorizontal = [surroundings[0], surroundings[2], middles[0]];\r\n        let linesGuestVertical = [surroundings[1], surroundings[3], middles[1]];\r\n        let hObj = findMinPair(linesHostHorizontal, linesGuestHorizontal, !that.xCrossed(box2));\r\n        let vObj = findMinPair(linesHostVertical, linesGuestVertical, !that.yCrossed(box2));\r\n\r\n        return {h: hObj, v: vObj};\r\n    }\r\n\r\n    let squarePos;\r\n    let that = {\r\n        min: new Vector3(),\r\n        max: new Vector3(),\r\n        width() {\r\n            return that.max.x - that.min.x;\r\n        },\r\n        height() {\r\n            return that.max.y - that.min.y;\r\n        },\r\n        getCenter( target ) {\r\n\r\n            if ( target === undefined ) {\r\n                target = new Vector3();\r\n            }\r\n\r\n            return that.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( that.min, that.max ).multiplyScalar( 0.5 );\r\n\r\n        },\r\n        xCrossed(box2) {\r\n            let span = Config.code.smartGuideSpan * MainScene.currentCameraScale();\r\n            let x0 = that.min.x - span, x1 = that.max.x + span;\r\n            let x2 = box2.min.x - span, x3 = box2.max.x + span;\r\n            return isBetween(x2, x0, x1) || isBetween(x3, x0, x1) ||\r\n                isBetween(x0, x2, x3) || isBetween(x1, x2, x3);\r\n        },\r\n        yCrossed(box2) {\r\n            let span = Config.code.smartGuideSpan * MainScene.currentCameraScale();\r\n            let y0 = that.min.y - span, y1 = that.max.y + span;\r\n            let y2 = box2.min.y - span, y3 = box2.max.y + span;\r\n            return isBetween(y2, y0, y1) || isBetween(y3, y0, y1) ||\r\n                isBetween(y0, y2, y3) || isBetween(y1, y2, y3);\r\n        },\r\n        getClosestLines: getClosestLines,\r\n        getClosestLinesWithBox: getClosestLinesWithBox,\r\n        surroundLines() {\r\n            return surroundLines;\r\n        },\r\n        midLines() {\r\n            return midLines;\r\n        },\r\n        isEmpty: function () {\r\n            return ( that.max.x < that.min.x ) || ( that.max.y < that.min.y ) ;\r\n        },\r\n        makeEmpty: function () {\r\n\r\n            that.min.x = that.min.y = + Infinity;\r\n            that.max.x = that.max.y = - Infinity;\r\n            clearLines();\r\n            squarePos = null;\r\n            return that;\r\n\r\n        },\r\n        expandByPoint( point ) {\r\n            that.min.min( point );\r\n            that.max.max( point );\r\n            clearLines();\r\n            squarePos = null;\r\n            return that;\r\n        },\r\n        setFromPoints ( points ) {\r\n            this.makeEmpty();\r\n\r\n            for ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n                this.expandByPoint( points[ i ] );\r\n\r\n            }\r\n            updateLines(points[0].z);\r\n            return that;\r\n\r\n        },\r\n        contains(point) {\r\n            if (isBetween(point.x, that.min.x, that.max.x) && isBetween(point.y, that.min.y, that.max.y)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        expandBy(scalar) {\r\n            let diff = new Vector3(scalar, scalar, 0);\r\n            let target = Box2();\r\n            target.min = that.min.clone().sub(diff);\r\n            target.max = that.max.clone().add(diff);\r\n            squarePos = null;\r\n            return target;\r\n        },\r\n        minSquarePos() {\r\n            if (squarePos == null) {\r\n                let w = that.width(), h = that.height();\r\n                let size = w > h ? w : h;\r\n                squarePos = {\r\n                    x: (that.max.x + that.min.x - size)/2,\r\n                    y: (that.max.y + that.min.y - size)/2,\r\n                    z: size/2\r\n                };\r\n            }\r\n            return squarePos;\r\n        },\r\n    };\r\n    return that;\r\n};\r\n\r\nexport default Box2;\r\n","/* istanbul ignore next */\r\n\r\nimport Vue from 'vue';\r\n\r\nconst isServer = Vue.prototype.$isServer;\r\nconst SPECIAL_CHARS_REGEXP = /([\\:\\-\\_]+(.))/g;\r\nconst MOZ_HACK_REGEXP = /^moz([A-Z])/;\r\nconst ieVersion = isServer ? 0 : Number(document.documentMode);\r\n\r\n/* istanbul ignore next */\r\nconst trim = function(string) {\r\n  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '');\r\n};\r\n/* istanbul ignore next */\r\nconst camelCase = function(name) {\r\n  return name.replace(SPECIAL_CHARS_REGEXP, function(_, separator, letter, offset) {\r\n    return offset ? letter.toUpperCase() : letter;\r\n  }).replace(MOZ_HACK_REGEXP, 'Moz$1');\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport const on = (function() {\r\n  if (!isServer && document.addEventListener) {\r\n    return function(element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false);\r\n      }\r\n    };\r\n  } else {\r\n    return function(element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.attachEvent('on' + event, handler);\r\n      }\r\n    };\r\n  }\r\n})();\r\n\r\n/* istanbul ignore next */\r\nexport const off = (function() {\r\n  if (!isServer && document.removeEventListener) {\r\n    return function(element, event, handler) {\r\n      if (element && event) {\r\n        element.removeEventListener(event, handler, false);\r\n      }\r\n    };\r\n  } else {\r\n    return function(element, event, handler) {\r\n      if (element && event) {\r\n        element.detachEvent('on' + event, handler);\r\n      }\r\n    };\r\n  }\r\n})();\r\n\r\n/* istanbul ignore next */\r\nexport const once = function(el, event, fn) {\r\n  var listener = function() {\r\n    if (fn) {\r\n      fn.apply(this, arguments);\r\n    }\r\n    off(el, event, listener);\r\n  };\r\n  on(el, event, listener);\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport function hasClass(el, cls) {\r\n  if (!el || !cls) return false;\r\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.');\r\n  if (el.classList) {\r\n    return el.classList.contains(cls);\r\n  } else {\r\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1;\r\n  }\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport function addClass(el, cls) {\r\n  // console.log(\"addClass \" + cls )\r\n  if (!el) return;\r\n  var curClass = el.className;\r\n  var classes = (cls || '').split(' ');\r\n\r\n  for (var i = 0, j = classes.length; i < j; i++) {\r\n    var clsName = classes[i];\r\n    if (!clsName) continue;\r\n\r\n    if (el.classList) {\r\n      el.classList.add(clsName);\r\n    } else if (!hasClass(el, clsName)) {\r\n      curClass += ' ' + clsName;\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = curClass;\r\n  }\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport function removeClass(el, cls) {\r\n  if (!el || !cls) return;\r\n  var classes = cls.split(' ');\r\n  var curClass = ' ' + el.className + ' ';\r\n\r\n  for (var i = 0, j = classes.length; i < j; i++) {\r\n    var clsName = classes[i];\r\n    if (!clsName) continue;\r\n\r\n    if (el.classList) {\r\n      el.classList.remove(clsName);\r\n    } else if (hasClass(el, clsName)) {\r\n      curClass = curClass.replace(' ' + clsName + ' ', ' ');\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = trim(curClass);\r\n  }\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport const getStyle = ieVersion < 9 ? function(element, styleName) {\r\n  if (isServer) return;\r\n  if (!element || !styleName) return null;\r\n  styleName = camelCase(styleName);\r\n  if (styleName === 'float') {\r\n    styleName = 'styleFloat';\r\n  }\r\n  try {\r\n    switch (styleName) {\r\n      case 'opacity':\r\n        try {\r\n          return element.filters.item('alpha').opacity / 100;\r\n        } catch (e) {\r\n          return 1.0;\r\n        }\r\n      default:\r\n        return (element.style[styleName] || element.currentStyle ? element.currentStyle[styleName] : null);\r\n    }\r\n  } catch (e) {\r\n    return element.style[styleName];\r\n  }\r\n} : function(element, styleName) {\r\n  if (isServer) return;\r\n  if (!element || !styleName) return null;\r\n  styleName = camelCase(styleName);\r\n  if (styleName === 'float') {\r\n    styleName = 'cssFloat';\r\n  }\r\n  try {\r\n    var computed = document.defaultView.getComputedStyle(element, '');\r\n    return element.style[styleName] || computed ? computed[styleName] : null;\r\n  } catch (e) {\r\n    return element.style[styleName];\r\n  }\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport function setStyle(element, styleName, value) {\r\n  if (!element || !styleName) return;\r\n\r\n  if (typeof styleName === 'object') {\r\n    for (var prop in styleName) {\r\n      if (styleName.hasOwnProperty(prop)) {\r\n        setStyle(element, prop, styleName[prop]);\r\n      }\r\n    }\r\n  } else {\r\n    styleName = camelCase(styleName);\r\n    if (styleName === 'opacity' && ieVersion < 9) {\r\n      element.style.filter = isNaN(value) ? '' : 'alpha(opacity=' + value * 100 + ')';\r\n    } else {\r\n      element.style[styleName] = value;\r\n    }\r\n  }\r\n};\r\n\r\nexport const isScroll = (el, vertical) => {\r\n  if (isServer) return;\r\n\r\n  const determinedDirection = vertical !== null || vertical !== undefined;\r\n  const overflow = determinedDirection\r\n    ? vertical\r\n      ? getStyle(el, 'overflow-y')\r\n      : getStyle(el, 'overflow-x')\r\n    : getStyle(el, 'overflow');\r\n\r\n  return overflow.match(/(scroll|auto)/);\r\n};\r\n\r\nexport const getScrollContainer = (el, vertical) => {\r\n  if (isServer) return;\r\n\r\n  let parent = el;\r\n  while (parent) {\r\n    if ([window, document, document.documentElement].includes(parent)) {\r\n      return window;\r\n    }\r\n    if (isScroll(parent, vertical)) {\r\n      return parent;\r\n    }\r\n    parent = parent.parentNode;\r\n  }\r\n\r\n  return parent;\r\n};\r\n\r\nexport const isInContainer = (el, container) => {\r\n  if (isServer || !el || !container) return false;\r\n\r\n  const elRect = el.getBoundingClientRect();\r\n  let containerRect;\r\n\r\n  if ([window, document, document.documentElement, null, undefined].includes(container)) {\r\n    containerRect = {\r\n      top: 0,\r\n      right: window.innerWidth,\r\n      bottom: window.innerHeight,\r\n      left: 0\r\n    };\r\n  } else {\r\n    containerRect = container.getBoundingClientRect();\r\n  }\r\n\r\n  return elRect.top < containerRect.bottom &&\r\n    elRect.bottom > containerRect.top &&\r\n    elRect.right > containerRect.left &&\r\n    elRect.left < containerRect.right;\r\n};\r\n","import {Group, Vector3} from 'three';\r\nimport PathPoint from \"./model/PathPoint\";\r\nimport PathEdge from \"./model/PathEdge\";\r\nimport Config from \"./configurable/Config\";\r\n\r\nlet Singleton = function(name) {\r\n  let eventLayersChanged = {type: \"layers changed\"};\r\n  this.name = name;\r\n\r\n  let floor = new Group();\r\n  let background = new Group();\r\n  let referLayer = new Group(), referMesh;\r\n  let buildings = new Group();\r\n  let markers = new Group();\r\n  let navPaths = new Group();\r\n  let editingLayer = new Group();\r\n  this.indicatorLayer = new Group();\r\n  // floor.name = \"floor\", background.name = \"background\", referLayer.name = \"refer\";\r\n  // buildings.name = \"buildings\", markers.name = \"marker\", navPaths.name = \"path\", editingLayer.name = \"editing\";\r\n  let customLayers = [], customLayerGroups = [];\r\n  let _scene;\r\n\r\n  let oldRefPos = new Vector3();\r\n\r\n  let layers = [referLayer, floor, background, buildings, markers, navPaths, editingLayer, this.indicatorLayer];\r\n  for (let i = 0; i < layers.length; i++) {\r\n    layers[i].renderOrder = i;\r\n    layers[i].userData.isLayer = true;\r\n  }\r\n  navPaths.visible = false;\r\n\r\n  let refLayerSaving;\r\n  this.referLayer = referLayer;\r\n  this.editingLayer = editingLayer;\r\n  this.markLayer = markers;\r\n  this.navPathLayer = navPaths;\r\n  this.buildingsLayer = buildings;\r\n  this.floorLayer = floor;\r\n  this.backgroundLayer = background;\r\n\r\n  let previewPath = {pathEdges: [], pathPoints: []};\r\n  function getMeshesInLayer(layer) {\r\n    let arr = [];\r\n    layer.children.forEach(it => {\r\n      if (it.holder && it.holder.getMesh) {\r\n        arr.push(it.holder.getMesh() );\r\n      }\r\n    });\r\n    return arr;\r\n  }\r\n  function getMarkersInLayer(layer) {\r\n    let arr = [];\r\n    layer.children.forEach(it => {\r\n      if (it.holder && it.holder.isMarker) {\r\n        arr.push(it.holder.sprite() );\r\n      }\r\n    });\r\n    return arr;\r\n  }\r\n\r\n  this.initLayers = function () {\r\n    this.layers = {\r\n      refer: {hidden: false, locked: true, id:\"refer\", name: \"参考层\",\r\n        nameEditable: false, removable: false, group: referLayer},\r\n      background: {hidden: false, locked: true, id:\"background\", name: \"背景层\",\r\n        nameEditable: false, removable: false, group: background},\r\n      floor: {hidden: false, locked: true, id:\"floor\", name: \"地面层\",\r\n        nameEditable: false, removable: false, group: floor},\r\n      buildings: {hidden: false, locked: false, id:\"buildings\", name: \"建筑层\",\r\n        nameEditable: false, removable: false, group: buildings},\r\n      markers: {hidden: false, locked: true, id:\"markers\", name: \"标注层\",\r\n        nameEditable: false, removable: false, group: markers},\r\n\r\n      nav: {group: navPaths, id:\"nav\"},\r\n      editing: {group: editingLayer, id: \"editing\"}\r\n    };\r\n    for (let key in this.layers) {\r\n      let obj = this.layers[key];\r\n      obj.group.layerId = obj.id;\r\n    }\r\n  };\r\n  this.syncVisibilities = function() {\r\n    this.getAllLayers().forEach(it => {\r\n      if (it !== this.layers.nav)\r\n        it.group.visible = !it.hidden;\r\n    })\r\n  }\r\n  this.reorderLayers = function (layerItems) {\r\n    let groups = [], layerObjs = [];\r\n    if (layerItems == undefined) {\r\n      layerObjs = this.getAllLayers();\r\n      for (let i = 0; i < layerObjs.length; i++) {\r\n        groups.push(layerObjs[i].group);\r\n      }\r\n    } else {\r\n      for (let item of layerItems) {\r\n        let obj = this.getLayerById(item.id);\r\n        if (obj)\r\n          layerObjs.push(obj);\r\n      }\r\n      let lst = layerObjs.reverse();\r\n      if (lst.indexOf(this.layers.background) < 0) {\r\n        let index = lst.indexOf(this.layers.floor);\r\n        lst.splice(index+1, 0, this.layers.background);\r\n      }\r\n      for (let i = 0; i < lst.length; i++) {\r\n        groups.push(lst[i].group);\r\n      }\r\n      if (groups.indexOf(this.layers.refer) < 0) {\r\n        groups.unshift(this.layers.refer.group);\r\n      }\r\n      groups.push(navPaths, editingLayer);\r\n    }\r\n\r\n    for (let i = 0; i < groups.length; i++) {\r\n      groups[i].renderOrder = i;\r\n    }\r\n  };\r\n  this.getLayerById = function (id) {\r\n    for (let key in this.layers) {\r\n      let obj = this.layers[key];\r\n      if (obj.id == id)\r\n        return obj;\r\n    }\r\n    for (let layerObj of customLayers) {\r\n      if (layerObj.id == id)\r\n        return layerObj;\r\n    }\r\n    return null;\r\n  };\r\n  this.renameLayer = function (id, newName) {\r\n    let layerObj = this.getLayerById(id);\r\n    if (layerObj)\r\n      layerObj.name = newName;\r\n  };\r\n  this.initLayers();\r\n  this.getDefaultFillColorArr = function () {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      return Config.ui.defaultFillColorFloor;\r\n    }\r\n    return Config.ui.defaultFillColor;\r\n  }\r\n  this.getDefaultFillColor = function () {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      return Config.ui.defaultFillColorFloorStr();\r\n    }\r\n    return Config.ui.defaultFillColorStr();\r\n  }\r\n  this.setDefaultFillColor = function (colorNum, opacity) {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      Config.ui.defaultFillColorFloor[0] = colorNum;\r\n      Config.ui.defaultFillColorFloor[1] = opacity;\r\n    } else {\r\n      Config.ui.defaultFillColor[0] = colorNum;\r\n      Config.ui.defaultFillColor[1] = opacity;\r\n    }\r\n  }\r\n  this.getDefaultLineColorArr = function () {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      return Config.ui.defaultLineColorFloor;\r\n    }\r\n    return Config.ui.defaultLineColor;\r\n  }\r\n  this.getDefaultLineColor = function () {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      return Config.ui.defaultLineColorFloor[0].toString(16).toUpperCase();\r\n    }\r\n    return Config.ui.defaultLineColor[0].toString(16).toUpperCase();\r\n  }\r\n  this.setDefaultLineColor = function (colorNum) {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      Config.ui.defaultLineColorFloor[0] = colorNum;\r\n    } else {\r\n      Config.ui.defaultLineColor[0] = colorNum;\r\n    }\r\n  }\r\n  this.getDefaultHeight = function () {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      return Config.ui.defaultHeightFloor;\r\n    }\r\n    return Config.ui.defaultHeight;\r\n  }\r\n  this.setDefaultHeight = function (val) {\r\n    if (!this.layers.floor.locked && !this.layers.floor.hidden) {\r\n      Config.ui.defaultHeightFloor = val;\r\n    }\r\n    Config.ui.defaultHeight = val;\r\n  }\r\n\r\n  this.addLayer = function (option) {\r\n    let group = new Group();\r\n    _scene.add(group);\r\n    customLayerGroups.push(group);\r\n    let num = customLayerGroups.length;\r\n\r\n    let opt = option || {hidden: false, locked: false, id: null, order: undefined, name: \"图层\"+num};\r\n    group.userData.isLayer = true;\r\n    group.layerId = opt.id || new Date().getTime() + \"\";\r\n\r\n    let layerObj = {hidden: opt.hidden, locked: opt.locked, id: group.layerId, name: opt.name,\r\n      nameEditable: true, removable: true, group: group};\r\n    group.name = layerObj.name;\r\n    customLayers.push(layerObj);\r\n    if (opt.order != undefined) {\r\n      group.renderOrder = opt.order;\r\n    }\r\n    if (option == undefined)\r\n      this.reorderLayers();\r\n    _scene.dispatchEvent(eventLayersChanged);\r\n    return layerObj;\r\n  }\r\n  this.removeLayer = function (layerItem) {\r\n    let layerObj = this.getLayerById(layerItem.id);\r\n    let index = customLayers.indexOf(layerObj);\r\n    if (index < 0)\r\n      return;\r\n    customLayers.splice(index, 1);\r\n    customLayerGroups.splice(index, 1);\r\n    _scene.remove(layerObj.group);\r\n    _scene.dispatchEvent(eventLayersChanged);\r\n  }\r\n\r\n  this.toggleHide = function(layerItem) {\r\n    layerItem.hidden = !layerItem.hidden;\r\n    let layerObj = this.getLayerById(layerItem.id);\r\n    layerObj.hidden = layerItem.hidden;\r\n    layerObj.group.visible = !layerObj.hidden;\r\n    _scene.dispatchEvent({type: 'lock change', layerObj: layerObj});\r\n  }\r\n  this.toggleLock = function(layerItem) {\r\n    layerItem.locked = !layerItem.locked;\r\n    let layerObj = this.getLayerById(layerItem.id);\r\n    layerObj.locked = layerItem.locked;\r\n    _scene.dispatchEvent({type: 'lock change', layerObj: layerObj});\r\n    // layerObj.group.dispatchEvent({type: 'lock change', locked: layerObj.locked, hidden: layerObj.hidden});\r\n  }\r\n  this.setLock = function(layerItem, locked) {\r\n    if (layerItem.locked !== locked) {\r\n      this.toggleLock(layerItem);\r\n    }\r\n  }\r\n  this.attachLayersToScene = function (scene) {\r\n    _scene = scene;\r\n    scene.add(background);\r\n    scene.add(referLayer);\r\n    scene.add(floor);\r\n    scene.add(buildings);\r\n    scene.add(markers);\r\n    scene.add(editingLayer);\r\n    scene.add(navPaths);\r\n    scene.add(this.indicatorLayer);\r\n  }\r\n  this.updateRefPos = function () {\r\n    if (referMesh == null) {\r\n      return;\r\n    }\r\n    oldRefPos.copy(referMesh.position);\r\n  }\r\n  this.oldRefPos = function () {\r\n    return oldRefPos;\r\n  }\r\n  this.referMesh = function () {\r\n    return referMesh;\r\n  }\r\n  this.moveRef = function(vector) {\r\n    let pos = oldRefPos.clone().add(vector);\r\n    referMesh.position.set(pos.x, pos.y, referMesh.position.z);\r\n  }\r\n  this.setReferLayer = function(mesh) {\r\n    referMesh = mesh;\r\n    referMesh.inRefLayer = true;\r\n    this.clearLayer(referLayer);\r\n    referLayer.add(mesh);\r\n    this.initRefItem();\r\n  }\r\n  this.initRefItem = function () {\r\n    if (refLayerSaving && referMesh ) {\r\n      referMesh.position.fromArray(refLayerSaving.pos);\r\n      referMesh.scale.fromArray(refLayerSaving.scale);\r\n      referMesh.rotation.z = refLayerSaving.rotation;\r\n      referMesh.material.opacity = refLayerSaving.opacity;\r\n      refLayerSaving = null;\r\n    }\r\n  }\r\n  this.setReferLayerSaving = function (saving) {\r\n    refLayerSaving = saving;\r\n    this.initRefItem();\r\n  }\r\n  this.availableMeshes = function (needAll, buildingOnly) {\r\n    let layerObjs = this.getSelectableLayers(buildingOnly);\r\n    let arr = [];\r\n    for (let layerObj of layerObjs) {\r\n      if (needAll || (!layerObj.locked && !layerObj.hidden) ) {\r\n        arr = arr.concat(getMeshesInLayer(layerObj.group) );\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n  this.availableMarkers = function(needAll) {\r\n    let layerObjs = this.getSelectableLayers(false);\r\n    let arr = [];\r\n    for (let layerObj of layerObjs) {\r\n      if (needAll || (!layerObj.locked && !layerObj.hidden) ) {\r\n        arr = arr.concat(getMarkersInLayer(layerObj.group) );\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n  this.getLayer = function() {\r\n    let layerObjs = this.getSelectableLayers();\r\n    for (let layerObj of layerObjs) {\r\n      if (!layerObj.locked && !layerObj.hidden) {\r\n        return layerObj.group;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  this.getSelectableLayers = function (buildingOnly) {\r\n    let target = [this.layers.floor, this.layers.buildings, this.layers.markers].concat(customLayers);\r\n    if (buildingOnly) { //建筑层（包含建筑层）之上的所有网格PolygonMesh对象才算作建筑\r\n      let minRenderOrder = this.layers.buildings.group.renderOrder;\r\n      target = target.filter(obj => obj.group.renderOrder >= minRenderOrder);\r\n    }\r\n    return target;\r\n  }\r\n  this.clearCustomLayers = function () {\r\n    customLayers.slice().forEach(it => this.removeLayer(it) );\r\n  }\r\n  this.getAllLayers = function() {\r\n    // customLayers = customLayers.sort((a, b) => a.group.renderOrder - b.group.renderOrder);\r\n    return [this.layers.refer, this.layers.floor, this.layers.background, this.layers.buildings]\r\n        .concat(customLayers)\r\n        .concat([this.layers.markers, this.layers.nav, this.layers.editing]);\r\n  }\r\n  this.getObjLayer = function (obj) {\r\n    let layer = obj.parent;\r\n    while (layer.parent) {\r\n      if (layer.userData.isLayer) {\r\n        return layer;\r\n      }\r\n      layer = layer.parent;\r\n    }\r\n    return layer;\r\n  }\r\n  this.changeItemsLayer = function (meshes, layerId) {\r\n    let layerObj = this.getLayerById(layerId);\r\n    meshes.forEach(mesh => layerObj.group.add(mesh.holder.getHolderGroup() ) );\r\n  }\r\n  this.changeMarkersLayer = function (markers, layerId) {\r\n    let layerObj = this.getLayerById(layerId);\r\n    markers.forEach(marker => marker.holder.changeParent(layerObj.group) );\r\n  }\r\n  this.clearLayer = function (layer) {\r\n    let children = layer.children.slice();\r\n    for (let child of children) {\r\n      layer.remove(child);\r\n    }\r\n  }\r\n  this.getPreviewPath = function () {\r\n    return previewPath;\r\n  }\r\n  this.initPreviewPath = function () {\r\n    let rings = this.getPathSegmentRings();\r\n    let points = [];\r\n    previewPath.pathEdges = [];\r\n    for (let ring of rings) {\r\n      points.push(new PathPoint(ring.position));\r\n    }\r\n    let holders = this.getPathSegmentHolders();\r\n    for (let holder of holders) {\r\n      holder.updateCost();\r\n      previewPath.pathEdges.push(new PathEdge().setFromPathSegment(holder, rings, points));\r\n    }\r\n    previewPath.pathPoints = points;\r\n  }\r\n  this.navPathTabSelected = function () {\r\n    return navPaths.visible;\r\n  }\r\n  this.onNavPathTabSelected = function () {\r\n    let meshLst = this.availableMeshes(true);\r\n    meshLst.forEach((it, index) => {\r\n      let mesh = it.holder.getMesh();\r\n      mesh.userData.bacOpacity = mesh.material.opacity;\r\n      mesh.material.opacity = 0.2;\r\n    });\r\n    if (referMesh) {\r\n      referMesh.userData.bacOpacity = referMesh.material.opacity;\r\n      referMesh.material.opacity = Config.ui.refOpacityPathTab;\r\n    }\r\n    navPaths.visible = true;\r\n  }\r\n  this.onNavPathTabUnselected = function () {\r\n    let meshLst = this.availableMeshes(true);\r\n    meshLst.forEach((it, index) => {\r\n      let mesh = it.holder.getMesh();\r\n      mesh.material.opacity = mesh.userData.bacOpacity;\r\n    });\r\n    if (referMesh) {\r\n      referMesh.material.opacity = referMesh.userData.bacOpacity;\r\n    }\r\n    navPaths.visible = false;\r\n  }\r\n\r\n  this.getPathSegmentHolders = function(excludeRing) {\r\n    let holders = [];\r\n    navPaths.children.forEach(it => {\r\n      if (it.holder) {\r\n        if (excludeRing==null || it.holder.toCircle() != excludeRing && it.holder.fromCircle() != excludeRing) {\r\n          holders.push(it.holder);\r\n        }\r\n      }\r\n    });\r\n    return holders;\r\n  }\r\n  this.removeUnusedSegmentRings = function () {\r\n    let rings = this.getPathSegmentRings();\r\n    let usedRings = [];\r\n    navPaths.children.forEach(it => {\r\n      if (it.holder) {\r\n        if (usedRings.indexOf(it.holder.toCircle()) < 0) {\r\n          usedRings.push(it.holder.toCircle());\r\n        }\r\n        if (usedRings.indexOf(it.holder.fromCircle()) < 0) {\r\n          usedRings.push(it.holder.fromCircle());\r\n        }\r\n      }\r\n    });\r\n    for (let ring of rings) {\r\n      if (usedRings.indexOf(ring) < 0) {\r\n        ring.parent.remove(ring);\r\n      }\r\n    }\r\n  }\r\n  this.getPathSegmentRings = function() {\r\n    let rings = [];\r\n    navPaths.children.forEach(it => {\r\n      if (it.userData.isRing) {\r\n        rings.push(it);\r\n      }\r\n    });\r\n    return rings;\r\n  }\r\n  this.getUnrelatedPathSegments = function(rings) {\r\n    let holders = this.getPathSegmentHolders();\r\n    let unrelated = [];\r\n    holders.forEach(it => {\r\n      let related = false;\r\n      for (let ring of rings) {\r\n        if (!ring) continue;\r\n        if (it.fromCircle() === ring || it.toCircle() === ring) {\r\n          related = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!related) {\r\n        unrelated.push(it);\r\n      }\r\n    });\r\n    return unrelated;\r\n  }\r\n  this.getRelatedPathSegments = function(rings) {\r\n    let holders = this.getPathSegmentHolders();\r\n    let related = [];\r\n    holders.forEach(it => {\r\n      if (rings.indexOf(it.fromCircle()) >= 0 || rings.indexOf(it.toCircle()) >= 0) {\r\n        related.push(it);\r\n      }\r\n    });\r\n    return related;\r\n  }\r\n\r\n  this.applyRotationFromCoordBinding = function (rotation) {\r\n    let arr = [floor, background, buildings, editingLayer, navPaths].concat(customLayerGroups);\r\n    arr.forEach(it => it.rotation.z = rotation);\r\n  }\r\n\r\n};\r\n// 提供了一个静态方法，用户可以直接在类上调用\r\nSingleton.getInstance = function(name) {\r\n  // 没有实例化的时候创建一个该类的实例\r\n  if(!this.instance) {\r\n    this.instance = new Singleton(name);\r\n  }\r\n  // 已经实例化了，返回第一次实例化对象的引用\r\n  return this.instance;\r\n}\r\n\r\nlet Layers = Singleton.getInstance('layerGroup');\r\nexport default Layers;\r\n","import {Vector3} from 'three'\r\nimport {LineMaterial} from 'three/examples/jsm/lines/LineMaterial'\r\nimport {LineGeometry} from 'three/examples/jsm/lines/LineGeometry'\r\nimport {Line2} from 'three/examples/jsm/lines/Line2'\r\nimport {flattenToArr, getPositionMarker, getTrackPosMarker} from \"../util/StaticMethods\";\r\nimport Config from \"../configurable/Config\";\r\n\r\nlet PathTrack = function (parentObj3d, trackPositions, trackLen, box2) {\r\n  let trackRemain = true;\r\n  let progress = 0, length = trackPositions.length;\r\n  if (box2) {\r\n    trackPositions = trackPositions.filter(it => {\r\n      return box2.contains(new Vector3(it.x, -it.z, 0))\r\n    })\r\n    length = trackPositions.length\r\n  }\r\n  let curLen = 0;\r\n  let positions;  // = trackPositions.slice(progress, trackLen);\r\n  let skipCount = -1;\r\n  let lineMaterial = new LineMaterial( {\r\n    color: \"#bb0000\",\r\n    linewidth: 3, // in pixels\r\n    transparent: true,\r\n    dashed: false,\r\n    depthWrite: false,\r\n    depthTest: false\r\n  } );\r\n  lineMaterial.resolution.set( window.innerWidth, window.innerHeight );\r\n  let lineGeo = new LineGeometry();\r\n  let arr =[];\r\n  if (trackRemain) {\r\n    for (let i = 0; i < length; i++) {\r\n      let pos = trackPositions[i];\r\n      arr.push(pos.x, pos.y, pos.z);\r\n    }\r\n  } else {\r\n    for (let i = 0; i < trackLen * 3; i++) {\r\n      arr.push(0);\r\n    }\r\n  }\r\n  lineGeo.setPositions( arr );\r\n\r\n  let lineSegments = new Line2(lineGeo, lineMaterial);\r\n  lineSegments.computeLineDistances();\r\n  lineSegments.scale.set( 1, 1, 1 );\r\n  // let marker = getStartEndIcon();\r\n  // let marker = getPositionMarker(\"小李\", null, \"#000\");\r\n  let trackOwner = \"小李\";\r\n  if (Config.remote.trackOwner) {\r\n    trackOwner = Config.remote.trackOwner;\r\n  }\r\n  let marker = getTrackPosMarker(\"\");//getTrackPosMarker(trackOwner)\r\n  let playing = false;\r\n\r\n  let that = {\r\n    playing() {\r\n      // return marker.parent != null;\r\n      return playing;\r\n    },\r\n    attached() {\r\n      return lineSegments.parent != null;\r\n    },\r\n    attach() {\r\n      parentObj3d.add(lineSegments);\r\n      parentObj3d.add(marker);\r\n      marker.visible = false;\r\n      playing = true;\r\n    },\r\n    detach() {\r\n      parentObj3d.remove(lineSegments);\r\n      parentObj3d.remove(marker);\r\n    },\r\n    lineSegments() {\r\n      return lineSegments;\r\n    },\r\n    update() {\r\n      skipCount++;\r\n      if (skipCount % 5 !== 0)\r\n        return;\r\n\r\n      if (curLen < trackLen)\r\n        curLen++;\r\n      else\r\n        progress++;\r\n      positions = trackPositions.slice(progress, curLen + progress);\r\n      while (positions.length < trackLen) {\r\n        positions.push(positions[positions.length - 1]);\r\n      }\r\n      marker.position.copy(positions[positions.length - 1]);\r\n      marker.visible = true;\r\n      if (!trackRemain) {\r\n        lineSegments.geometry.setPositions(flattenToArr(positions) );\r\n        lineSegments.computeLineDistances();\r\n      }\r\n      if (that.reachEnd()) {\r\n        // parentObj3d.remove(marker);\r\n        playing = false;\r\n      }\r\n    },\r\n    reset() {\r\n      curLen = 0, progress = 0, marker.visible = false;\r\n      that.attach();\r\n    },\r\n    reachEnd() {\r\n      if (trackLen >= length)\r\n        return true;\r\n      return progress == length - trackLen;\r\n    },\r\n    ended() {\r\n      return progress >= length - 1;\r\n    }\r\n  };\r\n  return that;\r\n};\r\n\r\nexport default PathTrack;\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxRefLayerDivide.vue?vue&type=style&index=0&id=4ede240a&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoxCoordBind.vue?vue&type=style&index=0&id=0b828cfc&scoped=true&lang=css&\"","function clamp( value, min, max ) {\r\n\r\n  return Math.max( min, Math.min( max, value ) );\r\n\r\n}\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The polar angle (phi) is measured from the positive z-axis. The positive z-axis is up.\r\n * The azimuthal angle (theta) is measured from the positive z-axis.\r\n */\r\n\r\nfunction Spherical2( radius, phi, theta ) {\r\n\r\n  this.radius = ( radius !== undefined ) ? radius : 1.0;\r\n  this.phi = ( phi !== undefined ) ? phi : 0; // polar angle\r\n  this.theta = ( theta !== undefined ) ? theta : 0; // azimuthal angle\r\n\r\n  return this;\r\n\r\n}\r\n\r\nObject.assign( Spherical2.prototype, {\r\n\r\n  set: function ( radius, phi, theta ) {\r\n\r\n    this.radius = radius;\r\n    this.phi = phi;\r\n    this.theta = theta;\r\n\r\n    return this;\r\n\r\n  },\r\n\r\n  clone: function () {\r\n\r\n    return new this.constructor().copy( this );\r\n\r\n  },\r\n\r\n  copy: function ( other ) {\r\n\r\n    this.radius = other.radius;\r\n    this.phi = other.phi;\r\n    this.theta = other.theta;\r\n\r\n    return this;\r\n\r\n  },\r\n\r\n  // restrict phi to be betwee EPS and PI-EPS\r\n  makeSafe: function () {\r\n\r\n    var EPS = 0.000001;\r\n    this.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n    return this;\r\n\r\n  },\r\n\r\n  setFromVector3: function ( v ) {\r\n\r\n    return this.setFromCartesianCoords( v.x, v.y, v.z );\r\n\r\n  },\r\n\r\n  setFromCartesianCoords: function ( x, y, z ) {\r\n\r\n    this.radius = Math.sqrt( x * x + y * y + z * z );\r\n\r\n    if ( this.radius === 0 ) {\r\n\r\n      this.theta = 0;\r\n      this.phi = 0;\r\n\r\n    } else {\r\n\r\n      this.theta = Math.atan2( x, y );\r\n      this.phi = Math.acos( clamp( z / this.radius, - 1, 1 ) );\r\n\r\n    }\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n} );\r\n\r\n\r\nexport default Spherical2;\r\n","/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\nimport {Vector2, Vector3, Quaternion, EventDispatcher, MOUSE} from 'three'\r\nimport Spherical2 from \"./Spherical2\";\r\n\r\nVector3.prototype.setFromSpherical2 = function(s) {\r\n  let {radius, phi, theta} = s;\r\n  let sinPhiRadius = Math.sin( phi ) * radius;\r\n\r\n  this.x = sinPhiRadius * Math.sin( theta );\r\n  this.z = Math.cos( phi ) * radius; //\r\n  this.y = sinPhiRadius * Math.cos( theta );\r\n\r\n  return this;\r\n};\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/metaKey, or arrow keys / touch: two-finger move\r\n\r\nlet MapControls = function ( object, domElement ) {\r\n  this.object = object;\r\n\r\n  this.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n  // Set to false to disable this control\r\n  this.enabled = true;\r\n\r\n  // \"target\" sets the location of focus, where the object orbits around\r\n  this.target = new Vector3();\r\n\r\n  // How far you can dolly in and out ( PerspectiveCamera only )\r\n  this.minDistance = 0;\r\n  this.maxDistance = Infinity;\r\n\r\n  // How far you can zoom in and out ( OrthographicCamera only )\r\n  this.minZoom = 0;\r\n  this.maxZoom = Infinity;\r\n\r\n  // How far you can orbit vertically, upper and lower limits.\r\n  // Range is 0 to Math.PI radians.\r\n  this.minPolarAngle = 0; // radians\r\n  this.maxPolarAngle = Math.PI; // radians\r\n\r\n  // How far you can orbit horizontally, upper and lower limits.\r\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n  this.minAzimuthAngle = - Infinity; // radians\r\n  this.maxAzimuthAngle = Infinity; // radians\r\n\r\n  // Set to true to enable damping (inertia)\r\n  // If damping is enabled, you must call controls.update() in your animation loop\r\n  this.enableDamping = false;\r\n  this.dampingFactor = 0.25;\r\n\r\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n  // Set to false to disable zooming\r\n  this.enableZoom = true;\r\n  this.zoomSpeed = 1.0;\r\n\r\n  // Set to false to disable rotating\r\n  this.enableRotate = true;\r\n  this.rotateSpeed = 1.0;\r\n\r\n  // Set to false to disable panning\r\n  this.enablePan = true;\r\n  this.panSpeed = 1.0;\r\n  this.screenSpacePanning = false; // if true, pan in screen-space\r\n  this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n  // Set to true to automatically rotate around the target\r\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n  this.autoRotate = false;\r\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n  // Set to false to disable use of the keys\r\n  this.enableKeys = true;\r\n\r\n  // The four arrow keys\r\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n  // Mouse buttons\r\n  this.mouseButtons = { LEFT: MOUSE.LEFT, MIDDLE: MOUSE.MIDDLE, RIGHT: MOUSE.RIGHT };\r\n\r\n  this.enablePhiChange = true;\r\n  // for reset\r\n  this.target0 = this.target.clone();\r\n  this.position0 = this.object.position.clone();\r\n  this.zoom0 = this.object.zoom;\r\n  let originSpherical = new Spherical2().setFromVector3(this.position0.clone().sub(this.target0));\r\n  let resetingSpherical, resetingPanOffset, resettingScale;\r\n  let tmpSpherical = new Spherical2();\r\n  let tmpVector = new Vector3();\r\n  //\r\n  // public methods\r\n  //\r\n\r\n  this.getPolarAngle = function () {\r\n\r\n    return spherical.phi;\r\n\r\n  };\r\n\r\n  this.getAzimuthalAngle = function () {\r\n\r\n    return spherical.theta;\r\n\r\n  };\r\n\r\n  this.saveState = function () {\r\n\r\n    scope.target0.copy( scope.target );\r\n    scope.position0.copy( scope.object.position );\r\n    scope.zoom0 = scope.object.zoom;\r\n\r\n  };\r\n\r\n  this.reset = function () {\r\n\r\n    scope.target.copy( scope.target0 );\r\n    scope.object.position.copy( scope.position0 );\r\n    scope.object.zoom = scope.zoom0;\r\n    sphericalDelta.theta = Math.PI;\r\n\r\n    scope.object.updateProjectionMatrix();\r\n    scope.dispatchEvent( changeEvent );\r\n\r\n    scope.update();\r\n\r\n    state = STATE.NONE;\r\n  };\r\n\r\n  this.startReseting = function (frames, indicatorPos) {\r\n    // this.startResetRotation(frames);\r\n    this.startMoveCamera(frames, indicatorPos);\r\n    // this.startPhiCamera(0, frames);\r\n  };\r\n\r\n  this.startResetRotation = function (totalFrames) {\r\n    let curSpherical = new Spherical2().setFromVector3(this.object.position.clone().sub(this.target) );\r\n    resetingSpherical = curSpherical.clone();\r\n    let theta = Math.PI + originSpherical.theta - curSpherical.theta;\r\n    if (theta > Math.PI)\r\n      theta -= Math.PI * 2;\r\n    else if (theta < -Math.PI)\r\n      theta += Math.PI * 2;\r\n    resetingSpherical.theta = theta / totalFrames;\r\n    resetingSpherical.phi = (originSpherical.phi - curSpherical.phi) / totalFrames;\r\n    // resetingSpherical.phi = 0;\r\n  };\r\n  this.resetingRotation = function () {\r\n    sphericalDelta.copy(resetingSpherical);\r\n    scope.update();\r\n  };\r\n\r\n  this.startResetMove = function(totalFrames) {\r\n    this.startMoveCamera(totalFrames, scope.target0);\r\n  };\r\n  this.startMoveCamera = function (totalFrames, pos) {\r\n    resetingPanOffset = pos.clone().sub(scope.target).divideScalar(totalFrames);\r\n    resettingScale = Math.pow(1/scope.currentZoom(), 1/totalFrames);\r\n  };\r\n  this.resetingMove = function(lastCall) {\r\n    panOffset.copy(resetingPanOffset);\r\n    scale = resettingScale;\r\n    scope.update();\r\n    if (lastCall) {\r\n      changeScaleEvent.scaleValue = 1;\r\n      scope.dispatchEvent( changeScaleEvent );\r\n    }\r\n  };\r\n  this.startPhiCamera = function (phiVal, frames) {\r\n    tmpSpherical.copy(originSpherical);\r\n    tmpSpherical.phi = (phiVal - this.currentPhi()) / frames;\r\n  };\r\n  this.phiingCamera = function () {\r\n    sphericalDelta.phi = tmpSpherical.phi;\r\n    scope.update();\r\n  };\r\n  this.startZoomCamera = function(zoomPercent, frames) {\r\n    // let dstRadius = originSpherical.radius * zoomPercent;\r\n    let curZoom = scope.currentZoom();\r\n    resettingScale = Math.pow(zoomPercent/curZoom, 1/frames);\r\n  };\r\n  this.zoomingCamera = function() {\r\n    scale = resettingScale;\r\n    scope.update();\r\n    changeScaleEvent.scaleValue = scope.currentZoom();\r\n    scope.dispatchEvent( changeScaleEvent );\r\n  };\r\n  this.currentZoom = function () {\r\n    let curRadius = tmpVector.copy(this.object.position).sub(this.target).length();\r\n    return curRadius / originSpherical.radius;\r\n  };\r\n  this.currentPhi = function () {\r\n    return tmpSpherical.setFromVector3(scope.object.position.clone().sub(scope.target) ).phi;\r\n  };\r\n\r\n  // this method is exposed, but perhaps it would be better if we can make it private...\r\n  this.update = function () {\r\n\r\n    var offset = new Vector3();\r\n\r\n    // so camera.up is the orbit axis\r\n    // var quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n    // var quatInverse = quat.clone().inverse();\r\n\r\n    var lastPosition = new Vector3();\r\n    var lastQuaternion = new Quaternion();\r\n\r\n    return function update() {\r\n\r\n      var position = scope.object.position;\r\n\r\n      offset.copy( position ).sub( scope.target );\r\n\r\n      // rotate offset to \"y-axis-is-up\" space\r\n      // offset.applyQuaternion( quat );\r\n\r\n      // angle from z-axis around y-axis\r\n      spherical.setFromVector3( offset );\r\n\r\n      if ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n        rotateLeft( getAutoRotationAngle() );\r\n\r\n      }\r\n\r\n      spherical.theta += sphericalDelta.theta;\r\n      spherical.phi += sphericalDelta.phi;\r\n\r\n      // restrict theta to be between desired limits\r\n      spherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n      // restrict phi to be between desired limits\r\n      spherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n      spherical.makeSafe();\r\n\r\n\r\n      spherical.radius *= scale;\r\n\r\n      // restrict radius to be between desired limits\r\n      spherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n      // move target to panned location\r\n      scope.target.add( panOffset );\r\n\r\n      offset.setFromSpherical2( spherical );\r\n\r\n      // rotate offset back to \"camera-up-vector-is-up\" space\r\n      // offset.applyQuaternion( quatInverse );\r\n\r\n      position.copy( scope.target ).add( offset );\r\n\r\n      scope.object.lookAt( scope.target );\r\n\r\n      if ( scope.enableDamping === true ) {\r\n\r\n        sphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n        sphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n        panOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n      } else {\r\n\r\n        sphericalDelta.set( 0, 0, 0 );\r\n\r\n        panOffset.set( 0, 0, 0 );\r\n\r\n      }\r\n\r\n      scale = 1;\r\n\r\n      // update condition is:\r\n      // min(camera displacement, camera rotation in radians)^2 > EPS\r\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n      if ( zoomChanged ||\r\n          lastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n          8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n        scope.dispatchEvent( changeEvent );\r\n\r\n        lastPosition.copy( scope.object.position );\r\n        lastQuaternion.copy( scope.object.quaternion );\r\n        zoomChanged = false;\r\n\r\n        return true;\r\n\r\n      }\r\n\r\n      return false;\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  this.dispose = function () {\r\n\r\n    scope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n    scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n    scope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n    scope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n    scope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n    scope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n    document.removeEventListener( 'mousemove', onMouseMove, false );\r\n    document.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n    window.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n  };\r\n\r\n  //\r\n  // internals\r\n  //\r\n\r\n  var scope = this;\r\n\r\n  var changePhiEvent = { type: 'change phi', value: 0};\r\n  var changeScaleEvent = { type: 'change scale', scaleValue: 1};\r\n  var changeEvent = { type: 'change' };\r\n  var startEvent = { type: 'start' };\r\n  var endEvent = { type: 'end' };\r\n\r\n  var STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4,\r\n    TOUCH_PAN: 5, TOUCH_DOLLY_ROTATE: 6};\r\n\r\n  var state = STATE.NONE;\r\n\r\n  var EPS = 0.000001;\r\n\r\n  // current position in spherical coordinates\r\n  var spherical = new Spherical2();\r\n  var sphericalDelta = new Spherical2();\r\n  sphericalDelta.theta = Math.PI;\r\n\r\n  var scale = 1;\r\n  var panOffset = new Vector3();\r\n  var zoomChanged = false;\r\n\r\n  var rotateStart = new Vector2();\r\n  var rotateEnd = new Vector2();\r\n  var rotateDelta = new Vector2();\r\n\r\n  var panStart = new Vector2();\r\n  var panEnd = new Vector2();\r\n  var panDelta = new Vector2();\r\n\r\n  var dollyStart = new Vector2();\r\n  var dollyEnd = new Vector2();\r\n  var dollyDelta = new Vector2();\r\n  var touchStart0 = new Vector2(), touchEnd0 = new Vector2();\r\n  var touchStart1 = new Vector2(), touchEnd1 = new Vector2();\r\n  var preChangeScaleOnly = false;\r\n  var canvasCenter = new Vector2(window.innerWidth/2, window.innerHeight/2);\r\n\r\n  function getAutoRotationAngle() {\r\n\r\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n  }\r\n\r\n  function getZoomScale() {\r\n\r\n    return Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n  }\r\n\r\n  function rotateLeft( angle ) {\r\n\r\n    sphericalDelta.theta -= angle;\r\n\r\n  }\r\n\r\n  function rotateUp( angle ) {\r\n    if (!scope.enablePhiChange) {\r\n      return;\r\n    }\r\n    sphericalDelta.phi -= angle;\r\n    let curPhi = tmpSpherical.setFromVector3(scope.object.position.clone().sub(scope.target) ).phi;\r\n    curPhi -= angle;\r\n    changePhiEvent.value = curPhi;\r\n    // console.log(tmpSpherical.theta);\r\n    // console.log(curPhi);\r\n    if (tmpSpherical.theta > Math.PI*0.5 || tmpSpherical.theta < -Math.PI*0.5) {\r\n      changePhiEvent.value = -curPhi;\r\n    }\r\n    scope.dispatchEvent( changePhiEvent );\r\n  }\r\n\r\n  var panLeft = function () {\r\n\r\n    var v = new Vector3();\r\n\r\n    return function panLeft( distance, objectMatrix ) {\r\n\r\n      v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n      v.multiplyScalar( - distance );\r\n\r\n      panOffset.add( v );\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  var panUp = function () {\r\n\r\n    var v = new Vector3();\r\n\r\n    return function panUp( distance, objectMatrix ) {\r\n\r\n      if ( scope.screenSpacePanning === true ) {\r\n\r\n        v.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n      } else {\r\n\r\n        v.setFromMatrixColumn( objectMatrix, 0 );\r\n        v.crossVectors( scope.object.up, v );\r\n\r\n      }\r\n\r\n      v.multiplyScalar( distance );\r\n\r\n      panOffset.add( v );\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  // deltaX and deltaY are in pixels; right and down are positive\r\n  var pan = function () {\r\n\r\n    var offset = new Vector3();\r\n\r\n    return function pan( deltaX, deltaY ) {\r\n\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if ( scope.object.isPerspectiveCamera ) {\r\n\r\n        // perspective\r\n        var position = scope.object.position;\r\n        offset.copy( position ).sub( scope.target );\r\n        var targetDistance = offset.length();\r\n\r\n        // half of the fov is center to top of screen\r\n        targetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n        // we use only clientHeight here so aspect ratio does not distort speed\r\n        panLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n        panUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n      } else if ( scope.object.isOrthographicCamera ) {\r\n\r\n        // orthographic\r\n        panLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n        panUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n      } else {\r\n\r\n        // camera neither orthographic nor perspective\r\n        console.warn( 'WARNING: MapControls.js encountered an unknown camera type - pan disabled.' );\r\n        scope.enablePan = false;\r\n\r\n      }\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  function dollyIn( dollyScale ) {\r\n\r\n    if ( scope.object.isPerspectiveCamera ) {\r\n\r\n      scale /= dollyScale;\r\n\r\n    } else if ( scope.object.isOrthographicCamera ) {\r\n\r\n      scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn( 'WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n    changeScaleEvent.scaleValue = scope.currentZoom();\r\n    scope.dispatchEvent( changeScaleEvent );\r\n  }\r\n\r\n  function dollyOut( dollyScale ) {\r\n\r\n    if ( scope.object.isPerspectiveCamera ) {\r\n\r\n      scale *= dollyScale;\r\n\r\n    } else if ( scope.object.isOrthographicCamera ) {\r\n\r\n      scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn( 'WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n    changeScaleEvent.scaleValue = scope.currentZoom();\r\n    scope.dispatchEvent( changeScaleEvent );\r\n  }\r\n\r\n  //\r\n  // event callbacks - update the object state\r\n  //\r\n\r\n  function handleMouseDownRotate( event ) {\r\n\r\n    //console.log( 'handleMouseDownRotate' );\r\n\r\n    rotateStart.set( event.clientX, event.clientY );\r\n\r\n  }\r\n\r\n  function handleMouseDownDolly( event ) {\r\n\r\n    //console.log( 'handleMouseDownDolly' );\r\n\r\n    dollyStart.set( event.clientX, event.clientY );\r\n\r\n  }\r\n\r\n  function handleMouseDownPan( event ) {\r\n\r\n    //console.log( 'handleMouseDownPan' );\r\n\r\n    panStart.set( event.clientX, event.clientY );\r\n\r\n  }\r\n\r\n  function handleMouseMoveRotate( event ) {\r\n\r\n    //console.log( 'handleMouseMoveRotate' );\r\n\r\n    rotateEnd.set( event.clientX, event.clientY );\r\n\r\n    rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n    let v1 = rotateStart.clone().sub(canvasCenter), v2 = rotateEnd.clone().sub(canvasCenter);\r\n    let cross = v1.clone().cross(v2);\r\n    let factor = cross > 0 ? 1 : -1;\r\n\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    rotateLeft( factor * 2 * Math.PI * Math.abs(rotateDelta.x) / element.clientHeight ); // yes, height\r\n\r\n    rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n    rotateStart.copy( rotateEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMoveDolly( event ) {\r\n\r\n    //console.log( 'handleMouseMoveDolly' );\r\n\r\n    dollyEnd.set( event.clientX, event.clientY );\r\n\r\n    dollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n    if ( dollyDelta.y > 0 ) {\r\n\r\n      dollyIn( getZoomScale() );\r\n\r\n    } else if ( dollyDelta.y < 0 ) {\r\n\r\n      dollyOut( getZoomScale() );\r\n\r\n    }\r\n\r\n    dollyStart.copy( dollyEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMovePan( event ) {\r\n\r\n    //console.log( 'handleMouseMovePan' );\r\n\r\n    panEnd.set( event.clientX, event.clientY );\r\n\r\n    panDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n    pan( panDelta.x, panDelta.y );\r\n\r\n    panStart.copy( panEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseUp( event ) {\r\n\r\n    // console.log( 'handleMouseUp' );\r\n\r\n  }\r\n\r\n  function handleMouseWheel( event ) {\r\n\r\n    // console.log( 'handleMouseWheel' );\r\n\r\n    if ( event.deltaY < 0 ) {\r\n\r\n      dollyOut( getZoomScale() );\r\n\r\n    } else if ( event.deltaY > 0 ) {\r\n\r\n      dollyIn( getZoomScale() );\r\n\r\n    }\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleKeyDown( event ) {\r\n\r\n    //console.log( 'handleKeyDown' );\r\n\r\n    switch ( event.keyCode ) {\r\n\r\n      case scope.keys.UP:\r\n        pan( 0, scope.keyPanSpeed );\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.BOTTOM:\r\n        pan( 0, - scope.keyPanSpeed );\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.LEFT:\r\n        pan( scope.keyPanSpeed, 0 );\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.RIGHT:\r\n        pan( - scope.keyPanSpeed, 0 );\r\n        scope.update();\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function handleTouchStartRotate( event ) {\r\n\r\n    //console.log( 'handleTouchStartRotate' );\r\n\r\n    rotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n  }\r\n  function handleTouchStartPan( event ) {\r\n\r\n    panStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY  );\r\n\r\n  }\r\n\r\n  function handleTouchStartDollyPan( event ) {\r\n    if ( scope.enableZoom ) {\r\n      var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n      var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n      var distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n      dollyStart.set( 0, distance );\r\n    }\r\n\r\n    if ( scope.enablePan ) {\r\n      var x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n      var y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n      panStart.set( x, y );\r\n    }\r\n  }\r\n\r\n  function handleTouchStartDollyRotate( event ) {\r\n    if ( scope.enableZoom ) {\r\n      var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n      var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n      var distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n      dollyStart.set( 0, distance );\r\n    }\r\n\r\n    if ( scope.enableRotate ) {\r\n      var dx = event.touches[ 1 ].pageX - event.touches[ 0 ].pageX;\r\n      var dy = event.touches[ 1 ].pageY - event.touches[ 0 ].pageY;\r\n      rotateStart.set( dx, dy );\r\n    }\r\n    touchStart0.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY);\r\n    touchStart1.set(event.touches[ 1 ].pageX, event.touches[ 1 ].pageY);\r\n  }\r\n\r\n  function handleTouchMoveRotate( event ) {\r\n    rotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n    rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n    rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n    rotateStart.copy( rotateEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n  function handleTouchMovePan( event ) {\r\n    if ( scope.enablePan ) {\r\n      panEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n      panDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n      pan( panDelta.x, panDelta.y );\r\n      panStart.copy( panEnd );\r\n    }\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchMoveDollyPan( event ) {\r\n\r\n    if ( scope.enableZoom ) {\r\n\r\n      var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n      var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n      var distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n      dollyEnd.set( 0, distance );\r\n\r\n      dollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n      dollyIn( dollyDelta.y );\r\n\r\n      dollyStart.copy( dollyEnd );\r\n\r\n    }\r\n\r\n    if ( scope.enablePan ) {\r\n\r\n      var x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n      var y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n      panEnd.set( x, y );\r\n\r\n      panDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n      pan( panDelta.x, panDelta.y );\r\n\r\n      panStart.copy( panEnd );\r\n\r\n    }\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleTouchMoveDollyRotate( event ) {\r\n    let changingPhi = false, changeScaleOnly = false;\r\n    touchEnd0.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY);\r\n    touchEnd1.set(event.touches[ 1 ].pageX, event.touches[ 1 ].pageY);\r\n\r\n    let v01 = touchStart1.clone().sub(touchStart0).normalize(), v10 = v01.clone().negate();\r\n    let v02 = touchEnd0.clone().sub(touchStart0).normalize(), v13 = touchEnd1.clone().sub(touchStart1).normalize();\r\n    let dot0 = v02.dot(v13), dot1 = v01.dot(v02), dot2 = v10.dot(v13);\r\n    let factor = preChangeScaleOnly ? 0.68 : 0.92;\r\n    if (dot0 < -factor && ((dot1 > factor && dot2 > factor) || (dot1 < -factor && dot2 < -factor)) ) {\r\n      changeScaleOnly = true;\r\n      preChangeScaleOnly = true;\r\n    } else {\r\n      preChangeScaleOnly = false;\r\n      let dx0 = Math.abs(touchEnd0.x - touchStart0.x), dx1 = Math.abs(touchEnd1.x - touchStart1.x);\r\n      let dy0 = Math.abs(touchEnd0.y - touchStart0.y), dy1 = Math.abs(touchEnd1.y - touchStart1.y);\r\n      if (dy0 > dx0 && dy1 > dx1) {\r\n        changingPhi = true;\r\n      }\r\n    }\r\n    // console.log(\"changeScaleOnly: \" + changeScaleOnly, dot0, dot1, dot2);\r\n\r\n    if ( scope.enableZoom) {\r\n      var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n      var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n      var distance = Math.sqrt( dx * dx + dy * dy );\r\n      dollyEnd.set( 0, distance );\r\n      if (!changingPhi) {\r\n        dollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n        dollyIn( dollyDelta.y );\r\n      }\r\n\r\n      dollyStart.copy( dollyEnd );\r\n    }\r\n\r\n    if ( scope.enableRotate ) {\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n      var dx = event.touches[ 1 ].pageX - event.touches[ 0 ].pageX;\r\n      var dy = event.touches[ 1 ].pageY - event.touches[ 0 ].pageY;\r\n      rotateEnd.set( dx, dy );\r\n      if (!changeScaleOnly) {\r\n        if (changingPhi) {\r\n          let val = (touchEnd0.y - touchStart0.y) * 0.5 + (touchEnd1.y - touchStart1.y) * 0.5;\r\n          rotateUp( 2 * Math.PI * val / element.clientHeight );\r\n        } else {\r\n          rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n          rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n        }\r\n      }\r\n      rotateStart.copy( rotateEnd );\r\n    }\r\n\r\n    scope.update();\r\n    touchStart0.copy(touchEnd0), touchStart1.copy(touchEnd1);\r\n    // console.log(\"changing phi: \" + changingPhi);\r\n  }\r\n\r\n  function handleTouchEnd( event ) {\r\n\r\n    //console.log( 'handleTouchEnd' );\r\n  }\r\n\r\n  //\r\n  // event handlers - FSM: listen for events and reset state\r\n  //\r\n\r\n  function onMouseDown( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch ( event.button ) {\r\n\r\n      case scope.mouseButtons.LEFT:\r\n\r\n        if ( event.ctrlKey || event.metaKey ) {\r\n\r\n          if ( scope.enablePan === false ) return;\r\n\r\n          handleMouseDownPan( event );\r\n\r\n          state = STATE.PAN;\r\n\r\n        } else {\r\n\r\n          if ( scope.enableRotate === false ) return;\r\n\r\n          handleMouseDownRotate( event );\r\n\r\n          state = STATE.ROTATE;\r\n\r\n        }\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.MIDDLE:\r\n\r\n        if ( scope.enableZoom === false ) return;\r\n\r\n        handleMouseDownDolly( event );\r\n\r\n        state = STATE.DOLLY;\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.RIGHT:\r\n\r\n        if ( scope.enablePan === false ) return;\r\n\r\n        handleMouseDownPan( event );\r\n\r\n        state = STATE.PAN;\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    if ( state !== STATE.NONE ) {\r\n\r\n      document.addEventListener( 'mousemove', onMouseMove, false );\r\n      document.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n      scope.dispatchEvent( startEvent );\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onMouseMove( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch ( state ) {\r\n\r\n      case STATE.ROTATE:\r\n\r\n        if ( scope.enableRotate === false ) return;\r\n\r\n        handleMouseMoveRotate( event );\r\n\r\n        break;\r\n\r\n      case STATE.DOLLY:\r\n\r\n        if ( scope.enableZoom === false ) return;\r\n\r\n        handleMouseMoveDolly( event );\r\n\r\n        break;\r\n\r\n      case STATE.PAN:\r\n\r\n        if ( scope.enablePan === false ) return;\r\n\r\n        handleMouseMovePan( event );\r\n\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onMouseUp( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    handleMouseUp( event );\r\n\r\n    document.removeEventListener( 'mousemove', onMouseMove, false );\r\n    document.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n    scope.dispatchEvent( endEvent );\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onMouseWheel( event ) {\r\n\r\n    if ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    scope.dispatchEvent( startEvent );\r\n\r\n    handleMouseWheel( event );\r\n\r\n    scope.dispatchEvent( endEvent );\r\n\r\n  }\r\n\r\n  function onKeyDown( event ) {\r\n\r\n    if ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n    handleKeyDown( event );\r\n\r\n  }\r\n\r\n  function onTouchStart( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch ( event.touches.length ) {\r\n\r\n      case 1:\t// one-fingered touch: pan\r\n\r\n        // handleTouchStartRotate( event );\r\n        handleTouchStartPan(event);\r\n\r\n        state = STATE.TOUCH_PAN;\r\n\r\n        break;\r\n\r\n      case 2:\t// two-fingered touch: dolly-rotate\r\n\r\n        if ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n        // handleTouchStartDollyPan( event );\r\n        handleTouchStartDollyRotate( event );\r\n\r\n        state = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n\r\n    if ( state !== STATE.NONE ) {\r\n\r\n      scope.dispatchEvent( startEvent );\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onTouchMove( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    switch ( event.touches.length ) {\r\n\r\n      case 1: // one-fingered touch: pan\r\n\r\n        if ( scope.enablePan === false ) return;\r\n        if ( state !== STATE.TOUCH_PAN ) return; // is this needed?\r\n\r\n        handleTouchMovePan( event );\r\n\r\n        break;\r\n\r\n      case 2: // two-fingered touch: dolly-rotate\r\n\r\n        if ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n        if ( state !== STATE.TOUCH_DOLLY_ROTATE ) return; // is this needed?\r\n\r\n        handleTouchMoveDollyRotate( event );\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onTouchEnd( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    handleTouchEnd( event );\r\n\r\n    scope.dispatchEvent( endEvent );\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onContextMenu( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  //\r\n\r\n  scope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n  scope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n  scope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n  scope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n  scope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n  scope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n  window.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n  // force an update at start\r\n\r\n  this.update();\r\n\r\n};\r\n\r\nMapControls.prototype = Object.create( EventDispatcher.prototype );\r\nMapControls.prototype.constructor = MapControls;\r\n\r\nObject.defineProperties( MapControls.prototype, {\r\n\r\n  center: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'MapControls: .center has been renamed to .target' );\r\n      return this.target;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  // backward compatibility\r\n\r\n  noZoom: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'MapControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n      return ! this.enableZoom;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'MapControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n      this.enableZoom = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noRotate: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'MapControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n      return ! this.enableRotate;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'MapControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n      this.enableRotate = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noPan: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'MapControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n      return ! this.enablePan;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'MapControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n      this.enablePan = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noKeys: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'MapControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n      return ! this.enableKeys;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'MapControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n      this.enableKeys = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  staticMoving: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'MapControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n      return ! this.enableDamping;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'MapControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n      this.enableDamping = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  dynamicDampingFactor: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n      return this.dampingFactor;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n      this.dampingFactor = value;\r\n\r\n    }\r\n\r\n  }\r\n\r\n} );\r\n\r\nexport default MapControls;\r\n","import {\r\n  Group, MeshBasicMaterial,\r\n  Mesh, MeshLambertMaterial, Vector3, Shape, Path, FrontSide\r\n} from 'three'\r\nimport {generateTextCanvas, makeCanvasTextSprite, createMesh4Heatmap, vectorsToObjXY,\r\n  getHeatmapMaterial, createModel3D} from \"../util/StaticMethods\";\r\nimport TriangleCut from \"../lib/TriangleCut\";\r\nimport Config from \"../configurable/Config\";\r\nimport Box2 from \"../lib/Box2\";\r\n\r\nlet Polygon3d = function (vectorLst, holeNums) {\r\n  //一维数组vectices 二维数组holesVectices 的元素，始终是世界坐标系的坐标\r\n  let vectices = [];\r\n  let holeIndices = [], holesVectices = [], holes =[];\r\n  let name;\r\n  let zHeight, txtHeight;\r\n  let textSprite;\r\n  let convexLst2;\r\n  let selectedMaterial = new MeshBasicMaterial({color: \"#d28e13\", transparent: true, opacity: 1});\r\n  let oldMaterial;\r\n  let inSelectionAnim = false, opacityDiff = -0.03;\r\n  let holderGroup = new Group();\r\n  let model3d;\r\n  let originBox;\r\n  let modelPos = new Vector3();\r\n  let mesh4Heatmap, data4Heatmap, range4Heatmap;\r\n\r\n  if (vectorLst != null && vectorLst.length > 2) {\r\n    init(vectorLst, holeNums);\r\n  }\r\n  function init(vecLst, holeNums) {\r\n    if (holeNums != null && holeNums.length > 0) {\r\n      holeIndices = holeNums.slice();\r\n    } else {\r\n      vectices = vecLst.slice();\r\n    }\r\n    if (holeIndices.length > 0) {\r\n      for (let i = 0; i < holeIndices.length; i++) {\r\n        if (i == 0) {\r\n          vectices = vecLst.slice(0, holeIndices[i]);\r\n        } else {\r\n          let arr = vecLst.slice(holeIndices[i-1], holeIndices[i]);\r\n          holesVectices.push(arr);\r\n        }\r\n      }\r\n      holesVectices.push(vecLst.slice(holeIndices[holeIndices.length-1], vecLst.length));\r\n    }\r\n  }\r\n\r\n  function setTextSprite() {\r\n    let canvas = generateTextCanvas(name);\r\n    textSprite = makeCanvasTextSprite(canvas);\r\n    textSprite.renderOrder = 2;\r\n    return textSprite;\r\n  }\r\n\r\n  function initConvexLst2(meshMatrix) {\r\n    convexLst2 = [];\r\n    [vectices].concat(holesVectices).forEach(arr => {\r\n      let lst = [];\r\n      arr.forEach(vector => {\r\n        let point = vector.clone().applyMatrix4(meshMatrix);\r\n        lst.push(point);\r\n      });\r\n      let objsXY = vectorsToObjXY(lst);\r\n      let convexLst = [];\r\n      TriangleCut.concavToConvex(objsXY, convexLst);\r\n      convexLst2.push(convexLst);\r\n    });\r\n  }\r\n\r\n  let that = {\r\n    getTextSprite() {\r\n      return textSprite;\r\n    },\r\n    contains(pointXY) {\r\n      return TriangleCut.isPointInPolygonWithHoles(pointXY, convexLst2);\r\n    },\r\n    bindPathPoints: [],\r\n    getModelPos() {\r\n      if (that.bindPathPoints.length > 0) {\r\n        modelPos.copy(that.bindPathPoints[0].pos);\r\n      } else {\r\n        let pos = model3d.position;\r\n        modelPos.set(pos.x, 0, -pos.y);\r\n      }\r\n      return modelPos;\r\n    },\r\n    name() {\r\n      return name;\r\n    },\r\n    getMesh() {\r\n      return model3d;\r\n    },\r\n    inSelectionAnim() {\r\n      return inSelectionAnim;\r\n    },\r\n    updateSelectionAnim() {\r\n      selectedMaterial.opacity += opacityDiff;\r\n      if (selectedMaterial.opacity < 0.2) {\r\n        opacityDiff = 0.06;\r\n      }\r\n      if (selectedMaterial.opacity > 1) {\r\n        selectedMaterial.opacity = 1;\r\n        inSelectionAnim = false;\r\n      }\r\n    },\r\n    startSelectAnimation() {\r\n      if (inSelectionAnim)\r\n        return;\r\n      model3d.material = selectedMaterial;\r\n      opacityDiff = -0.06;\r\n      inSelectionAnim = true;\r\n    },\r\n    clearSelection() {\r\n      selectedMaterial.opacity = 1;\r\n      inSelectionAnim = false;\r\n      model3d.material = oldMaterial;\r\n    },\r\n    selected() {\r\n      return model3d.material === selectedMaterial;\r\n    },\r\n\r\n    showHeatmap(dataFromRemote) {\r\n      if (!mesh4Heatmap) {\r\n        let material = null;\r\n        if (dataFromRemote) {\r\n          let maxValue = -1;\r\n          let sumVal = 0;\r\n          for (let i = 0; i < dataFromRemote.length; i++) {\r\n            let item = dataFromRemote[i];\r\n            item.x = item.x * 1;\r\n            item.y = item.y * 1;  //convert string to number\r\n            sumVal += item.value;\r\n            if (maxValue < item.value)\r\n              maxValue = item.value;\r\n          }\r\n          console.log(\"heatmap max value: \" + maxValue);\r\n          let squarePos = originBox.minSquarePos();\r\n          data4Heatmap = dataFromRemote;\r\n          range4Heatmap = {min: 1, max: sumVal, cur: ~~(sumVal/2)};\r\n          range4Heatmap.bili = (range4Heatmap.cur - range4Heatmap.min) / (range4Heatmap.max - range4Heatmap.min)\r\n          material = getHeatmapMaterial(material, dataFromRemote, squarePos, range4Heatmap.cur);\r\n        }\r\n        mesh4Heatmap = createMesh4Heatmap(vectices, holesVectices, model3d.matrix, zHeight + 0.01, material);\r\n        mesh4Heatmap.renderOrder = 9999;\r\n      }\r\n      holderGroup.add(mesh4Heatmap);\r\n    },\r\n    updateMax4Heatmap(max) {\r\n      getHeatmapMaterial(mesh4Heatmap.material, data4Heatmap, originBox.minSquarePos(), max );\r\n    },\r\n    range4Heatmap() {\r\n      return range4Heatmap;\r\n    },\r\n    hideHeatmap() {\r\n      if (mesh4Heatmap)\r\n        holderGroup.remove(mesh4Heatmap);\r\n    },\r\n    originBox() {\r\n      return originBox;\r\n    },\r\n    deserialize(obj) {\r\n      let allVertices = [];\r\n      for (let arr of obj.allVertices) {\r\n        let vector = new Vector3().fromArray(arr);\r\n        allVertices.push(vector);\r\n      }\r\n      name = obj.name;\r\n      zHeight = obj.height;\r\n      txtHeight = obj.txtHeight;\r\n      init(allVertices, obj.holeNums);\r\n\r\n      //height, vectices, holesVectices, opacity, meshColor(arr), position(arr), scale(arr), quaternion(arr), lineColor\r\n      obj.vectices = vectices, obj.holesVectices = holesVectices;\r\n\r\n      model3d = createModel3D(obj);\r\n      oldMaterial = model3d.material;\r\n\r\n      holderGroup.add(model3d);\r\n      if (name && name.trim().length > 0) {\r\n        setTextSprite();\r\n        holderGroup.add(textSprite);\r\n        textSprite.position.set(model3d.position.x, model3d.position.y, txtHeight);\r\n      }\r\n      model3d.updateMatrix();\r\n      initConvexLst2(model3d.matrix);\r\n      // let dd = convexLst2.length;\r\n      let points = [];\r\n      // console.log(model3d.position);\r\n      vectices.forEach(vector => points.push(vector.clone().applyMatrix4(model3d.matrix)));\r\n      originBox = new Box2().setFromPoints(points);\r\n\r\n      holderGroup.holder = that;\r\n      model3d.holder = that;\r\n      return holderGroup;\r\n    }\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default Polygon3d\r\n","import {Vector3} from 'three';\r\nimport Layers from \"../Layers\";\r\nimport Polygon3d from \"../instance/Polygon3d\";\r\nimport PublishedScene from \"../PublishedScene\";\r\nimport PathPoint from \"../model/PathPoint\";\r\nimport PathEdge from \"../model/PathEdge\";\r\nimport Config from \"../configurable/Config\";\r\nimport TextMark from \"../instance/TextMark\";\r\n\r\nlet Polygon3dReader = function () {\r\n  let saveName = Config.code.defaultSaveForPreview;\r\n\r\n  function getBindedPolygon3dItem(pos) {\r\n    let meshLst = Layers.availableMeshes(true, true);\r\n    for (let mesh of meshLst) {\r\n      if (mesh.holder.contains(pos)) {\r\n        return mesh.holder;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function deserializeNavPathLayer(obj) {\r\n    let previewPath = Layers.getPreviewPath();\r\n    previewPath.pathPoints = [];\r\n    previewPath.pathEdges = [];\r\n\r\n    for (let pos of obj.rings) {\r\n      let vector = new Vector3(pos.x, pos.y, 0);\r\n      let point = new PathPoint(vector);\r\n      previewPath.pathPoints.push(point);\r\n      let polygon3d = getBindedPolygon3dItem(pos);\r\n      if (polygon3d) {\r\n        polygon3d.bindPathPoints.push(point);\r\n        point.onFloor = false;\r\n        // if (polygon3d.bindPathPoints.length > 1)\r\n        //     console.log(\"items contains multi-points, \" + polygon3d.name(), polygon3d.bindPathPoints.length);\r\n      }\r\n    }\r\n    for (let segment of obj.segments) {\r\n      let pathEdge = new PathEdge().initFromSerilization(segment, previewPath.pathPoints);\r\n      previewPath.pathEdges.push(pathEdge);\r\n    }\r\n  }\r\n\r\n  let that = {\r\n    initializeScene(jsonStr) {\r\n      Layers.clearLayer(Layers.navPathLayer);\r\n      Layers.clearLayer(Layers.floorLayer);\r\n      Layers.clearLayer(Layers.buildingsLayer);\r\n      Layers.clearLayer(Layers.referLayer);\r\n      Layers.clearLayer(Layers.markLayer);\r\n      Layers.clearCustomLayers();\r\n      let obj = JSON.parse(jsonStr);\r\n      if (obj.layers == undefined) { //兼容\r\n        obj.layers = [{id: 'floor', hidden: false, locked: false, order: 1},\r\n          {id: 'buildings', hidden: false, locked: false, order: 3}];\r\n      }\r\n      for (let layer of obj.layers) {\r\n        if (!Layers.layers.hasOwnProperty(layer.id) ) {\r\n          Layers.addLayer(layer);\r\n        }\r\n\r\n        let elementArr;\r\n        if (obj.eles != undefined) {\r\n          elementArr = obj.eles[layer.id];  //新版本的地图文件\r\n        } else {\r\n          elementArr = obj[layer.id];\r\n        }\r\n        if (elementArr == undefined)\r\n          continue;\r\n        for (let itemObj of elementArr) {\r\n          let group = Layers.getLayerById(layer.id).group;\r\n          if (itemObj.isMarker) {\r\n            let marker = TextMark().deserialize(itemObj)\r\n            marker.attach(group);\r\n          } else {\r\n            group.add(Polygon3d().deserialize(itemObj));\r\n          }\r\n        }\r\n      }\r\n      Layers.getSelectableLayers().forEach(obj => {\r\n        obj.group.updateMatrix();\r\n      });\r\n\r\n      deserializeNavPathLayer(obj.navPaths);\r\n      if (obj.coordBinding) {\r\n        PublishedScene.initCoordBinding(obj.coordBinding);\r\n      }\r\n      if (obj.lightList !== undefined && obj.lightList.lights  && obj.lightList.lights.length > 0)  // && obj.lightList.lights.length > 0\r\n        PublishedScene.deserializeLights(obj.lightList);\r\n      else\r\n        PublishedScene.initLightsByDefault();\r\n    },\r\n    loadFromLocal() {\r\n      let saving = window.localStorage[saveName];\r\n      if (saving == undefined) {\r\n        console.log(\"no saving for \" + saveName + \" founded!\");\r\n        return;\r\n      }\r\n      that.initializeScene(saving);\r\n    }\r\n  };\r\n  return that;\r\n};\r\n\r\nexport default Polygon3dReader;\r\n","import {Vector3, Matrix4} from 'three';\r\nimport {getMercator, wgs2bd} from \"../lib_external/GeoCoord\";\r\nimport Config from \"../configurable/Config\";\r\n\r\nlet MapScalar = function () {\r\n  let markerPosLst, coordBindings;\r\n  let mercatorOrigin = {x: 0, y: 0}; //原点{x:0, y:0}的墨卡托坐标\r\n  let scale = 1; //\r\n  let matTransform; // 3d全局空间坐标 * matTransform = 地球墨卡托坐标\r\n  let matTransformInverse;\r\n  let rotation = 0; // 以弧度为单位\r\n  let tmp = new Vector3();\r\n\r\n  function initTransformation() {\r\n    let p1 = markerPosLst[0], p2 = markerPosLst[1];\r\n    let markerPos1 = new Vector3(p1.x, p1.y, p1.z), markerPos2 = new Vector3(p2.x, p2.y, p2.z);\r\n    let earthPos1 = new Vector3(coordBindings[0], coordBindings[1], 0);\r\n    let earthPos2 = new Vector3(coordBindings[2], coordBindings[3], 0);\r\n\r\n    let c1 = markerPos2.clone().sub(markerPos1), c2 = earthPos2.clone().sub(earthPos1);\r\n    let scalar = c2.length() / c1.length();\r\n\r\n    // let angle = c1.angleTo(c2);\r\n    let angle = c1.getVector2().angleTo(c2.getVector2());\r\n    // console.log(\"angle: \" + angle);\r\n    let matRotate = new Matrix4().makeRotationZ(angle);\r\n    let matScale = new Matrix4().makeScale(scalar, scalar, 1);\r\n    let mat = matRotate.clone().multiply(matScale);\r\n    let tranlate = earthPos1.clone().sub(markerPos1.clone().applyMatrix4(mat));\r\n    let matTranlate = new Matrix4().makeTranslation(tranlate.x, tranlate.y,0);\r\n    mat.premultiply(matTranlate);\r\n\r\n    matTransform = mat;\r\n    matTransformInverse = new Matrix4().getInverse(mat);\r\n    scale = scalar;\r\n    rotation = angle;\r\n    mercatorOrigin = new Vector3(0,0,0).applyMatrix4(mat);\r\n    let rot = rotation * Config.mathConsts.radianToDegree;\r\n    console.log(\"全局旋转：\" + rot + \"°\")\r\n  }\r\n\r\n  let that = {\r\n    getScale() {\r\n      return scale;\r\n    },\r\n    rotation() {  // 以弧度为单位\r\n      return rotation;\r\n    },\r\n    getRenderPos(lng, lat) {  //把wcs经纬度，转换为3d模型空间中的xy坐标\r\n      // let arr = wgs2bd(lat, lng); //wcs经纬度 转 百度地图经纬度\r\n      // let mercator = getMercator({x: arr[1], y: arr[0]} );\r\n      let mercator = getMercator({x: lng, y: lat} );\r\n      tmp.set(mercator.x, mercator.y, 0).applyMatrix4(matTransformInverse);\r\n      return tmp;\r\n    },\r\n    initByJsonObj(jsonObj) {\r\n      coordBindings = jsonObj.bindLst;\r\n      markerPosLst = jsonObj.posLst;\r\n      initTransformation();\r\n    }\r\n  };\r\n  return that;\r\n};\r\n\r\nexport default MapScalar;\r\n","/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\nimport {Vector2, Vector3, Quaternion, Spherical, EventDispatcher, MOUSE} from 'three'\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/metaKey, or arrow keys / touch: two-finger move\r\n\r\nlet OrbitControls = function ( object, domElement ) {\r\n  this.object = object;\r\n\r\n  this.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n  // Set to false to disable this control\r\n  this.enabled = true;\r\n\r\n  // \"target\" sets the location of focus, where the object orbits around\r\n  this.target = new Vector3();\r\n\r\n  // How far you can dolly in and out ( PerspectiveCamera only )\r\n  this.minDistance = 0;\r\n  this.maxDistance = Infinity;\r\n\r\n  // How far you can zoom in and out ( OrthographicCamera only )\r\n  this.minZoom = 0;\r\n  this.maxZoom = Infinity;\r\n\r\n  // How far you can orbit vertically, upper and lower limits.\r\n  // Range is 0 to Math.PI radians.\r\n  this.minPolarAngle = 0; // radians\r\n  this.maxPolarAngle = Math.PI; // radians\r\n\r\n  // How far you can orbit horizontally, upper and lower limits.\r\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n  this.minAzimuthAngle = - Infinity; // radians\r\n  this.maxAzimuthAngle = Infinity; // radians\r\n\r\n  // Set to true to enable damping (inertia)\r\n  // If damping is enabled, you must call controls.update() in your animation loop\r\n  this.enableDamping = false;\r\n  this.dampingFactor = 0.25;\r\n\r\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n  // Set to false to disable zooming\r\n  this.enableZoom = true;\r\n  this.zoomSpeed = 1.0;\r\n\r\n  // Set to false to disable rotating\r\n  this.enableRotate = true;\r\n  this.rotateSpeed = 1.0;\r\n\r\n  // Set to false to disable panning\r\n  this.enablePan = true;\r\n  this.panSpeed = 1.0;\r\n  this.screenSpacePanning = false; // if true, pan in screen-space\r\n  this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n  // Set to true to automatically rotate around the target\r\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n  this.autoRotate = false;\r\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n  // Set to false to disable use of the keys\r\n  this.enableKeys = true;\r\n\r\n  // The four arrow keys\r\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n  // Mouse buttons\r\n  this.mouseButtons = { LEFT: MOUSE.LEFT, MIDDLE: MOUSE.MIDDLE, RIGHT: MOUSE.RIGHT };\r\n\r\n  // for reset\r\n  this.target0 = this.target.clone();\r\n  this.position0 = this.object.position.clone();\r\n  this.zoom0 = this.object.zoom;\r\n  let originSpherical = new Spherical().setFromVector3(this.position0.clone().sub(this.target0));\r\n  let resetingSpherical, resetingPanOffset, resettingScale;\r\n  let tmpSpherical = new Spherical();\r\n  //\r\n  // public methods\r\n  //\r\n\r\n  this.getPolarAngle = function () {\r\n\r\n    return spherical.phi;\r\n\r\n  };\r\n\r\n  this.getAzimuthalAngle = function () {\r\n\r\n    return spherical.theta;\r\n\r\n  };\r\n\r\n  this.saveState = function () {\r\n\r\n    scope.target0.copy( scope.target );\r\n    scope.position0.copy( scope.object.position );\r\n    scope.zoom0 = scope.object.zoom;\r\n\r\n  };\r\n\r\n  this.reset = function () {\r\n\r\n    scope.target.copy( scope.target0 );\r\n    scope.object.position.copy( scope.position0 );\r\n    scope.object.zoom = scope.zoom0;\r\n\r\n    scope.object.updateProjectionMatrix();\r\n    scope.dispatchEvent( changeEvent );\r\n\r\n    scope.update();\r\n\r\n    state = STATE.NONE;\r\n  };\r\n\r\n  this.startResetRotation = function (totalFrames) {\r\n    let curSpherical = new Spherical().setFromVector3(this.object.position.clone().sub(this.target) );\r\n    resetingSpherical = curSpherical.clone();\r\n    resetingSpherical.theta = (originSpherical.theta - curSpherical.theta) / totalFrames;\r\n    // resetingSpherical.phi = (originSpherical.phi - curSpherical.phi) / totalFrames;\r\n    resetingSpherical.phi = 0;\r\n  };\r\n  this.resetingRotation = function () {\r\n    sphericalDelta.copy(resetingSpherical);\r\n    scope.update();\r\n  };\r\n  this.startResetMove = function(totalFrames) {\r\n    this.startMoveCamera(totalFrames, scope.target0);\r\n  };\r\n  this.startMoveCamera = function (totalFrames, pos) {\r\n    resetingPanOffset = pos.clone().sub(scope.target).divideScalar(totalFrames);\r\n    let curZoom = this.currentZoom();\r\n    resettingScale = Math.pow(1/curZoom, 1/totalFrames);\r\n  };\r\n  this.resetingMove = function(lastCall) {\r\n    panOffset.copy(resetingPanOffset);\r\n    scale = resettingScale;\r\n    scope.update();\r\n    if (lastCall) {\r\n      changeScaleEvent.scaleValue = 1;\r\n      scope.dispatchEvent( changeScaleEvent );\r\n    }\r\n  };\r\n  this.currentPhi = function () {\r\n    return tmpSpherical.setFromVector3(scope.object.position.clone().sub(scope.target) ).phi;\r\n  };\r\n\r\n  // this method is exposed, but perhaps it would be better if we can make it private...\r\n  this.update = function () {\r\n\r\n    var offset = new Vector3();\r\n\r\n    // so camera.up is the orbit axis\r\n    var quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n    var quatInverse = quat.clone().inverse();\r\n\r\n    var lastPosition = new Vector3();\r\n    var lastQuaternion = new Quaternion();\r\n\r\n    return function update() {\r\n\r\n      var position = scope.object.position;\r\n\r\n      offset.copy( position ).sub( scope.target );\r\n\r\n      // rotate offset to \"y-axis-is-up\" space\r\n      offset.applyQuaternion( quat );\r\n\r\n      // angle from z-axis around y-axis\r\n      spherical.setFromVector3( offset );\r\n\r\n      if ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n        rotateLeft( getAutoRotationAngle() );\r\n\r\n      }\r\n\r\n      spherical.theta += sphericalDelta.theta;\r\n      spherical.phi += sphericalDelta.phi;\r\n\r\n      // restrict theta to be between desired limits\r\n      spherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n      // restrict phi to be between desired limits\r\n      spherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n      spherical.makeSafe();\r\n\r\n\r\n      spherical.radius *= scale;\r\n\r\n      // restrict radius to be between desired limits\r\n      spherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n      // move target to panned location\r\n      scope.target.add( panOffset );\r\n\r\n      offset.setFromSpherical( spherical );\r\n\r\n      // rotate offset back to \"camera-up-vector-is-up\" space\r\n      offset.applyQuaternion( quatInverse );\r\n\r\n      position.copy( scope.target ).add( offset );\r\n\r\n      scope.object.lookAt( scope.target );\r\n\r\n      if ( scope.enableDamping === true ) {\r\n\r\n        sphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n        sphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n        panOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n      } else {\r\n\r\n        sphericalDelta.set( 0, 0, 0 );\r\n\r\n        panOffset.set( 0, 0, 0 );\r\n\r\n      }\r\n\r\n      scale = 1;\r\n\r\n      // update condition is:\r\n      // min(camera displacement, camera rotation in radians)^2 > EPS\r\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n      if ( zoomChanged ||\r\n          lastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n          8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n        scope.dispatchEvent( changeEvent );\r\n\r\n        lastPosition.copy( scope.object.position );\r\n        lastQuaternion.copy( scope.object.quaternion );\r\n        zoomChanged = false;\r\n\r\n        return true;\r\n\r\n      }\r\n\r\n      return false;\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  this.dispose = function () {\r\n\r\n    scope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n    scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n    scope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n    scope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n    scope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n    scope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n    document.removeEventListener( 'mousemove', onMouseMove, false );\r\n    document.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n    window.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n  };\r\n\r\n  //\r\n  // internals\r\n  //\r\n\r\n  var scope = this;\r\n\r\n  var changePhiEvent = { type: 'change phi', value: 0};\r\n  var changeScaleEvent = { type: 'change scale', scaleValue: 1};\r\n  var changeEvent = { type: 'change' };\r\n  var startEvent = { type: 'start' };\r\n  var endEvent = { type: 'end' };\r\n\r\n  var STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\r\n\r\n  var state = STATE.NONE;\r\n\r\n  var EPS = 0.000001;\r\n\r\n  // current position in spherical coordinates\r\n  var spherical = new Spherical();\r\n  var sphericalDelta = new Spherical();\r\n\r\n  var scale = 1;\r\n  var panOffset = new Vector3();\r\n  var zoomChanged = false;\r\n\r\n  var rotateStart = new Vector2();\r\n  var rotateEnd = new Vector2();\r\n  var rotateDelta = new Vector2();\r\n\r\n  var panStart = new Vector2();\r\n  var panEnd = new Vector2();\r\n  var panDelta = new Vector2();\r\n\r\n  var dollyStart = new Vector2();\r\n  var dollyEnd = new Vector2();\r\n  var dollyDelta = new Vector2();\r\n\r\n  function getAutoRotationAngle() {\r\n\r\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n  }\r\n\r\n  function getZoomScale() {\r\n\r\n    return Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n  }\r\n\r\n  function rotateLeft( angle ) {\r\n\r\n    sphericalDelta.theta -= angle;\r\n\r\n  }\r\n\r\n  function rotateUp( angle ) {\r\n    sphericalDelta.phi -= angle;\r\n    let curPhi = tmpSpherical.setFromVector3(scope.object.position.clone().sub(scope.target) ).phi;\r\n    curPhi -= angle;\r\n    changePhiEvent.value = curPhi;\r\n    // console.log(tmpSpherical.theta);\r\n    // console.log(curPhi);\r\n    if (tmpSpherical.theta > Math.PI*0.5 || tmpSpherical.theta < -Math.PI*0.5) {\r\n      changePhiEvent.value = -curPhi;\r\n    }\r\n    scope.dispatchEvent( changePhiEvent );\r\n  }\r\n\r\n  var panLeft = function () {\r\n\r\n    var v = new Vector3();\r\n\r\n    return function panLeft( distance, objectMatrix ) {\r\n\r\n      v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n      v.multiplyScalar( - distance );\r\n\r\n      panOffset.add( v );\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  var panUp = function () {\r\n\r\n    var v = new Vector3();\r\n\r\n    return function panUp( distance, objectMatrix ) {\r\n\r\n      if ( scope.screenSpacePanning === true ) {\r\n\r\n        v.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n      } else {\r\n\r\n        v.setFromMatrixColumn( objectMatrix, 0 );\r\n        v.crossVectors( scope.object.up, v );\r\n\r\n      }\r\n\r\n      v.multiplyScalar( distance );\r\n\r\n      panOffset.add( v );\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  // deltaX and deltaY are in pixels; right and down are positive\r\n  var pan = function () {\r\n\r\n    var offset = new Vector3();\r\n\r\n    return function pan( deltaX, deltaY ) {\r\n\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if ( scope.object.isPerspectiveCamera ) {\r\n\r\n        // perspective\r\n        var position = scope.object.position;\r\n        offset.copy( position ).sub( scope.target );\r\n        var targetDistance = offset.length();\r\n\r\n        // half of the fov is center to top of screen\r\n        targetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n        // we use only clientHeight here so aspect ratio does not distort speed\r\n        panLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n        panUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n      } else if ( scope.object.isOrthographicCamera ) {\r\n\r\n        // orthographic\r\n        panLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n        panUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n      } else {\r\n\r\n        // camera neither orthographic nor perspective\r\n        console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n        scope.enablePan = false;\r\n\r\n      }\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  function dollyIn( dollyScale ) {\r\n\r\n    if ( scope.object.isPerspectiveCamera ) {\r\n\r\n      scale /= dollyScale;\r\n\r\n    } else if ( scope.object.isOrthographicCamera ) {\r\n\r\n      scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n    changeScaleEvent.scaleValue = scope.currentZoom();\r\n    scope.dispatchEvent( changeScaleEvent );\r\n  }\r\n\r\n  function dollyOut( dollyScale ) {\r\n\r\n    if ( scope.object.isPerspectiveCamera ) {\r\n\r\n      scale *= dollyScale;\r\n\r\n    } else if ( scope.object.isOrthographicCamera ) {\r\n\r\n      scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n    changeScaleEvent.scaleValue = scope.currentZoom();\r\n    scope.dispatchEvent( changeScaleEvent );\r\n  }\r\n\r\n  //\r\n  // event callbacks - update the object state\r\n  //\r\n\r\n  function handleMouseDownRotate( event ) {\r\n\r\n    //console.log( 'handleMouseDownRotate' );\r\n\r\n    rotateStart.set( event.clientX, event.clientY );\r\n\r\n  }\r\n\r\n  function handleMouseDownDolly( event ) {\r\n\r\n    //console.log( 'handleMouseDownDolly' );\r\n\r\n    dollyStart.set( event.clientX, event.clientY );\r\n\r\n  }\r\n\r\n  function handleMouseDownPan( event ) {\r\n\r\n    //console.log( 'handleMouseDownPan' );\r\n\r\n    panStart.set( event.clientX, event.clientY );\r\n\r\n  }\r\n\r\n  function handleMouseMoveRotate( event ) {\r\n\r\n    //console.log( 'handleMouseMoveRotate' );\r\n\r\n    rotateEnd.set( event.clientX, event.clientY );\r\n\r\n    rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n    rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n    rotateStart.copy( rotateEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMoveDolly( event ) {\r\n\r\n    //console.log( 'handleMouseMoveDolly' );\r\n\r\n    dollyEnd.set( event.clientX, event.clientY );\r\n\r\n    dollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n    if ( dollyDelta.y > 0 ) {\r\n\r\n      dollyIn( getZoomScale() );\r\n\r\n    } else if ( dollyDelta.y < 0 ) {\r\n\r\n      dollyOut( getZoomScale() );\r\n\r\n    }\r\n\r\n    dollyStart.copy( dollyEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMovePan( event ) {\r\n\r\n    //console.log( 'handleMouseMovePan' );\r\n\r\n    panEnd.set( event.clientX, event.clientY );\r\n\r\n    panDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n    pan( panDelta.x, panDelta.y );\r\n\r\n    panStart.copy( panEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseUp( event ) {\r\n\r\n    // console.log( 'handleMouseUp' );\r\n\r\n  }\r\n\r\n  function handleMouseWheel( event ) {\r\n\r\n    // console.log( 'handleMouseWheel' );\r\n\r\n    if ( event.deltaY < 0 ) {\r\n\r\n      dollyOut( getZoomScale() );\r\n\r\n    } else if ( event.deltaY > 0 ) {\r\n\r\n      dollyIn( getZoomScale() );\r\n\r\n    }\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleKeyDown( event ) {\r\n\r\n    //console.log( 'handleKeyDown' );\r\n\r\n    switch ( event.keyCode ) {\r\n\r\n      case scope.keys.UP:\r\n        pan( 0, scope.keyPanSpeed );\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.BOTTOM:\r\n        pan( 0, - scope.keyPanSpeed );\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.LEFT:\r\n        pan( scope.keyPanSpeed, 0 );\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.RIGHT:\r\n        pan( - scope.keyPanSpeed, 0 );\r\n        scope.update();\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function handleTouchStartRotate( event ) {\r\n\r\n    //console.log( 'handleTouchStartRotate' );\r\n\r\n    rotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n  }\r\n\r\n  function handleTouchStartDollyPan( event ) {\r\n\r\n    //console.log( 'handleTouchStartDollyPan' );\r\n\r\n    if ( scope.enableZoom ) {\r\n\r\n      var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n      var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n      var distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n      dollyStart.set( 0, distance );\r\n\r\n    }\r\n\r\n    if ( scope.enablePan ) {\r\n\r\n      var x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n      var y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n      panStart.set( x, y );\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function handleTouchMoveRotate( event ) {\r\n\r\n    //console.log( 'handleTouchMoveRotate' );\r\n\r\n    rotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n    rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n    rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n    rotateStart.copy( rotateEnd );\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleTouchMoveDollyPan( event ) {\r\n\r\n    //console.log( 'handleTouchMoveDollyPan' );\r\n\r\n    if ( scope.enableZoom ) {\r\n\r\n      var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n      var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n      var distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n      dollyEnd.set( 0, distance );\r\n\r\n      dollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n      dollyIn( dollyDelta.y );\r\n\r\n      dollyStart.copy( dollyEnd );\r\n\r\n    }\r\n\r\n    if ( scope.enablePan ) {\r\n\r\n      var x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n      var y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n      panEnd.set( x, y );\r\n\r\n      panDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n      pan( panDelta.x, panDelta.y );\r\n\r\n      panStart.copy( panEnd );\r\n\r\n    }\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleTouchEnd( event ) {\r\n\r\n    //console.log( 'handleTouchEnd' );\r\n\r\n  }\r\n\r\n  //\r\n  // event handlers - FSM: listen for events and reset state\r\n  //\r\n\r\n  function onMouseDown( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch ( event.button ) {\r\n\r\n      case scope.mouseButtons.LEFT:\r\n\r\n        if ( event.ctrlKey || event.metaKey ) {\r\n\r\n          if ( scope.enablePan === false ) return;\r\n\r\n          handleMouseDownPan( event );\r\n\r\n          state = STATE.PAN;\r\n\r\n        } else {\r\n\r\n          if ( scope.enableRotate === false ) return;\r\n\r\n          handleMouseDownRotate( event );\r\n\r\n          state = STATE.ROTATE;\r\n\r\n        }\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.MIDDLE:\r\n\r\n        if ( scope.enableZoom === false ) return;\r\n\r\n        handleMouseDownDolly( event );\r\n\r\n        state = STATE.DOLLY;\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.RIGHT:\r\n\r\n        if ( scope.enablePan === false ) return;\r\n\r\n        handleMouseDownPan( event );\r\n\r\n        state = STATE.PAN;\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    if ( state !== STATE.NONE ) {\r\n\r\n      document.addEventListener( 'mousemove', onMouseMove, false );\r\n      document.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n      scope.dispatchEvent( startEvent );\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onMouseMove( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch ( state ) {\r\n\r\n      case STATE.ROTATE:\r\n\r\n        if ( scope.enableRotate === false ) return;\r\n\r\n        handleMouseMoveRotate( event );\r\n\r\n        break;\r\n\r\n      case STATE.DOLLY:\r\n\r\n        if ( scope.enableZoom === false ) return;\r\n\r\n        handleMouseMoveDolly( event );\r\n\r\n        break;\r\n\r\n      case STATE.PAN:\r\n\r\n        if ( scope.enablePan === false ) return;\r\n\r\n        handleMouseMovePan( event );\r\n\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onMouseUp( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    handleMouseUp( event );\r\n\r\n    document.removeEventListener( 'mousemove', onMouseMove, false );\r\n    document.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n    scope.dispatchEvent( endEvent );\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onMouseWheel( event ) {\r\n\r\n    if ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    scope.dispatchEvent( startEvent );\r\n\r\n    handleMouseWheel( event );\r\n\r\n    scope.dispatchEvent( endEvent );\r\n\r\n  }\r\n\r\n  function onKeyDown( event ) {\r\n\r\n    if ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n    handleKeyDown( event );\r\n\r\n  }\r\n\r\n  function onTouchStart( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch ( event.touches.length ) {\r\n\r\n      case 1:\t// one-fingered touch: rotate\r\n\r\n        if ( scope.enableRotate === false ) return;\r\n\r\n        handleTouchStartRotate( event );\r\n\r\n        state = STATE.TOUCH_ROTATE;\r\n\r\n        break;\r\n\r\n      case 2:\t// two-fingered touch: dolly-pan\r\n\r\n        if ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n        handleTouchStartDollyPan( event );\r\n\r\n        state = STATE.TOUCH_DOLLY_PAN;\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n\r\n    if ( state !== STATE.NONE ) {\r\n\r\n      scope.dispatchEvent( startEvent );\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onTouchMove( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    switch ( event.touches.length ) {\r\n\r\n      case 1: // one-fingered touch: rotate\r\n\r\n        if ( scope.enableRotate === false ) return;\r\n        if ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\r\n\r\n        handleTouchMoveRotate( event );\r\n\r\n        break;\r\n\r\n      case 2: // two-fingered touch: dolly-pan\r\n\r\n        if ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n        if ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\r\n\r\n        handleTouchMoveDollyPan( event );\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onTouchEnd( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    handleTouchEnd( event );\r\n\r\n    scope.dispatchEvent( endEvent );\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onContextMenu( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  //\r\n\r\n  scope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n  scope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n  scope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n  scope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n  scope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n  scope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n  window.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n  // force an update at start\r\n\r\n  this.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nObject.defineProperties( OrbitControls.prototype, {\r\n\r\n  center: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'OrbitControls: .center has been renamed to .target' );\r\n      return this.target;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  // backward compatibility\r\n\r\n  noZoom: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n      return ! this.enableZoom;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n      this.enableZoom = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noRotate: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n      return ! this.enableRotate;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n      this.enableRotate = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noPan: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n      return ! this.enablePan;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n      this.enablePan = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noKeys: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n      return ! this.enableKeys;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n      this.enableKeys = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  staticMoving: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n      return ! this.enableDamping;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n      this.enableDamping = ! value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  dynamicDampingFactor: {\r\n\r\n    get: function () {\r\n\r\n      console.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n      return this.dampingFactor;\r\n\r\n    },\r\n\r\n    set: function ( value ) {\r\n\r\n      console.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n      this.dampingFactor = value;\r\n\r\n    }\r\n\r\n  }\r\n\r\n} );\r\n\r\nexport default OrbitControls;\r\n","function kdbush(points, getX, getY, nodeSize, ArrayType) {\r\n    return new KDBush(points, getX, getY, nodeSize, ArrayType);\r\n}\r\n\r\nfunction KDBush(points, getX, getY, nodeSize, ArrayType) {\r\n    getX = getX || defaultGetX;\r\n    getY = getY || defaultGetY;\r\n    ArrayType = ArrayType || Array;\r\n\r\n    this.nodeSize = nodeSize || 64;\r\n    this.points = points;\r\n\r\n    this.ids = new ArrayType(points.length);\r\n    this.coords = new ArrayType(points.length * 2);\r\n\r\n    for (var i = 0; i < points.length; i++) {\r\n        this.ids[i] = i;\r\n        this.coords[2 * i] = getX(points[i]);\r\n        this.coords[2 * i + 1] = getY(points[i]);\r\n    }\r\n\r\n    sort(this.ids, this.coords, this.nodeSize, 0, this.ids.length - 1, 0);\r\n}\r\n\r\nKDBush.prototype = {\r\n    range: function (minX, minY, maxX, maxY) {\r\n        return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\r\n    },\r\n\r\n    within: function (x, y, r) {\r\n        return within(this.ids, this.coords, x, y, r, this.nodeSize);\r\n    }\r\n};\r\n\r\nfunction defaultGetX(p) { return p[0]; }\r\nfunction defaultGetY(p) { return p[1]; }\r\n\r\nfunction range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\r\n    var stack = [0, ids.length - 1, 0];\r\n    var result = [];\r\n    var x, y;\r\n\r\n    while (stack.length) {\r\n        var axis = stack.pop();\r\n        var right = stack.pop();\r\n        var left = stack.pop();\r\n\r\n        if (right - left <= nodeSize) {\r\n            for (var i = left; i <= right; i++) {\r\n                x = coords[2 * i];\r\n                y = coords[2 * i + 1];\r\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[i]);\r\n            }\r\n            continue;\r\n        }\r\n\r\n        var m = Math.floor((left + right) / 2);\r\n\r\n        x = coords[2 * m];\r\n        y = coords[2 * m + 1];\r\n\r\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\r\n\r\n        var nextAxis = (axis + 1) % 2;\r\n\r\n        if (axis === 0 ? minX <= x : minY <= y) {\r\n            stack.push(left);\r\n            stack.push(m - 1);\r\n            stack.push(nextAxis);\r\n        }\r\n        if (axis === 0 ? maxX >= x : maxY >= y) {\r\n            stack.push(m + 1);\r\n            stack.push(right);\r\n            stack.push(nextAxis);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction sort(ids, coords, nodeSize, left, right, depth) {\r\n    if (right - left <= nodeSize) return;\r\n\r\n    var m = Math.floor((left + right) / 2);\r\n\r\n    select(ids, coords, m, left, right, depth % 2);\r\n\r\n    sort(ids, coords, nodeSize, left, m - 1, depth + 1);\r\n    sort(ids, coords, nodeSize, m + 1, right, depth + 1);\r\n}\r\n\r\nfunction select(ids, coords, k, left, right, inc) {\r\n\r\n    while (right > left) {\r\n        if (right - left > 600) { //对邻近 k 索引的部分先进行select, 可能是为了提升性能\r\n            var n = right - left + 1;\r\n            var m = k - left + 1;\r\n            var z = Math.log(n);\r\n            var s = 0.5 * Math.exp(2 * z / 3);\r\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\r\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\r\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\r\n            select(ids, coords, k, newLeft, newRight, inc);\r\n        }\r\n\r\n        var t = coords[2 * k + inc];\r\n        var i = left;\r\n        var j = right;\r\n\r\n        swapItem(ids, coords, left, k);\r\n        if (coords[2 * right + inc] > t) swapItem(ids, coords, left, right);//big ... small\r\n\r\n        while (i < j) {\r\n            swapItem(ids, coords, i, j);  //small ... big\r\n            i++;\r\n            j--;\r\n            while (coords[2 * i + inc] < t) i++;  //从左往右，找大于等于 t 的索引\r\n            while (coords[2 * j + inc] > t) j--;  //从右往左，找小于等于 t 的索引\r\n        }\r\n\r\n        if (coords[2 * left + inc] === t)\r\n          swapItem(ids, coords, left, j); //若首项等于 t ,互换游标j 与游标left 指向的两个值\r\n        else {\r\n            j++;\r\n            swapItem(ids, coords, j, right);\r\n        }\r\n\r\n        //此时，[left ... j] 索引处的值都小于或等于 t，[j ... right] 索引处的值都大于或等于t\r\n        // 接下来更新 left 和 right, 使得常量 k 满足 k >= left && k <= right，否则下一轮while 就毫无意义了\r\n        if (j <= k) left = j + 1;\r\n        if (k <= j) right = j - 1;\r\n    }\r\n}\r\n\r\nfunction swapItem(ids, coords, i, j) {\r\n    swap(ids, i, j);\r\n    swap(coords, 2 * i, 2 * j);\r\n    swap(coords, 2 * i + 1, 2 * j + 1);\r\n}\r\n\r\nfunction swap(arr, i, j) {\r\n    var tmp = arr[i];\r\n    arr[i] = arr[j];\r\n    arr[j] = tmp;\r\n}\r\n\r\nfunction within(ids, coords, qx, qy, r, nodeSize) {\r\n    var stack = [0, ids.length - 1, 0];\r\n    var result = [];\r\n    var r2 = r * r;\r\n\r\n    while (stack.length) {\r\n        var axis = stack.pop();\r\n        var right = stack.pop();\r\n        var left = stack.pop();\r\n\r\n        if (right - left <= nodeSize) {\r\n            for (var i = left; i <= right; i++) {\r\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\r\n            }\r\n            continue;\r\n        }\r\n\r\n        var m = Math.floor((left + right) / 2);\r\n\r\n        var x = coords[2 * m];\r\n        var y = coords[2 * m + 1];\r\n\r\n        if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\r\n\r\n        var nextAxis = (axis + 1) % 2;\r\n\r\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\r\n            stack.push(left);\r\n            stack.push(m - 1);\r\n            stack.push(nextAxis);\r\n        }\r\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\r\n            stack.push(m + 1);\r\n            stack.push(right);\r\n            stack.push(nextAxis);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction sqDist(ax, ay, bx, by) {\r\n    var dx = ax - bx;\r\n    var dy = ay - by;\r\n    return dx * dx + dy * dy;\r\n}\r\n\r\nexport default kdbush;\r\n","import {WebGLRenderer, Scene, PerspectiveCamera, PointLight, PlaneBufferGeometry, MeshBasicMaterial, AxesHelper,\r\n  LinearToneMapping, RGBAFormat, RGBFormat, FrontSide, Raycaster, DirectionalLight, SpotLight, HemisphereLight,\r\n  BoxHelper, Vector3, Group, Mesh} from 'three';\r\n// import {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\r\nimport MapControls from \"./lib/MapControls\";\r\nimport Stats from 'three/examples/jsm/libs/stats.module'\r\n\r\nimport Layers from './Layers';\r\nimport Polygon3dReader from \"./util/Polygon3dReader\";\r\nimport {makeGpsIndicatorBase, makeGpsIndicatorPlane} from './util/StaticMethods'\r\nimport MapScalar from \"./model/MapScalar\";\r\nimport NavigatorTool from \"./tool/NavigatorTool\";\r\nimport OrbitControls from \"./lib/OrbitControls\";\r\nimport Config from \"./configurable/Config\";\r\nimport * as Const from \"./consts/Constants\";\r\nimport PathTrack from \"./instance/PathTrack\";\r\nimport kdbush from \"./lib_external/kdbush\";\r\n\r\nlet PublishedScene = function () {\r\n  let eventCameraChange = {type: 'camera change', rotate: 0};\r\n  let eventRangeHeatmap = {type: 'range heatmap', obj: {} };\r\n  let orbitControls;\r\n  let renderer;\r\n  let scene, camera, stats;\r\n  let planeHelper;\r\n  let gpsLocIndicatorBase = makeGpsIndicatorBase();\r\n  let gpsLocIndicator = makeGpsIndicatorPlane();\r\n  let coordTool, navigatorTool;\r\n  let watcher_id = null;\r\n\r\n  let camDistanceSquared;\r\n  let resetingCamera = false;\r\n  let resetingFrames = 14;\r\n  let curFrame = 1;\r\n  let resetRotating = false, resetMoving = false, zooming = false, phiing = false;\r\n  let tmpVector = new Vector3();\r\n  let originPhi = 0;\r\n  let reader = Polygon3dReader();\r\n  let lights = [];\r\n  let pathTrack;\r\n  let heatmapShowing = false;\r\n  let meshesAll = [];\r\n\r\n  function start_watchPosition() {\r\n    // watchPosition只要设备位置发生变化，就会执行\r\n    watcher_id = navigator.geolocation.watchPosition(getSuccess, getError, getOptions);\r\n  }\r\n\r\n  function endResetCamera() {\r\n    resetingCamera = false;\r\n    orbitControls.enabled = true;\r\n    resetRotating = false, resetMoving = false, zooming = false, phiing = false;\r\n  }\r\n\r\n  function initLights(scene) {\r\n    let ambiColor = \"#ffffff\";\r\n    let light0 = new PointLight(ambiColor);\r\n    light0.position.set( -30, 30, 10);\r\n    scene.add(light0);\r\n    let light1 = new PointLight(ambiColor);\r\n    light1.position.set( 30, -30, 20);\r\n    scene.add(light1);\r\n    let light2 = new PointLight(ambiColor);\r\n    light2.position.set( 50, 40, 20);\r\n    scene.add(light2);\r\n    lights.push(light0, light1, light2);\r\n  }\r\n\r\n  function initControl() {\r\n    orbitControls = new MapControls(camera, renderer.domElement);\r\n    // orbitControls = new OrbitControls(camera, renderer.domElement);\r\n    orbitControls.enableRotate = false;\r\n    orbitControls.screenSpacePanning = false;\r\n    orbitControls.maxPolarAngle = Math.PI * 75 / 180;\r\n    orbitControls.minDistance = 2.5;\r\n    orbitControls.maxDistance = 118;\r\n    orbitControls.addEventListener( \"change\", onCameraChange);\r\n    orbitControls.addEventListener( \"change scale\", onCameraScaling);\r\n    orbitControls.addEventListener( \"change phi\", onCameraPhiChange);\r\n    // originPhi = orbitControls.currentPhi();\r\n    originPhi = Math.PI/4;\r\n    // console.log(\"originPhi: \" + originPhi);\r\n  }\r\n\r\n  //three世界坐标转为屏幕坐标\r\n  function toScreenPos(position) {\r\n    let standardVector = tmpVector.copy(position).project(camera);//世界坐标转标准设备坐标\r\n    let a =  window.innerWidth / 2;\r\n    let b =  window.innerHeight / 2;\r\n    let x = Math.round(standardVector.x * a + a);//标准设备坐标转屏幕坐标\r\n    let y = Math.round(-standardVector.y * b + b);//标准设备坐标转屏幕坐标\r\n    return { x: x, y: y};\r\n  }\r\n\r\n  function onCameraChange() {\r\n    eventCameraChange.rotate = camera.rotation.z;\r\n    scene.dispatchEvent(eventCameraChange);\r\n    updateTextSprites();\r\n    // updateTextSpritesDebounce();\r\n  }\r\n  function onCameraScaling(event) {\r\n    let scale = event.scaleValue;\r\n    // console.log(\"scale from camera: \" + scale + \", y: \" + camera.position.y);\r\n    gpsLocIndicator.scale.set(scale, scale, 1);\r\n    navigatorTool.updatePathIndicatorScale(scale);\r\n  }\r\n  function onCameraPhiChange(event) {\r\n    navigatorTool.rotatePathIndicator(event.value);\r\n  }\r\n\r\n  function getX(point) {\r\n    return point.x;\r\n  }\r\n  function getY(point) {\r\n    return point.y;\r\n  }\r\n\r\n  let updateTextSpritesDebounce = debounce(updateTextSprites, 50);\r\n  function debounce(method, delay) {\r\n    let timer = null;\r\n    let _this = this;\r\n    return function (arg) {\r\n      let self = _this;\r\n      clearTimeout(timer);\r\n      timer = setTimeout(function () {\r\n        method.call(self, arg);\r\n      }, delay);\r\n    }\r\n  }\r\n  function updateTextSprites() {\r\n    let arr = [], points = [];\r\n    meshesAll.forEach(it => {\r\n      if (it.holder) {\r\n        let sprite =it.holder.getTextSprite();\r\n        if (sprite) {\r\n          sprite.visible = true;\r\n          sprite.screenPos = toScreenPos(sprite.globalPos);\r\n          arr.push(sprite);\r\n          sprite.screenPos.host = sprite;\r\n          points.push(sprite.screenPos);\r\n        }\r\n      }\r\n    });\r\n    points.sort((a,b) => a.x - b.x);\r\n    let index = kdbush(points, getX, getY, 64, Int32Array);\r\n\r\n    for (let i = 0; i < points.length; i++) {\r\n      let coord = points[i];\r\n      let sprite = coord.host;\r\n      if (!sprite.visible)\r\n        continue;\r\n      let image = sprite.material.map.image;\r\n      let width = image.width, height = image.height * 0.5;\r\n      let minX = coord.x - width;\r\n      let minY = coord.y - height;\r\n      let maxX = coord.x + width;\r\n      let maxY = coord.y + height;\r\n\r\n      let neighbors = index.range(minX, minY, maxX, maxY);\r\n      for (let j = 0; j < neighbors.length; j++) {\r\n        let ind = neighbors[j];\r\n        if (ind === i)\r\n          continue;\r\n        points[ind].host.visible = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  let getOptions = {\r\n    //是否使用高精度设备，如GPS。默认是true\r\n    enableHighAccuracy:true,\r\n    //超时时间，单位毫秒，默认为0\r\n    timeout:5000,\r\n    //使用设置时间内的缓存数据，单位毫秒\r\n    //默认为0，即始终请求新数据\r\n    //如设为Infinity，则始终使用缓存数据\r\n    maximumAge:0\r\n  };\r\n  let count0 = 0, count1 = 0;\r\n  //成功回调\r\n  function getSuccess(position){\r\n    // getCurrentPosition执行成功后，会把getSuccess传一个position对象\r\n    // position有两个属性，coords和timeStamp\r\n    // timeStamp表示地理数据创建的时间？？？？？？\r\n    // coords是一个对象，包含了地理位置数据\r\n    let lat = position.coords.latitude;\r\n    let lng = position.coords.longitude;\r\n    // 宿主设备的当前移动方向，以度为单位，相对于正北方向顺时针方向计算\r\n    // console.log(position.coords.heading);\r\n    // 设备的当前对地速度，以米/秒为单位\r\n    // console.log(position.coords.speed);\r\n    let markerPos = coordTool.getRenderPos(lng, lat);\r\n    gpsLocIndicator.position.x = markerPos.x;\r\n    gpsLocIndicator.position.y = markerPos.y;\r\n    gpsLocIndicatorBase.position.copy(gpsLocIndicator.position);\r\n    if (navigatorTool) navigatorTool.onGpsPostitionChange();\r\n    if (count0 == 0)\r\n      alert(lng + \", \" + lat);\r\n    count0 ++;\r\n  }\r\n  //失败回调\r\n  function getError(error) {\r\n    // 执行失败的回调函数，会接受一个error对象作为参数\r\n    // error拥有一个code属性和三个常量属性TIMEOUT、PERMISSION_DENIED、POSITION_UNAVAILABLE\r\n    // 执行失败时，code属性会指向三个常量中的一个，从而指明错误原因\r\n    let errorMsg = \"unknown\";\r\n    switch(error.code){\r\n      case error.TIMEOUT:\r\n        errorMsg = '超时';\r\n        console.log('超时');\r\n        break;\r\n      case error.PERMISSION_DENIED:\r\n        errorMsg = '用户拒绝提供地理位置';\r\n        console.log('用户拒绝提供地理位置');\r\n        break;\r\n      case error.POSITION_UNAVAILABLE:\r\n        errorMsg = '地理位置不可用';\r\n        console.log(\"地理位置不可用\");\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (count1 == 0)\r\n      alert(errorMsg);\r\n    count1 ++;\r\n  }\r\n\r\n  function setGlobalPos4TextLabels() {\r\n    meshesAll = Layers.availableMeshes(true, true);\r\n    meshesAll.forEach(mesh => {\r\n      if (mesh.holder) {\r\n        let sprite = mesh.holder.getTextSprite();\r\n        if (sprite) {\r\n          if (!sprite.globalPos)\r\n            sprite.globalPos = new Vector3();\r\n          sprite.globalPos = sprite.globalPos.copy(sprite.position).applyMatrix4(mesh.parent.parent.matrix);\r\n        }\r\n      }\r\n    });\r\n    updateTextSprites();\r\n  }\r\n\r\n  function orientationHandler(event) {\r\n    // console.log(\"is global earth orientation: \" + event.absolute);\r\n    let alpha = 360 - Math.round(event.alpha);\r\n    gpsLocIndicator.rotation.z = -alpha/180 * Math.PI;\r\n  }\r\n\r\n  function init(fromEditor) {\r\n    window.addEventListener('deviceorientationabsolute', orientationHandler, false);\r\n    scene = new Scene();\r\n    // helpers\r\n    let helperGeometry = new PlaneBufferGeometry(999, 999, 2, 2);\r\n    let helperMaterial = new MeshBasicMaterial({color: 0x00cc00, wireframe: true, transparent: true, opacity: 0, depthWrite: false});\r\n    planeHelper = new Mesh(helperGeometry, helperMaterial);\r\n    scene.add(planeHelper);\r\n    // scene.add(new AxesHelper(200));\r\n\r\n    // create a render and set the size\r\n    renderer = new WebGLRenderer({ antialias: true });\r\n    // renderer.setClearColor( 0xa0a0a0, 1 );\r\n    renderer.setClearColor( '#ffffff', 1 );\r\n    // renderer.setPixelRatio( window.devicePixelRatio );\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    renderer.autoClear = false;\r\n    renderer.toneMapping = LinearToneMapping;\r\n\r\n    camera = new PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );\r\n    camera.up.set(0, 0, 1);\r\n    camera.position.set(0, 0, 35);\r\n    camDistanceSquared = camera.position.y * (camera.position.y);\r\n\r\n    coordTool = MapScalar();\r\n    navigatorTool = NavigatorTool(that);\r\n    navigatorTool.addListeners(renderer.domElement);\r\n\r\n    Layers.attachLayersToScene(scene, null);\r\n    Layers.backgroundLayer.visible = false;\r\n\r\n    let fromRemote = Config.remote.previewMapId != null;\r\n    if (fromEditor) {\r\n      reader.loadFromLocal();\r\n      setGlobalPos4TextLabels();\r\n      if (!fromRemote) {\r\n        Layers.indicatorLayer.add(gpsLocIndicatorBase);\r\n        Layers.indicatorLayer.add(gpsLocIndicator);\r\n        // Singleton.buildingsLayer.add(new AxesHelper(200));\r\n      }\r\n    }\r\n    // start_watchPosition();\r\n    navigatorTool.onMapChange();\r\n    // gpsLocIndicator.position.x = -10;\r\n    // gpsLocIndicatorBase.position.x = -10;\r\n    // let markerPos = coordTool.getRenderPos(112.87632, 28.23165);\r\n    // gpsLocIndicator.position.x = markerPos.x;\r\n    // gpsLocIndicator.position.y = markerPos.y;\r\n    // gpsLocIndicatorBase.position.copy(gpsLocIndicator.position);\r\n\r\n    document.getElementById(\"WebGL-output\").appendChild(renderer.domElement);\r\n    if (Config.ui.showFps) {\r\n      stats = new Stats();\r\n      document.getElementById(\"WebGL-output\").appendChild( stats.dom );\r\n    }\r\n    initControl();\r\n    render();\r\n    function render() {\r\n      requestAnimationFrame(render);\r\n      if (Config.ui.showFps)\r\n        stats.update();\r\n      renderer.clear();\r\n      renderer.render( scene, camera);\r\n\r\n      let animItems =  meshesAll.filter(group => group.holder && group.holder.inSelectionAnim() );\r\n      animItems.forEach(group => group.holder.updateSelectionAnim() );\r\n      if (resetingCamera) {\r\n        curFrame++;\r\n        if (curFrame > resetingFrames) {\r\n          endResetCamera();\r\n        } else {\r\n          if (resetRotating) {\r\n            orbitControls.resetingRotation();\r\n          }\r\n          if (resetMoving) {\r\n            orbitControls.resetingMove(curFrame == resetingFrames);\r\n          }\r\n          if (zooming) {\r\n            orbitControls.zoomingCamera();\r\n          }\r\n          if (phiing) {\r\n            orbitControls.phiingCamera();\r\n          }\r\n        }\r\n      }\r\n      navigatorTool.animatePathIndicator();\r\n\r\n      if (pathTrack && pathTrack.playing() ) {\r\n        pathTrack.update();\r\n      }\r\n    }\r\n  }\r\n\r\n  window.addEventListener( 'resize', function () {\r\n    if (!camera)\r\n      return;\r\n    camera.aspect = window.innerWidth / window.innerHeight;\r\n    camera.updateProjectionMatrix();\r\n\r\n    renderer.setSize( window.innerWidth, window.innerHeight );\r\n  }, false );\r\n\r\n  let that = {\r\n    init: init,\r\n    deserialize(jsonStr) {\r\n      reader.initializeScene(jsonStr);\r\n      setGlobalPos4TextLabels();\r\n      Layers.indicatorLayer.add(gpsLocIndicatorBase);\r\n      Layers.indicatorLayer.add(gpsLocIndicator);\r\n      navigatorTool.onMapChange();\r\n      if (pathTrack)\r\n        pathTrack.detach();\r\n      pathTrack = null;\r\n      heatmapShowing = false;\r\n    },\r\n    updateMax4Heatmap(max) {\r\n      let floorGroupItems = Layers.floorLayer.children;\r\n      if (floorGroupItems.length > 0) {\r\n        floorGroupItems[0].holder.updateMax4Heatmap(max);\r\n      }\r\n    },\r\n    //dataFromRemote 为null或空数组时，用随机数据生成热力图\r\n    //dataFromRemote: [{x: \"-5.790\", y: \"12.680\", value: 31}, ...]\r\n    showHeatmap(dataFromRemote) {\r\n      let floorGroupItems = Layers.floorLayer.children;\r\n      if (floorGroupItems.length > 0) {\r\n        floorGroupItems[0].holder.showHeatmap(dataFromRemote);\r\n        if (dataFromRemote && dataFromRemote.length > 0) {\r\n          eventRangeHeatmap.obj = floorGroupItems[0].holder.range4Heatmap();\r\n          scene.dispatchEvent(eventRangeHeatmap);\r\n        }\r\n      }\r\n\r\n      meshesAll.forEach(it => {\r\n        if (!it.holder)\r\n          return;\r\n        let model3d = it.holder.getMesh();\r\n        model3d.userData.bacOpacity = model3d.material.opacity;\r\n        model3d.material.opacity = 0.2;\r\n      });\r\n      heatmapShowing = true;\r\n    },\r\n    hideHeatmap() {\r\n      let floorGroupItems = Layers.floorLayer.children;\r\n      floorGroupItems.forEach(it => {\r\n        it.holder.hideHeatmap();\r\n      });\r\n\r\n      meshesAll.forEach(it => {\r\n        if (!it.holder)\r\n          return;\r\n        let model3d = it.holder.getMesh();\r\n        model3d.material.opacity = model3d.userData.bacOpacity;\r\n      });\r\n      heatmapShowing = false;\r\n    },\r\n    heatmapShowing() {\r\n      return heatmapShowing;\r\n    },\r\n    setEnabeRotate(val) {\r\n      orbitControls.enableRotate = val;\r\n    },\r\n    coordTool() {\r\n      return coordTool;\r\n    },\r\n    mapScale() {//地图比例尺\r\n      return coordTool.getScale();\r\n    },\r\n    currentCameraScale() {\r\n      return orbitControls.currentZoom();\r\n    },\r\n    currentCameraPhi() {\r\n      return orbitControls.currentPhi();\r\n    },\r\n    scene() {\r\n      return scene;\r\n    },\r\n    dom() {\r\n      return renderer.domElement;\r\n    },\r\n    getIntersects(x, y, objects) {\r\n      let vector = new Vector3(( x / window.innerWidth ) * 2 - 1, -( y / window.innerHeight ) * 2 + 1, 0.5);\r\n      vector = vector.unproject(camera);\r\n\r\n      let raycaster = new Raycaster(camera.position, vector.sub(camera.position).normalize());\r\n\r\n      return raycaster.intersectObjects(objects);\r\n    },\r\n    getIntersectsWith(vector, objects) {\r\n      tmpVector.copy(vector);\r\n      let raycaster = new Raycaster(camera.position, tmpVector.sub(camera.position).normalize());\r\n\r\n      return raycaster.intersectObjects(objects);\r\n    },\r\n    getIntersectsOnPlane(x, y) {\r\n      return that.getIntersects(x, y, [planeHelper]);\r\n    },\r\n    navigatorTool() {\r\n      return navigatorTool;\r\n    },\r\n    toggleNavigatingSwitch(isNavigating) {\r\n      navigatorTool.toggleNavigatingSwitch(isNavigating);\r\n    },\r\n    endNavigating() {\r\n      navigatorTool.endNavigating();\r\n    },\r\n    getGpsLocIndicatorPos() {\r\n      let indicatorPos = gpsLocIndicator.position;\r\n      return indicatorPos;\r\n    },\r\n    initCoordBinding(bindingObj) {\r\n      coordTool.initByJsonObj(bindingObj);\r\n      Layers.applyRotationFromCoordBinding(coordTool.rotation());\r\n    },\r\n    addLight(lightType, position) {\r\n      let light;\r\n      let defaultColor = 0xffffff;\r\n      let intensity = 1;\r\n      if (lightType == Const.lightTypePoint) {\r\n        light = new PointLight(defaultColor);\r\n      } else if (lightType == Const.lightTypeDirection) {\r\n        light = new DirectionalLight(defaultColor, intensity);\r\n      } else if (lightType == Const.lightTypeSpot) {\r\n        let distance = 0;\r\n        let angle = Math.PI * 0.1;\r\n        let penumbra = 0;\r\n        light = new SpotLight( defaultColor, intensity, distance, angle, penumbra );\r\n      } else if (lightType == Const.lightTypeHemiSphere) {\r\n        let groundColor = 0x0;\r\n        light = new HemisphereLight( defaultColor, groundColor, intensity );\r\n      }\r\n      light.position.copy(position);\r\n      scene.add(light);\r\n      return light;\r\n    },\r\n    initLightsByDefault() {\r\n      if (lights.length == 0)\r\n        initLights(scene);\r\n    },\r\n    deserializeLights(obj) {\r\n      renderer.setClearColor(obj.clearColor, obj.clearAlpha);\r\n      let tmp0 = new Vector3();\r\n      for (let objL of obj.lights) {\r\n        tmp0.fromArray(objL.pos);\r\n        let light = that.addLight(objL.type, tmp0);\r\n        light.intensity = objL.intensity;\r\n        light.color.setHex(objL.color), light.visible = objL.visible;\r\n\r\n        if (objL.groundColor !== undefined) light.groundColor.setHex(objL.groundColor);\r\n        if (objL.distance !== undefined) light.distance = objL.distance;\r\n        if (objL.angle !== undefined) light.angle = objL.angle;\r\n      }\r\n    },\r\n    startResetingCamera() {\r\n      let indicatorPos = that.getGpsLocIndicatorPos();\r\n      if (!orbitControls.enabled) {\r\n        return;\r\n      }\r\n      that.startMovingCamera(indicatorPos);\r\n    },\r\n    startMovingCamera(position) {\r\n      orbitControls.startReseting(resetingFrames, position);\r\n      resetingCamera = true;\r\n      curFrame = 0;\r\n      // resetRotating =\r\n      resetMoving = true;\r\n    },\r\n    startResetCameraRotation() {\r\n      if (!resetingCamera && camera.rotation.z !== 0) {\r\n        resetRotating = resetingCamera = true;\r\n        orbitControls.enabled = false;\r\n        curFrame = 0;\r\n        orbitControls.startResetRotation(resetingFrames);\r\n      }\r\n    },\r\n    startResetCameraOffset() {\r\n      let indicatorPos = that.getGpsLocIndicatorPos();\r\n      let offset = orbitControls.target.clone().sub(indicatorPos);\r\n      if (!resetingCamera && (offset.manhattanLength() > 0.1 ||\r\n          orbitControls.currentZoom() !== 1)) {\r\n        resetMoving = resetingCamera = true;\r\n        orbitControls.enabled = false;\r\n        curFrame = 0;\r\n        orbitControls.startMoveCamera(resetingFrames, indicatorPos);\r\n      }\r\n    },\r\n    startZoomCamera(zoomPercentage) {\r\n      if (!orbitControls.enabled) {\r\n        return;\r\n      }\r\n      orbitControls.startZoomCamera(zoomPercentage, resetingFrames);\r\n      orbitControls.enabled = false;\r\n      zooming = resetingCamera = true;\r\n      curFrame = 0;\r\n    },\r\n    changePhiCamera(isTo2D) {\r\n      orbitControls.enablePhiChange = !isTo2D;\r\n      if (!orbitControls.enabled) {\r\n        return;\r\n      }\r\n      orbitControls.startPhiCamera(isTo2D ? 0 : originPhi, resetingFrames);\r\n      orbitControls.enabled = false;\r\n      phiing = resetingCamera = true;\r\n      curFrame = 0;\r\n    },\r\n    showRandomTrack(needReplay, positionsFromRemote) {\r\n      if (pathTrack && pathTrack.playing() )\r\n        return;\r\n      if (needReplay && pathTrack) {\r\n        pathTrack.reset();\r\n      } else {\r\n        let positions = positionsFromRemote;\r\n        if (!positions) {\r\n          positions = navigatorTool.getRandomTrack(false, 10, 0.18);\r\n          if (positions.length == 0)\r\n            return;\r\n        }\r\n        let box2;\r\n        if (Layers.floorLayer.children.length > 0) {\r\n          box2 = Layers.floorLayer.children[0].holder.originBox();\r\n        }\r\n        pathTrack = new PathTrack(Layers.editingLayer, positions, 40, box2);\r\n        pathTrack.attach();\r\n      }\r\n    }\r\n  };\r\n  return that;\r\n} ();\r\n\r\nexport default PublishedScene;\r\n","import {BufferGeometry, BufferAttribute, InterleavedBuffer, InterleavedBufferAttribute, Vector3, Vector2} from 'three';\r\n\r\nlet BufferGeometryUtils = {\r\n\r\n  computeTangents: function ( geometry ) {\r\n\r\n    var index = geometry.index;\r\n    var attributes = geometry.attributes;\r\n\r\n    // based on http://www.terathon.com/code/tangent.html\r\n    // (per vertex tangents)\r\n\r\n    if ( index === null ||\r\n      attributes.position === undefined ||\r\n      attributes.normal === undefined ||\r\n      attributes.uv === undefined ) {\r\n\r\n      console.warn( 'BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\r\n      return;\r\n\r\n    }\r\n\r\n    var indices = index.array;\r\n    var positions = attributes.position.array;\r\n    var normals = attributes.normal.array;\r\n    var uvs = attributes.uv.array;\r\n\r\n    var nVertices = positions.length / 3;\r\n\r\n    if ( attributes.tangent === undefined ) {\r\n\r\n      geometry.addAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\r\n\r\n    }\r\n\r\n    var tangents = attributes.tangent.array;\r\n\r\n    var tan1 = [], tan2 = [];\r\n\r\n    for ( var i = 0; i < nVertices; i ++ ) {\r\n\r\n      tan1[ i ] = new Vector3();\r\n      tan2[ i ] = new Vector3();\r\n\r\n    }\r\n\r\n    var vA = new Vector3(),\r\n      vB = new Vector3(),\r\n      vC = new Vector3(),\r\n\r\n      uvA = new Vector2(),\r\n      uvB = new Vector2(),\r\n      uvC = new Vector2(),\r\n\r\n      sdir = new Vector3(),\r\n      tdir = new Vector3();\r\n\r\n    function handleTriangle( a, b, c ) {\r\n\r\n      vA.fromArray( positions, a * 3 );\r\n      vB.fromArray( positions, b * 3 );\r\n      vC.fromArray( positions, c * 3 );\r\n\r\n      uvA.fromArray( uvs, a * 2 );\r\n      uvB.fromArray( uvs, b * 2 );\r\n      uvC.fromArray( uvs, c * 2 );\r\n\r\n      var x1 = vB.x - vA.x;\r\n      var x2 = vC.x - vA.x;\r\n\r\n      var y1 = vB.y - vA.y;\r\n      var y2 = vC.y - vA.y;\r\n\r\n      var z1 = vB.z - vA.z;\r\n      var z2 = vC.z - vA.z;\r\n\r\n      var s1 = uvB.x - uvA.x;\r\n      var s2 = uvC.x - uvA.x;\r\n\r\n      var t1 = uvB.y - uvA.y;\r\n      var t2 = uvC.y - uvA.y;\r\n\r\n      var r = 1.0 / ( s1 * t2 - s2 * t1 );\r\n\r\n      sdir.set(\r\n        ( t2 * x1 - t1 * x2 ) * r,\r\n        ( t2 * y1 - t1 * y2 ) * r,\r\n        ( t2 * z1 - t1 * z2 ) * r\r\n      );\r\n\r\n      tdir.set(\r\n        ( s1 * x2 - s2 * x1 ) * r,\r\n        ( s1 * y2 - s2 * y1 ) * r,\r\n        ( s1 * z2 - s2 * z1 ) * r\r\n      );\r\n\r\n      tan1[ a ].add( sdir );\r\n      tan1[ b ].add( sdir );\r\n      tan1[ c ].add( sdir );\r\n\r\n      tan2[ a ].add( tdir );\r\n      tan2[ b ].add( tdir );\r\n      tan2[ c ].add( tdir );\r\n\r\n    }\r\n\r\n    var groups = geometry.groups;\r\n\r\n    if ( groups.length === 0 ) {\r\n\r\n      groups = [ {\r\n        start: 0,\r\n        count: indices.length\r\n      } ];\r\n\r\n    }\r\n\r\n    for ( var i = 0, il = groups.length; i < il; ++ i ) {\r\n\r\n      var group = groups[ i ];\r\n\r\n      var start = group.start;\r\n      var count = group.count;\r\n\r\n      for ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n        handleTriangle(\r\n          indices[ j + 0 ],\r\n          indices[ j + 1 ],\r\n          indices[ j + 2 ]\r\n        );\r\n\r\n      }\r\n\r\n    }\r\n\r\n    var tmp = new Vector3(), tmp2 = new Vector3();\r\n    var n = new Vector3(), n2 = new Vector3();\r\n    var w, t, test;\r\n\r\n    function handleVertex( v ) {\r\n\r\n      n.fromArray( normals, v * 3 );\r\n      n2.copy( n );\r\n\r\n      t = tan1[ v ];\r\n\r\n      // Gram-Schmidt orthogonalize\r\n\r\n      tmp.copy( t );\r\n      tmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n      // Calculate handedness\r\n\r\n      tmp2.crossVectors( n2, t );\r\n      test = tmp2.dot( tan2[ v ] );\r\n      w = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n      tangents[ v * 4 ] = tmp.x;\r\n      tangents[ v * 4 + 1 ] = tmp.y;\r\n      tangents[ v * 4 + 2 ] = tmp.z;\r\n      tangents[ v * 4 + 3 ] = w;\r\n\r\n    }\r\n\r\n    for ( var i = 0, il = groups.length; i < il; ++ i ) {\r\n\r\n      var group = groups[ i ];\r\n\r\n      var start = group.start;\r\n      var count = group.count;\r\n\r\n      for ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n        handleVertex( indices[ j + 0 ] );\r\n        handleVertex( indices[ j + 1 ] );\r\n        handleVertex( indices[ j + 2 ] );\r\n\r\n      }\r\n\r\n    }\r\n\r\n  },\r\n\r\n  /**\r\n   * @param  {Array<BufferGeometry>} geometries\r\n   * @param  {Boolean} useGroups\r\n   * @return {BufferGeometry}\r\n   */\r\n  mergeBufferGeometries: function ( geometries, useGroups ) {\r\n\r\n    var isIndexed = geometries[ 0 ].index !== null;\r\n\r\n    var attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\r\n    var morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\r\n\r\n    var attributes = {};\r\n    var morphAttributes = {};\r\n\r\n    var mergedGeometry = new BufferGeometry();\r\n\r\n    var offset = 0;\r\n\r\n    for ( var i = 0; i < geometries.length; ++ i ) {\r\n\r\n      var geometry = geometries[ i ];\r\n\r\n      // ensure that all geometries are indexed, or none\r\n\r\n      if ( isIndexed !== ( geometry.index !== null ) ) return null;\r\n\r\n      // gather attributes, exit early if they're different\r\n\r\n      for ( var name in geometry.attributes ) {\r\n\r\n        if ( ! attributesUsed.has( name ) ) return null;\r\n\r\n        if ( attributes[ name ] === undefined ) attributes[ name ] = [];\r\n\r\n        attributes[ name ].push( geometry.attributes[ name ] );\r\n\r\n      }\r\n\r\n      // gather morph attributes, exit early if they're different\r\n\r\n      for ( var name in geometry.morphAttributes ) {\r\n\r\n        if ( ! morphAttributesUsed.has( name ) ) return null;\r\n\r\n        if ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\r\n\r\n        morphAttributes[ name ].push( geometry.morphAttributes[ name ] );\r\n\r\n      }\r\n\r\n      // gather .userData\r\n\r\n      mergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\r\n      mergedGeometry.userData.mergedUserData.push( geometry.userData );\r\n\r\n      if ( useGroups ) {\r\n\r\n        var count;\r\n\r\n        if ( isIndexed ) {\r\n\r\n          count = geometry.index.count;\r\n\r\n        } else if ( geometry.attributes.position !== undefined ) {\r\n\r\n          count = geometry.attributes.position.count;\r\n\r\n        } else {\r\n\r\n          return null;\r\n\r\n        }\r\n\r\n        mergedGeometry.addGroup( offset, count, i );\r\n\r\n        offset += count;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // merge indices\r\n\r\n    if ( isIndexed ) {\r\n\r\n      var indexOffset = 0;\r\n      var mergedIndex = [];\r\n\r\n      for ( var i = 0; i < geometries.length; ++ i ) {\r\n\r\n        var index = geometries[ i ].index;\r\n\r\n        for ( var j = 0; j < index.count; ++ j ) {\r\n\r\n          mergedIndex.push( index.getX( j ) + indexOffset );\r\n\r\n        }\r\n\r\n        indexOffset += geometries[ i ].attributes.position.count;\r\n\r\n      }\r\n\r\n      mergedGeometry.setIndex( mergedIndex );\r\n\r\n    }\r\n\r\n    // merge attributes\r\n\r\n    for ( var name in attributes ) {\r\n\r\n      var mergedAttribute = this.mergeBufferAttributes( attributes[ name ] );\r\n\r\n      if ( ! mergedAttribute ) return null;\r\n\r\n      mergedGeometry.addAttribute( name, mergedAttribute );\r\n\r\n    }\r\n\r\n    // merge morph attributes\r\n\r\n    for ( var name in morphAttributes ) {\r\n\r\n      var numMorphTargets = morphAttributes[ name ][ 0 ].length;\r\n\r\n      if ( numMorphTargets === 0 ) break;\r\n\r\n      mergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\r\n      mergedGeometry.morphAttributes[ name ] = [];\r\n\r\n      for ( var i = 0; i < numMorphTargets; ++ i ) {\r\n\r\n        var morphAttributesToMerge = [];\r\n\r\n        for ( var j = 0; j < morphAttributes[ name ].length; ++ j ) {\r\n\r\n          morphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\r\n\r\n        }\r\n\r\n        var mergedMorphAttribute = this.mergeBufferAttributes( morphAttributesToMerge );\r\n\r\n        if ( ! mergedMorphAttribute ) return null;\r\n\r\n        mergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\r\n\r\n      }\r\n\r\n    }\r\n\r\n    return mergedGeometry;\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Array<BufferAttribute>} attributes\r\n   * @return {BufferAttribute}\r\n   */\r\n  mergeBufferAttributes: function ( attributes ) {\r\n\r\n    var TypedArray;\r\n    var itemSize;\r\n    var normalized;\r\n    var arrayLength = 0;\r\n\r\n    for ( var i = 0; i < attributes.length; ++ i ) {\r\n\r\n      var attribute = attributes[ i ];\r\n\r\n      if ( attribute.isInterleavedBufferAttribute ) return null;\r\n\r\n      if ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\r\n      if ( TypedArray !== attribute.array.constructor ) return null;\r\n\r\n      if ( itemSize === undefined ) itemSize = attribute.itemSize;\r\n      if ( itemSize !== attribute.itemSize ) return null;\r\n\r\n      if ( normalized === undefined ) normalized = attribute.normalized;\r\n      if ( normalized !== attribute.normalized ) return null;\r\n\r\n      arrayLength += attribute.array.length;\r\n\r\n    }\r\n\r\n    var array = new TypedArray( arrayLength );\r\n    var offset = 0;\r\n\r\n    for ( var i = 0; i < attributes.length; ++ i ) {\r\n\r\n      array.set( attributes[ i ].array, offset );\r\n\r\n      offset += attributes[ i ].array.length;\r\n\r\n    }\r\n\r\n    return new BufferAttribute( array, itemSize, normalized );\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Array<BufferAttribute>} attributes\r\n   * @return {Array<InterleavedBufferAttribute>}\r\n   */\r\n  interleaveAttributes: function ( attributes ) {\r\n\r\n    // Interleaves the provided attributes into an InterleavedBuffer and returns\r\n    // a set of InterleavedBufferAttributes for each attribute\r\n    var TypedArray;\r\n    var arrayLength = 0;\r\n    var stride = 0;\r\n\r\n    // calculate the the length and type of the interleavedBuffer\r\n    for ( var i = 0, l = attributes.length; i < l; ++ i ) {\r\n\r\n      var attribute = attributes[ i ];\r\n\r\n      if ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\r\n      if ( TypedArray !== attribute.array.constructor ) {\r\n\r\n        console.warn( 'AttributeBuffers of different types cannot be interleaved' );\r\n        return null;\r\n\r\n      }\r\n\r\n      arrayLength += attribute.array.length;\r\n      stride += attribute.itemSize;\r\n\r\n    }\r\n\r\n    // Create the set of buffer attributes\r\n    var interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\r\n    var offset = 0;\r\n    var res = [];\r\n    var getters = [ 'getX', 'getY', 'getZ', 'getW' ];\r\n    var setters = [ 'setX', 'setY', 'setZ', 'setW' ];\r\n\r\n    for ( var j = 0, l = attributes.length; j < l; j ++ ) {\r\n\r\n      var attribute = attributes[ j ];\r\n      var itemSize = attribute.itemSize;\r\n      var count = attribute.count;\r\n      var iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\r\n      res.push( iba );\r\n\r\n      offset += itemSize;\r\n\r\n      // Move the data for each attribute into the new interleavedBuffer\r\n      // at the appropriate offset\r\n      for ( var c = 0; c < count; c ++ ) {\r\n\r\n        for ( var k = 0; k < itemSize; k ++ ) {\r\n\r\n          iba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    return res;\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Array<BufferGeometry>} geometry\r\n   * @return {number}\r\n   */\r\n  estimateBytesUsed: function ( geometry ) {\r\n\r\n    // Return the estimated memory used by this geometry in bytes\r\n    // Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\r\n    // for InterleavedBufferAttributes.\r\n    var mem = 0;\r\n    for ( var name in geometry.attributes ) {\r\n\r\n      var attr = geometry.getAttribute( name );\r\n      mem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\r\n\r\n    }\r\n\r\n    var indices = geometry.getIndex();\r\n    mem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\r\n    return mem;\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {BufferGeometry} geometry\r\n   * @param {number} tolerance\r\n   * @return {BufferGeometry>}\r\n   */\r\n  mergeVertices: function ( geometry, tolerance = 1e-4 ) {\r\n\r\n    tolerance = Math.max( tolerance, Number.EPSILON );\r\n\r\n    // Generate an index buffer if the geometry doesn't have one, or optimize it\r\n    // if it's already available.\r\n    var hashToIndex = {};\r\n    var indices = geometry.getIndex();\r\n    var positions = geometry.getAttribute( 'position' );\r\n    var vertexCount = indices ? indices.count : positions.count;\r\n\r\n    // next value for triangle indices\r\n    var nextIndex = 0;\r\n\r\n    // attributes and new attribute arrays\r\n    var attributeNames = Object.keys( geometry.attributes );\r\n    var attrArrays = {};\r\n    var morphAttrsArrays = {};\r\n    var newIndices = [];\r\n    var getters = [ 'getX', 'getY', 'getZ', 'getW' ];\r\n\r\n    // initialize the arrays\r\n    for ( var i = 0, l = attributeNames.length; i < l; i ++ ) {\r\n\r\n      var name = attributeNames[ i ];\r\n\r\n      attrArrays[ name ] = [];\r\n\r\n      var morphAttr = geometry.morphAttributes[ name ];\r\n      if ( morphAttr ) {\r\n\r\n        morphAttrsArrays[ name ] = new Array( morphAttr.length ).fill().map( () => [] );\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // convert the error tolerance to an amount of decimal places to truncate to\r\n    var decimalShift = Math.log10( 1 / tolerance );\r\n    var shiftMultiplier = Math.pow( 10, decimalShift );\r\n    for ( var i = 0; i < vertexCount; i ++ ) {\r\n\r\n      var index = indices ? indices.getX( i ) : i;\r\n\r\n      // Generate a hash for the vertex attributes at the current index 'i'\r\n      var hash = '';\r\n      for ( var j = 0, l = attributeNames.length; j < l; j ++ ) {\r\n\r\n        var name = attributeNames[ j ];\r\n        var attribute = geometry.getAttribute( name );\r\n        var itemSize = attribute.itemSize;\r\n\r\n        for ( var k = 0; k < itemSize; k ++ ) {\r\n\r\n          // double tilde truncates the decimal value\r\n          hash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * shiftMultiplier ) },`;\r\n\r\n        }\r\n\r\n      }\r\n\r\n      // Add another reference to the vertex if it's already\r\n      // used by another index\r\n      if ( hash in hashToIndex ) {\r\n\r\n        newIndices.push( hashToIndex[ hash ] );\r\n\r\n      } else {\r\n\r\n        // copy data to the new index in the attribute arrays\r\n        for ( var j = 0, l = attributeNames.length; j < l; j ++ ) {\r\n\r\n          var name = attributeNames[ j ];\r\n          var attribute = geometry.getAttribute( name );\r\n          var morphAttr = geometry.morphAttributes[ name ];\r\n          var itemSize = attribute.itemSize;\r\n          var newarray = attrArrays[ name ];\r\n          var newMorphArrays = morphAttrsArrays[ name ];\r\n\r\n          for ( var k = 0; k < itemSize; k ++ ) {\r\n\r\n            var getterFunc = getters[ k ];\r\n            newarray.push( attribute[ getterFunc ]( index ) );\r\n\r\n            if ( morphAttr ) {\r\n\r\n              for ( var m = 0, ml = morphAttr.length; m < ml; m ++ ) {\r\n\r\n                newMorphArrays[ m ].push( morphAttr[ m ][ getterFunc ]( index ) );\r\n\r\n              }\r\n\r\n            }\r\n\r\n          }\r\n\r\n        }\r\n\r\n        hashToIndex[ hash ] = nextIndex;\r\n        newIndices.push( nextIndex );\r\n        nextIndex ++;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // Generate typed arrays from new attribute arrays and update\r\n    // the attributeBuffers\r\n    const result = geometry.clone();\r\n    for ( var i = 0, l = attributeNames.length; i < l; i ++ ) {\r\n\r\n      var name = attributeNames[ i ];\r\n      var oldAttribute = geometry.getAttribute( name );\r\n      var attribute;\r\n\r\n      var buffer = new oldAttribute.array.constructor( attrArrays[ name ] );\r\n      if ( oldAttribute.isInterleavedBufferAttribute ) {\r\n\r\n        attribute = new BufferAttribute( buffer, oldAttribute.itemSize, oldAttribute.itemSize );\r\n\r\n      } else {\r\n\r\n        attribute = geometry.getAttribute( name ).clone();\r\n        attribute.setArray( buffer );\r\n\r\n      }\r\n\r\n      result.addAttribute( name, attribute );\r\n\r\n      // Update the attribute arrays\r\n      if ( name in morphAttrsArrays ) {\r\n\r\n        for ( var j = 0; j < morphAttrsArrays[ name ].length; j ++ ) {\r\n\r\n          var morphAttribute = geometry.morphAttributes[ name ][ j ].clone();\r\n          morphAttribute.setArray( new morphAttribute.array.constructor( morphAttrsArrays[ name ][ j ] ) );\r\n          result.morphAttributes[ name ][ j ] = morphAttribute;\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // Generate an index buffer typed array\r\n    var cons = Uint8Array;\r\n    if ( newIndices.length >= Math.pow( 2, 8 ) ) cons = Uint16Array;\r\n    if ( newIndices.length >= Math.pow( 2, 16 ) ) cons = Uint32Array;\r\n\r\n    var newIndexBuffer = new cons( newIndices );\r\n    var newIndices = null;\r\n    if ( indices === null ) {\r\n\r\n      newIndices = new BufferAttribute( newIndexBuffer, 1 );\r\n\r\n    } else {\r\n\r\n      newIndices = geometry.getIndex().clone();\r\n      newIndices.setArray( newIndexBuffer );\r\n\r\n    }\r\n\r\n    result.setIndex( newIndices );\r\n\r\n    return result;\r\n\r\n  }\r\n\r\n};\r\n\r\nexport default BufferGeometryUtils\r\n","import {Vector3, CurvePath, LineCurve3} from 'three'\r\n\r\nexport default function Path3( points ) {\r\n\r\n    CurvePath.call( this );\r\n\r\n    this.type = 'Path';\r\n\r\n    this.currentPoint = new Vector3();\r\n\r\n    if ( points ) {\r\n\r\n        this.setFromPoints( points );\r\n\r\n    }\r\n\r\n}\r\n\r\nPath3.prototype = Object.assign( Object.create( CurvePath.prototype ), {\r\n\r\n    constructor: Path3,\r\n\r\n    setFromPoints: function (points) {\r\n\r\n        this.moveTo(points[0].x, points[0].y, points[0].z);\r\n\r\n        for (var i = 1, l = points.length; i < l; i++) {\r\n\r\n            this.lineTo(points[i].x, points[i].y, points[i].z);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    moveTo: function (x, y, z) {\r\n\r\n        this.currentPoint.set(x, y, z); // TODO consider referencing vectors instead of copying?\r\n\r\n    },\r\n\r\n    lineTo: function (x, y, z) {\r\n\r\n        var curve = new LineCurve3(this.currentPoint.clone(), new Vector3(x, y, z));\r\n        this.curves.push(curve);\r\n\r\n        this.currentPoint.set(x, y, z);\r\n\r\n    }\r\n});\r\n","import {TextureLoader} from 'three'\r\nimport * as Consts from '../consts/Constants'\r\n\r\nlet TextureStore = function () {\r\n  let startMarker, endMarker;\r\n  let pointHollow, pointRed, pointWhiteDisc, pointDefault;\r\n  let crossOnPath, arrowOnPath;\r\n  let pathIndicators = {};\r\n  let pathTrackMarkerImg = new Image();\r\n  pathTrackMarkerImg.src = \"img_tabs/pathTrackMarker.png\";\r\n\r\n  function drawArrow(edgeLen, backgroundColor, arrowColor) {\r\n    let canvas = document.createElement( 'canvas' );\r\n    let ctx = canvas.getContext( '2d' );\r\n    canvas.width = edgeLen;\r\n    canvas.height = edgeLen; // fontsize * 1.5\r\n    ctx.rect(0,0,edgeLen,edgeLen);\r\n    ctx.fillStyle = backgroundColor;    //'#35a610';\r\n    ctx.fill();\r\n\r\n    let p0 = {x: 0.2 * edgeLen, y: 0.1 * edgeLen};\r\n    let p1 = {x: 0.8 * edgeLen, y: 0.5 * edgeLen}, p2 = {x: 0.2 * edgeLen, y: 0.9 * edgeLen};\r\n    ctx.beginPath();\r\n    ctx.lineWidth = 4;\r\n    ctx.moveTo(p0.x, p0.y);\r\n    ctx.lineTo(p1.x, p1.y);\r\n    ctx.lineTo(p2.x, p2.y);\r\n    ctx.lineCap=\"round\";\r\n    ctx.lineJoin=\"round\";\r\n    ctx.strokeStyle = \"#ffffff\";\r\n    ctx.stroke();\r\n    return canvas;\r\n  }\r\n\r\n  let that = {\r\n    pathTrackMarkerImg() {\r\n      return pathTrackMarkerImg;\r\n    },\r\n    startMarker() {\r\n      if (!startMarker) {\r\n        startMarker = new TextureLoader().load( 'img_tabs/startPoint.png' );\r\n      }\r\n      return startMarker;\r\n    },\r\n    endMarker() {\r\n      if (!endMarker) {\r\n        endMarker = new TextureLoader().load( 'img_tabs/endPoint.png' );\r\n      }\r\n      return endMarker;\r\n    },\r\n    crossOnPath() {\r\n      if (!crossOnPath) {\r\n        crossOnPath = new TextureLoader().load('img_tabs/crossGray.png');\r\n      }\r\n      return crossOnPath;\r\n    },\r\n    arrowOnPath() {\r\n      if (!arrowOnPath) {\r\n        arrowOnPath = new TextureLoader().load('img_tabs/arrow1.png');\r\n      }\r\n      return arrowOnPath;\r\n    },\r\n    pointTexture(pointType) {\r\n      if (pointType == Consts.pointTypeRing) {\r\n        if (!pointHollow) {\r\n          pointHollow = new TextureLoader().load( 'img_tabs/circle2.png' );\r\n        }\r\n        return pointHollow;\r\n      } else if (pointType == Consts.pointTypeRingSelected) {\r\n        if (!pointRed) {\r\n          pointRed = new TextureLoader().load( 'img_tabs/circleRed.png' );\r\n        }\r\n        return pointRed;\r\n      } else if (pointType == Consts.pointTypeCircleWhite) {\r\n        if (!pointWhiteDisc) {\r\n          pointWhiteDisc = new TextureLoader().load( 'img_tabs/disc.png' );\r\n        }\r\n        return pointWhiteDisc;\r\n      } else {\r\n        if (!pointDefault) {\r\n          pointDefault = new TextureLoader().load( 'img_tabs/circle3.png' );\r\n        }\r\n        return pointDefault;\r\n      }\r\n    },\r\n    getPathIndicatorCanvas(backgroundColor) {\r\n      let backColor = '#35a610';\r\n      if (backgroundColor != null) {\r\n        backColor = backgroundColor;\r\n      }\r\n      if (!pathIndicators[backColor]) {\r\n        let canvas = drawArrow(32, backColor, '#fff');\r\n        pathIndicators[backColor] = canvas;\r\n      }\r\n      return pathIndicators[backColor];\r\n    }\r\n  };\r\n  return that;\r\n} ();\r\n\r\nexport default TextureStore;\r\n","import {Object3D, BufferGeometry, InterleavedBuffer, InterleavedBufferAttribute, SpriteMaterial, Vector2} from 'three'\r\n\r\nlet TextSprite = function (material, rectData) {\r\n  Object3D.call( this )\r\n  this.type = 'Sprite';\r\n  let _geometry = new BufferGeometry();\r\n\r\n  let r = rectData;\r\n  let uv0 = {x: r.x/r.size, y: r.y/r.size}, uv1 = {x: (r.x + r.width) / r.size, y: r.y/r.size};\r\n  let uv2 = {x: (r.x + r.width)/r.size, y: (r.y + r.height)/r.size}, uv3 = {x: r.x/r.size, y: (r.y + r.height)/r.size};\r\n  var float32Array = new Float32Array( [\r\n    uv0.x-0.5, uv0.y-0.5, 0, uv0.x, uv0.y,\r\n    uv1.x-0.5, uv1.y-0.5, 0, uv1.x, uv1.y,\r\n    uv2.x-0.5, uv2.y-0.5, 0, uv2.x, uv2.y,\r\n    uv3.x-0.5, uv3.y-0.5, 0, uv3.x, uv3.y\r\n  ] );\r\n\r\n  var interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\r\n\r\n  _geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\r\n  _geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\r\n  _geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\r\n\r\n  this.geometry = _geometry;\r\n  this.material = ( material != undefined ) ? material : new SpriteMaterial();\r\n  this.center = new Vector2( 0.5, 0.5 );\r\n}\r\nTextSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n  constructor: TextSprite,\r\n\r\n  isSprite: true});\r\n\r\nexport default TextSprite;\r\n","/*\r\n * heatmap.js v2.0.5 | JavaScript Heatmap Library\r\n *\r\n * Copyright 2008-2016 Patrick Wied <heatmapjs@patrick-wied.at> - All rights reserved.\r\n * Dual licensed under MIT and Beerware license\r\n *\r\n * :: 2016-09-05 01:16\r\n */\r\nlet heatmap = function () {\r\n\r\n// Heatmap Config stores default values and will be merged with instance config\r\n  var HeatmapConfig = {\r\n    defaultRadius: 40,\r\n    defaultRenderer: 'canvas2d',\r\n    defaultGradient: { 0.25: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,0)\", 0.85: \"yellow\", 1.0: \"rgb(255,0,0)\"},\r\n    defaultMaxOpacity: 1,\r\n    defaultMinOpacity: 0,\r\n    defaultBlur: .85,\r\n    defaultXField: 'x',\r\n    defaultYField: 'y',\r\n    defaultValueField: 'value',\r\n    plugins: {}\r\n  };\r\n  var Store = (function StoreClosure() {\r\n\r\n    var Store = function Store(config) {\r\n      this._coordinator = {};\r\n      this._data = [];\r\n      this._radi = [];\r\n      this._min = 10;\r\n      this._max = 1;\r\n      this._xField = config['xField'] || config.defaultXField;\r\n      this._yField = config['yField'] || config.defaultYField;\r\n      this._valueField = config['valueField'] || config.defaultValueField;\r\n\r\n      if (config[\"radius\"]) {\r\n        this._cfgRadius = config[\"radius\"];\r\n      }\r\n    };\r\n\r\n    var defaultRadius = HeatmapConfig.defaultRadius;\r\n\r\n    Store.prototype = {\r\n      // when forceRender = false -> called from setData, omits renderall event\r\n      _organiseData: function(dataPoint, forceRender) {\r\n        var x = dataPoint[this._xField];\r\n        var y = dataPoint[this._yField];\r\n        var radi = this._radi;\r\n        var store = this._data;\r\n        var max = this._max;\r\n        var min = this._min;\r\n        var value = dataPoint[this._valueField] || 1;\r\n        var radius = dataPoint.radius || this._cfgRadius || defaultRadius;\r\n\r\n        if (!store[x]) {\r\n          store[x] = [];\r\n          radi[x] = [];\r\n        }\r\n\r\n        if (!store[x][y]) {\r\n          store[x][y] = value;\r\n          radi[x][y] = radius;\r\n        } else {\r\n          store[x][y] += value;\r\n        }\r\n        var storedVal = store[x][y];\r\n\r\n        if (storedVal > max) {\r\n          if (!forceRender) {\r\n            this._max = storedVal;\r\n          } else {\r\n            this.setDataMax(storedVal);\r\n          }\r\n          return false;\r\n        } else if (storedVal < min) {\r\n          if (!forceRender) {\r\n            this._min = storedVal;\r\n          } else {\r\n            this.setDataMin(storedVal);\r\n          }\r\n          return false;\r\n        } else {\r\n          return {\r\n            x: x,\r\n            y: y,\r\n            value: value,\r\n            radius: radius,\r\n            min: min,\r\n            max: max\r\n          };\r\n        }\r\n      },\r\n      _unOrganizeData: function() {\r\n        var unorganizedData = [];\r\n        var data = this._data;\r\n        var radi = this._radi;\r\n\r\n        for (var x in data) {\r\n          for (var y in data[x]) {\r\n\r\n            unorganizedData.push({\r\n              x: x,\r\n              y: y,\r\n              radius: radi[x][y],\r\n              value: data[x][y]\r\n            });\r\n\r\n          }\r\n        }\r\n        return {\r\n          min: this._min,\r\n          max: this._max,\r\n          data: unorganizedData\r\n        };\r\n      },\r\n      _onExtremaChange: function() {\r\n        this._coordinator.emit('extremachange', {\r\n          min: this._min,\r\n          max: this._max\r\n        });\r\n      },\r\n      addData: function() {\r\n        if (arguments[0].length > 0) {\r\n          var dataArr = arguments[0];\r\n          var dataLen = dataArr.length;\r\n          while (dataLen--) {\r\n            this.addData.call(this, dataArr[dataLen]);\r\n          }\r\n        } else {\r\n          // add to store\r\n          var organisedEntry = this._organiseData(arguments[0], true);\r\n          if (organisedEntry) {\r\n            // if it's the first datapoint initialize the extremas with it\r\n            if (this._data.length === 0) {\r\n              this._min = this._max = organisedEntry.value;\r\n            }\r\n            this._coordinator.emit('renderpartial', {\r\n              min: this._min,\r\n              max: this._max,\r\n              data: [organisedEntry]\r\n            });\r\n          }\r\n        }\r\n        return this;\r\n      },\r\n      setData: function(data) {\r\n        var dataPoints = data.data;\r\n        var pointsLen = dataPoints.length;\r\n\r\n\r\n        // reset data arrays\r\n        this._data = [];\r\n        this._radi = [];\r\n\r\n        for(var i = 0; i < pointsLen; i++) {\r\n          this._organiseData(dataPoints[i], false);\r\n        }\r\n        this._max = data.max;\r\n        this._min = data.min || 0;\r\n\r\n        this._onExtremaChange();\r\n        this._coordinator.emit('renderall', this._getInternalData());\r\n        return this;\r\n      },\r\n      removeData: function() {\r\n        // TODO: implement\r\n      },\r\n      setDataMax: function(max) {\r\n        this._max = max;\r\n        this._onExtremaChange();\r\n        this._coordinator.emit('renderall', this._getInternalData());\r\n        return this;\r\n      },\r\n      setDataMin: function(min) {\r\n        this._min = min;\r\n        this._onExtremaChange();\r\n        this._coordinator.emit('renderall', this._getInternalData());\r\n        return this;\r\n      },\r\n      setCoordinator: function(coordinator) {\r\n        this._coordinator = coordinator;\r\n      },\r\n      _getInternalData: function() {\r\n        return {\r\n          max: this._max,\r\n          min: this._min,\r\n          data: this._data,\r\n          radi: this._radi\r\n        };\r\n      },\r\n      getData: function() {\r\n        return this._unOrganizeData();\r\n      }/*,\r\n      TODO: rethink.\r\n    getValueAt: function(point) {\r\n      var value;\r\n      var radius = 100;\r\n      var x = point.x;\r\n      var y = point.y;\r\n      var data = this._data;\r\n      if (data[x] && data[x][y]) {\r\n        return data[x][y];\r\n      } else {\r\n        var values = [];\r\n        // radial search for datapoints based on default radius\r\n        for(var distance = 1; distance < radius; distance++) {\r\n          var neighbors = distance * 2 +1;\r\n          var startX = x - distance;\r\n          var startY = y - distance;\r\n          for(var i = 0; i < neighbors; i++) {\r\n            for (var o = 0; o < neighbors; o++) {\r\n              if ((i == 0 || i == neighbors-1) || (o == 0 || o == neighbors-1)) {\r\n                if (data[startY+i] && data[startY+i][startX+o]) {\r\n                  values.push(data[startY+i][startX+o]);\r\n                }\r\n              } else {\r\n                continue;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (values.length > 0) {\r\n          return Math.max.apply(Math, values);\r\n        }\r\n      }\r\n      return false;\r\n    }*/\r\n    };\r\n\r\n\r\n    return Store;\r\n  })();\r\n\r\n  var Canvas2dRenderer = (function Canvas2dRendererClosure() {\r\n\r\n    var _getColorPalette = function(config) {\r\n      var gradientConfig = config.gradient || config.defaultGradient;\r\n      var paletteCanvas = document.createElement('canvas');\r\n      var paletteCtx = paletteCanvas.getContext('2d');\r\n\r\n      paletteCanvas.width = 256;\r\n      paletteCanvas.height = 1;\r\n\r\n      var gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\r\n      for (var key in gradientConfig) {\r\n        gradient.addColorStop(key, gradientConfig[key]);\r\n      }\r\n\r\n      paletteCtx.fillStyle = gradient;\r\n      paletteCtx.fillRect(0, 0, 256, 1);\r\n\r\n      return paletteCtx.getImageData(0, 0, 256, 1).data;\r\n    };\r\n\r\n    var _getPointTemplate = function(radius, blurFactor) {\r\n      var tplCanvas = document.createElement('canvas');\r\n      var tplCtx = tplCanvas.getContext('2d');\r\n      var x = radius;\r\n      var y = radius;\r\n      tplCanvas.width = tplCanvas.height = radius*2;\r\n\r\n      if (blurFactor == 1) {\r\n        tplCtx.beginPath();\r\n        tplCtx.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n        tplCtx.fillStyle = 'rgba(0,0,0,1)';\r\n        tplCtx.fill();\r\n      } else {\r\n        var gradient = tplCtx.createRadialGradient(x, y, radius*blurFactor, x, y, radius);\r\n        gradient.addColorStop(0, 'rgba(0,0,0,1)');\r\n        gradient.addColorStop(1, 'rgba(0,0,0,0)');\r\n        tplCtx.fillStyle = gradient;\r\n        tplCtx.fillRect(0, 0, 2*radius, 2*radius);\r\n      }\r\n\r\n\r\n\r\n      return tplCanvas;\r\n    };\r\n\r\n    var _prepareData = function(data) {\r\n      var renderData = [];\r\n      var min = data.min;\r\n      var max = data.max;\r\n      var radi = data.radi;\r\n      var data = data.data;\r\n\r\n      var xValues = Object.keys(data);\r\n      var xValuesLen = xValues.length;\r\n\r\n      while(xValuesLen--) {\r\n        var xValue = xValues[xValuesLen];\r\n        var yValues = Object.keys(data[xValue]);\r\n        var yValuesLen = yValues.length;\r\n        while(yValuesLen--) {\r\n          var yValue = yValues[yValuesLen];\r\n          var value = data[xValue][yValue];\r\n          var radius = radi[xValue][yValue];\r\n          renderData.push({\r\n            x: xValue,\r\n            y: yValue,\r\n            value: value,\r\n            radius: radius\r\n          });\r\n        }\r\n      }\r\n\r\n      return {\r\n        min: min,\r\n        max: max,\r\n        data: renderData\r\n      };\r\n    };\r\n\r\n\r\n    function Canvas2dRenderer(config) {\r\n      var container = config.container;\r\n      var shadowCanvas = this.shadowCanvas = document.createElement('canvas');\r\n      var canvas = this.canvas = config.canvas || document.createElement('canvas');\r\n      var renderBoundaries = this._renderBoundaries = [10000, 10000, 0, 0];\r\n\r\n      var computed = getComputedStyle(config.container) || {};\r\n\r\n      canvas.className = 'heatmap-canvas';\r\n\r\n      if (config.canvas) {\r\n        this._width = shadowCanvas.width = canvas.width;\r\n        this._height = shadowCanvas.height = canvas.height;\r\n      } else {\r\n        this._width = canvas.width = shadowCanvas.width = config.width || +(computed.width.replace(/px/,''));\r\n        this._height = canvas.height = shadowCanvas.height = config.height || +(computed.height.replace(/px/,''));\r\n      }\r\n\r\n      this.shadowCtx = shadowCanvas.getContext('2d');\r\n      this.ctx = canvas.getContext('2d');\r\n\r\n      // @TODO:\r\n      // conditional wrapper\r\n\r\n      canvas.style.cssText = shadowCanvas.style.cssText = 'position:absolute;left:0;top:0;';\r\n\r\n      container.style.position = 'relative';\r\n      container.appendChild(canvas);\r\n\r\n      this._palette = _getColorPalette(config);\r\n      this._templates = {};\r\n\r\n      this._setStyles(config);\r\n    };\r\n\r\n    Canvas2dRenderer.prototype = {\r\n      renderPartial: function(data) {\r\n        if (data.data.length > 0) {\r\n          this._drawAlpha(data);\r\n          this._colorize();\r\n        }\r\n      },\r\n      renderAll: function(data) {\r\n        // reset render boundaries\r\n        this._clear();\r\n        if (data.data.length > 0) {\r\n          this._drawAlpha(_prepareData(data));\r\n          this._colorize();\r\n        }\r\n      },\r\n      _updateGradient: function(config) {\r\n        this._palette = _getColorPalette(config);\r\n      },\r\n      updateConfig: function(config) {\r\n        if (config['gradient']) {\r\n          this._updateGradient(config);\r\n        }\r\n        this._setStyles(config);\r\n      },\r\n      setDimensions: function(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this.canvas.width = this.shadowCanvas.width = width;\r\n        this.canvas.height = this.shadowCanvas.height = height;\r\n      },\r\n      _clear: function() {\r\n        this.shadowCtx.clearRect(0, 0, this._width, this._height);\r\n        this.ctx.clearRect(0, 0, this._width, this._height);\r\n      },\r\n      _setStyles: function(config) {\r\n        this._blur = (config.blur == 0)?0:(config.blur || config.defaultBlur);\r\n\r\n        if (config.backgroundColor) {\r\n          this.canvas.style.backgroundColor = config.backgroundColor;\r\n        }\r\n\r\n        this._width = this.canvas.width = this.shadowCanvas.width = config.width || this._width;\r\n        this._height = this.canvas.height = this.shadowCanvas.height = config.height || this._height;\r\n\r\n\r\n        this._opacity = (config.opacity || 0) * 255;\r\n        this._maxOpacity = (config.maxOpacity || config.defaultMaxOpacity) * 255;\r\n        this._minOpacity = (config.minOpacity || config.defaultMinOpacity) * 255;\r\n        this._useGradientOpacity = !!config.useGradientOpacity;\r\n      },\r\n      _drawAlpha: function(data) {\r\n        var min = this._min = data.min;\r\n        var max = this._max = data.max;\r\n        var data = data.data || [];\r\n        var dataLen = data.length;\r\n        // on a point basis?\r\n        var blur = 1 - this._blur;\r\n\r\n        while(dataLen--) {\r\n\r\n          var point = data[dataLen];\r\n\r\n          var x = point.x;\r\n          var y = point.y;\r\n          var radius = point.radius;\r\n          // if value is bigger than max\r\n          // use max as value\r\n          var value = Math.min(point.value, max);\r\n          var rectX = x - radius;\r\n          var rectY = y - radius;\r\n          var shadowCtx = this.shadowCtx;\r\n\r\n\r\n\r\n\r\n          var tpl;\r\n          if (!this._templates[radius]) {\r\n            this._templates[radius] = tpl = _getPointTemplate(radius, blur);\r\n          } else {\r\n            tpl = this._templates[radius];\r\n          }\r\n          // value from minimum / value range\r\n          // => [0, 1]\r\n          var templateAlpha = (value-min)/(max-min);\r\n          // this fixes #176: small values are not visible because globalAlpha < .01 cannot be read from imageData\r\n          shadowCtx.globalAlpha = templateAlpha < .01 ? .01 : templateAlpha;\r\n\r\n          shadowCtx.drawImage(tpl, rectX, rectY);\r\n\r\n          // update renderBoundaries\r\n          if (rectX < this._renderBoundaries[0]) {\r\n            this._renderBoundaries[0] = rectX;\r\n          }\r\n          if (rectY < this._renderBoundaries[1]) {\r\n            this._renderBoundaries[1] = rectY;\r\n          }\r\n          if (rectX + 2*radius > this._renderBoundaries[2]) {\r\n            this._renderBoundaries[2] = rectX + 2*radius;\r\n          }\r\n          if (rectY + 2*radius > this._renderBoundaries[3]) {\r\n            this._renderBoundaries[3] = rectY + 2*radius;\r\n          }\r\n\r\n        }\r\n      },\r\n      _colorize: function() {\r\n        var x = this._renderBoundaries[0];\r\n        var y = this._renderBoundaries[1];\r\n        var width = this._renderBoundaries[2] - x;\r\n        var height = this._renderBoundaries[3] - y;\r\n        var maxWidth = this._width;\r\n        var maxHeight = this._height;\r\n        var opacity = this._opacity;\r\n        var maxOpacity = this._maxOpacity;\r\n        var minOpacity = this._minOpacity;\r\n        var useGradientOpacity = this._useGradientOpacity;\r\n\r\n        if (x < 0) {\r\n          x = 0;\r\n        }\r\n        if (y < 0) {\r\n          y = 0;\r\n        }\r\n        if (x + width > maxWidth) {\r\n          width = maxWidth - x;\r\n        }\r\n        if (y + height > maxHeight) {\r\n          height = maxHeight - y;\r\n        }\r\n\r\n        var img = this.shadowCtx.getImageData(x, y, width, height);\r\n        var imgData = img.data;\r\n        var len = imgData.length;\r\n        var palette = this._palette;\r\n\r\n\r\n        for (var i = 3; i < len; i+= 4) {\r\n          var alpha = imgData[i];\r\n          var offset = alpha * 4;\r\n\r\n\r\n          if (!offset) {\r\n            continue;\r\n          }\r\n\r\n          var finalAlpha;\r\n          if (opacity > 0) {\r\n            finalAlpha = opacity;\r\n          } else {\r\n            if (alpha < maxOpacity) {\r\n              if (alpha < minOpacity) {\r\n                finalAlpha = minOpacity;\r\n              } else {\r\n                finalAlpha = alpha;\r\n              }\r\n            } else {\r\n              finalAlpha = maxOpacity;\r\n            }\r\n          }\r\n\r\n          imgData[i-3] = palette[offset];\r\n          imgData[i-2] = palette[offset + 1];\r\n          imgData[i-1] = palette[offset + 2];\r\n          imgData[i] = useGradientOpacity ? palette[offset + 3] : finalAlpha;\r\n\r\n        }\r\n\r\n        // img.data = imgData;\r\n        this.ctx.putImageData(img, x, y);\r\n\r\n        this._renderBoundaries = [1000, 1000, 0, 0];\r\n\r\n      },\r\n      getValueAt: function(point) {\r\n        var value;\r\n        var shadowCtx = this.shadowCtx;\r\n        var img = shadowCtx.getImageData(point.x, point.y, 1, 1);\r\n        var data = img.data[3];\r\n        var max = this._max;\r\n        var min = this._min;\r\n\r\n        value = (Math.abs(max-min) * (data/255)) >> 0;\r\n\r\n        return value;\r\n      },\r\n      getDataURL: function() {\r\n        return this.canvas.toDataURL();\r\n      }\r\n    };\r\n\r\n\r\n    return Canvas2dRenderer;\r\n  })();\r\n\r\n\r\n  var Renderer = (function RendererClosure() {\r\n\r\n    var rendererFn = false;\r\n\r\n    if (HeatmapConfig['defaultRenderer'] === 'canvas2d') {\r\n      rendererFn = Canvas2dRenderer;\r\n    }\r\n\r\n    return rendererFn;\r\n  })();\r\n\r\n\r\n  var Util = {\r\n    merge: function() {\r\n      var merged = {};\r\n      var argsLen = arguments.length;\r\n      for (var i = 0; i < argsLen; i++) {\r\n        var obj = arguments[i]\r\n        for (var key in obj) {\r\n          merged[key] = obj[key];\r\n        }\r\n      }\r\n      return merged;\r\n    }\r\n  };\r\n// Heatmap Constructor\r\n  var Heatmap = (function HeatmapClosure() {\r\n\r\n    var Coordinator = (function CoordinatorClosure() {\r\n\r\n      function Coordinator() {\r\n        this.cStore = {};\r\n      };\r\n\r\n      Coordinator.prototype = {\r\n        on: function(evtName, callback, scope) {\r\n          var cStore = this.cStore;\r\n\r\n          if (!cStore[evtName]) {\r\n            cStore[evtName] = [];\r\n          }\r\n          cStore[evtName].push((function(data) {\r\n            return callback.call(scope, data);\r\n          }));\r\n        },\r\n        emit: function(evtName, data) {\r\n          var cStore = this.cStore;\r\n          if (cStore[evtName]) {\r\n            var len = cStore[evtName].length;\r\n            for (var i=0; i<len; i++) {\r\n              var callback = cStore[evtName][i];\r\n              callback(data);\r\n            }\r\n          }\r\n        }\r\n      };\r\n\r\n      return Coordinator;\r\n    })();\r\n\r\n\r\n    var _connect = function(scope) {\r\n      var renderer = scope._renderer;\r\n      var coordinator = scope._coordinator;\r\n      var store = scope._store;\r\n\r\n      coordinator.on('renderpartial', renderer.renderPartial, renderer);\r\n      coordinator.on('renderall', renderer.renderAll, renderer);\r\n      coordinator.on('extremachange', function(data) {\r\n        scope._config.onExtremaChange &&\r\n        scope._config.onExtremaChange({\r\n          min: data.min,\r\n          max: data.max,\r\n          gradient: scope._config['gradient'] || scope._config['defaultGradient']\r\n        });\r\n      });\r\n      store.setCoordinator(coordinator);\r\n    };\r\n\r\n\r\n    function Heatmap() {\r\n      var config = this._config = Util.merge(HeatmapConfig, arguments[0] || {});\r\n      this._coordinator = new Coordinator();\r\n      if (config['plugin']) {\r\n        var pluginToLoad = config['plugin'];\r\n        if (!HeatmapConfig.plugins[pluginToLoad]) {\r\n          throw new Error('Plugin \\''+ pluginToLoad + '\\' not found. Maybe it was not registered.');\r\n        } else {\r\n          var plugin = HeatmapConfig.plugins[pluginToLoad];\r\n          // set plugin renderer and store\r\n          this._renderer = new plugin.renderer(config);\r\n          this._store = new plugin.store(config);\r\n        }\r\n      } else {\r\n        this._renderer = new Renderer(config);\r\n        this._store = new Store(config);\r\n      }\r\n      _connect(this);\r\n    };\r\n\r\n    // @TODO:\r\n    // add API documentation\r\n    Heatmap.prototype = {\r\n      addData: function() {\r\n        this._store.addData.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      removeData: function() {\r\n        this._store.removeData && this._store.removeData.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      setData: function() {\r\n        this._store.setData.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      setDataMax: function() {\r\n        this._store.setDataMax.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      setDataMin: function() {\r\n        this._store.setDataMin.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      configure: function(config) {\r\n        this._config = Util.merge(this._config, config);\r\n        this._renderer.updateConfig(this._config);\r\n        this._coordinator.emit('renderall', this._store._getInternalData());\r\n        return this;\r\n      },\r\n      repaint: function() {\r\n        this._coordinator.emit('renderall', this._store._getInternalData());\r\n        return this;\r\n      },\r\n      getData: function() {\r\n        return this._store.getData();\r\n      },\r\n      getDataURL: function() {\r\n        return this._renderer.getDataURL();\r\n      },\r\n      getValueAt: function(point) {\r\n\r\n        if (this._store.getValueAt) {\r\n          return this._store.getValueAt(point);\r\n        } else  if (this._renderer.getValueAt) {\r\n          return this._renderer.getValueAt(point);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    };\r\n\r\n    return Heatmap;\r\n\r\n  })();\r\n\r\n\r\n// core\r\n  var heatmapFactory = {\r\n    create: function(config) {\r\n      return new Heatmap(config);\r\n    },\r\n    register: function(pluginKey, plugin) {\r\n      HeatmapConfig.plugins[pluginKey] = plugin;\r\n    }\r\n  };\r\n\r\n  return heatmapFactory;\r\n\r\n}\r\nlet h337 = heatmap();\r\nexport default h337;\r\n","import { Vector3, Vector2, Float32BufferAttribute, BufferGeometry } from 'three';\r\n\r\n//copy from three.js/src/geometries/TubeBufferGeometry.js\r\nclass TubeScalableBufferGeometry extends BufferGeometry {\r\n\r\n  constructor( path, tubularSegments = 64, radius = 1, radialSegments = 8, closed = false ) {\r\n\r\n    super();\r\n    this.type = 'TubeBufferGeometry';\r\n\r\n    this.parameters = {\r\n      path: path,\r\n      tubularSegments: tubularSegments,\r\n      radius: radius,\r\n      radialSegments: radialSegments,\r\n      closed: closed\r\n    };\r\n\r\n    const frames = path.computeFrenetFrames( tubularSegments, closed );\r\n\r\n    // expose internals\r\n\r\n    this.tangents = frames.tangents;\r\n    this.normals = frames.normals;\r\n    this.binormals = frames.binormals;\r\n\r\n    // helper variables\r\n\r\n    const vertex = new Vector3();\r\n    const normal = new Vector3();\r\n    const uv = new Vector2();\r\n    let P = new Vector3();\r\n\r\n    // buffer\r\n\r\n    const vertices = [];\r\n    const normals = [];\r\n    const cores = [];\r\n    const uvs = [];\r\n    const indices = [];\r\n\r\n    // create buffer data\r\n\r\n    generateBufferData();\r\n\r\n    // build geometry\r\n\r\n    this.setIndex( indices );\r\n    this.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n    this.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n    this.setAttribute( 'core', new Float32BufferAttribute( cores, 3 ) );\r\n    this.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    // functions\r\n\r\n    function generateBufferData() {\r\n\r\n      for ( let i = 0; i < tubularSegments; i ++ ) {\r\n\r\n        generateSegment( i );\r\n\r\n      }\r\n\r\n      // if the geometry is not closed, generate the last row of vertices and normals\r\n      // at the regular position on the given path\r\n      //\r\n      // if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\r\n\r\n      generateSegment( ( closed === false ) ? tubularSegments : 0 );\r\n\r\n      // uvs are generated in a separate function.\r\n      // this makes it easy compute correct values for closed geometries\r\n\r\n      generateUVs();\r\n\r\n      // finally create faces\r\n\r\n      generateIndices();\r\n\r\n    }\r\n\r\n    function generateSegment( i ) {\r\n\r\n      // we use getPointAt to sample evenly distributed points from the given path\r\n\r\n      P = path.getPointAt( i / tubularSegments, P );\r\n\r\n      // retrieve corresponding normal and binormal\r\n\r\n      const N = frames.normals[ i ];\r\n      const B = frames.binormals[ i ];\r\n\r\n      // generate normals and vertices for the current segment\r\n\r\n      for ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n        const v = j / radialSegments * Math.PI * 2;\r\n\r\n        const sin = Math.sin( v );\r\n        const cos = - Math.cos( v );\r\n\r\n        // normal\r\n\r\n        normal.x = ( cos * N.x + sin * B.x );\r\n        normal.y = ( cos * N.y + sin * B.y );\r\n        normal.z = ( cos * N.z + sin * B.z );\r\n        normal.normalize();\r\n\r\n        normals.push( normal.x, normal.y, normal.z );\r\n\r\n        // vertex\r\n\r\n        vertex.x = P.x + radius * normal.x;\r\n        vertex.y = P.y + radius * normal.y;\r\n        vertex.z = P.z + radius * normal.z;\r\n\r\n        vertices.push( vertex.x, vertex.y, vertex.z );\r\n        cores.push(P.x, P.y, P.z);\r\n      }\r\n\r\n    }\r\n\r\n    function generateIndices() {\r\n\r\n      for ( let j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n        for ( let i = 1; i <= radialSegments; i ++ ) {\r\n\r\n          const a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n          const b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n          const c = ( radialSegments + 1 ) * j + i;\r\n          const d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n          // faces\r\n\r\n          indices.push( a, b, d );\r\n          indices.push( b, c, d );\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function generateUVs() {\r\n\r\n      for ( let i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n        for ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n          uv.x = i / tubularSegments;\r\n          uv.y = j / radialSegments;\r\n\r\n          uvs.push( uv.x, uv.y );\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n  toJSON() {\r\n\r\n    const data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n    data.path = this.parameters.path.toJSON();\r\n\r\n    return data;\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default TubeScalableBufferGeometry;\r\n","/*\r\n* https://github.com/dy/bitmap-sdf\r\n* Calculate SDF for image/bitmap/bw data\r\n* This project is a fork of MapBox's TinySDF that works directly on an input Canvas instead of generating the glyphs themselves.\r\n*/\r\n\r\n    var INF = 1e20;\r\n\r\n    function clamp(value, min, max) {\r\n        return min < max\r\n            ? (value < min ? min : value > max ? max : value)\r\n            : (value < max ? max : value > min ? min : value)\r\n    }\r\n\r\n    function calcSDF(src, options) {\r\n        if (!options) options = {}\r\n\r\n        var cutoff = options.cutoff == null ? 0.25 : options.cutoff\r\n        var radius = options.radius == null ? 8 : options.radius\r\n        var channel = options.channel || 0\r\n        var w, h, size, data, intData, stride, ctx, canvas, imgData, i, l\r\n\r\n        // handle image container\r\n        if (ArrayBuffer.isView(src) || Array.isArray(src)) {\r\n            if (!options.width || !options.height) throw Error('For raw data width and height should be provided by options')\r\n            w = options.width, h = options.height\r\n            data = src\r\n\r\n            if (!options.stride) stride = Math.floor(src.length / w / h)\r\n            else stride = options.stride\r\n        }\r\n        else {\r\n            if (window.HTMLCanvasElement && src instanceof window.HTMLCanvasElement) {\r\n                canvas = src\r\n                ctx = canvas.getContext('2d')\r\n                w = canvas.width, h = canvas.height\r\n                imgData = ctx.getImageData(0, 0, w, h)\r\n                data = imgData.data\r\n                stride = 4\r\n            }\r\n            else if (window.CanvasRenderingContext2D && src instanceof window.CanvasRenderingContext2D) {\r\n                canvas = src.canvas\r\n                ctx = src\r\n                w = canvas.width, h = canvas.height\r\n                imgData = ctx.getImageData(0, 0, w, h)\r\n                data = imgData.data\r\n                stride = 4\r\n            }\r\n            else if (window.ImageData && src instanceof window.ImageData) {\r\n                imgData = src\r\n                w = src.width, h = src.height\r\n                data = imgData.data\r\n                stride = 4\r\n            }\r\n        }\r\n\r\n        size = Math.max(w, h)\r\n\r\n        //convert int data to floats\r\n        if ((window.Uint8ClampedArray && data instanceof window.Uint8ClampedArray) || (window.Uint8Array && data instanceof window.Uint8Array)) {\r\n            intData = data\r\n            data = Array(w * h)\r\n\r\n            for (i = 0, l = intData.length; i < l; i++) {\r\n                data[i] = intData[i * stride + channel] / 255\r\n            }\r\n        }\r\n        else {\r\n            if (stride !== 1) throw Error('Raw data can have only 1 value per pixel')\r\n        }\r\n\r\n        // temporary arrays for the distance transform\r\n        var gridOuter = Array(w * h)\r\n        var gridInner = Array(w * h)\r\n        var f = Array(size)\r\n        var d = Array(size)\r\n        var z = Array(size + 1)\r\n        var v = Array(size)\r\n\r\n        for (i = 0, l = w * h; i < l; i++) {\r\n            var a = data[i]\r\n            gridOuter[i] = a === 1 ? 0 : a === 0 ? INF : Math.pow(Math.max(0, 0.5 - a), 2)\r\n            gridInner[i] = a === 1 ? INF : a === 0 ? 0 : Math.pow(Math.max(0, a - 0.5), 2)\r\n        }\r\n\r\n        edt(gridOuter, w, h, f, d, v, z)\r\n        edt(gridInner, w, h, f, d, v, z)\r\n\r\n        var dist = window.Float32Array ? new Float32Array(w * h) : new Array(w * h)\r\n\r\n        for (i = 0, l = w * h; i < l; i++) {\r\n            dist[i] = clamp(1 - ((gridOuter[i] - gridInner[i]) / radius + cutoff), 0, 1)\r\n        }\r\n\r\n        return dist\r\n    }\r\n\r\n    // 2D Euclidean distance transform by Felzenszwalb & Huttenlocher https://cs.brown.edu/~pff/dt/\r\n    function edt(data, width, height, f, d, v, z) {\r\n        for (var x = 0; x < width; x++) {\r\n            for (var y = 0; y < height; y++) {\r\n                f[y] = data[y * width + x]\r\n            }\r\n            edt1d(f, d, v, z, height)\r\n            for (y = 0; y < height; y++) {\r\n                data[y * width + x] = d[y]\r\n            }\r\n        }\r\n        for (y = 0; y < height; y++) {\r\n            for (x = 0; x < width; x++) {\r\n                f[x] = data[y * width + x]\r\n            }\r\n            edt1d(f, d, v, z, width)\r\n            for (x = 0; x < width; x++) {\r\n                data[y * width + x] = Math.sqrt(d[x])\r\n            }\r\n        }\r\n    }\r\n\r\n    // 1D squared distance transform\r\n    function edt1d(f, d, v, z, n) {\r\n        v[0] = 0;\r\n        z[0] = -INF\r\n        z[1] = +INF\r\n\r\n        for (var q = 1, k = 0; q < n; q++) {\r\n            var s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k])\r\n            while (s <= z[k]) {\r\n                k--\r\n                s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k])\r\n            }\r\n            k++\r\n            v[k] = q\r\n            z[k] = s\r\n            z[k + 1] = +INF\r\n        }\r\n\r\n        for (q = 0, k = 0; q < n; q++) {\r\n            while (z[k + 1] < q) k++\r\n            d[q] = (q - v[k]) * (q - v[k]) + f[v[k]]\r\n        }\r\n    }\r\n\r\nexport default calcSDF;\r\n","export default /* glsl */`\r\nuniform float size;\r\n\r\nvoid main() {\r\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n    gl_PointSize = size;\r\n    \r\n    #ifdef USE_SIZEATTENUATION\r\n\r\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\r\n\r\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\r\n\r\n\t#endif\r\n\t\r\n    gl_Position = projectionMatrix * mvPosition;\r\n}\r\n    `;\r\n","export default /* glsl */`\r\nuniform vec3 color;\r\nuniform float opacity;\r\nuniform float radius_outer; //最大值为0.5\r\nuniform float radius_inner;\r\n\r\nvoid main() {\r\n    gl_FragColor = vec4( color, opacity );\r\n    vec2 diff = vec2(0.5, 0.5) - gl_PointCoord;\r\n    float distanceSquared = dot(diff, diff); \r\n    float outer = radius_outer * radius_outer;\r\n    float inner = radius_inner * radius_inner;\r\n    if ( distanceSquared > outer || distanceSquared < inner ) discard;\r\n}\r\n    `\r\n","export default /* glsl */`\r\nvarying vec2 vUv;\r\nuniform float opacity;\r\n\r\n  void main() {\r\n    vec2 coord = vUv * 11.0;\r\n    float i = mod(coord.x - fract(coord.x), 2.0);\r\n    float j = mod(coord.y - fract(coord.y), 2.0);\r\n    float val = i*j + (1.0 - i)*(1.0 - j);\r\n\r\n    vec3 color = vec3(1.0) * val;   \r\n    // vec3 color = vec3(vUv.x, 0.3, vUv.y);\r\n\r\n    gl_FragColor = vec4(color, opacity);\r\n  }\r\n    `\r\n","export default /* glsl */`\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    vUv = uv;\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n    `;\r\n","export default /* glsl */`\r\nvarying vec2 vUv;\r\nuniform mat3 uvTransform;\r\n\r\nattribute vec3 core;\r\nuniform float radius;\r\n\r\nvoid main() {\r\n    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\r\n    vec3 pos = core + normal*radius;\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\r\n}\r\n    `;\r\n","export default /* glsl */`\r\nvarying vec2 vUv;\r\nuniform sampler2D map;\r\n\r\nvoid main() {\r\n    vec4 tColor = texture2D(map, vUv);\r\n    gl_FragColor = tColor;\r\n}\r\n    `;\r\n","import {Vector3, Vector2, Color, BufferGeometry, BufferAttribute, PointsMaterial, LineDashedMaterial, Points,\r\n    ShaderMaterial, Sprite, SpriteMaterial, Line, LineLoop, LineBasicMaterial, RepeatWrapping, LinearFilter,\r\n    ExtrudeBufferGeometry, Shape, FrontSide, DoubleSide, MeshLambertMaterial, Path, LineSegments,\r\nMesh, MeshBasicMaterial, TubeBufferGeometry, PlaneBufferGeometry, Texture} from 'three';\r\nimport {LineMaterial} from 'three/examples/jsm/lines/LineMaterial'\r\nimport {LineGeometry} from 'three/examples/jsm/lines/LineGeometry'\r\nimport {Line2} from 'three/examples/jsm/lines/Line2'\r\nimport BufferGeometryUtils from \"../lib_external/BufferGeometryUtils\";\r\n\r\nimport * as Consts from \"../consts/Constants\";\r\nimport Config from \"../configurable/Config\";\r\nimport Path3 from '../lib/Path3'\r\nimport TriangleCut from '../lib/TriangleCut'\r\nimport browser from './Browser'\r\nimport TextureStore from \"./TextureStore\";\r\nimport Earcut from \"../lib_external/Earcut\";\r\nimport Box2 from \"../lib/Box2\";\r\nimport TextSprite from \"../lib/TextSprite\";\r\nimport h337 from \"../lib_external/heatmap\";\r\nimport TubeScalableBufferGeometry from \"../lib/TubeScalableBufferGeometry\";\r\n\r\nimport calcSDF from \"../lib_external/bitmap-sdf\";\r\nimport sdf_vertex from \"../shader/sdf_vertex.glsl\";\r\nimport sdf_fragment from \"../shader/sdf_fragment.glsl\";\r\nimport point_vertex from \"../shader/point_vertex.glsl\";\r\nimport point_fragment from \"../shader/point_fragment.glsl\";\r\nimport measure_fragment from \"../shader/measure_fragment.glsl\";\r\nimport measure_vertex from \"../shader/measure_vertex.glsl\";\r\nimport tube_vertex from \"../shader/tube_vertex.glsl\";\r\nimport tube_fragment from \"../shader/tube_fragment.glsl\";\r\n\r\nlet PI_d2 = Math.PI/2;\r\n\r\n//已知一个点二维坐标（x, y)，由点（0，0）到点（x, y) 记为向量 a, 求向量 a 与 x 轴的夹角。\r\n//其中约定从一个向量 (1, 0) 从旋转到 (0, 1) 为正的90度旋转，而任意一个向量从y轴到x轴为负的90度旋转\r\nfunction getAngle2(x, y) {\r\n    var a = Math.atan2(y, x);\r\n    var ret = a * 180 / Math.PI; //弧度转角度，方便调试\r\n    if (ret > 360) {\r\n        ret -= 360;\r\n    }\r\n    if (ret < 0) {\r\n        ret += 360;\r\n    }\r\n    return ret;\r\n}\r\nlet PI2 = Math.PI * 2;\r\nfunction getAngle(x, y) {\r\n    let a = Math.atan2(y, x);\r\n    if (a > PI2) {\r\n        a -= PI2;\r\n    }\r\n    if (a < 0) {\r\n        a += PI2;\r\n    }\r\n    return a;\r\n}\r\n\r\nfunction angleDiff(srcAngle, dstAngle) {\r\n    let diff = dstAngle - srcAngle;\r\n    if (diff > Math.PI) {\r\n        diff -= PI2;\r\n    } else if (diff < -Math.PI) {\r\n        diff += PI2;\r\n    }\r\n    return diff;\r\n}\r\n\r\nVector2.prototype.angleTo = function (vector) {\r\n    let angle1 = getAngle(vector.x, vector.y)\r\n    let angle2 = getAngle(this.x, this.y)\r\n    return angleDiff(angle2, angle1);\r\n}\r\nVector3.prototype.getVector2 = function () {\r\n    return new Vector2(this.x, this.y);\r\n}\r\n\r\nVector3.prototype.toArrayFixed = function (num) {\r\n    let arr = [];\r\n    arr[0] = parseFloat(this.x.toFixed(num));\r\n    arr[1] = parseFloat(this.y.toFixed(num));\r\n    arr[2] = parseFloat(this.z.toFixed(num));\r\n    return arr;\r\n}\r\n\r\nexport function toInt16TypedArr(arr) {\r\n    let typedArr = new Int16Array(arr.length);\r\n    for (let j = 0; j < typedArr.length; j++) {\r\n        typedArr[j] = arr[j];\r\n    }\r\n    return typedArr;\r\n}\r\n\r\nexport function toFloat32TypedArr(arr) {\r\n    let typedArr = new Float32Array(arr.length);\r\n    for (let j = 0; j < typedArr.length; j++) {\r\n        typedArr[j] = arr[j];\r\n    }\r\n    return typedArr;\r\n}\r\n\r\nexport function flatten(vertices) {\r\n    let size = vertices[0].z != undefined ? 3 : 2;\r\n    let arr = new Float32Array(vertices.length * size);\r\n    let count = 0;\r\n    vertices.forEach(vector => {\r\n        arr[count++] = vector.x;\r\n        arr[count++] = vector.y;\r\n        if (size == 3)\r\n            arr[count++] = vector.z;\r\n    });\r\n    return arr;\r\n}\r\nexport function flattenToArr(vertices) {\r\n    let arr = [];\r\n    let count = 0;\r\n    vertices.forEach(vector => {\r\n        arr[count++] = vector.x;\r\n        arr[count++] = vector.y;\r\n        arr[count++] = vector.z;\r\n    });\r\n    return arr;\r\n}\r\n\r\nexport function bufferAttributeToVertices(attr) {\r\n    let vertices = [];\r\n    for (let i = 0; i < attr.count; i++) {\r\n        let vertex = new Vector3().fromBufferAttribute(attr, i);\r\n        vertices.push(vertex);\r\n    }\r\n    return vertices;\r\n}\r\n\r\nexport function toVector3Arr(arr) {\r\n    let lst = [];\r\n    arr.forEach(it => lst.push(new Vector3(it.x, it.y, 0)));\r\n    return lst;\r\n}\r\nexport function vectorsToObjXY(arr) {\r\n    let lst = [];\r\n    arr.forEach(it => lst.push({x: it.x, y: it.y}));\r\n    return lst;\r\n}\r\n\r\nexport function getMinNum(numArr) {\r\n    let min = Infinity;\r\n    for (let num of numArr) {\r\n        if (min > num) {\r\n            min = num;\r\n        }\r\n    }\r\n    return min;\r\n}\r\n\r\nexport function convertLightObject(light) {\r\n    if (!light)\r\n        return null;\r\n    let obj = {\r\n        id: light.uuid,\r\n        name: Consts.getLightTypeName(light),\r\n        type: Consts.getLightType(light),\r\n        position: light.position.clone(),\r\n        color: light.color.clone(),\r\n        groundColor: light.groundColor ? light.groundColor.clone() : null,\r\n        angle: light.angle,\r\n        intensity: light.intensity,\r\n        distance: light.distance,\r\n        visible: light.visible\r\n    };\r\n    return obj;\r\n}\r\n\r\nfunction drawGridOrigin(size) {\r\n    let canvas = document.createElement( 'canvas' );\r\n    let ctx = canvas.getContext( '2d' );\r\n    canvas.height = size*2;\r\n    canvas.width = size*2;\r\n\r\n    let p0 = {x: size*2, y: size}, p1 = {x: size, y: 0};\r\n    let p2 = {x: 0, y: size}, p3 = {x: size, y: size*2};\r\n    ctx.beginPath();\r\n    ctx.moveTo(p0.x, p0.y);\r\n    ctx.lineTo(p1.x, p1.y);\r\n    ctx.lineTo(p2.x, p2.y);\r\n    ctx.lineTo(p3.x, p3.y);\r\n    ctx.closePath();\r\n    ctx.fillStyle = '#000';\r\n    ctx.fill();\r\n\r\n    return canvas;\r\n}\r\n\r\nexport function getGridOrigin(size) {\r\n    let canvas = drawGridOrigin(size);\r\n    let sprite = makeCanvasSprite(canvas);\r\n    sprite.material.transparent = true;\r\n    return sprite;\r\n}\r\nexport function getGridOrigin2(size) {\r\n    let allVertices = [new Vector3(size, 0, 0), new Vector3(0, size, 0),\r\n        new Vector3(-size, 0, 0), new Vector3(0, -size, 0)];\r\n    let geometry = new BufferGeometry();\r\n    geometry.setAttribute(\"position\", new BufferAttribute(flatten(allVertices), 3));\r\n    geometry.setIndex([0,1,2, 0,2,3]);\r\n    let material = new MeshBasicMaterial({\r\n        color: '#000000',\r\n        transparent: true,\r\n        opacity: 1,\r\n        depthTest: false,\r\n        depthWrite: false\r\n    });\r\n    let mesh = new Mesh(geometry, material);\r\n    return mesh;\r\n}\r\nexport function getRectangelPoints(startVector, endVector) {\r\n    let minX, minY, maxX, maxY;\r\n    if (startVector.x > endVector.x) {\r\n        maxX = startVector.x, minX = endVector.x;\r\n    } else {\r\n        maxX = endVector.x, minX = startVector.x;\r\n    }\r\n    if (startVector.y > endVector.y) {\r\n        maxY = startVector.y, minY = endVector.y;\r\n    } else {\r\n        maxY = endVector.y, minY = startVector.y;\r\n    }\r\n    let p0 = new Vector3(minX, maxY, 0), p1 = new Vector3(minX, minY, 0);\r\n    let p2 = new Vector3(maxX, minY, 0), p3 = new Vector3(maxX, maxY, 0);\r\n    return [p0, p1, p2, p3];\r\n}\r\n\r\nexport function getCirclePoints(startVector, endVector, segment) {\r\n    let radius = startVector.distanceTo(endVector);\r\n    let dx = endVector.x - startVector.x;\r\n    let cosA = dx / radius;\r\n    let startAngle = 0;\r\n    if (endVector.y >= startVector.y) {\r\n        startAngle = Math.acos(cosA);\r\n    } else {\r\n        startAngle = 2 * Math.PI - Math.acos(cosA);\r\n    }\r\n    let seg = segment;\r\n    if (segment == undefined) {\r\n        seg = 32;\r\n    }\r\n    let arr = [];\r\n    for (let i = 0; i < seg; i++) {\r\n        let angle = Math.PI * 2 * i / seg + startAngle;\r\n        let x = Math.cos(angle) * radius;\r\n        let y = Math.sin(angle) * radius;\r\n        arr.push(new Vector3(x, y, 0).add(startVector) );\r\n    }\r\n    return arr;\r\n}\r\n\r\nexport function getPolygonCtrlPoint(index, position, pointColor) {\r\n    let pointsGeometry = new BufferGeometry();\r\n    let typedArr = toFloat32TypedArr([0, 0, 0]);\r\n    pointsGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n    let pColor = pointColor;\r\n    if (pColor == undefined) {\r\n        pColor = 0xbb0000;\r\n    }\r\n    let pointsMaterial = new PointsMaterial({color: pColor, size: 8, sizeAttenuation: false, transparent: true});\r\n    let points = new Points(pointsGeometry, pointsMaterial);\r\n    points.name = 'polygon point ' + index;\r\n    if (position != null) {\r\n        points.position.copy(position);\r\n    } else {\r\n        points.position.set(0,0,0);\r\n    }\r\n    return points;\r\n}\r\n\r\nexport function getMeasurePoint(position, pointColor, measuring) {\r\n    let uniforms = { 'opacity': {value:  1}, 'radius_outer': {value:  0.5},\r\n        'radius_inner': {value:  measuring ? 0.4 : 0.0},\r\n        \"size\": {value: measuring ? 12 : 8}, \"color\": {value: new Color(pointColor)}   };\r\n    let pointsMaterial = new ShaderMaterial( {\r\n        uniforms: uniforms,\r\n        vertexShader: point_vertex,\r\n        fragmentShader: point_fragment,\r\n        side: DoubleSide,\r\n        transparent: true\r\n    } );\r\n    pointsMaterial.depthWrite = pointsMaterial.depthTest = false;\r\n\r\n    let pointsGeometry = new BufferGeometry();\r\n    let typedArr = toFloat32TypedArr([0, 0, 0]);\r\n    pointsGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n\r\n    let points = new Points(pointsGeometry, pointsMaterial);\r\n    points.position.set(position.x, position.y, position.z);\r\n    // points.scale.set(0.03, 0.03, 1);\r\n    return points;\r\n}\r\n\r\nfunction getPolygonGeometry(polygon) {\r\n    let vectices = polygon[0], holeIndices = polygon[1];\r\n    let arr2d = [];\r\n    vectices.forEach(it => {\r\n        arr2d.push(it.x, it.y);\r\n        it.z  = 0;\r\n    });\r\n    let triangles = Earcut.triangulate(arr2d, holeIndices);\r\n    let geometry = new BufferGeometry();\r\n    geometry.setAttribute(\"position\", new BufferAttribute(flatten(vectices), 3));\r\n    geometry.setIndex(triangles);\r\n    return geometry;\r\n}\r\nexport function getPolygonsAreaMesh(polygons) {\r\n    let geometries = [];\r\n    polygons.forEach(it => geometries.push(getPolygonGeometry(it)) );\r\n    let mergedGeo = BufferGeometryUtils.mergeBufferGeometries(geometries);\r\n    let uniforms = { 'opacity': {value:  0.2}   };\r\n    let measureAreaMaterial = new ShaderMaterial( {\r\n        uniforms: uniforms,\r\n        vertexShader: measure_vertex,\r\n        fragmentShader: measure_fragment,\r\n        side: DoubleSide,\r\n        transparent: true\r\n    } );\r\n    let mesh = new Mesh(mergedGeo, measureAreaMaterial);\r\n    updateUvAttribute(mesh);\r\n    return mesh;\r\n}\r\nexport function getMeasuredAreaMesh(points) {\r\n    let arr2d = [];\r\n    points.forEach(pt => arr2d.push(pt.x,pt.y) );\r\n    let triangles = Earcut.triangulate(arr2d, []);\r\n    let geometry = new BufferGeometry();\r\n    geometry.setAttribute(\"position\", new BufferAttribute(flatten(points), 3));\r\n    geometry.setIndex(triangles);\r\n\r\n    let uniforms = { 'opacity': {value:  0.2}   };\r\n    let measureAreaMaterial = new ShaderMaterial( {\r\n        uniforms: uniforms,\r\n        vertexShader: measure_vertex,\r\n        fragmentShader: measure_fragment,\r\n        side: DoubleSide,\r\n        transparent: true\r\n    } );\r\n    let mesh = new Mesh(geometry, measureAreaMaterial);\r\n    updateUvAttribute(mesh);\r\n    return mesh;\r\n}\r\n\r\nexport function getMeasuredLines(points, isLoop) {\r\n    let lineMaterial = new LineMaterial( {\r\n        color: '#ffcc34',\r\n        linewidth: 2, // in pixels\r\n        dashed: false,\r\n        transparent: true,\r\n    } );\r\n    lineMaterial.resolution.set( window.innerWidth, window.innerHeight );\r\n    let lineGeo = new LineGeometry();\r\n    let arr = points.slice();\r\n    if (isLoop)\r\n        arr.push(points[0]);\r\n    lineGeo.setPositions( flatten(arr) );\r\n\r\n    let lineSegment = new Line2(lineGeo, lineMaterial);\r\n    lineSegment.computeLineDistances();\r\n    lineSegment.scale.set( 1, 1, 1 );\r\n    return lineSegment;\r\n}\r\nexport function getMeasuringLineSegment(from, to, dashSize, gapSize) {\r\n    let lGeometry = new BufferGeometry();\r\n    let lineMaterial = new LineDashedMaterial( { color: '#060e17', dashSize: dashSize, gapSize: gapSize, transparent: true } );\r\n    let typedArr = flatten([from, to]);\r\n    lGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n    let lineMesh= new Line(lGeometry, lineMaterial);\r\n    lineMesh.computeLineDistances();\r\n    return lineMesh;\r\n}\r\n\r\nexport function getSliceLineSegment(from, to) {\r\n    let lGeometry = new BufferGeometry();\r\n    let lineMaterial = new LineDashedMaterial( { color: 0x3D4150, dashSize: 0.4, gapSize: 0.2, transparent: true } );\r\n    let typedArr = flatten([from, to]);\r\n    lGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n    let lineMesh= new Line(lGeometry, lineMaterial);\r\n    lineMesh.computeLineDistances();\r\n    return lineMesh;\r\n}\r\n\r\nexport function getRectOutline(width, height, lineColor) {\r\n    let v0 = new Vector3(-width/2, height/2, 0), v1 = new Vector3(width/2, height/2, 0);\r\n    let v2 = new Vector3(width/2, -height/2, 0), v3 = new Vector3(-width/2, -height/2, 0);\r\n    let rectMesh = getPolygonLineMesh([v0, v1, v2, v3], null, true, lineColor);\r\n    rectMesh.material.depthWrite = false, rectMesh.material.depthTest = false;\r\n    rectMesh.material.transparent = true;\r\n    return rectMesh;\r\n}\r\n\r\nexport function getRectMesh(width, height) {\r\n    let v0 = new Vector3(-width/2, height/2, 0), v1 = new Vector3(width/2, height/2, 0);\r\n    let v2 = new Vector3(width/2, -height/2, 0), v3 = new Vector3(-width/2, -height/2, 0);\r\n    let geometry = new BufferGeometry();\r\n    geometry.setAttribute(\"position\", new BufferAttribute(flatten([v0, v1, v2, v3]), 3));\r\n    let rectMesh = new Mesh(geometry, new MeshBasicMaterial({transparent:true,\r\n        color:\"#ff0000\", opacity:0, depthWrite:false, depthTest: false}));\r\n    geometry.setIndex([3,1,0, 3,2,1]);\r\n    return rectMesh;\r\n}\r\n\r\nexport function getPolygonLineMesh(vertices, currentVector, isLoop, lineColor) {\r\n    let lineMaterial = new LineBasicMaterial( { color: lineColor ? lineColor : 0x2b51a9, transparent: true} );\r\n    let lGeometry = new BufferGeometry();\r\n    let typedArr;\r\n    if (currentVector != null) {\r\n        typedArr = flatten(vertices.concat([currentVector]));\r\n    } else {\r\n        typedArr = flatten(vertices);\r\n    }\r\n    lGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n    let lineMesh;\r\n    if (isLoop) {\r\n        lineMesh = new LineLoop(lGeometry, lineMaterial);\r\n    } else {\r\n        lineMesh = new Line(lGeometry, lineMaterial);\r\n    }\r\n    lineMesh.computeLineDistances();\r\n    return lineMesh;\r\n}\r\n\r\nexport function getPathArrowRotation(from, to, pathDirection) {\r\n    let angle = TriangleCut.getAngleWithX_axis(from, to);\r\n    // let deg = angle * 180 / Math.PI;\r\n    if (pathDirection == Consts.pathDirToFrom) {\r\n        angle = Math.PI / 2 + angle;\r\n    } else if (pathDirection == Consts.pathDirFromTo) {\r\n        angle = -Math.PI / 2 + angle;\r\n    }\r\n    return angle;\r\n}\r\nexport function getPathArrow(from, to, pathDirection) {\r\n    let texture;\r\n    if (pathDirection == Consts.pathDirBan) {\r\n        texture = TextureStore.crossOnPath();\r\n    } else {\r\n        texture = TextureStore.arrowOnPath();\r\n    }\r\n\r\n    let material = new SpriteMaterial({\r\n        sizeAttenuation: false,\r\n        map: texture,\r\n        // alphaTest: 0.5,\r\n        // color: 0xbb0000,\r\n        transparent: true\r\n    });\r\n    let spriteObj = new Sprite(material);\r\n    spriteObj.position.copy(from.clone().lerp(to, 0.5));\r\n\r\n    spriteObj.material.rotation = getPathArrowRotation(from, to, pathDirection);\r\n\r\n    let scale = 1 / 32;\r\n    spriteObj.scale.set( scale, scale, 1.0 );\r\n\r\n    return spriteObj;\r\n}\r\n\r\nexport function getPathIndicator(points, cost, backgroundColor, scalar, phi) {\r\n    scalar = scalar || 1;\r\n    phi = phi || 0;\r\n    let zHeight = 0.2;\r\n    let Tube = {segments:80, radius:0.15, radialSegments:8,\r\n        offsetX: 0,\r\n        offsetY: (phi/PI_d2) * 0.5,\r\n        repeatX: 10,\r\n        repeatY: 2,\r\n        centerX: 0.5,\r\n        centerY: 0.5};\r\n\r\n    points.forEach(it => it.z = zHeight);\r\n    let path = new Path3( points);\r\n    let repeatX = Tube.repeatX * path.getLength() / (10 * Math.sqrt(scalar));\r\n    let canvas = TextureStore.getPathIndicatorCanvas(backgroundColor);\r\n    let texture = new Texture(canvas);\r\n    texture.needsUpdate = true;\r\n    texture.wrapS = texture.wrapT = RepeatWrapping;\r\n    texture.offset.set( Tube.offsetX, Tube.offsetY );\r\n    texture.repeat.set( repeatX, Tube.repeatY );\r\n    texture.center.set( Tube.centerX, Tube.centerY );\r\n    // let meshMaterial = new MeshBasicMaterial( {   map:texture} );\r\n    texture.updateMatrix();\r\n    let uniforms = { 'radius': {value: Tube.radius},\r\n        \"uvTransform\": {value: texture.matrix},\r\n        \"map\": {value:texture}  };\r\n    let shaderMaterial = new ShaderMaterial( {\r\n        uniforms: uniforms,\r\n        vertexShader: tube_vertex,\r\n        fragmentShader: tube_fragment,\r\n        side: DoubleSide\r\n    } );\r\n    shaderMaterial.map = texture;\r\n    let geometry = new TubeScalableBufferGeometry( path, Tube.segments, Tube.radius * scalar, Tube.radialSegments, false );\r\n    let indicator = new Mesh(geometry, shaderMaterial);\r\n    indicator.userData.tubeSetting = Tube;\r\n    indicator.userData.tubeCurve = path;\r\n    return indicator;\r\n}\r\n\r\nexport function scalePathIndicator(indicator, scalar) {\r\n    let Tube = indicator.userData.tubeSetting;\r\n    let path = indicator.userData.tubeCurve;\r\n    // let geometry = new TubeBufferGeometry( path, Tube.segments, Tube.radius * scalar, Tube.radialSegments, false );\r\n    // let posAttr = indicator.geometry.attributes.position;\r\n    // posAttr.copy(geometry.attributes.position);\r\n    // posAttr.needsUpdate = true;\r\n\r\n    // indicator.scale.set(scalar, scalar, scalar);\r\n\r\n    let repeatX = Tube.repeatX * path.getLength() / (10 * Math.sqrt(scalar));\r\n    let texture = indicator.material.map;\r\n    texture.repeat.set( repeatX, Tube.repeatY );\r\n    texture.updateMatrix();\r\n    let uniforms = indicator.material.uniforms;\r\n    uniforms.radius.value = Tube.radius * scalar;\r\n    uniforms.uvTransform.value = texture.matrix;\r\n}\r\n\r\nexport function getStartEndIcon(isStart, position) {\r\n    let sprite;\r\n    if (isStart) {\r\n        sprite = getPositionMarker(null, \"#ee6224\")\r\n    } else {\r\n        sprite = getPositionMarker(null, \"#4e76ee\")\r\n    }\r\n    sprite.material.depthWrite = false;\r\n    sprite.material.depthTest = false;\r\n    if (position != null) {\r\n        sprite.position.copy(position);\r\n    }\r\n    return sprite;\r\n}\r\nexport function getPathCtrlPoint(position, pointType) {\r\n    let pointsGeometry = new BufferGeometry();\r\n    let typedArr = toFloat32TypedArr([0, 0, 0]);\r\n    pointsGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n    let texture = TextureStore.pointTexture(pointType);\r\n\r\n    let pointsMaterial = new PointsMaterial({size: 12, sizeAttenuation: false, map: texture, alphaTest: 0.5,\r\n        transparent: true});//color: 0x00ff00,\r\n    let points = new Points(pointsGeometry, pointsMaterial);\r\n    if (position != null) {\r\n        points.position.copy(position);\r\n    } else {\r\n        points.position.set(0,0,0);\r\n    }\r\n    points.userData.isRing = true;\r\n    return points;\r\n}\r\n\r\nexport function getDashedOutLine(vertices) {\r\n    let lGeometry = new BufferGeometry();\r\n    let lineMaterial = new LineDashedMaterial( { color: 0x3D4150, dashSize: 0.3, gapSize: 0.2 } );\r\n    lineMaterial.transparent = true;\r\n    let vLst = vertices.slice();\r\n    vLst.push(vertices[0]);\r\n    let typedArr = flatten(vLst);\r\n    lGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n    let lineMesh= new Line(lGeometry, lineMaterial);\r\n    lineMesh.computeLineDistances();\r\n    return lineMesh;\r\n}\r\n\r\nexport function getPathSegment(from, to, pathType) {\r\n    let lineMaterial = new LineMaterial( {\r\n        color: 0x165816,\r\n        linewidth: 4, // in pixels\r\n        dashed: false\r\n    } );\r\n    if (pathType == Consts.pathTypeMiddle) {\r\n        lineMaterial.linewidth = 3;\r\n        lineMaterial.color.setStyle('#419b4e');\r\n    } else if (pathType == Consts.pathTypeThin) {\r\n        lineMaterial.linewidth = 2;\r\n        lineMaterial.color.setStyle('#a4f17f');\r\n    } else if (pathType == Consts.pathTypeSelected) {\r\n        lineMaterial.linewidth = 5;\r\n        lineMaterial.color.setStyle('#ff0000');\r\n    } else if (pathType == Consts.pathTypeFinded) {\r\n        lineMaterial.linewidth = 6;\r\n        lineMaterial.color.setStyle('#4dc168');\r\n    } else if (pathType == Consts.pathTypeAdding) {\r\n        lineMaterial.linewidth = 2;\r\n        lineMaterial.color.setStyle('#519AF1');\r\n    }\r\n    lineMaterial.resolution.set( window.innerWidth, window.innerHeight );\r\n    let lineGeo = new LineGeometry();\r\n    lineGeo.setPositions( [from.x, from.y, from.z, to.x, to.y, to.z] );\r\n\r\n    let lineSegment = new Line2(lineGeo, lineMaterial);\r\n    lineSegment.computeLineDistances();\r\n    lineSegment.scale.set( 1, 1, 1 );\r\n    return lineSegment;\r\n}\r\n\r\nfunction fillIndices(start, end, indices) {\r\n    for (let i = start; i < end; i++) {\r\n        let next = i >= end - 1 ? start : i + 1;\r\n        indices.push(i, next);\r\n    }\r\n}\r\nexport function createLines3d(param) {\r\n    let verticesAll = param.vectices.slice();\r\n    let indices = [];\r\n    fillIndices(0, verticesAll.length, indices);\r\n    for (let arr of param.holesVectices) {\r\n        fillIndices(verticesAll.length, verticesAll.length + arr.length, indices);\r\n        verticesAll.push(...arr);\r\n    }\r\n    let offset = verticesAll.length;\r\n    let indices2 = indices.map(it => it + offset);\r\n    indices = indices.concat(indices2);\r\n    for (let i = 0; i < offset; i++) {\r\n        indices.push(i, i + offset);\r\n    }\r\n\r\n    let verticesAll2 = verticesAll.map(it => {\r\n        let vector = it.clone();\r\n        vector.z += param.height;\r\n        return vector;\r\n    });\r\n    verticesAll = verticesAll.concat(verticesAll2);\r\n\r\n    let geometry = new BufferGeometry();\r\n    geometry.setIndex( indices );\r\n    geometry.setAttribute( 'position', new BufferAttribute( flatten(verticesAll), 3 ) );\r\n\r\n    let lineSegments = new LineSegments(geometry, new LineBasicMaterial( { color: '#090', toneMapped: false } ));\r\n    lineSegments.material.color.fromArray(param.meshColor);\r\n    lineSegments.position.fromArray(param.position);\r\n    return lineSegments;\r\n}\r\n\r\n//height, vectices, holesVectices, opacity, meshColor(arr), position(arr), scale(arr), quaternion(arr), lineColor\r\nexport function createModel3D(param) {\r\n    let extrudeSettings = {\r\n        depth: param.height,\r\n        steps: 1,\r\n        bevelEnabled: false\r\n    };\r\n    let shape = new Shape( param.vectices );\r\n    for (let arr of param.holesVectices) {\r\n        shape.holes.push(new Path(arr));\r\n    }\r\n\r\n    let geometry = new ExtrudeBufferGeometry( shape, extrudeSettings );\r\n\r\n    let material;\r\n    if (Config.ui.noLight) {\r\n        material = new MeshBasicMaterial( { transparent: true, opacity: param.opacity} );\r\n    } else {\r\n        material = new MeshLambertMaterial( {transparent: true, opacity: param.opacity, side: FrontSide, flatShading: true } );\r\n    }\r\n    material.color.fromArray(param.meshColor);\r\n\r\n    let model3d = new Mesh( geometry, material );\r\n    model3d.position.fromArray(param.position);\r\n    model3d.scale.fromArray(param.scale);\r\n    model3d.quaternion.fromArray(param.quaternion);\r\n\r\n    let outline = getPolygonLineMesh(param.vectices, null, true, new Color().fromArray(param.lineColor) );\r\n    //create holes' outlines\r\n    let holes = [outline];\r\n    param.holesVectices.forEach(arr => {\r\n        let holeOutline = getPolygonLineMesh(arr, null, true, new Color().fromArray(param.lineColor) );\r\n        holes.push(holeOutline);\r\n    });\r\n\r\n    holes.forEach(it => {\r\n        model3d.add(it);\r\n        it.position.z = param.height;\r\n        it.material.color.fromArray(param.lineColor)\r\n    });\r\n    return model3d;\r\n}\r\n\r\nexport function updateUvAttribute(mesh) {\r\n    let attr = mesh.geometry.attributes.position.clone();\r\n    attr.applyMatrix4(mesh.matrixWorld);\r\n    let vertices = bufferAttributeToVertices(attr);\r\n\r\n    let originBox = new Box2();\r\n    originBox.setFromPoints(vertices);\r\n    let w = originBox.max.x - originBox.min.x;\r\n    let h = originBox.max.y - originBox.min.y;\r\n    let val = w > h ? w : h;\r\n    let offset = {x:0, y:0};\r\n    w > h ? offset.y = (w-h)/2 : offset.x = (h-w)/2;\r\n    let vector2Lst = [];\r\n    vertices.forEach(vector3 => {\r\n        vector3.sub(originBox.min);\r\n        let ux = (vector3.x + offset.x) / val, uy = (vector3.y + offset.y) / val;\r\n        vector2Lst.push(new Vector2(ux, uy));\r\n    });\r\n    mesh.geometry.setAttribute(\"uv\", new BufferAttribute(flatten(vector2Lst), 2));\r\n}\r\n\r\nfunction getRandHeatmapDataList(size, width, height, max) {\r\n    let target = [];\r\n    for (let i = 0; i < size; i++) {\r\n        let x = Math.random() * width, y = Math.random() * height;\r\n        let obj = {x: ~~x, y: ~~y, value: ~~(max * Math.random()) };\r\n        target.push(obj);\r\n    }\r\n    return target;\r\n}\r\n\r\nfunction convertHeatmapData4Canvas(posDataLst, squarePos) {\r\n    let dataLst = [], scale = 256.0 / squarePos.z;\r\n    posDataLst.forEach(it => {\r\n        dataLst.push({value: it.value, x: ~~((it.x - squarePos.x) * scale),\r\n            //这里之所以要反转y，是因为在canvas中绘制时，使用的是屏幕坐标系，坐标原点位于屏幕左上角\r\n            //uv贴图的坐标原点位于屏幕左下角，将屏幕坐标以 x轴旋转180度，就是uv贴图的坐标系\r\n            y: 512 - ~~((it.y - squarePos.y) * scale)});\r\n    });\r\n    return dataLst;\r\n}\r\n\r\nexport function getHeatmapMaterial(material, posDataLst, squarePos, maxVal) {\r\n    let heatmapDataLst = convertHeatmapData4Canvas(posDataLst, squarePos);\r\n    if (material) {\r\n        material.userData.heatmapInstance.setData({data:heatmapDataLst, max: maxVal});\r\n        material.map.needsUpdate = true;\r\n    } else {\r\n        let div = document.createElement('div');\r\n        let heatmapInstance = h337.create({\r\n            container: div,\r\n            width: 512, height: 512\r\n        });\r\n        heatmapInstance.setData({data:heatmapDataLst, max: maxVal});\r\n        let canvas = div.children[0];\r\n        let texture = new Texture(canvas);\r\n        texture.needsUpdate = true;\r\n        material = new MeshBasicMaterial({transparent: true, opacity: 1, map: texture, side:FrontSide});\r\n        material.depthWrite = material.depthTest = false;\r\n        material.userData.heatmapInstance = heatmapInstance;\r\n    }\r\n    return material;\r\n}\r\n\r\nexport function getRandHeatmapMaterial() {\r\n    // let canvas = document.createElement( 'canvas' );\r\n    // canvas.width = 512;\r\n    // canvas.height = 512;\r\n    let div = document.createElement('div');\r\n    let maxVal = 101;\r\n    let dataList = getRandHeatmapDataList(100, 512, 512, maxVal);\r\n    // let drawer = new HeatMapDraw(canvas, 47);\r\n    // drawer.setData(dataList);\r\n\r\n    let heatmapInstance = h337.create({\r\n        container: div,\r\n        width: 512, height: 512\r\n    });\r\n    heatmapInstance.setData({data:dataList, max: maxVal});\r\n    let canvas = div.children[0];\r\n\r\n    let texture = new Texture(canvas);\r\n    texture.needsUpdate = true;\r\n    let material = new MeshBasicMaterial({transparent: true, opacity: 1, map: texture, side:FrontSide});\r\n    material.depthWrite = material.depthTest = false;\r\n    return material;\r\n}\r\n\r\nexport function createMesh4Heatmap(vectices, holesVectices, matrix4, height, materialProvided) {\r\n    let arr2d = [];\r\n    let allVertices = vectices.slice();\r\n    let holeIndices = [];\r\n    if (holesVectices.length > 0) {\r\n        let cur = vectices.length;\r\n        holesVectices.forEach(arr => {\r\n            allVertices.push(...arr);\r\n            holeIndices.push(cur);\r\n            cur += arr.length;\r\n        });\r\n    }\r\n\r\n    allVertices.forEach(it => {\r\n        arr2d.push(it.x, it.y);\r\n        it.z = height;\r\n    });\r\n    let triangles = Earcut.triangulate(arr2d, holeIndices);\r\n\r\n    let geometry = new BufferGeometry();\r\n    geometry.setAttribute(\"position\", new BufferAttribute(flatten(allVertices), 3));\r\n    geometry.attributes.position.applyMatrix4(matrix4);\r\n    geometry.setIndex(triangles);\r\n    let material = materialProvided;\r\n    if (!material)\r\n        material = getRandHeatmapMaterial();\r\n    let mesh = new Mesh(geometry, material);\r\n    updateUvAttribute(mesh);\r\n    return mesh;\r\n}\r\n\r\nexport function drawLocationBaseCircle(radius, lineWidth) {\r\n    let canvas = document.createElement( 'canvas' );\r\n    let ctx = canvas.getContext( '2d' );\r\n    canvas.width = (radius+lineWidth)*2;\r\n    canvas.height = (radius+lineWidth)*2; // fontsize * 1.5\r\n\r\n    ctx.beginPath();\r\n    ctx.fillStyle = \"rgba(101,89,255,0.6)\";\r\n    ctx.strokeStyle = \"#1d2b88\";\r\n    ctx.lineWidth = lineWidth;\r\n    ctx.arc(canvas.width/2, canvas.height/2, radius, Math.PI*2, false);\r\n    ctx.fill();\r\n    ctx.stroke();\r\n    return canvas;\r\n}\r\n\r\nexport function drawLocationMarker(radius, lineWidth, color) {\r\n    let canvas = document.createElement( 'canvas' );\r\n    let ctx = canvas.getContext( '2d' );\r\n    canvas.width = (radius + lineWidth) * 4;\r\n    canvas.height = (radius + lineWidth) * 4; // fontsize * 1.5\r\n    let hw = canvas.width / 2;\r\n    let p0 = {x: radius+lineWidth*2, y: hw};\r\n    let p1 = {x: 3*radius+lineWidth*2, y: hw}, p2 = {x: hw, y: lineWidth};\r\n    ctx.beginPath();\r\n    ctx.moveTo(p0.x, p0.y);\r\n    ctx.lineTo(p1.x, p1.y);\r\n    ctx.lineTo(p2.x, p2.y);\r\n    ctx.closePath();\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n\r\n    ctx.beginPath();\r\n    ctx.fillStyle = color;\r\n    ctx.strokeStyle = \"#fff\";\r\n    ctx.lineWidth = lineWidth;\r\n    ctx.arc(canvas.width/2, canvas.height/2, radius, Math.PI*2, false);\r\n    ctx.fill();\r\n    ctx.stroke();\r\n    return canvas;\r\n}\r\n\r\nexport function makeGpsIndicatorSprite() {\r\n    let canvas = drawLocationMarker(25, 10, \"#365cbb\");\r\n    let sprite = makeCanvasSprite(canvas);\r\n    sprite.material.depthWrite = false;\r\n    sprite.material.depthTest = false;\r\n    return sprite;\r\n}\r\n\r\nexport function makeGpsIndicatorPlane() {\r\n    let canvas = drawLocationMarker(25, 10, \"#365cbb\");\r\n    let geometry = new PlaneBufferGeometry(2, 2, 1, 1);\r\n    let texture = new Texture(canvas);\r\n    texture.needsUpdate = true;\r\n    let material = new MeshBasicMaterial({map: texture, depthWrite:false, depthTest: false, transparent: true});\r\n    // let material = new MeshBasicMaterial({color:'#b0b', wireframe:true});\r\n    let plane = new Mesh(geometry, material);\r\n    return plane\r\n}\r\n\r\nexport function makeGpsIndicatorBase() {\r\n    let canvas = drawLocationBaseCircle(150, 5);\r\n    let geometry = new PlaneBufferGeometry(4, 4, 1, 1);\r\n    let texture = new Texture(canvas);\r\n    texture.needsUpdate = true;\r\n    let material = new MeshBasicMaterial({map: texture, transparent: true, opacity:0.3, depthWrite:false, depthTest: false});\r\n    // let material = new MeshBasicMaterial({color:'#b0b', wireframe:true});\r\n    let plane = new Mesh(geometry, material);\r\n    return plane\r\n}\r\n\r\nfunction computeFontSize(str, size, family) {\r\n    let spanDom = document.createElement(\"span\");\r\n    spanDom.style.fontSize = size;\r\n    spanDom.style.opacity = \"0\";\r\n    spanDom.style.fontFamily = family;\r\n    spanDom.innerHTML = str;\r\n    document.body.append(spanDom);\r\n    let sizeD = {};\r\n    sizeD.width = spanDom.offsetWidth;\r\n    sizeD.height = spanDom.offsetHeight;\r\n    spanDom.remove();\r\n    return sizeD;\r\n}\r\n\r\nfunction drawTrackPosMarker(text) {\r\n    let canvas = document.createElement( 'canvas' );\r\n    canvas.width = 230;\r\n    canvas.height = 230;\r\n    let ctx = canvas.getContext('2d');\r\n    // let imgDom = new Image();\r\n    // imgDom.onload = function() {\r\n    //     ctx.drawImage(imgDom, 30, 30, 30, 35);\r\n    // };\r\n    // imgDom.src = \"img_tabs/pathTrackMarker.png\";\r\n    let fontSize = '40px';\r\n    let sizeObj = computeFontSize(text, fontSize, \"Times New Roman\");\r\n    let txtWidth = sizeObj.width;\r\n    console.log(\"drawTrackPosMarker computeFontSize, text=\" + text, sizeObj);\r\n    ctx.drawImage(TextureStore.pathTrackMarkerImg(), 85, 45, 60, 70);\r\n    let textColor = \"#000\";\r\n    ctx.font = fontSize + \" Times New Roman\";\r\n    ctx.fillStyle = textColor;\r\n    ctx.fillText(text, (canvas.width - txtWidth) * 0.5, 40);\r\n    return canvas;\r\n}\r\nfunction drawPosMarker(radius, lineWidth, arrowHeight, color, txtColor, text) {\r\n    let canvas = document.createElement( 'canvas' );\r\n    let ctx = canvas.getContext( '2d' );\r\n    canvas.height = (radius + lineWidth) * 4;\r\n    canvas.width = (radius + lineWidth) * 4;\r\n    let hw = canvas.width / 2;\r\n    let g = radius + lineWidth/2, h = arrowHeight;\r\n    let vOffset = g + h;\r\n    let f = Math.sqrt(h*h + 2*h*g);\r\n    let e = f * g / (h + g);\r\n    let d = Math.sqrt(g*g - e*e);\r\n    e /= 1.5;\r\n    let p0 = {x: hw, y: hw + g + h - vOffset};\r\n    let p1 = {x: hw + e, y: hw + d - vOffset}, p2 = {x: hw - e, y: hw + d - vOffset};\r\n    ctx.beginPath();\r\n    ctx.moveTo(p0.x, p0.y);\r\n    ctx.lineTo(p1.x, p1.y);\r\n    ctx.lineTo(p2.x, p2.y);\r\n    ctx.closePath();\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n\r\n    ctx.beginPath();\r\n    // ctx.fillStyle = color;\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = lineWidth;\r\n    ctx.arc(canvas.width/2, canvas.height/2 - vOffset, radius, Math.PI*2, false);\r\n    // ctx.fill();\r\n    ctx.stroke();\r\n    if (text) {\r\n        let textColor = txtColor || \"#d25b21\";\r\n        let size = computeFontSize(text, \"50px\", \"Times New Roman\");\r\n        ctx.font = \"50px Times New Roman\";\r\n        ctx.fillStyle = textColor;\r\n        ctx.fillText(text, hw - size.width/2, hw + size.height/3 - vOffset);\r\n        // ctx.lineWidth = 1;\r\n        // ctx.strokeStyle = \"#d25b21\";\r\n        // ctx.strokeText(text, hw, hw);\r\n    }\r\n    return canvas;\r\n}\r\n\r\nfunction convertToSDF(canvas) {\r\n    let ctx = canvas.getContext(\"2d\");\r\n    let cw = canvas.width, ch = canvas.height;\r\n    let sdfValues = calcSDF(canvas, {\r\n        cutoff: 0.25,\r\n        radius: 8.0,\r\n    });\r\n\r\n    let imgData = ctx.getImageData(0, 0, cw, ch);\r\n    for (let i = 0; i < cw; i++) {\r\n        for (let j = 0; j < ch; j++) {\r\n            let baseIndex = j * cw + i;\r\n            let alpha = sdfValues[baseIndex] * 255;\r\n            let imageIndex = baseIndex * 4;\r\n            imgData.data[imageIndex + 0] = alpha;\r\n            imgData.data[imageIndex + 1] = alpha;\r\n            imgData.data[imageIndex + 2] = alpha;\r\n            imgData.data[imageIndex + 3] = alpha;\r\n        }\r\n    }\r\n    ctx.putImageData(imgData, 0, 0);\r\n    return canvas;\r\n}\r\n\r\nfunction getPowerOf2(num) {\r\n    let target = 1;\r\n    while (num > 2.0) {\r\n        target++;\r\n        num = num / 2;\r\n    }\r\n    return Math.pow(2, target);\r\n}\r\n//根据文字生产canvas, textOption: {size: 40, textColor: '#000', outlineColor: '#fff'}\r\nexport function generateTextCanvas(text, textOption) {\r\n    let option = textOption || {};\r\n    let canvas = document.createElement( 'canvas' );\r\n    let context = canvas.getContext( '2d' );\r\n    let size = option.size || 40;\r\n    let fontStr = 'normal 400 ' + size + 'px Microsoft YaHei';\r\n    context.font = fontStr;\r\n    let strLst = text.split('\\n');\r\n    let maxWdith = -Infinity;\r\n    for (let str of strLst) {\r\n        let measured = context.measureText(str);\r\n        if (maxWdith < measured.width) {\r\n            maxWdith = measured.width;\r\n        }\r\n    }\r\n    canvas.width = maxWdith + 20;      //根据文字内容获取宽度\r\n    let lineHeight = size * 1.5;  // fontsize * 1.5\r\n    canvas.height = lineHeight * strLst.length;\r\n    // let obj = computeFontSize(text, '40px', 'Microsoft YaHei');\r\n    // console.log(\"generateCanvas, \", obj);\r\n    let offset = 1.8 * size / 40;\r\n    strLst.forEach((str, index) => {\r\n        context.beginPath();\r\n        let x = 10, y = size * (1 + index);\r\n        context.font = fontStr;\r\n        if (Config.code.textOutline) {\r\n            context.fillStyle = option.outlineColor || \"#fff\";\r\n            context.fillText(str, x-offset, y+offset);\r\n            context.fillText(str, x+offset, y+offset);\r\n            context.fillText(str, x+offset, y-offset);\r\n            context.fillText(str, x-offset, y-offset);\r\n        }\r\n        context.fillStyle = option.textColor || \"#000\";\r\n        context.fillText(str, x, y);\r\n        context.fill();\r\n    });\r\n\r\n    // return convertToSDF(canvas);\r\n    return canvas;\r\n}\r\n\r\n//lineWidth, color are optional\r\nexport function generateSpriteBox(width, height, lineWidth, strokeColor) {\r\n    let canvas = document.createElement('canvas');\r\n    canvas.width = width, canvas.height = height;\r\n    let context = canvas.getContext( '2d' );\r\n    context.lineWidth = lineWidth;\r\n    context.strokeStyle = strokeColor;\r\n    context.rect(lineWidth/2,lineWidth/2, width - lineWidth, height - lineWidth);\r\n    context.stroke();\r\n    let sprite = makeCanvasSprite(canvas);\r\n    sprite.material.depthWrite = false;\r\n    sprite.material.depthTest = false;\r\n    return sprite;\r\n}\r\n\r\n// export function generateCanvas(text) {\r\n//     let canvas = document.createElement('canvas')\r\n//     let context = canvas.getContext( '2d' );\r\n//     let size = browser.runOnMobile() ? 24 : 18;\r\n//     context.font = size + 'px Microsoft YaHei';\r\n//     let strLst = text.split('\\n');\r\n//     let maxWdith = -Infinity;\r\n//     for (let str of strLst) {\r\n//         let measured = context.measureText(str);\r\n//         if (maxWdith < measured.width) {\r\n//             maxWdith = measured.width;\r\n//         }\r\n//     }\r\n//     let rect = {width: 0, height: 0, x: 0, y: 0}\r\n//     rect.width = maxWdith+20;      //根据文字内容获取宽度\r\n//     let lineHeight = size * 1.4;  // fontsize * 1.5\r\n//     rect.height = lineHeight * strLst.length;\r\n//     let max = rect.width > rect.height ? rect.width : rect.height;\r\n//     let max2 = getPowerOf2(max);\r\n//     rect.x = (max2 - rect.width)/2;\r\n//     rect.y = (max2 - rect.height)/2;\r\n//     canvas.width = canvas.height = max2;\r\n//\r\n//     if (Config.code.textOutline) {\r\n//         context.fillStyle = \"#000\";\r\n//         context.fillRect(0, 0, max2, max2);\r\n//     }\r\n//     context.font = size + 'px Microsoft YaHei';\r\n//     if (Config.code.textOutline) {\r\n//         context.fillStyle = \"#fff\";\r\n//     } else {\r\n//         context.fillStyle = \"#000\";\r\n//     }\r\n//     strLst.forEach((str, index) => {\r\n//         context.beginPath();\r\n//         context.fillText(str, 10 + rect.x, size * (1 + index) + rect.y);\r\n//         context.fill();\r\n//     });\r\n//     canvas.rectData = rect;\r\n//     canvas.rectData.size = max2;\r\n//\r\n//     if (Config.code.textOutline) {\r\n//         return convertToSDF(canvas);\r\n//     }\r\n//     return canvas;\r\n// }\r\n\r\nfunction makeMobileCanvasSprite(canvas) {\r\n    let sprite = makeCanvasSprite(canvas);\r\n    sprite.material.depthWrite = false;\r\n    sprite.material.depthTest = false;\r\n    let runOnMobile = browser.runOnMobile();\r\n    if (runOnMobile) {\r\n        sprite.scale.set(canvas.width/(window.innerWidth*3), canvas.height/(window.innerWidth*3), 1.0);\r\n    }\r\n    return sprite;\r\n}\r\n\r\nexport function makeOutlineSprite(canvas) {\r\n    let texture = new Texture(canvas);\r\n    texture.minFilter = LinearFilter;\r\n    texture.needsUpdate = true;\r\n    let uniforms = { 'opacity': {value: 1}, \"center\": {value: new Vector2(0.5, 0.5)},\r\n        \"map\": {value:texture}, \"outline_color\": {value: new Color('#fff')}, \"u_gamma\": {value: 0.05}\r\n        , \"outline_width\": {value: 0.55}, \"fill_color\": {value: new Color('#000')}  };\r\n\r\n    let shaderMaterial = new ShaderMaterial( {\r\n        uniforms: uniforms,\r\n        vertexShader: sdf_vertex,\r\n        fragmentShader: sdf_fragment,\r\n        side: DoubleSide\r\n    } );\r\n    shaderMaterial.transparent = true;\r\n    // 影响 three/src/renderers/webgl/WebGLProgram.js 组合完整shader代码\r\n    //'#extension GL_OES_standard_derivatives : enable', 否则fwidth函数 不可用\r\n    shaderMaterial.extensions.derivatives = true;\r\n    shaderMaterial.map = texture;\r\n\r\n    let sprite = new TextSprite(shaderMaterial, canvas.rectData);\r\n    let scalar = canvas.rectData.size/window.innerHeight * 1.6;\r\n    sprite.scale.set(scalar, scalar, 1.0);\r\n    return sprite;\r\n}\r\n//根据canvas图形制作sprite\r\nexport function makeCanvasSprite(canvas) {\r\n    let texture = new Texture(canvas);\r\n    texture.needsUpdate = true;\r\n    let spriteMaterial = new SpriteMaterial({map : texture, sizeAttenuation: false});\r\n    let sprite = new Sprite(spriteMaterial);\r\n    sprite.center = new Vector2(0.5, 0.5);\r\n    let poi = {w: canvas.width, h: canvas.height};\r\n    if (browser.runOnMobile() ) {\r\n        sprite.scale.set(poi.w/(window.innerWidth*2), poi.h/(window.innerWidth*2), 1.0);\r\n    } else {\r\n        sprite.scale.set(poi.w/window.innerWidth, poi.h/window.innerWidth, 1.0);\r\n    }\r\n    return sprite;\r\n}\r\n\r\nexport function makeCanvasTextSprite(canvas) {\r\n    let texture = new Texture(canvas);\r\n    texture.minFilter = LinearFilter;\r\n    texture.needsUpdate = true;\r\n    let spriteMaterial = new SpriteMaterial({map : texture, sizeAttenuation: false});\r\n    let sprite = new Sprite(spriteMaterial);\r\n    sprite.center = new Vector2(0.5, 0.5);\r\n    let poi = {w: canvas.width, h: canvas.height};\r\n    sprite.scale.set(poi.w/(window.innerHeight*1.8), poi.h/(window.innerHeight*1.8), 1.0);\r\n    sprite.material.depthWrite = false;\r\n    sprite.material.depthTest = false;\r\n    sprite.userData.poi = poi;\r\n    return sprite;\r\n}\r\n\r\nexport function getTrackPosMarker(text) {\r\n    let canvas = drawTrackPosMarker(text);\r\n    let sprite = makeMobileCanvasSprite(canvas);\r\n    return sprite;\r\n}\r\nexport function getPositionMarker(text, color, txtColor) {\r\n    let markDefaultColor = \"#35a610\";\r\n    color = color || markDefaultColor;\r\n    let canvas = drawPosMarker(45, 21, 21, color, txtColor, text);\r\n    let sprite = makeMobileCanvasSprite(canvas);\r\n    return sprite;\r\n}\r\n\r\n//  p0 ---------- p3\r\n//  |             |\r\n//  |             |\r\n//  p1 ---------- p2\r\nexport function isRectangle(vertices) {\r\n    if (vertices.length !== 4)\r\n        return false;\r\n    let p0 = vertices[0], p1 = vertices[1], p2 = vertices[2], p3 = vertices[3];\r\n    if (p0.x == p1.x && p2.x == p3.x && p0.y == p3.y && p1.y == p2.y)\r\n        return true;\r\n    return false;\r\n}\r\nexport function createGuideLine(vertices, isHorizontal, scalarCamera) {\r\n    scalarCamera = scalarCamera || 1;\r\n    let min = Infinity, max = -Infinity, minVector, maxVector;\r\n    vertices.forEach(vector => {\r\n        if (vector) {\r\n            if (isHorizontal) {\r\n                if (min > vector.x) {\r\n                    min = vector.x, minVector = vector;\r\n                }\r\n                if (max < vector.x) {\r\n                    max = vector.x, maxVector = vector;\r\n                }\r\n            } else {\r\n                if (min > vector.y) {\r\n                    min = vector.y, minVector = vector;\r\n                }\r\n                if (max < vector.y) {\r\n                    max = vector.y, maxVector = vector;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    if (minVector == maxVector) {\r\n        return null;\r\n    }\r\n    let span = minVector.distanceTo(maxVector), scalar = 1 + Config.code.extraSpan/span * scalarCamera;\r\n    let minVector2 = maxVector.clone().lerp(minVector, scalar);\r\n    let maxVector2 = minVector.clone().lerp(maxVector, scalar);\r\n    let lGeometry = new BufferGeometry();\r\n    let lineMaterial = new LineDashedMaterial( { color: '#ff28c8', dashSize: 0.7, gapSize: 0.1 } );\r\n    lineMaterial.transparent = true;\r\n    let typedArr = flatten([minVector2, maxVector2]);\r\n    lGeometry.setAttribute(\"position\", new BufferAttribute(typedArr, 3));\r\n    let lineMesh= new Line(lGeometry, lineMaterial);\r\n    lineMesh.computeLineDistances();\r\n    lineMesh.name = \"guide line\";\r\n    lineMesh.userData.guideVal = isHorizontal ? minVector.y : minVector.x;\r\n    return lineMesh;\r\n}\r\n\r\nexport function logVectorArr(vLst) {\r\n    let str = '';\r\n    vLst.forEach(it => {\r\n        // str += it.x.toFixed(2) + \", \" + it.y.toFixed(2) + \", \" + it.z + \"; \";\r\n        str += \"Vector2(\" + it.x.toFixed(2) + \", \" + it.y.toFixed(2) + \"), \";\r\n    });\r\n    console.log(str);\r\n}\r\n\r\nexport let ShapeUtils = {\r\n\r\n    // calculate area of the contour polygon\r\n\r\n    area: function (contour) {\r\n\r\n        var n = contour.length;\r\n        var a = 0.0;\r\n\r\n        for (var p = n - 1, q = 0; q < n; p = q++) {\r\n\r\n            a += contour[p].x * contour[q].y - contour[q].x * contour[p].y;\r\n\r\n        }\r\n\r\n        return a * 0.5;\r\n\r\n    },\r\n\r\n    isClockWise: function (pts) {\r\n\r\n        return ShapeUtils.area(pts) < 0;\r\n\r\n    }\r\n};\r\n\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationResetItem.vue?vue&type=style&index=0&id=333464ed&scoped=true&lang=css&\""],"sourceRoot":""}